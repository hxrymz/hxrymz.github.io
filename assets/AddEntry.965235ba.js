import{k as G,d as K,T as H,t as M,G as R,r as A,g as d,b as a,j as l,a as c,O as w,u as o,p as U}from"./index.31b09617.js";/* empty css                */import{CloseModal as J}from"./DialogHRM.d8036a1f.js";/* empty css                  */const E=G();K();const Q=H(),V=M(),W=R(),b="new_entry_comprobante",ac=({data:s,confirm:v})=>{var P,S,y,g,C,L,O,I;const[N,h]=A.exports.useState(!1),[x,r]=A.exports.useState(0);A.exports.useEffect(()=>{N||(h(!0),r(d()))});const _=(e,t,n)=>{let i=a(b)||{};n?(i[n]||(i[n]={}),i[n][e]=t):i[e]=t,o(b,i),r(d())},f=async()=>{var F;let e=a(b);e.accountingEntryId=d();let t=a("accountListOnParam")&&w(a("accountListOnParam"));t&&t.map((q,Z)=>{let p=a("accountListOnParam")[q];p.type==="debit"?(e.debitAccount=p.account,e.debitSubAccount=p.subAccount):p.type==="credit"&&(e.creditAccount=p.account,e.creditSubAccount=p.subAccount)});let n={query:"addAccountingEntries",params:{businessId:(F=a("profileUser"))==null?void 0:F.businessId},form:e};await U(n)&&(o(b,{}),o("accountListOnParam",null),v&&v(),s!=null&&s.modalID&&J({id:s==null?void 0:s.modalID}))},T=(e,t)=>{o("account2Param",{account:e,subAccount:t}),r(d())},j=()=>{o("account2Param",null),r(d())},k=(e,t,n)=>{let i={...a("account2Param")};n?(i[n]||(i[n]={}),i[n][e]=t):i[e]=t,o("account2Param",i),r(d())},z=()=>{let e={...a("account2Param")};e.type||(e.type="debit");let t={...a("accountListOnParam")},n=e.account+"_"+e.subAccount;t[n]=e,o("accountListOnParam",t),o("account2Param",null),r(d())},B=e=>{let t={...a("accountListOnParam")};delete t[e],o("accountListOnParam",t),r(d())};let m=(S=a("account_ids"))==null?void 0:S[(P=a("account2Param"))==null?void 0:P.account],u=(g=a("sub_account_ids"))==null?void 0:g[(y=a("account2Param"))==null?void 0:y.subAccount];return l("div",{style:{maxHeight:"80vh",width:"560px",overflow:"auto",background:"#fff",borderRadius:13,padding:"10px 19px"},children:[l("div",{className:"_dsplFlx ",children:[c("p",{className:"form_title",children:"Agregar Comprobante Parametrizado"}),c("div",{className:"flexSpace"})]}),c(Q,{init:(C=a(b))==null?void 0:C.name,label:"Nombre",width:520,updChanges:e=>_("name",e)}),c("div",{className:" ",style:{paddingTop:"18px"},children:(L=a("account2Param"))!=null&&L.account?l("div",{className:"_dsplFlx ",style:{margin:"18px 0"},children:[l("div",{className:" acc_dtls",children:[l("div",{className:"_dsplFlx",children:[c("div",{className:"code",style:{color:"#646cff"},children:m==null?void 0:m.code}),c("div",{className:"name",children:m==null?void 0:m.name})]}),c("div",{className:"flexSpace"}),u?l("div",{className:"_dsplFlx",style:{margin:"10px 0 0 18px"},children:[c("div",{className:"code",children:u==null?void 0:u.subAccount}),c("div",{className:"name",children:u==null?void 0:u.subAccountName})]}):null]}),c("div",{className:"flexSpace"}),c("div",{className:"icon",onClick:j,children:c(E,{name:"outline_edit",color:"#1a73e8"})})]}):c(W,{placeholder:"buscar una cuenta",width:420,handleClick:T})}),l("div",{className:"_dsplFlx ",style:{padding:"18px"},children:[c("div",{className:"flexSpace"}),c(V,{data:[{label:"Deudoras",id:"debit"},{label:"Acredoras",id:"credit"}],active:((O=a("account2Param"))==null?void 0:O.type)||"debit",updSelect:e=>k("type",e)}),c("div",{className:"flexSpace"}),c("button",{onClick:z,children:"Agregar"})]}),l("div",{className:"_dsplFlx hdr_bar purple",style:{margin:"18px 0"},children:[c("div",{className:"tr_bar",children:"Cuenta"}),c("div",{className:"tr_bar",children:"Sub Cuenta"}),c("div",{className:"tr_bar",children:"Tipo de cuenta"})]}),a("accountListOnParam")&&((I=w(a("accountListOnParam")))==null?void 0:I.map((e,t)=>c(X,{idKey:e,data:a("accountListOnParam")[e],deleteItem:B},e))),l("div",{className:"_dsplFlx ",children:[c("div",{className:"flexSpace"}),c("div",{className:"card",children:c("button",{onClick:f,children:"Guardar"})})]})]})},X=({data:s,deleteItem:v,idKey:N})=>{var _,f;let h=(_=a("account_ids"))==null?void 0:_[s==null?void 0:s.account],x=(f=a("sub_account_ids"))==null?void 0:f[s==null?void 0:s.subAccount];const r=()=>{v(N)};return l("div",{className:"_dsplFlx hdr_bar",children:[c("div",{className:"tr_bar",children:h==null?void 0:h.code}),c("div",{className:"tr_bar",children:x==null?void 0:x.subAccount}),c("div",{className:"tr_bar",children:s==null?void 0:s.type}),c("div",{className:"tr_bar"}),c("div",{className:"flexSpace"}),c("div",{className:"icon",onClick:r,children:c(E,{name:"outline_delete",color:"#c62828"})})]})};export{ac as default};
