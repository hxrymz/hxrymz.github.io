import{I as j,l as z,_ as K,Q as P,B as V,V as H,r as x,j as e,a as l,k as n,p as F,K as m,P as W,o as N,J as k,G as T,O as q,Z as G,x as J}from"./index.99da3eb9.js";import{a as U,g as D,c as M,b as L}from"./index.8bfbd684.js";const O=j(),X=z(()=>K(()=>import("./PickAccount.85688d73.js"),["assets/PickAccount.85688d73.js","assets/index.99da3eb9.js","assets/index.f65525d5.css"])),Q=P(),R=V(),w=H(),c="add_entries_manually",ie=({refreshlist:o,close:p,item:h})=>{var v,y;const[g,r]=x.exports.useState(!1),[u,b]=x.exports.useState([]),[$,A]=x.exports.useState(0),_=(a,i)=>{let t=n(c)||{};t[a]=i,N(c,t),g&&r(!1),A(k())},S=()=>{let a=n(c)||{},i=W(n("list_entries")||{});i.length>0&&a.document&&M(n("list_entries"))?(i==null||i.map(async t=>{var B;let s={...a};s.operationId=k();let d=(B=n("list_entries"))==null?void 0:B[t];d.creditSubAccount&&(s.creditSubAccount=d.creditSubAccount),d.debitSubAccount&&(s.debitSubAccount=d.debitSubAccount),d.creditAccount&&(s.creditAccount=d.creditAccount),d.debitAccount&&(s.debitAccount=d.debitAccount),d.amount&&(s.amount=d.amount*1),s!=null&&s.date||(s.date=Date.now()),delete s.isDebt,delete s.account;let I={query:"addOperationsHRG",params:{businessId:n("businessId")},form:s};console.log(I);const E=await T(J(),I);E&&E.data&&N(c,{})}),o()):a.document?i.length===0?(b(["debe registrar cuentas para crear el comprobante"]),r(!0)):M(n("list_entries"))||(b(["el balance entre la suma de los debitos menos los creditos debe ser 0"]),r(!0)):(b(["documento es requerido"]),r(!0))},f=a=>{_("date",new Date(a).getTime())},C=()=>{var i;let a={};a.zIndex=450,a.props={minHeight:"1vh",overlay:!0,zIndex:99999},a.content=e(Q,{valueUpdate:f,initValue:(i=n(c))==null?void 0:i.date}),q(a)};return x.exports.useEffect(()=>(_("isDebt",!0),()=>{}),[h]),e("div",{className:"pym81b sendBx upd_alert_bx",style:{background:"var(--color_backgrond_input)",maxWidth:"860px",margin:"10px 0 30px"},children:l("div",{className:"sendBtn  _mrgSwith  margin_form hybrid_login_form ",style:{minHeight:120,padding:"20px 68px 40px",minWidth:720,marginBottom:"1px"},children:[e("div",{className:"X_close ",style:{marginLeft:1,textAlign:"right"},onClick:p,children:e("div",{children:"X"})}),e("div",{className:"login_title ",style:{marginLeft:1,textAlign:"left"},children:e("div",{children:"Asiento Manual"})}),e("div",{className:"login_title ",style:{marginLeft:1,textAlign:"right"},children:e("div",{children:h==null?void 0:h.name})}),l("div",{className:"_dsplFlx  ",children:[e("div",{style:{margin:"0px 0 20px ",maxWidth:"50%"},children:l("div",{className:"cuenta_asiento _dsplFlx",onClick:C,children:[e("div",{style:{padding:"2px 7px 2px 0"},children:e(O,{name:"calendar",size:24,color:"#b00000"})}),e("div",{children:(v=n(c))!=null&&v.date?F((y=n(c))==null?void 0:y.date):F(Date.now())})]})}),e("div",{className:"flexSpace"}),e("div",{style:{maxWidth:"50%"},children:e(w,{validationMsg:"debe contener entre 6 y 50 caracteres.",validation:{reqired:!0,minLength:6,maxLength:50},type:"text",placeholder:"Documento",updChange:a=>_("document",a)})})]}),e(w,{validationMsg:"debe contener menos de 200 caracteres.",validation:{reqired:!0,maxLength:200},type:"text",placeholder:"Descripcion",updChange:a=>_("description",a)}),e(Z,{setObs:A,updFrm:_}),e("button",{className:"btn login_button btn_submit btn_small",type:"submit",autocomplete:"off",tabindex:"0","data-uia":"login-submit-button",onClick:S,children:"Guardar"}),g&&l("div",{"data-uia":"error_message_container",className:"ui_message_container ui_message_error",children:[e("div",{className:"ui_message_icon"}),e("div",{className:"multi_msg",children:u.map(a=>e("div",{"data-uia":"text",className:"ui_message_contents",children:a}))})]})]})})};function ae(o,p,h){let g=JSON.parse(h),r=null;return o&&o.map((u,b)=>{p[u]!==g[u]&&(r||(r={}),r[u]=p[u])}),r}const Z=({updFrm:o,setObs:p,item:h})=>{var S,f,C,v,y,a;const[g,r]=x.exports.useState(!1),[u,b]=x.exports.useState([]),$=()=>{let i=n(c)||{},t={...i};if(t.account&&t.amount>0){t.isDebt?(t.debitSubAccount=t.account,t.debitAccount=L(t.account)):(t.creditSubAccount=t.account,t.creditAccount=L(t.account));let s=n("list_entries")||{};s[t.account]=t,N("list_entries",s),i.isDebt=!0,i.account="",i.amount="",N(c,i),p(k())}else b(["Su registro contiene errores","escoja una cuenta y el importe debe ser mayor a 0"]),r(!0),G({text:"error en el registro a guardar"})},A=i=>{let t=n("list_entries")||{};delete t[i],N("list_entries",t),p(k())},_=i=>{let t={};t.zIndex=450,t.props={zIndex:999,minHeight:"1vh",overlay:!0},t.content=e(X,{updFrm:o,field:i}),q(t)};return l("div",{className:"box_border",children:[l("div",{className:"_dsplFlx  ",children:[l("div",{className:"in_stock_switch _dsplFlx",style:{marginTop:10},children:[e("span",{className:"sw_rgh_span",style:{margin:"2px 5px 0 0"},children:"Credito"}),e("div",{className:"in_stock_switch_btn",children:e(R,{initvalue:(S=n(c))==null?void 0:S.isDebt,keyCode:77,updChange:i=>o("isDebt",i)})}),e("span",{className:"sw_rgh_span",style:{margin:"2px 0 0 5px"},children:"Debito"})]}),e("div",{style:{minWidth:"70%"},children:e("div",{className:" year_container  ",style:{maxWidth:"fit-content",marginBottom:25},children:e("div",{className:"cuenta_asiento",onClick:()=>_("account"),children:(f=n(c))!=null&&f.account?U((C=n(c))==null?void 0:C.account):"escoja una cuenta"})})})]}),l("div",{className:"_dsplFlx  ",children:[e("div",{style:{maxWidth:"40%"},children:((v=n(c))==null?void 0:v.account)&&e(w,{init:(y=n(c))==null?void 0:y.amount,validationMsg:"debe ser mayor que 0.",validation:{reqired:!0,minValue:.01,number:!0},type:"number",placeholder:"Importe",updChange:i=>o("amount",i)})}),e("div",{className:"flexSpace"}),e("div",{style:{maxWidth:"30%"},children:e("button",{className:"btn login_button btn_submit btn_small",style:{margin:0},type:"submit",autocomplete:"off",tabindex:"0","data-uia":"login-submit-button",onClick:$,children:"Agregar"})})]}),g&&l("div",{"data-uia":"error_message_container",className:"ui_message_container ui_message_error",children:[e("div",{className:"ui_message_icon"}),e("div",{className:"multi_msg",children:u.map(i=>e("div",{"data-uia":"text",className:"ui_message_contents",children:i}))})]}),l("div",{className:"_dsplFlx cuenta_asiento",style:{margin:"20px 0 10px"},children:[e("div",{className:"",style:{width:m()?60:120,padding:7},children:"Cuenta"}),e("div",{className:"",style:{width:m()?60:120,padding:7},children:"Sub Cuenta"}),e("div",{className:"",style:{width:m()?60:120,padding:7,textAlign:"right"},children:"Debito"}),e("div",{className:"",style:{width:m()?60:120,padding:7,textAlign:"right"},children:"Credito"})]}),(a=W(n("list_entries")||{}))==null?void 0:a.map(i=>{var s;let t=(s=n("list_entries"))==null?void 0:s[i];return l("div",{className:"_dsplFlx ",children:[e("div",{className:"_asiento_item",style:{width:m()?60:120,padding:7},children:t.debitSubAccount?D(t.debitSubAccount):t.creditSubAccount?D(t.creditSubAccount):""}),e("div",{className:"_asiento_item",style:{width:m()?60:120,padding:7},children:t.debitSubAccount?D(t.debitSubAccount,!0):t.creditSubAccount?D(t.creditSubAccount,!0):""}),e("div",{className:"_asiento_item",style:{width:m()?60:120,textAlign:"right",padding:7},children:t.isDebt?`$${(t.amount*1).toFixed(2)}`:""}),e("div",{className:"_asiento_item",style:{width:m()?60:120,textAlign:"right",padding:7},children:t.isDebt?"":`$${(t.amount*1).toFixed(2)}`}),e("div",{className:"flexSpace"}),e("div",{className:"_dsplFlx delete_icon",onClick:()=>A(i),children:e(O,{name:"delete",size:24,color:"#b00000"})})]})})]})};export{ae as compareJson,ie as default};
