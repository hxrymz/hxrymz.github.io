import{I as O,l as T,_ as K,P,G as H,U,r as v,j as e,a as l,k as n,p as E,K as m,O as j,o as y,g as w,n as V,w as q,Z as G,t as X}from"./index.9c26ac31.js";import{a as J,g as k,c as L,b as W}from"./index.078719dc.js";const $=O(),R=T(()=>K(()=>import("./PickAccount.74bab227.js"),["assets/PickAccount.74bab227.js","assets/index.9c26ac31.js","assets/index.6ae0e3ca.css"])),Q=P(),Z=H(),I=U(),s="add_entries_manually",ae=({refreshlist:d,close:p,item:g})=>{var N,f;const[b,r]=v.exports.useState(!1),[u,x]=v.exports.useState([]),[F,A]=v.exports.useState(0),h=(a,i)=>{let t=n(s)||{};t[a]=i,y(s,t),b&&r(!1),A(w())},S=()=>{let a=n(s)||{},i=j(n("list_entries")||{});(i==null?void 0:i.length)>0&&a.document&&L(n("list_entries"))?i==null||i.map(async(t,_)=>{var B;let c={...a};c.operationId=w();let o=(B=n("list_entries"))==null?void 0:B[t];o.creditSubAccount&&(c.creditSubAccount=o.creditSubAccount),o.debitSubAccount&&(c.debitSubAccount=o.debitSubAccount),o.creditAccount&&(c.creditAccount=o.creditAccount),o.debitAccount&&(c.debitAccount=o.debitAccount),o.amount&&(c.amount=o.amount*1),c!=null&&c.date||(c.date=Date.now()),delete c.isDebt,delete c.account;let z={query:"addOperationsHRG",params:{businessId:n("businessId")},form:c};const M=await V(X(),z);M&&M.data&&_===(i==null?void 0:i.length)-1&&(y("list_entries",{}),y(s,{}),d())}):a.document?i.length===0?(x(["debe registrar cuentas para crear el comprobante"]),r(!0)):L(n("list_entries"))||(x(["el balance entre la suma de los debitos menos los creditos debe ser 0"]),r(!0)):(x(["documento es requerido"]),r(!0))},C=a=>{h("date",new Date(a).getTime())},D=()=>{var i;let a={};a.zIndex=450,a.props={minHeight:"1vh",overlay:!0,zIndex:99999},a.content=e(Q,{valueUpdate:C,initValue:(i=n(s))==null?void 0:i.date}),q(a)};return v.exports.useEffect(()=>(h("isDebt",!0),()=>{}),[g]),e("div",{className:"pym81b sendBx upd_alert_bx",style:{background:"var(--color_backgrond_input)",maxWidth:"860px",margin:"10px 0 30px"},children:l("div",{className:"sendBtn  _mrgSwith  margin_form hybrid_login_form ",style:{minHeight:120,padding:"20px 68px 40px",minWidth:720,marginBottom:"1px"},children:[e("div",{className:"X_close ",style:{marginLeft:1,textAlign:"right"},onClick:p,children:e($,{name:"Xclose",size:24,color:"#fff",tip:!0,tipMessage:"Cerrar",backgroundColorTooltip:"#080808"})}),e("div",{className:"login_title ",style:{marginLeft:1,textAlign:"left"},children:e("div",{children:"Asiento Manual"})}),e("div",{className:"login_title ",style:{marginLeft:1,textAlign:"right"},children:e("div",{children:g==null?void 0:g.name})}),l("div",{className:"_dsplFlx  ",children:[e("div",{style:{margin:"0px 0 20px ",maxWidth:"50%"},children:l("div",{className:"cuenta_asiento _dsplFlx",onClick:D,children:[e("div",{style:{padding:"2px 7px 2px 0"},children:e($,{name:"calendar",size:24,color:"#b00000",tip:!0,tipMessage:"Escojer fecha",backgroundColorTooltip:"#080808"})}),e("div",{children:(N=n(s))!=null&&N.date?E((f=n(s))==null?void 0:f.date):E(Date.now())})]})}),e("div",{className:"flexSpace"}),e("div",{style:{maxWidth:"50%"},children:e(I,{validationMsg:"debe contener entre 6 y 50 caracteres.",validation:{reqired:!0,minLength:6,maxLength:50},type:"text",field:"document",placeholder:"Documento",updChange:a=>h("document",a)})})]}),e(I,{validationMsg:"debe contener menos de 200 caracteres.",validation:{reqired:!0,maxLength:200},type:"text",placeholder:"Descripcion",field:"description",updChange:a=>h("description",a)}),e(Y,{setObs:A,updFrm:h}),e("button",{className:"btn login_button btn_submit btn_small",type:"submit",autocomplete:"off",tabindex:"0","data-uia":"login-submit-button",onClick:S,children:"Guardar"}),b&&l("div",{"data-uia":"error_message_container",className:"ui_message_container ui_message_error",children:[e("div",{className:"ui_message_icon"}),e("div",{className:"multi_msg",children:u.map(a=>e("div",{"data-uia":"text",className:"ui_message_contents",children:a}))})]})]})})};function ne(d,p,g){let b=JSON.parse(g),r=null;return d&&d.map((u,x)=>{p[u]!==b[u]&&(r||(r={}),r[u]=p[u])}),r}const Y=({updFrm:d,setObs:p,item:g})=>{var S,C,D,N,f,a;const[b,r]=v.exports.useState(!1),[u,x]=v.exports.useState([]),F=()=>{let i=n(s)||{},t={...i};if(t.account&&t.amount>0){t.isDebt?(t.debitSubAccount=t.account,t.debitAccount=W(t.account)):(t.creditSubAccount=t.account,t.creditAccount=W(t.account));let _=n("list_entries")||{};_[t.account]=t,y("list_entries",_),i.isDebt=!0,i.account="",i.amount="",y(s,i),p(w())}else x(["Su registro contiene errores","escoja una cuenta y el importe debe ser mayor a 0"]),r(!0),G({text:"error en el registro a guardar"})},A=i=>{let t=n("list_entries")||{};delete t[i],y("list_entries",t),p(w())},h=i=>{let t={};t.zIndex=450,t.props={zIndex:999,minHeight:"1vh",overlay:!0},t.content=e(R,{updFrm:d,field:i}),q(t)};return l("div",{className:"box_border",children:[l("div",{className:"_dsplFlx  ",children:[l("div",{className:"in_stock_switch _dsplFlx",style:{marginTop:10},children:[e("span",{className:"sw_rgh_span",style:{margin:"2px 5px 0 0"},children:"Credito"}),e("div",{className:"in_stock_switch_btn",children:e(Z,{initvalue:(S=n(s))==null?void 0:S.isDebt,keyCode:77,updChange:i=>d("isDebt",i)})}),e("span",{className:"sw_rgh_span",style:{margin:"2px 0 0 5px"},children:"Debito"})]}),e("div",{style:{minWidth:"70%"},children:e("div",{className:" year_container  ",style:{maxWidth:"fit-content",marginBottom:25},children:e("div",{className:"cuenta_asiento",onClick:()=>h("account"),children:(C=n(s))!=null&&C.account?J((D=n(s))==null?void 0:D.account):"escoja una cuenta"})})})]}),l("div",{className:"_dsplFlx  ",children:[e("div",{style:{maxWidth:"40%"},children:((N=n(s))==null?void 0:N.account)&&e(I,{init:(f=n(s))==null?void 0:f.amount,validationMsg:"debe ser mayor que 0.",validation:{reqired:!0,minValue:.01,number:!0},type:"number",field:"amount",placeholder:"Importe",updChange:i=>d("amount",i)})}),e("div",{className:"flexSpace"}),e("div",{style:{maxWidth:"30%"},children:e("button",{className:"btn login_button btn_submit btn_small",style:{margin:0},type:"submit",autocomplete:"off",tabindex:"0","data-uia":"login-submit-button",onClick:F,children:"Agregar"})})]}),b&&l("div",{"data-uia":"error_message_container",className:"ui_message_container ui_message_error",children:[e("div",{className:"ui_message_icon"}),e("div",{className:"multi_msg",children:u.map(i=>e("div",{"data-uia":"text",className:"ui_message_contents",children:i}))})]}),l("div",{className:"_dsplFlx cuenta_asiento",style:{margin:"20px 0 10px"},children:[e("div",{className:"",style:{width:m()?60:120,padding:7},children:"Cuenta"}),e("div",{className:"",style:{width:m()?60:120,padding:7},children:"Sub Cuenta"}),e("div",{className:"",style:{width:m()?60:120,padding:7,textAlign:"right"},children:"Debito"}),e("div",{className:"",style:{width:m()?60:120,padding:7,textAlign:"right"},children:"Credito"})]}),(a=j(n("list_entries")||{}))==null?void 0:a.map(i=>{var _;let t=(_=n("list_entries"))==null?void 0:_[i];return l("div",{className:"_dsplFlx ",children:[e("div",{className:"_asiento_item",style:{width:m()?60:120,padding:7},children:t.debitSubAccount?k(t.debitSubAccount):t.creditSubAccount?k(t.creditSubAccount):""}),e("div",{className:"_asiento_item",style:{width:m()?60:120,padding:7},children:t.debitSubAccount?k(t.debitSubAccount,!0):t.creditSubAccount?k(t.creditSubAccount,!0):""}),e("div",{className:"_asiento_item",style:{width:m()?60:120,textAlign:"right",padding:7},children:t.isDebt?`$${(t.amount*1).toFixed(2)}`:""}),e("div",{className:"_asiento_item",style:{width:m()?60:120,textAlign:"right",padding:7},children:t.isDebt?"":`$${(t.amount*1).toFixed(2)}`}),e("div",{className:"flexSpace"}),e("div",{className:"_dsplFlx delete_icon",onClick:()=>A(i),children:e($,{name:"delete",size:24,color:"#b00000"})})]})})]})};export{ne as compareJson,ae as default};
