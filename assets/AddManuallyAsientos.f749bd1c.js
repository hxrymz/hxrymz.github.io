import{I as O,l as j,_ as P,P as T,B as H,U as K,r as x,j as e,a as l,k as s,p as M,J as m,L as q,o as N,g as k,G as U,O as z,Y as V,x as G}from"./index.0d0fbac8.js";import{a as J,g as D,c as L,b as W}from"./index.7379b6d7.js";const w=O(),X=j(()=>P(()=>import("./PickAccount.a8618d76.js"),["assets/PickAccount.a8618d76.js","assets/index.0d0fbac8.js","assets/index.5da7cfb4.css"])),R=T(),Q=H(),$=K(),c="add_entries_manually",ie=({refreshlist:d,close:p,item:g})=>{var v,y;const[_,r]=x.exports.useState(!1),[u,b]=x.exports.useState([]),[I,A]=x.exports.useState(0),h=(a,i)=>{let t=s(c)||{};t[a]=i,N(c,t),_&&r(!1),A(k())},f=()=>{let a=s(c)||{},i=q(s("list_entries")||{});i.length>0&&a.document&&L(s("list_entries"))?(i==null||i.map(async t=>{var F;let n={...a};n.operationId=k();let o=(F=s("list_entries"))==null?void 0:F[t];o.creditSubAccount&&(n.creditSubAccount=o.creditSubAccount),o.debitSubAccount&&(n.debitSubAccount=o.debitSubAccount),o.creditAccount&&(n.creditAccount=o.creditAccount),o.debitAccount&&(n.debitAccount=o.debitAccount),o.amount&&(n.amount=o.amount*1),n!=null&&n.date||(n.date=Date.now()),delete n.isDebt,delete n.account;let E={query:"addOperationsHRG",params:{businessId:s("businessId")},form:n};console.log(E);const B=await U(G(),E);B&&B.data&&N(c,{})}),d()):a.document?i.length===0?(b(["debe registrar cuentas para crear el comprobante"]),r(!0)):L(s("list_entries"))||(b(["el balance entre la suma de los debitos menos los creditos debe ser 0"]),r(!0)):(b(["documento es requerido"]),r(!0))},S=a=>{h("date",new Date(a).getTime())},C=()=>{var i;let a={};a.zIndex=450,a.props={minHeight:"1vh",overlay:!0,zIndex:99999},a.content=e(R,{valueUpdate:S,initValue:(i=s(c))==null?void 0:i.date}),z(a)};return x.exports.useEffect(()=>(h("isDebt",!0),()=>{}),[g]),e("div",{className:"pym81b sendBx upd_alert_bx",style:{background:"var(--color_backgrond_input)",maxWidth:"860px",margin:"10px 0 30px"},children:l("div",{className:"sendBtn  _mrgSwith  margin_form hybrid_login_form ",style:{minHeight:120,padding:"20px 68px 40px",minWidth:720,marginBottom:"1px"},children:[e("div",{className:"X_close ",style:{marginLeft:1,textAlign:"right"},onClick:p,children:e(w,{name:"Xclose",size:24,color:"#fff",tip:!0,tipMessage:"Cerrar",backgroundColorTooltip:"#080808"})}),e("div",{className:"login_title ",style:{marginLeft:1,textAlign:"left"},children:e("div",{children:"Asiento Manual"})}),e("div",{className:"login_title ",style:{marginLeft:1,textAlign:"right"},children:e("div",{children:g==null?void 0:g.name})}),l("div",{className:"_dsplFlx  ",children:[e("div",{style:{margin:"0px 0 20px ",maxWidth:"50%"},children:l("div",{className:"cuenta_asiento _dsplFlx",onClick:C,children:[e("div",{style:{padding:"2px 7px 2px 0"},children:e(w,{name:"calendar",size:24,color:"#b00000"})}),e("div",{children:(v=s(c))!=null&&v.date?M((y=s(c))==null?void 0:y.date):M(Date.now())})]})}),e("div",{className:"flexSpace"}),e("div",{style:{maxWidth:"50%"},children:e($,{validationMsg:"debe contener entre 6 y 50 caracteres.",validation:{reqired:!0,minLength:6,maxLength:50},type:"text",placeholder:"Documento",updChange:a=>h("document",a)})})]}),e($,{validationMsg:"debe contener menos de 200 caracteres.",validation:{reqired:!0,maxLength:200},type:"text",placeholder:"Descripcion",updChange:a=>h("description",a)}),e(Y,{setObs:A,updFrm:h}),e("button",{className:"btn login_button btn_submit btn_small",type:"submit",autocomplete:"off",tabindex:"0","data-uia":"login-submit-button",onClick:f,children:"Guardar"}),_&&l("div",{"data-uia":"error_message_container",className:"ui_message_container ui_message_error",children:[e("div",{className:"ui_message_icon"}),e("div",{className:"multi_msg",children:u.map(a=>e("div",{"data-uia":"text",className:"ui_message_contents",children:a}))})]})]})})};function ae(d,p,g){let _=JSON.parse(g),r=null;return d&&d.map((u,b)=>{p[u]!==_[u]&&(r||(r={}),r[u]=p[u])}),r}const Y=({updFrm:d,setObs:p,item:g})=>{var f,S,C,v,y,a;const[_,r]=x.exports.useState(!1),[u,b]=x.exports.useState([]),I=()=>{let i=s(c)||{},t={...i};if(t.account&&t.amount>0){t.isDebt?(t.debitSubAccount=t.account,t.debitAccount=W(t.account)):(t.creditSubAccount=t.account,t.creditAccount=W(t.account));let n=s("list_entries")||{};n[t.account]=t,N("list_entries",n),i.isDebt=!0,i.account="",i.amount="",N(c,i),p(k())}else b(["Su registro contiene errores","escoja una cuenta y el importe debe ser mayor a 0"]),r(!0),V({text:"error en el registro a guardar"})},A=i=>{let t=s("list_entries")||{};delete t[i],N("list_entries",t),p(k())},h=i=>{let t={};t.zIndex=450,t.props={zIndex:999,minHeight:"1vh",overlay:!0},t.content=e(X,{updFrm:d,field:i}),z(t)};return l("div",{className:"box_border",children:[l("div",{className:"_dsplFlx  ",children:[l("div",{className:"in_stock_switch _dsplFlx",style:{marginTop:10},children:[e("span",{className:"sw_rgh_span",style:{margin:"2px 5px 0 0"},children:"Credito"}),e("div",{className:"in_stock_switch_btn",children:e(Q,{initvalue:(f=s(c))==null?void 0:f.isDebt,keyCode:77,updChange:i=>d("isDebt",i)})}),e("span",{className:"sw_rgh_span",style:{margin:"2px 0 0 5px"},children:"Debito"})]}),e("div",{style:{minWidth:"70%"},children:e("div",{className:" year_container  ",style:{maxWidth:"fit-content",marginBottom:25},children:e("div",{className:"cuenta_asiento",onClick:()=>h("account"),children:(S=s(c))!=null&&S.account?J((C=s(c))==null?void 0:C.account):"escoja una cuenta"})})})]}),l("div",{className:"_dsplFlx  ",children:[e("div",{style:{maxWidth:"40%"},children:((v=s(c))==null?void 0:v.account)&&e($,{init:(y=s(c))==null?void 0:y.amount,validationMsg:"debe ser mayor que 0.",validation:{reqired:!0,minValue:.01,number:!0},type:"number",placeholder:"Importe",updChange:i=>d("amount",i)})}),e("div",{className:"flexSpace"}),e("div",{style:{maxWidth:"30%"},children:e("button",{className:"btn login_button btn_submit btn_small",style:{margin:0},type:"submit",autocomplete:"off",tabindex:"0","data-uia":"login-submit-button",onClick:I,children:"Agregar"})})]}),_&&l("div",{"data-uia":"error_message_container",className:"ui_message_container ui_message_error",children:[e("div",{className:"ui_message_icon"}),e("div",{className:"multi_msg",children:u.map(i=>e("div",{"data-uia":"text",className:"ui_message_contents",children:i}))})]}),l("div",{className:"_dsplFlx cuenta_asiento",style:{margin:"20px 0 10px"},children:[e("div",{className:"",style:{width:m()?60:120,padding:7},children:"Cuenta"}),e("div",{className:"",style:{width:m()?60:120,padding:7},children:"Sub Cuenta"}),e("div",{className:"",style:{width:m()?60:120,padding:7,textAlign:"right"},children:"Debito"}),e("div",{className:"",style:{width:m()?60:120,padding:7,textAlign:"right"},children:"Credito"})]}),(a=q(s("list_entries")||{}))==null?void 0:a.map(i=>{var n;let t=(n=s("list_entries"))==null?void 0:n[i];return l("div",{className:"_dsplFlx ",children:[e("div",{className:"_asiento_item",style:{width:m()?60:120,padding:7},children:t.debitSubAccount?D(t.debitSubAccount):t.creditSubAccount?D(t.creditSubAccount):""}),e("div",{className:"_asiento_item",style:{width:m()?60:120,padding:7},children:t.debitSubAccount?D(t.debitSubAccount,!0):t.creditSubAccount?D(t.creditSubAccount,!0):""}),e("div",{className:"_asiento_item",style:{width:m()?60:120,textAlign:"right",padding:7},children:t.isDebt?`$${(t.amount*1).toFixed(2)}`:""}),e("div",{className:"_asiento_item",style:{width:m()?60:120,textAlign:"right",padding:7},children:t.isDebt?"":`$${(t.amount*1).toFixed(2)}`}),e("div",{className:"flexSpace"}),e("div",{className:"_dsplFlx delete_icon",onClick:()=>A(i),children:e(w,{name:"delete",size:24,color:"#b00000"})})]})})]})};export{ae as compareJson,ie as default};
