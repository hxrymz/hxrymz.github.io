import{l as f,_ as y,r as p,h as c,a as m,j as r,e as h,Z as g,k as v,L as w,Q as D,D as _,p as M}from"./index.5d7f8be5.js";const A=f(()=>y(()=>import("./HRpopUp.5a2ab6d9.js"),["assets/HRpopUp.5a2ab6d9.js","assets/index.5d7f8be5.js","assets/index.95310fc6.css"])),S=f(()=>y(()=>import("./GraphHRm.7f3e9833.js"),["assets/GraphHRm.7f3e9833.js","assets/index.5d7f8be5.js","assets/index.95310fc6.css"])),j=a=>{const[e,i]=p.exports.useState(0),u=async t=>{let o={query:"getAnalitics",params:{dateMonth:t}};const n=await v(M(),o);if(n&&n.data){c("AnalitycsData",n.data);let d=T(n.data.titles);c("resume_data",{grD:d}),i(w())}};p.exports.useEffect(()=>{setTimeout(()=>{window.scrollTo(0,0);let t=new Date;u(t.getMonth()+t.getFullYear()*12),c("month_filter",t.getMonth()),c("year_filter",t.getFullYear())},170)},[a.view]);const l=t=>{if(t!==h("month_filter")){c("month_filter",t);let o=new Date;u(t+o.getFullYear()*12)}};return m("div",{className:"",children:[m("div",{className:" _dsplFlx spaceAround  ",children:[r(A,{data:x(),value:h("month_filter"),updValue:l,placeholder:"Month"}),r("div",{className:" year_container  "})]}),r("div",{className:"login_title ",children:r("div",{children:"Vistas por dia"})}),r("div",{className:"graph_card",children:r("div",{id:"_graph_container",children:r(S,{})})})]})},x=()=>{function a(e,i){return{id:i,lbl:e}}return g.map(a)},T=a=>{let e={};e.days={},e.views||(e.users=0);let i=D(new Date().getFullYear(),new Date().getMonth()+1);return Array.from(Array(i).keys()).map(l=>{let t=l*1+1;e.days[t]=0}),_(a).map(l=>{let t=_(a[l]["*"]);e.views+=t.length,t.map(o=>{let s=a[l]["*"][o],d=new Date(s.timeStamp*1).getDate();e.days[d]||(e.days[d]=0),e.title||(e.title=s.title),e.users||(e.users={}),e.users[s.username]||(e.users[s.username]={}),e.users[s.username][s.timeStamp]=1,e.days[d]+=1})}),e};export{j as default};
