import{I as L,A as z,B as $,S as M,l as B,_ as E,r as f,a as c,j as e,k as i,E as D,G as I,o as d,g as F,H as O,O as C,x as S,C as U}from"./index.30ad9607.js";const T=L(),P=z(),H=$(),V=M(),j=B(()=>E(()=>import("./AddAsientosContables.b31c7cdf.js"),["assets/AddAsientosContables.b31c7cdf.js","assets/index.30ad9607.js","assets/index.5eb4ab6f.css","assets/index.20b44c24.js"])),q=B(()=>E(()=>import("./UpdateAsientosContables.51ddb3d8.js"),["assets/UpdateAsientosContables.51ddb3d8.js","assets/index.30ad9607.js","assets/index.5eb4ab6f.css","assets/index.20b44c24.js"])),Q=B(()=>E(()=>import("./AsientosRegistro.ea543db8.js"),["assets/AsientosRegistro.ea543db8.js","assets/index.30ad9607.js","assets/index.5eb4ab6f.css","assets/index.20b44c24.js"])),w="ctscont",G=({view:t})=>{var y,g;const[l,_]=f.exports.useState(""),[h,b]=f.exports.useState(""),p=async()=>{let n={query:"getAllAccountingEntries",params:{businessId:i("businessId")}};const o=await I(S(),n);o&&o.data&&(d("asientoslist",o.data),b(F()))},k=async()=>{let n={query:"getAllAccountsByUserId",params:{businessId:i("businessId")}};const o=await I(S(),n);o&&o.data&&d("cuentaslist",O(o.data,"accountId"));let x={query:"getAllSubAccounts",params:{businessId:i("businessId")}};const u=await I(S(),x);u&&u.data&&(d("sub_cuentas_list",u.data),d("sub_cuentas_dict",O(u.data,"sub_accountId")))};f.exports.useEffect(()=>()=>{},[]);const s=n=>{let r={};r.zIndex=450,r.props={item:n,minHeight:"700px",overlay:!0},r.content=e(j,{refreshlist:p}),C(r)},a=()=>D("asientosListFilter",[i("asientoslist"),l,i("showAll_asientos")],()=>{var x;let n="name";const r=m=>{var A,N;let u=(l==null?void 0:l.toLowerCase())&&((N=(A=m==null?void 0:m[n])==null?void 0:A.toLowerCase())==null?void 0:N.indexOf(l.toLowerCase()))>=0;if(i("showAll_asientos")||u)return m},o=(m,u)=>{let A=m[n],N=u[n];return A<N?-1:A>N?1:0};return(x=i("asientoslist"))==null?void 0:x.filter(r).sort(o)});f.exports.useEffect(()=>{setTimeout(()=>{window.scrollTo(0,0),k(),p()},170)},[t]);const v=n=>{d("showAll_asientos",n),b(F())};return c("div",{className:"",children:[e("div",{className:"login_title ",children:e("div",{children:"Asientos Parametrizados"})}),c("div",{className:"_dsplFlx ",children:[e("div",{className:"login_title ",children:e(P,{lbl:"Agregar Asiento",icon:"account",theme:"",updChanges:s})}),e("div",{className:"sendBtn _dsplFlx spaceAround ",style:{marginTop:8},children:c("div",{className:"in_stock_switch _dsplFlx",children:[e("div",{className:"in_stock_switch_btn",children:e(H,{initvalue:i("showAll_asientos"),keyCode:77,updChange:v})}),e("span",{className:"sw_rgh_span",children:"Mostrar Todas"})]})}),e("div",{className:"flexSpace"})]}),e("div",{className:" _search_MrgV  ",children:i("showAll_asientos")?null:e("div",{className:"years_card ",style:{marginLeft:"2vw"},children:e(V,{updChanges:_,placeholderCode:"buscar..."})})}),e("div",{className:"_dsplFlx  ",children:e("div",{className:"_dsplFlx cuenta_bx_details header",children:c("div",{className:"_dsplFlx ",children:[e("div",{className:"_header_item",style:{width:100},children:e("div",{})}),e("div",{className:"_header_item",style:{width:180},children:e("div",{children:"Nombre Asiento"})}),e("div",{className:"_header_item",style:{width:250},children:c("div",{children:["Debito"," "]})}),e("div",{className:"_header_item",style:{width:250},children:e("div",{children:"Credito"})})]})})}),e("div",{className:"asientoslist",children:((y=a())==null?void 0:y.length)>0&&((g=a())==null?void 0:g.map(n=>n&&e(R,{item:n,refreshlist:p})))})]})},R=({item:t,refreshlist:l})=>{const _=async(s,a)=>{},h=s=>D("getSubAccountByK_"+s,[i("sub_cuentas_dict"),s],()=>{var y,g;let a=(y=i("sub_cuentas_dict"))==null?void 0:y[s],v=(g=i("cuentaslist"))==null?void 0:g[a==null?void 0:a.accountId];return`${v==null?void 0:v.name}${a!=null&&a.subAccountName?" - "+(a==null?void 0:a.subAccountName):""}`});return e("div",{className:"_dsplFlx cuenta_details ",style:{},children:c("div",{className:"_dsplFlx cuenta_bx_details ",style:{},children:[c("div",{className:"_dsplFlx",style:{width:100},children:[e("div",{className:"_dsplFlx delete_icon launcicon showOnhover",style:{marginRight:17},onClick:()=>{d(w,t),d(w+"_backUp",JSON.stringify(t));let s={};s.zIndex=450,s.props={minHeight:"1vh",overlay:!0},s.content=e(Q,{refreshlist:l,item:t}),C(s)},children:e(T,{name:"send",size:24,color:"#fff",tip:!0,tipMessage:"Submayor",backgroundColorTooltip:"#060606"})}),e("div",{className:"_dsplFlx delete_icon showOnhover",onClick:()=>{let s={};s.zIndex=450,s.props={minHeight:"1vh",overlay:!0},s.content=e(J,{confirm:()=>l(),item:t}),C(s)},children:e(T,{name:"delete",size:24,color:"#b00000",tip:!0,tipMessage:"Borrar",backgroundColorTooltip:"#b00000"})})]}),c("div",{className:"_dsplFlx ",onClick:()=>{d(w,t),d(w+"_backUp",JSON.stringify(t));let s={};s.zIndex=450,s.props={item:t,minHeight:"1vh",overlay:!0},s.content=e(q,{updAsientos:_,refreshlist:l}),C(s)},children:[e("div",{className:"_asiento_item",style:{width:180},children:t.name}),e("div",{className:"_asiento_item",style:{width:250},children:h(t.debitAccount)}),e("div",{className:"_asiento_item",style:{width:250},children:h(t.creditAccount)})]})]})})},J=({data:t,confirm:l,item:_})=>{const{modalID:h}=t||{},b=async()=>{let p={query:"deleteAccountingEntries",params:{accountingEntryId:_.accountingEntryId,businessId:i("businessId")}};const s=await I(S(),p);s&&s.data&&(U({id:h}),l(_))};return c("div",{...h?{"dialog-key-id":h}:"",className:"pym81b sendBx upd_alert_bx",style:{background:"var(--color_backgrond_input)"},children:[e("div",{className:"login_title ",style:{margin:"1vw"},children:e("div",{children:`Borrar Asiento "${_.name}"`})}),e("div",{className:"delete_alert_t2 ",children:e("div",{children:"Una vez borrado no podras recuperarlo"})}),e("button",{className:"btn login_button btn_submit btn_small",type:"submit",autocomplete:"off",tabindex:"0","data-uia":"login-submit-button",onClick:b,children:"Borrar"})]})};export{G as default};
