import{I as L,A as z,B as $,S as M,l as B,_ as E,r as f,a as c,j as e,k as l,E as D,G as w,o as d,g as F,H as T,O as C,x as S,C as U}from"./index.0d0fbac8.js";const O=L(),P=z(),H=$(),V=M(),j=B(()=>E(()=>import("./AddAsientosContables.e8127d4d.js"),["assets/AddAsientosContables.e8127d4d.js","assets/index.0d0fbac8.js","assets/index.5da7cfb4.css","assets/index.7379b6d7.js"])),q=B(()=>E(()=>import("./UpdateAsientosContables.15d60f7c.js"),["assets/UpdateAsientosContables.15d60f7c.js","assets/index.0d0fbac8.js","assets/index.5da7cfb4.css","assets/index.7379b6d7.js"])),Q=B(()=>E(()=>import("./AsientosRegistro.81a1f6b4.js"),["assets/AsientosRegistro.81a1f6b4.js","assets/index.0d0fbac8.js","assets/index.5da7cfb4.css","assets/index.7379b6d7.js"])),I="ctscont",G=({view:t})=>{var g,y;const[i,_]=f.exports.useState(""),[h,b]=f.exports.useState(""),p=async()=>{let n={query:"getAllAccountingEntries",params:{businessId:l("businessId")}};const o=await w(S(),n);o&&o.data&&(d("asientoslist",o.data),b(F()))},k=async()=>{let n={query:"getAllAccountsByUserId",params:{businessId:l("businessId")}};const o=await w(S(),n);o&&o.data&&d("cuentaslist",T(o.data,"accountId"));let x={query:"getAllSubAccounts",params:{businessId:l("businessId")}};const u=await w(S(),x);u&&u.data&&(d("sub_cuentas_list",u.data),d("sub_cuentas_dict",T(u.data,"sub_accountId")))};f.exports.useEffect(()=>()=>{},[]);const s=n=>{let r={};r.zIndex=450,r.props={item:n,minHeight:"700px",overlay:!0},r.content=e(j,{refreshlist:p}),C(r)},a=()=>D("asientosListFilter",[l("asientoslist"),i,l("showAll_asientos")],()=>{var x;let n="name";const r=m=>{var A,N;let u=(i==null?void 0:i.toLowerCase())&&((N=(A=m==null?void 0:m[n])==null?void 0:A.toLowerCase())==null?void 0:N.indexOf(i.toLowerCase()))>=0;if(l("showAll_asientos")||u)return m},o=(m,u)=>{let A=m[n],N=u[n];return A<N?-1:A>N?1:0};return(x=l("asientoslist"))==null?void 0:x.filter(r).sort(o)});f.exports.useEffect(()=>{setTimeout(()=>{window.scrollTo(0,0),k(),p()},170)},[t]);const v=n=>{d("showAll_asientos",n),b(F())};return c("div",{className:"",children:[e("div",{className:"login_title ",children:e("div",{children:"Asientos Parametrizados"})}),c("div",{className:"_dsplFlx ",children:[e("div",{className:"login_title ",children:e(P,{lbl:"Agregar Asiento",icon:"account",theme:"",updChanges:s})}),e("div",{className:"sendBtn _dsplFlx spaceAround ",style:{marginTop:8},children:c("div",{className:"in_stock_switch _dsplFlx",children:[e("div",{className:"in_stock_switch_btn",children:e(H,{initvalue:l("showAll_asientos"),keyCode:77,updChange:v})}),e("span",{className:"sw_rgh_span",children:"Mostrar Todas"})]})}),e("div",{className:"flexSpace"})]}),e("div",{className:" _search_MrgV  ",children:l("showAll_asientos")?null:e("div",{className:"years_card ",style:{marginLeft:"2vw"},children:e(V,{updChanges:_,placeholderCode:"buscar..."})})}),e("div",{className:"_dsplFlx  ",children:e("div",{className:"_dsplFlx cuenta_bx_details header",children:c("div",{className:"_dsplFlx ",children:[e("div",{className:"_header_item",style:{width:100},children:e("div",{})}),e("div",{className:"_header_item",style:{width:180},children:e("div",{children:"Nombre Asiento"})}),e("div",{className:"_header_item",style:{width:250},children:c("div",{children:["Debito"," "]})}),e("div",{className:"_header_item",style:{width:250},children:e("div",{children:"Credito"})})]})})}),e("div",{className:"asientoslist",children:((g=a())==null?void 0:g.length)>0&&((y=a())==null?void 0:y.map(n=>n&&e(R,{item:n,refreshlist:p})))})]})},R=({item:t,refreshlist:i})=>{const _=async(s,a)=>{};console.log(t);const h=s=>D("getSubAccountByK_"+s,[l("sub_cuentas_dict"),s],()=>{var g,y;let a=(g=l("sub_cuentas_dict"))==null?void 0:g[s],v=(y=l("cuentaslist"))==null?void 0:y[a==null?void 0:a.accountId];return`${v==null?void 0:v.name}${a!=null&&a.subAccountName?" - "+(a==null?void 0:a.subAccountName):""}`});return e("div",{className:"_dsplFlx cuenta_details ",style:{},children:c("div",{className:"_dsplFlx cuenta_bx_details ",style:{},children:[c("div",{className:"_dsplFlx",style:{width:100},children:[e("div",{className:"_dsplFlx delete_icon launcicon",style:{marginRight:17},onClick:()=>{d(I,t),d(I+"_backUp",JSON.stringify(t));let s={};s.zIndex=450,s.props={minHeight:"1vh",overlay:!0},s.content=e(Q,{refreshlist:i,item:t}),C(s)},children:e(O,{name:"send",size:24,color:"#fff",tip:!0,tipMessage:"Submayor",backgroundColorTooltip:"#060606"})}),e("div",{className:"_dsplFlx delete_icon",onClick:()=>{let s={};s.zIndex=450,s.props={minHeight:"1vh",overlay:!0},s.content=e(J,{confirm:()=>i(),item:t}),C(s)},children:e(O,{name:"delete",size:24,color:"#b00000",tip:!0,tipMessage:"Borrar",backgroundColorTooltip:"#b00000"})})]}),c("div",{className:"_dsplFlx ",onClick:()=>{d(I,t),d(I+"_backUp",JSON.stringify(t));let s={};s.zIndex=450,s.props={item:t,minHeight:"1vh",overlay:!0},s.content=e(q,{updAsientos:_,refreshlist:i}),C(s)},children:[e("div",{className:"_asiento_item",style:{width:180},children:t.name}),e("div",{className:"_asiento_item",style:{width:250},children:h(t.debitAccount)}),e("div",{className:"_asiento_item",style:{width:250},children:h(t.creditAccount)})]})]})})},J=({data:t,confirm:i,item:_})=>{const{modalID:h}=t||{},b=async()=>{let p={query:"deleteAccountingEntries",params:{accountingEntryId:_.accountingEntryId,businessId:l("businessId")}};const s=await w(S(),p);s&&s.data&&(U({id:h}),i(_))};return c("div",{...h?{"dialog-key-id":h}:"",className:"pym81b sendBx upd_alert_bx",style:{background:"var(--color_backgrond_input)"},children:[e("div",{className:"login_title ",style:{margin:"1vw"},children:e("div",{children:`Borrar Asiento "${_.name}"`})}),e("div",{className:"delete_alert_t2 ",children:e("div",{children:"Una vez borrado no podras recuperarlo"})}),e("button",{className:"btn login_button btn_submit btn_small",type:"submit",autocomplete:"off",tabindex:"0","data-uia":"login-submit-button",onClick:b,children:"Borrar"})]})};export{G as default};
