import{l as h,_ as I,I as w,m as A,r as p,a as y,j as a,k as c,n as o,o as r,q as f,O as g,g as _,t as d}from"./index.9c26ac31.js";function L(){return h(()=>I(()=>import("./balance_sheet.2fbe171e.js"),["assets/balance_sheet.2fbe171e.js","assets/index.9c26ac31.js","assets/index.6ae0e3ca.css"]))}function T(){return h(()=>I(()=>import("./profit_loss.7ceeaa90.js"),["assets/profit_loss.7ceeaa90.js","assets/index.9c26ac31.js","assets/index.6ae0e3ca.css"]))}w();const N=A(),Q=L(),j=T(),U=E=>{const[m,B]=p.exports.useState(!1),[l,v]=p.exports.useState(0),[O,b]=p.exports.useState(""),x=async()=>{let t={query:"getAllAccountsByUserId",params:{businessId:c("businessId")}};const e=await o(d(),t);e&&e.data&&r("cuentaslist",f(e.data,"accountId"));let n={query:"getAllSubAccounts",params:{businessId:c("businessId")}};const s=await o(d(),n);s&&s.data&&(r("sub_cuentas_list",s.data),r("sub_cuentas_dict",f(s.data,"sub_accountId")))},C=async()=>{var n,i;let t={query:"getScanBalanceSheet",params:{businessId:c("businessId"),":type":"PLS"},queryString:"type = :type"};const e=await o(d(),t);if(e&&e.data){let s=(n=g(e.data||{}))==null?void 0:n[0];r("profit_lose_frm",(i=e.data)==null?void 0:i[s]),b(_())}},P=async()=>{var n,i;let t={query:"getScanBalanceSheet",params:{businessId:c("businessId"),":type":"GBS"},queryString:"type = :type"};const e=await o(d(),t);if(e&&e.data){let s=(n=g(e.data||{}))==null?void 0:n[0];r("balance_sheet_frm",(i=e.data)==null?void 0:i[s]),b(_())}},q=async()=>{let t={query:"calcBalanceSheetByPeriod",params:{businessId:c("businessId"),":type":"GBS"},queryString:"type = :type"};const e=await o(d(),t);e&&e.data&&(r("general_balance",e.data),b(_()),v(1))},S=async()=>{let t={query:"calcBalanceSheetByPeriod",params:{businessId:c("businessId"),":type":"PLS"},queryString:"type = :type"};const e=await o(d(),t);e&&e.data&&(r("profit_lose_result",e.data),q())};return p.exports.useEffect(()=>{m||(B(!0),x(),P(),C(),S())},[m]),y("div",{children:[a("div",{className:"login_title ",children:y("div",{className:"_dsplFlx ",children:[a("div",{children:"Balances"}),a("div",{className:"login_title ",children:a(N,{lbl:"Calcular Balances",icon:"account",theme:"",updChanges:S})})]})}),y("div",{className:"_dsplFlx spaceAround _flxWrp ",children:[a("div",{className:"formContainer ",style:{opacity:l===1?1:0,width:"720px",marginBottom:75,borderTop:"1px solid #bbbbbb",paddingTop:25},children:l===1&&a(Q,{})}),a("div",{className:"formContainer ",style:{opacity:l===1?1:0,width:"720px",marginBottom:75,borderTop:"1px solid #bbbbbb",paddingTop:25},children:l===1&&a(j,{})})]})]})};export{U as default};
