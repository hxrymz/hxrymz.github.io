import{l as k,_ as x,m as C,k as o,I as N,n as O,r as h,a as I,j as _,o as y,q as p,t as A,O as P,g as v,v as b}from"./index.5ee56321.js";function T(){return k(()=>x(()=>import("./balance_sheet.8eb983e7.js"),["assets/balance_sheet.8eb983e7.js","assets/index.5ee56321.js","assets/index.6ae0e3ca.css"]))}function j(){return k(()=>x(()=>import("./profit_loss.bca8c873.js"),["assets/profit_loss.bca8c873.js","assets/index.5ee56321.js","assets/index.6ae0e3ca.css"]))}const z=()=>C("accountList2pl",[o("sub_cuentas_list")],()=>{const c=e=>{var n;let s=(n=o("cuentaslist"))==null?void 0:n[e==null?void 0:e.accountId];if(console.log(s),s!=null&&s.isNominal){let g=e!=null&&e.subAccountName?e==null?void 0:e.sub_accountId:e==null?void 0:e.accountId,d=`${s==null?void 0:s.name}${e!=null&&e.subAccountName?" - "+(e==null?void 0:e.subAccountName):""}`;return{id:g,lbl:d}}return null},a=e=>e;return o("sub_cuentas_list").map(c).filter(a)}),m=(c,a)=>C("sumArrayKeys_"+c,[a,o("profit_lose_result")],()=>{var n;let e=0;const s=g=>{var d,S;(d=o("profit_lose_result"))!=null&&d[g]&&(e+=(S=o("profit_lose_result"))==null?void 0:S[g])};return a.map(s),(n=e==null?void 0:e.toFixed)==null?void 0:n.call(e,2)});function K(c,a,e){let s=null;return c&&c.map(n=>{(a==null?void 0:a[n])!==(e==null?void 0:e[n])&&(s||(s={}),s[n]=a[n])}),s}function U(c,a){let e=null;return c&&c.map(s=>{a!=null&&a[s]&&(e||(e={}),e[s]=a[s])}),e}N();const Q=O(),E=T(),D=j(),F=c=>{const[a,e]=h.exports.useState(!1),[s,n]=h.exports.useState(0),[g,d]=h.exports.useState(""),S=async()=>{let r={query:"getAllAccountsByUserId",params:{businessId:o("businessId")}};const t=await y(b(),r);t&&t.data&&p("cuentaslist",A(t.data,"accountId"));let l={query:"getAllSubAccounts",params:{businessId:o("businessId")}};const i=await y(b(),l);i&&i.data&&(p("sub_cuentas_list",i.data),p("sub_cuentas_dict",A(i.data,"sub_accountId")))},q=async()=>{var l,u;let r={query:"getScanBalanceSheet",params:{businessId:o("businessId"),":type":"PLS"},queryString:"type = :type"};const t=await y(b(),r);if(t&&t.data){let i=(l=P(t.data||{}))==null?void 0:l[0];p("profit_lose_frm",(u=t.data)==null?void 0:u[i]),d(v())}},w=async()=>{var l,u;let r={query:"getScanBalanceSheet",params:{businessId:o("businessId"),":type":"GBS"},queryString:"type = :type"};const t=await y(b(),r);if(t&&t.data){let i=(l=P(t.data||{}))==null?void 0:l[0];p("balance_sheet_frm",(u=t.data)==null?void 0:u[i]),d(v())}},L=async()=>{let r={query:"calcBalanceSheetByPeriod",params:{businessId:o("businessId"),":type":"GBS"},queryString:"type = :type"};const t=await y(b(),r);if(t&&t.data){let l=m("gastosResultado",["key_g_1","key_g_2","key_g_3","key_g_4","key_g_5","key_g_6","key_g_7","key_g_8","key_g_9","key_g_10","key_g_11","key_g_12","key_g_13","key_g_14"]),u={...t.data};u.key_c_6=l*-1,p("general_balance",u),d(v()),n(1)}},B=async()=>{let r={query:"calcBalanceSheetByPeriod",params:{businessId:o("businessId"),":type":"PLS"},queryString:"type = :type"};const t=await y(b(),r);t&&t.data&&(p("profit_lose_result",t.data),L())};return h.exports.useEffect(()=>{a||(e(!0),S(),w(),q(),B())},[a]),I("div",{children:[_("div",{className:"login_title ",children:I("div",{className:"_dsplFlx ",children:[_("div",{children:"Balances"}),_("div",{className:"login_title ",children:_(Q,{lbl:"Calcular Balances",icon:"account",theme:"",updChanges:B})})]})}),I("div",{className:"_dsplFlx spaceAround _flxWrp ",children:[_("div",{className:"formContainer ",style:{opacity:s===1?1:0,width:"720px",marginBottom:75,borderTop:"1px solid #bbbbbb",paddingTop:25},children:s===1&&_(E,{})}),_("div",{className:"formContainer ",style:{opacity:s===1?1:0,width:"720px",marginBottom:75,borderTop:"1px solid #bbbbbb",paddingTop:25},children:s===1&&_(D,{})})]})]})};var V=Object.freeze(Object.defineProperty({__proto__:null,default:F},Symbol.toStringTag,{value:"Module"}));export{V as B,z as a,K as c,U as v};
