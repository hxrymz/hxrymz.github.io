import{O as U,u as I,d as ce,T as le,r as F,b as r,X as k,g as v,j as N,a,f as ne,c as se,x as pe}from"./index.bb8b615c.js";import{P as he,S as fe,r as w}from"./PDFButton.40b48a62.js";const ge={type:"text",text:"",x:45,y:215,size:12,pageNo:0},me={type:"text",text:"",size:12,x:85,y:215,pageNo:0},ye={type:"text",text:"",size:12,x:140,y:200,pageNo:0},_e={type:"text",text:"",size:12,x:355,y:201,pageNo:0},xe={type:"text",text:"",size:12,x:517,y:201,pageNo:0},be={type:"text",text:" ",x:152,y:272,size:12,pageNo:0},Ne={type:"text",text:"",size:12,x:182,y:287,pageNo:0},ue={type:"text",text:"",size:12,x:336,y:287,pageNo:0},Se={type:"text",text:"",size:12,x:105,y:301,pageNo:0},we={type:"text",text:"",size:12,x:255,y:629,pageNo:0},Ie={type:"text",text:"",size:12,x:310,y:301,pageNo:0},ve={type:"text",text:"",x:114,y:329,size:12,pageNo:0},Fe={type:"text",text:"",x:114,y:344,size:12,pageNo:0},ze={type:"text",text:" ",x:114,y:372,size:12,pageNo:0},Ce={type:"text",text:" ",x:114,y:387,size:12,pageNo:0},Be={type:"text",text:" ",x:123,y:415,size:12,pageNo:0},Me={type:"text",text:" ",x:123,y:430,size:12,pageNo:0},Pe={type:"text",text:"",size:12,x:100,y:559,pageNo:0},Te={type:"text",text:"",size:12,x:100,y:573,pageNo:0},Ae={type:"text",text:"",size:12,x:220,y:671,pageNo:0},Oe={type:"text",text:" ",x:220,y:515,size:12,pageNo:0},Le={type:"text",text:" ",x:445,y:515,size:12,pageNo:0},De={tomo:ge,folio:me,dor_p:ye,city_registration:_e,state_registration:xe,name:be,city_pob:Ne,state_pob:ue,dob_p:Se,dop_p:we,genre:Ie,fatherName:ve,fatherBirthPlace:Fe,motherName:ze,motherBirthPlace:Ce,grands_FatherSide:Be,grands_MotherSide:Me,revised_by:Pe,prepared_by:Te,registration_officer:Ae,city_office:Oe,state_office:Le};function ke(f){let u=new Blob([f],{type:"application/pdf"});return(window.URL||window.webkitURL).createObjectURL(u)}async function je(f,u,y){let g=De||[];U(f).map(c=>{g[c]&&f[c]&&(g[c].text=f[c])});const j=await fetch("http://192.168.1.235/getStatic/birth_certicate_tr.pdf").then(c=>c.arrayBuffer()),p=await he.load(j,{ignoreEncryption:!0}),A=await p.embedFont(fe.Helvetica),n=p.getPages(),q=n[0],{width:R,height:O}=q.getSize();if(I("pdfSize",{width:R,height:O,pages:n.length}),y&&g&&U(g).map(c=>{var z,C,B,M;let o=g[c];if(o){let _=o.pageNo,x=(z=n==null?void 0:n[_])==null?void 0:z.getSize();if(o.type==="text")(C=n[_])==null||C.drawText(o.text?o.text.toString():"",{x:o.x,y:x.height-o.y,size:o.size||10,font:A,color:o.color?w(o.color[0]/255,o.color[1]/255,o.color[2]/255):w(0,.1,.1)});else if(o.type==="textboxn"){let b=(o.text?o.text.toString():o.id.toString()).split("");b==null||b.map((S,L)=>{var P;(P=n[_])==null||P.drawText(S,{x:o.x+L*o.space,y:x.height-o.y,size:o.size||10,font:A,color:o.color?w(o.color[0]/255,o.color[1]/255,o.color[2]/255):w(0,.1,.1)})})}else if(o.type==="checkBox"){let b=(x==null?void 0:x.height)-o.y,S="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z";(B=n[_])==null||B.moveTo(o.x+2,b),(M=n[_])==null||M.drawSvgPath(S,{borderColor:o.color?w(o.color[0]/255,o.color[1]/255,o.color[2]/255):w(0,0,0),borderWidth:1,scale:.5})}}}),u){const c=await p.save();return ke(c)}else return p.saveAsBase64({dataUri:!0})}ce();const d=le(),i="birth_certificate";let qe=["folio","tomo","state_registration","registration_officer","revised_by","prepared_by","city_office","state_office","city_registration","dop","dor","grandFather_FatherSide","grandMother_FatherSide","grandFather_MotherSide","grandMother_MotherSide"];const $e=({data:f,elmId:u,close:y})=>{var O,c,o,z,C,B,M,_,x,b,S,L,P,$,J,E,H,G,K,V,W,X,Z,Q;const[g,T]=F.exports.useState(!1),[j,p]=F.exports.useState(0),A=async()=>{let e={query:"getScanDocumentsNotary",params:{":customerId":r("upd_client").clientNotaryId,":documentType":"BCT"},queryString:"customerId contain :customerId AND documentType contain :documentType"};const s=await ne(se(),e);if(s&&s.data&&!s.data.error){let h=U(s.data)[0];s.data[h]&&(I(i,s.data[h]),I(i+"_bck",JSON.parse(JSON.stringify(s.data[h]))),p(v()))}};F.exports.useEffect(()=>{var e,l,s,h,D,Y,ee,te,ae,ie,oe,re;if(!g){T(!0),A();let t=r("upd_client"),de={city_pob:(e=t==null?void 0:t.placeOfBirth)==null?void 0:e.city,state_pob:(l=t==null?void 0:t.placeOfBirth)==null?void 0:l.state,fatherBirthPlace:(h=(s=t==null?void 0:t.fatherInfo)==null?void 0:s.placeOfBirth)==null?void 0:h.city,fatherName:(D=t==null?void 0:t.fatherInfo)!=null&&D.firstName?`${(Y=t==null?void 0:t.fatherInfo)==null?void 0:Y.firstName} ${(ee=t==null?void 0:t.fatherInfo)==null?void 0:ee.lastName} `:"",genre:t==null?void 0:t.genre,dob:t==null?void 0:t.dob,dateOfBirth:k(t==null?void 0:t.dob),motherBirthPlace:(ae=(te=t==null?void 0:t.motherInfo)==null?void 0:te.placeOfBirth)==null?void 0:ae.city,motherName:(ie=t==null?void 0:t.motherInfo)!=null&&ie.firstName?`${(oe=t==null?void 0:t.motherInfo)==null?void 0:oe.firstName} ${(re=t==null?void 0:t.motherInfo)==null?void 0:re.lastName} `:"",name:t!=null&&t.firstName?`${t==null?void 0:t.firstName} ${t==null?void 0:t.lastName} `:""};I(i+"_userInfo",de),p(v())}});const n=(e,l)=>{let s=r(i)||{};s[e]=l,I(i,s),p(v())},q=async()=>{let e=r(i),l={};if(e.documentNotaryId){let D=pe(qe,r(i),r(i+"_bck"));l={query:"updateDocumentsNotary",params:{documentNotaryId:e.documentNotaryId},data2update:D.data}}else e.customerId=r("upd_client").clientNotaryId,e.documentType="BCT",e.documentNotaryId=v(),l={query:"addDocumentsNotary",form:e};console.log(l);const h=await ne(se(),l);h&&h.data&&(console.log(JSON.stringify(h)),I(i,h.data),p(v()),y(!0))},R=async()=>{let e=Object.assign({},r(i),r(i+"_userInfo"));if(e.grands_FatherSide=e.grandFather_FatherSide+" and "+e.grandMother_FatherSide,e.grands_MotherSide=e.grandFather_MotherSide+" and "+e.grandMother_MotherSide,e.dob){let s=new Date(e.dob).getTime();s&&(e.dob_p=k(s))}if(e.dor){let s=new Date(e.dor).getTime();s&&(e.dor_p=k(s))}if(e.dop){let s=new Date(e.dop).getTime();s&&(e.dop_p=k(s))}let l=await je(e,!0,!0);window.open(l)};return N("div",{children:[N("div",{className:"_dsplFlx ",children:[a("p",{className:"form_title",children:"Traducion de Certificacion de Nacimiento"}),a("div",{className:"flexSpace"}),a("p",{className:"group_title addBtn",onClick:()=>y(!1),children:"cerrar"})]}),a("p",{className:"group_title",children:"Lugar y datos del Registro"}),N("div",{className:"_dsplFlx spaceAround",children:[a(d,{init:(O=r(i))==null?void 0:O.folio,label:"Folio",width:60,updChanges:e=>n("folio",e)}),a(d,{init:(c=r(i))==null?void 0:c.tomo,label:"Tomo",width:60,updChanges:e=>n("tomo",e)})]}),a(d,{init:(o=r(i))==null?void 0:o.dor,label:"Fecha de registro",width:360,updChanges:e=>n("dor",e)}),a(d,{init:(z=r(i))==null?void 0:z.city_registration,label:"Municipio",width:360,updChanges:e=>n("city_registration",e)}),a(d,{init:(C=r(i))==null?void 0:C.state_registration,label:"Provincia",width:360,updChanges:e=>n("state_registration",e)}),a("div",{className:"separator"}),a("p",{className:"group_title",children:"Oficina donde se solitito el Registro"}),a(d,{init:(B=r(i))==null?void 0:B.dop,label:"Fecha de solicitud",width:360,updChanges:e=>n("dop",e)}),a(d,{init:(M=r(i))==null?void 0:M.city_office,label:"Municipio",width:360,updChanges:e=>n("city_office",e)}),a(d,{init:(_=r(i))==null?void 0:_.state_office,label:"Provincia",width:360,updChanges:e=>n("state_office",e)}),a(d,{init:(x=r(i))==null?void 0:x.prepared_by,label:"Preparado por",width:360,updChanges:e=>n("prepared_by",e)}),a(d,{init:(b=r(i))==null?void 0:b.revised_by,label:"Revisado por",width:360,updChanges:e=>n("revised_by",e)}),a(d,{init:(S=r(i))==null?void 0:S.registration_officer,label:"Firmado por",width:360,updChanges:e=>n("registration_officer",e)}),a("div",{className:"separator"}),a("p",{className:"group_title",children:"Nombre y Lugar de Nacimiento"}),a(m,{init:(L=r(i+"_userInfo"))==null?void 0:L.name,label:"Nombre",width:520}),a(m,{init:(P=r(i+"_userInfo"))==null?void 0:P.genre,label:"Sexo",width:120}),a(m,{init:($=r(i+"_userInfo"))==null?void 0:$.dateOfBirth,label:"Fecha de nacimiento",width:360}),a(m,{init:(J=r(i+"_userInfo"))==null?void 0:J.city_pob,label:"Municipio",width:360}),a(m,{init:(E=r(i+"_userInfo"))==null?void 0:E.state_pob,label:"Provincia",width:360}),a("div",{className:"separator"}),a("p",{className:"group_title",children:"Padre"}),a(m,{init:(H=r(i+"_userInfo"))==null?void 0:H.fatherName,label:"Nombre y Apellidos",width:360}),a(m,{init:(G=r(i+"_userInfo"))==null?void 0:G.fatherBirthPlace,label:"Lugar de Nacimiento ",width:360}),a("p",{className:"group_title",children:"Madre"}),a(m,{init:(K=r(i+"_userInfo"))==null?void 0:K.motherName,label:"Nombre y Apellidos",width:360}),a(m,{init:(V=r(i+"_userInfo"))==null?void 0:V.motherBirthPlace,label:"Lugar de Nacimiento",width:360}),a("div",{className:"separator"}),a("p",{className:"group_title",children:"Nombre Abuelos Paternos"}),N("div",{className:"_dsplFlx spaceAround",children:[a(d,{init:(W=r(i))==null?void 0:W.grandFather_FatherSide,label:"Abuelo",width:160,updChanges:e=>n("grandFather_FatherSide",e)}),a("div",{style:{margin:"0 4px"}}),a(d,{init:(X=r(i))==null?void 0:X.grandMother_FatherSide,label:"Abuela",width:160,updChanges:e=>n("grandMother_FatherSide",e)})]}),a("p",{className:"group_title",children:"Nombre Abuelos Maternos"}),N("div",{className:"_dsplFlx spaceAround",children:[a(d,{init:(Z=r(i))==null?void 0:Z.grandFather_MotherSide,label:"Abuelo",width:160,updChanges:e=>n("grandFather_MotherSide",e)}),a("div",{style:{margin:"0 4px"}}),a(d,{init:(Q=r(i))==null?void 0:Q.grandMother_MotherSide,label:"Abuela ",width:160,updChanges:e=>n("grandMother_MotherSide",e)})]}),a("div",{className:"separator"}),N("div",{className:"card _dsplFlx",children:[a("button",{onClick:q,children:"Guardar"}),a("div",{className:"flexSpace"}),a("button",{onClick:R,children:"Imprimir"})]})]})},m=({init:f,label:u,width:y})=>{const[g,T]=F.exports.useState(!1),[j,p]=F.exports.useState(0);return F.exports.useEffect(()=>{g||(T(!0),p(v()))}),f?N("div",{children:[a("p",{className:"label",children:u}),a("div",{style:y?{width:y}:null,className:"r7gAOb yyJm8b",children:f})]}):null};export{$e as default};
