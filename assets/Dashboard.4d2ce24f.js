import{z as J,I as X,l as I,_ as B,A as te,b as ae,M as ne,S as le,u as W,B as re,c as ce,r as x,a as d,D as j,i as Q,j as e,E as T,G,f as m,H as Y,J as U,K as z,v as L,n as A,L as de,N as D,O as K,o as Z,P as ee}from"./index.514a39b7.js";/* empty css                    */J();X();I(()=>B(()=>import("./InputH2.1ef4e319.js"),["assets/InputH2.1ef4e319.js","assets/index.514a39b7.js","assets/index.f55f9e34.css"]));const O=X();te();ae();const E=J();ne();const oe=le(),me=I(()=>B(()=>import("./HRpopUp.9fdb13a8.js"),["assets/HRpopUp.9fdb13a8.js","assets/index.514a39b7.js","assets/index.f55f9e34.css"]));I(()=>B(()=>import("./Analitics.eabba070.js"),["assets/Analitics.eabba070.js","assets/index.514a39b7.js","assets/index.f55f9e34.css"]));I(()=>B(()=>import("./WatchingDetails.c43860ed.js"),["assets/WatchingDetails.c43860ed.js","assets/WatchingDetails.92c26a4e.css","assets/index.514a39b7.js","assets/index.f55f9e34.css"]));const ue=I(()=>B(()=>import("./CuentasContablesDashBoard.c64a4182.js"),["assets/CuentasContablesDashBoard.c64a4182.js","assets/loginScreen.811cabed.css","assets/index.514a39b7.js","assets/index.f55f9e34.css","assets/LoginInput.bf0d7509.js","assets/validations.6c3f96aa.js"])),_e=I(()=>B(()=>import("./AsientosContables.3f8c4692.js"),["assets/AsientosContables.3f8c4692.js","assets/index.514a39b7.js","assets/index.f55f9e34.css"])),pe=I(()=>B(()=>import("./Business.b2a38a7f.js"),["assets/Business.b2a38a7f.js","assets/loginScreen.811cabed.css","assets/index.514a39b7.js","assets/index.f55f9e34.css","assets/LoginInput.bf0d7509.js","assets/validations.6c3f96aa.js"])),he=I(()=>B(()=>import("./OperationHRG.867cc7fa.js"),["assets/OperationHRG.867cc7fa.js","assets/index.514a39b7.js","assets/index.f55f9e34.css"])),b="loginFrm",xe=y=>{W(re),W(ce);const[s,t]=x.exports.useState(!1),[i,o]=x.exports.useState(0);x.exports.useEffect(()=>{s||(t(!0),setTimeout(()=>{window.scrollTo(0,0),setTimeout(()=>o(1),150)},170))},[s]);const g=async h=>{o(h)};let N={"--ytcp-themed-red":"#b00000","--ytcp-text-secondary2":"#b00000","--ytcp-text-secondary":"#1a73e8","--ytcp-opacity_line":1,"--ytcp-general-background-z":"#1b1b1b"};return d("div",{children:[d("div",{style:{margin:"65px auto 25px",paddingLeft:"15px",width:"100%","--menu-slide-wd":j()?Q():"240px"},className:"_dsplFlx dashboard",children:[e("div",{className:"dashboard_menu",children:d("div",{className:"dashboard_fixed",style:{margin:"5px",borderRight:j()?Q()?"1px solid var(--ytcp-line-divider)":"":"1px solid var(--ytcp-line-divider)"},children:[T()&&d("div",{className:"menu_item _dsplFlx",style:i===4?N:null,onClick:()=>g(4),children:[e("div",{className:"icon",children:e(O,{name:"list_form",size:24})}),e("div",{className:"lbl",children:"Business"})]}),d("div",{className:"menu_item _dsplFlx",style:i===1?N:null,onClick:()=>g(1),children:[e("div",{className:"icon",children:e(O,{name:"outline_view",size:24})}),e("div",{className:"lbl",children:"Cuentas Contables"})]}),d("div",{className:"menu_item _dsplFlx",style:i===2?N:null,onClick:()=>g(2),children:[e("div",{className:"icon",children:e(O,{name:"list_form",size:24})}),e("div",{className:"lbl",children:"Asientos Contables"})]}),d("div",{className:"menu_item _dsplFlx",style:i===3?N:null,onClick:()=>g(3),children:[e("div",{className:"icon",children:e(O,{name:"analytics",size:24})}),e("div",{className:"lbl",children:"Operaciones"})]}),T()&&d("div",{className:"menu_item _dsplFlx",style:i===5?N:null,onClick:()=>g(5),children:[e("div",{className:"icon",children:e(O,{name:"users",size:24})}),e("div",{className:"lbl",children:"Usuarios"})]})]})}),d("div",{className:"dashboard_body ",style:{opacity:i?1:0,width:"calc(100vw - var(--menu-slide-wd))",minHeight:"100vh"},children:[e("div",{className:"formContainer ",style:{opacity:i===4?1:0},children:i===4&&e(pe,{})}),e("div",{className:"formContainer ",style:{opacity:i===2?1:0},children:i===2&&e(_e,{view:i})}),e("div",{className:"formContainer ",style:{opacity:i===3?1:0},children:i===3&&e(he,{})}),e("div",{className:"formContainer ",style:{opacity:i===1?1:0},children:i===1&&e(ue,{})}),e("div",{className:"formContainer ",style:{opacity:i===5?1:0},children:i===5&&e(ve,{})})]})]})," "]})},ve=y=>{var r,_,p;const{view:s}=y,[t,i]=x.exports.useState(null),[o,g]=x.exports.useState(""),[N,h]=x.exports.useState("");if(!T())return e("div",{children:"No tiene privilegios para usar esta opcion"});const w=async()=>{let l={query:"getAllUsers"};const c=await z(L(),l);c&&c.data&&(console.log(c),i(c.data))},F=async()=>{let l={query:"getAllBusiness",params:{":isActive":!0},queryString:"isActive = :isActive"};const c=await z(L(),l);c&&c.data&&(c.data.error||(A("businessArr",c.data),A("businesslist",de(c.data,"businessId"))))};x.exports.useEffect(()=>{var l;return F(),(l=G())==null||l.on("device-active",w),()=>{var f;(f=G())==null||f.off("device-active",w)}},[s]);const C=()=>Y("usersListFilter",[t,o,m("filter_user_online"),m("filter_user_expired"),m("filter_user_active")],()=>{let l="name",f="email";const c=a=>{var P,V,R,H,$,q,M;(P=a==null?void 0:a.sections)!=null&&P.active&&U((V=a==null?void 0:a.sections)==null?void 0:V.active).length>0,(a==null?void 0:a.expire)<Date.now();let se=(o==null?void 0:o.toLowerCase())&&((H=(R=a==null?void 0:a[l])==null?void 0:R.toLowerCase())==null?void 0:H.indexOf(o.toLowerCase()))>=0,ie=(o==null?void 0:o.toLowerCase())&&((M=(q=($=a==null?void 0:a[f])==null?void 0:$.toString())==null?void 0:q.toLowerCase())==null?void 0:M.indexOf(o.toLowerCase()))>=0;if(se||ie)return a};return t==null?void 0:t.filter(a=>c(a))});x.exports.useEffect(()=>{setTimeout(()=>{window.scrollTo(0,0),w()},170)},[y.view]);const S=l=>{A("filter_user_online",l),h(D())},n=l=>{A("filter_user_expired",l),h(D())},u=l=>{A("filter_user_active",l),h(D())};return d("div",{className:"",style:{marginLeft:"2vw"},children:[e("div",{className:"login_title ",children:e("div",{children:"Usuarios"})}),d("div",{className:"_dsplFlx ",children:[e("div",{className:"sendBtn _dsplFlx spaceAround ",style:{marginTop:8},children:d("div",{className:"in_stock_switch _dsplFlx",children:[e("div",{className:"in_stock_switch_btn",children:e(E,{initvalue:m("filter_user_online"),keyCode:77,updChange:S})}),e("span",{className:"sw_rgh_span",children:"Usuarios en linea"})]})}),e("div",{className:"sendBtn _dsplFlx spaceAround ",style:{marginTop:8},children:d("div",{className:"in_stock_switch _dsplFlx",children:[e("div",{className:"in_stock_switch_btn",children:e(E,{initvalue:m("filter_user_expired"),keyCode:71,updChange:n})}),e("span",{className:"sw_rgh_span",children:"Cuentas Vencidas"})]})}),e("div",{className:"sendBtn _dsplFlx spaceAround ",style:{marginTop:8},children:d("div",{className:"in_stock_switch _dsplFlx",children:[e("div",{className:"in_stock_switch_btn",children:e(E,{initvalue:m("filter_user_active"),keyCode:73,updChange:u})}),e("span",{className:"sw_rgh_span",children:"Cuentas Desactivadas"})]})}),e("div",{className:"flexSpace"}),e("div",{className:"userqty",children:`${(r=C())==null?void 0:r.length} de ${t!=null&&t.length?(t==null?void 0:t.length)-1:0}`})]}),e("div",{className:" _search_MrgV  ",children:e("div",{className:"years_card ",style:{marginLeft:"2vw"},children:e(oe,{updChanges:g,placeholderCode:"buscar usuario"})})}),e("div",{className:"userslist",style:{marginLeft:"2vw"},children:((_=C())==null?void 0:_.length)>0&&((p=C())==null?void 0:p.map(l=>l&&e(ye,{item:l,refreshlist:w})))})]})},ye=y=>{var w,F,C,S;const{item:s}=y,t=async(n,u)=>{let r={query:"updUserByAdmin",params:{id:s.id},data2update:{[n]:u}};const p=await Z(L(),r);p&&p.data&&y.refreshlist()};(w=s==null?void 0:s.sections)!=null&&w.active&&U((F=s==null?void 0:s.sections)==null?void 0:F.active).length>0,(()=>{var n;return Y("isWatching",[(n=s==null?void 0:s.sections)==null?void 0:n.watching],()=>{var p;let u="timeStamp",r=(p=s==null?void 0:s.sections)==null?void 0:p.watching,_=U(r).sort((l,f)=>{let c=r[l]&&r[l][u],a=r[f]&&r[f][u];return c<a?1:c>a?-1:0});return r==null?void 0:r[_==null?void 0:_[0]]})})();const o=()=>{A(b,s);let n={};n.zIndex=450,n.props={item:s,minHeight:"1vh",overlay:!0},n.content=e(be,{updUser:t}),K(n)},g=()=>{let n={};n.zIndex=450,n.props={item:s,minHeight:"1vh",overlay:!0},n.content=e(ge,{confirm:()=>y.refreshlist()}),K(n)},N=n=>{t("isActive",n)},h=n=>{t("allowPlay",n)};return d("div",{className:"_dsplFlx useritem",children:[e("div",{className:"in_stock_switch_btn",style:{padding:"8px 18px 0 0"},children:e(E,{initvalue:s.isActive,keyCode:33,updChange:N})}),e("div",{className:"usernm",onClick:o,children:e("div",{children:s.given_name})}),e("div",{className:"usernm",style:{flexBasis:250},children:e("div",{children:s.family_name})}),e("div",{className:"flexSpace"}),e("div",{className:"usernm",style:{flexBasis:250},children:e("div",{children:(S=(C=m("businesslist"))==null?void 0:C[s==null?void 0:s.businessId])==null?void 0:S.name})}),d("div",{className:"_dsplFlx",children:[e("div",{className:"usernm",children:e("div",{children:s.isBusinessOwner?"Due\xF1o":""})}),e("div",{className:"in_stock_switch_btn",style:{padding:"8px 18px 0 0"},children:e(E,{initvalue:s.allowPlay,keyCode:32,updChange:h})}),e("div",{className:"_dsplFlx delete_icon",onClick:g,children:e(O,{name:"delete",size:24,color:"#b00000"})})]})]})},ge=y=>{const{data:s}=y,{modalID:t,item:i}=s||{},o=async()=>{let g={query:"deleteUsers",params:{id:i.id}};const h=await Z(L(),g);h&&h.data&&(ee({id:t}),y.confirm(i))};return d("div",{...t?{"dialog-key-id":t}:"",className:"pym81b sendBx upd_alert_bx",style:{background:"var(--color_backgrond_input)"},children:[e("div",{className:"login_title ",style:{margin:"1vw"},children:e("div",{children:`Borrar Usuario "${i.username}"`})}),e("div",{className:"delete_alert_t2 ",children:e("div",{children:"Una vez borrado no podras recuperarlo"})}),e("div",{className:"sendBtn _dsplFlx spaceAround",children:e("div",{className:"play-button-wrapper",style:{margin:"2vw 1vw 0"},children:e("div",{className:"play-button",onClick:o,children:e("div",{className:"lbl",children:"Borrar"})})})})]})},be=({data:y,refreshlist:s})=>{var C,S,n;const{modalID:t}=y||{},[i,o]=x.exports.useState(!1),[g,N]=x.exports.useState(0),h=(u,r)=>{let _=m(b)||{};_[u]=r,A(b,_),i&&o(!1),N(D())},w=async()=>{var u,r,_,p;if((u=m(b))!=null&&u.userId){let l={query:"updateBussinesDetails",params:{userId:(r=m(b))==null?void 0:r.userId},data2update:{isBusinessOwner:(_=m(b))==null?void 0:_.isBusinessOwner,businessId:(p=m(b))==null?void 0:p.businessId}};const c=await z(L(),l);if(console.log(c),c&&c.data){let a=m(b);a[k]=v,A(b,a),ee({id:t})}}},F=()=>{const u=r=>{var _,p;return{id:r,lbl:(p=(_=m("businesslist"))==null?void 0:_[r])==null?void 0:p.name}};return U(m("businesslist")).map(u)};return e("div",{...t?{"dialog-key-id":t}:"",className:"pym81b sendBx upd_alert_bx",style:{background:"var(--color_backgrond_input)"},children:d("div",{className:"sendBtn  _mrgSwith  margin_form hybrid_login_form ",style:{minHeight:120,padding:"20px 68px 40px"},children:[e("div",{className:"login_title ",style:{marginLeft:1,textAlign:"left"},children:e("div",{children:"Actualizar"})}),e("div",{className:"in_stock_switch _dsplFlx",style:{marginTop:10},children:e("span",{className:"sw_rgh_span",children:`Relacionar a (${(C=m(b))==null?void 0:C.name}) al Negocio`})}),e("div",{className:" year_container  ",style:{maxWidth:"fit-content"},children:e(me,{data:F(),value:(S=m(b))==null?void 0:S.businessId,updValue:u=>h("businessId",u)})}),d("div",{className:"in_stock_switch _dsplFlx",style:{marginTop:10},children:[e("div",{className:"in_stock_switch_btn",children:e(E,{initvalue:(n=m(b))==null?void 0:n.isBusinessOwner,keyCode:77,updChange:u=>h("isBusinessOwner",u)})}),e("span",{className:"sw_rgh_span",children:"Es Due\xF1o de Negocio"})]}),e("button",{className:"btn login_button btn_submit btn_small",type:"submit",autocomplete:"off",tabindex:"0","data-uia":"login-submit-button",onClick:w,children:"Actualizar"})]})})};export{xe as default};
