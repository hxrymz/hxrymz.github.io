import{w as Q,I as G,l as I,_ as B,x as ee,b as se,M as ie,S as te,u as ae,y as ne,r as x,a as d,j as e,z as T,A as j,e as m,B as J,D as U,E as z,p as D,h as A,G as le,H as L,O as W,k as K,J as X}from"./index.20bf7686.js";/* empty css                    */Q();G();I(()=>B(()=>import("./InputH2.d7cd4a96.js"),["assets/InputH2.d7cd4a96.js","assets/index.20bf7686.js","assets/index.95310fc6.css"]));const O=G();ee();se();const E=Q();ie();const re=te(),ce=I(()=>B(()=>import("./HRpopUp.5a85d7a1.js"),["assets/HRpopUp.5a85d7a1.js","assets/index.20bf7686.js","assets/index.95310fc6.css"]));I(()=>B(()=>import("./Analitics.443f0fe4.js"),["assets/Analitics.443f0fe4.js","assets/index.20bf7686.js","assets/index.95310fc6.css"]));I(()=>B(()=>import("./WatchingDetails.e9bb01b4.js"),["assets/WatchingDetails.e9bb01b4.js","assets/WatchingDetails.92c26a4e.css","assets/index.20bf7686.js","assets/index.95310fc6.css"]));const de=I(()=>B(()=>import("./CuentasContablesDashBoard.ad627ab5.js"),["assets/CuentasContablesDashBoard.ad627ab5.js","assets/loginScreen.811cabed.css","assets/index.20bf7686.js","assets/index.95310fc6.css","assets/LoginInput.8253be71.js","assets/validations.6c3f96aa.js"])),oe=I(()=>B(()=>import("./AsientosContables.2334d856.js"),["assets/AsientosContables.2334d856.js","assets/index.20bf7686.js","assets/index.95310fc6.css"])),me=I(()=>B(()=>import("./Business.c664349d.js"),["assets/Business.c664349d.js","assets/loginScreen.811cabed.css","assets/index.20bf7686.js","assets/index.95310fc6.css","assets/LoginInput.8253be71.js","assets/validations.6c3f96aa.js"])),ue=I(()=>B(()=>import("./OperationHRG.72d4cd99.js"),["assets/OperationHRG.72d4cd99.js","assets/index.20bf7686.js","assets/index.95310fc6.css"])),N="loginFrm",Ne=y=>{ae(ne);const[s,t]=x.exports.useState(!1),[i,o]=x.exports.useState(0);x.exports.useEffect(()=>{s||(t(!0),console.log("858"),setTimeout(()=>{window.scrollTo(0,0),setTimeout(()=>o(1),150)},170))},[s]);const g=async h=>{o(h)};let b={"--ytcp-themed-red":"#b00000","--ytcp-text-secondary2":"#b00000","--ytcp-text-secondary":"#1a73e8","--ytcp-opacity_line":1,"--ytcp-general-background-z":"#1b1b1b"};return d("div",{children:[d("div",{style:{margin:"65px auto 25px",paddingLeft:"15px",width:"100%","--menu-slide-wd":"240px"},className:"_dsplFlx dashboard",children:[e("div",{className:"dashboard_menu",children:d("div",{className:"dashboard_fixed",style:{margin:"5px"},children:[T()&&d("div",{className:"menu_item _dsplFlx",style:i===4?b:null,onClick:()=>g(4),children:[e("div",{className:"icon",children:e(O,{name:"list_form",size:24})}),e("div",{className:"lbl",children:"Business"})]}),d("div",{className:"menu_item _dsplFlx",style:i===1?b:null,onClick:()=>g(1),children:[e("div",{className:"icon",children:e(O,{name:"outline_view",size:24})}),e("div",{className:"lbl",children:"Cuentas Contables"})]}),d("div",{className:"menu_item _dsplFlx",style:i===2?b:null,onClick:()=>g(2),children:[e("div",{className:"icon",children:e(O,{name:"list_form",size:24})}),e("div",{className:"lbl",children:"Asientos Contables"})]}),d("div",{className:"menu_item _dsplFlx",style:i===3?b:null,onClick:()=>g(3),children:[e("div",{className:"icon",children:e(O,{name:"analytics",size:24})}),e("div",{className:"lbl",children:"Operaciones"})]}),T()&&d("div",{className:"menu_item _dsplFlx",style:i===5?b:null,onClick:()=>g(5),children:[e("div",{className:"icon",children:e(O,{name:"users",size:24})}),e("div",{className:"lbl",children:"Usuarios"})]})]})}),d("div",{className:"dashboard_body ",style:{opacity:i?1:0,width:"calc(100vw - var(--menu-slide-wd))",minHeight:"100vh"},children:[e("div",{className:"formContainer ",style:{opacity:i===4?1:0},children:i===4&&e(me,{})}),e("div",{className:"formContainer ",style:{opacity:i===2?1:0},children:i===2&&e(oe,{view:i})}),e("div",{className:"formContainer ",style:{opacity:i===3?1:0},children:i===3&&e(ue,{})}),e("div",{className:"formContainer ",style:{opacity:i===1?1:0},children:i===1&&e(de,{})}),e("div",{className:"formContainer ",style:{opacity:i===5?1:0},children:i===5&&e(_e,{})})]})]})," "]})},_e=y=>{var r,_,p;const{view:s}=y,[t,i]=x.exports.useState(null),[o,g]=x.exports.useState(""),[b,h]=x.exports.useState("");if(!T())return e("div",{children:"No tiene privilegios para usar esta opcion"});const w=async()=>{let l={query:"getAllUsers"};const c=await z(D(),l);c&&c.data&&(console.log(c),i(c.data))},S=async()=>{let l={query:"getAllBusiness",params:{":isActive":!0},queryString:"isActive = :isActive"};const c=await z(D(),l);c&&c.data&&(c.data.error||(A("businessArr",c.data),A("businesslist",le(c.data,"businessId"))))};x.exports.useEffect(()=>{var l;return S(),(l=j())==null||l.on("device-active",w),()=>{var f;(f=j())==null||f.off("device-active",w)}},[s]);const C=()=>J("usersListFilter",[t,o,m("filter_user_online"),m("filter_user_expired"),m("filter_user_active")],()=>{let l="name",f="email";const c=a=>{var V,P,R,H,$,q,M;(V=a==null?void 0:a.sections)!=null&&V.active&&U((P=a==null?void 0:a.sections)==null?void 0:P.active).length>0,(a==null?void 0:a.expire)<Date.now();let Y=(o==null?void 0:o.toLowerCase())&&((H=(R=a==null?void 0:a[l])==null?void 0:R.toLowerCase())==null?void 0:H.indexOf(o.toLowerCase()))>=0,Z=(o==null?void 0:o.toLowerCase())&&((M=(q=($=a==null?void 0:a[f])==null?void 0:$.toString())==null?void 0:q.toLowerCase())==null?void 0:M.indexOf(o.toLowerCase()))>=0;if(Y||Z)return a};return t==null?void 0:t.filter(a=>c(a))});x.exports.useEffect(()=>{setTimeout(()=>{window.scrollTo(0,0),w()},170)},[y.view]);const F=l=>{A("filter_user_online",l),h(L())},n=l=>{A("filter_user_expired",l),h(L())},u=l=>{A("filter_user_active",l),h(L())};return d("div",{className:"",style:{marginLeft:"2vw"},children:[e("div",{className:"login_title ",children:e("div",{children:"Usuarios"})}),d("div",{className:"_dsplFlx ",children:[e("div",{className:"sendBtn _dsplFlx spaceAround ",style:{marginTop:8},children:d("div",{className:"in_stock_switch _dsplFlx",children:[e("div",{className:"in_stock_switch_btn",children:e(E,{initvalue:m("filter_user_online"),keyCode:77,updChange:F})}),e("span",{className:"sw_rgh_span",children:"Usuarios en linea"})]})}),e("div",{className:"sendBtn _dsplFlx spaceAround ",style:{marginTop:8},children:d("div",{className:"in_stock_switch _dsplFlx",children:[e("div",{className:"in_stock_switch_btn",children:e(E,{initvalue:m("filter_user_expired"),keyCode:71,updChange:n})}),e("span",{className:"sw_rgh_span",children:"Cuentas Vencidas"})]})}),e("div",{className:"sendBtn _dsplFlx spaceAround ",style:{marginTop:8},children:d("div",{className:"in_stock_switch _dsplFlx",children:[e("div",{className:"in_stock_switch_btn",children:e(E,{initvalue:m("filter_user_active"),keyCode:73,updChange:u})}),e("span",{className:"sw_rgh_span",children:"Cuentas Desactivadas"})]})}),e("div",{className:"flexSpace"}),e("div",{className:"userqty",children:`${(r=C())==null?void 0:r.length} de ${t!=null&&t.length?(t==null?void 0:t.length)-1:0}`})]}),e("div",{className:" _search_MrgV  ",children:e("div",{className:"years_card ",style:{marginLeft:"2vw"},children:e(re,{updChanges:g,placeholderCode:"buscar usuario"})})}),e("div",{className:"userslist",style:{marginLeft:"2vw"},children:((_=C())==null?void 0:_.length)>0&&((p=C())==null?void 0:p.map(l=>l&&e(pe,{item:l,refreshlist:w})))})]})},pe=y=>{var w,S,C,F;const{item:s}=y,t=async(n,u)=>{let r={query:"updUserByAdmin",params:{id:s.id},data2update:{[n]:u}};const p=await K(D(),r);p&&p.data&&y.refreshlist()};(w=s==null?void 0:s.sections)!=null&&w.active&&U((S=s==null?void 0:s.sections)==null?void 0:S.active).length>0,(()=>{var n;return J("isWatching",[(n=s==null?void 0:s.sections)==null?void 0:n.watching],()=>{var p;let u="timeStamp",r=(p=s==null?void 0:s.sections)==null?void 0:p.watching,_=U(r).sort((l,f)=>{let c=r[l]&&r[l][u],a=r[f]&&r[f][u];return c<a?1:c>a?-1:0});return r==null?void 0:r[_==null?void 0:_[0]]})})();const o=()=>{A(N,s);let n={};n.zIndex=450,n.props={item:s,minHeight:"1vh",overlay:!0},n.content=e(ve,{updUser:t}),W(n)},g=()=>{let n={};n.zIndex=450,n.props={item:s,minHeight:"1vh",overlay:!0},n.content=e(he,{confirm:()=>y.refreshlist()}),W(n)},b=n=>{t("isActive",n)},h=n=>{t("allowPlay",n)};return d("div",{className:"_dsplFlx useritem",children:[e("div",{className:"in_stock_switch_btn",style:{padding:"8px 18px 0 0"},children:e(E,{initvalue:s.isActive,keyCode:33,updChange:b})}),e("div",{className:"usernm",onClick:o,children:e("div",{children:s.given_name})}),e("div",{className:"usernm",style:{flexBasis:250},children:e("div",{children:s.family_name})}),e("div",{className:"flexSpace"}),e("div",{className:"usernm",style:{flexBasis:250},children:e("div",{children:(F=(C=m("businesslist"))==null?void 0:C[s==null?void 0:s.businessId])==null?void 0:F.name})}),d("div",{className:"_dsplFlx",children:[e("div",{className:"usernm",children:e("div",{children:s.isBusinessOwner?"Due\xF1o":""})}),e("div",{className:"in_stock_switch_btn",style:{padding:"8px 18px 0 0"},children:e(E,{initvalue:s.allowPlay,keyCode:32,updChange:h})}),e("div",{className:"_dsplFlx delete_icon",onClick:g,children:e(O,{name:"delete",size:24,color:"#b00000"})})]})]})},he=y=>{const{data:s}=y,{modalID:t,item:i}=s||{},o=async()=>{let g={query:"deleteUsers",params:{id:i.id}};const h=await K(D(),g);h&&h.data&&(X({id:t}),y.confirm(i))};return d("div",{...t?{"dialog-key-id":t}:"",className:"pym81b sendBx upd_alert_bx",style:{background:"var(--color_backgrond_input)"},children:[e("div",{className:"login_title ",style:{margin:"1vw"},children:e("div",{children:`Borrar Usuario "${i.username}"`})}),e("div",{className:"delete_alert_t2 ",children:e("div",{children:"Una vez borrado no podras recuperarlo"})}),e("div",{className:"sendBtn _dsplFlx spaceAround",children:e("div",{className:"play-button-wrapper",style:{margin:"2vw 1vw 0"},children:e("div",{className:"play-button",onClick:o,children:e("div",{className:"lbl",children:"Borrar"})})})})]})},ve=({data:y,refreshlist:s})=>{var C,F,n;const{modalID:t}=y||{},[i,o]=x.exports.useState(!1),[g,b]=x.exports.useState(0),h=(u,r)=>{let _=m(N)||{};_[u]=r,A(N,_),i&&o(!1),b(L())},w=async()=>{var u,r,_,p;if((u=m(N))!=null&&u.userId){let l={query:"updateBussinesDetails",params:{userId:(r=m(N))==null?void 0:r.userId},data2update:{isBusinessOwner:(_=m(N))==null?void 0:_.isBusinessOwner,businessId:(p=m(N))==null?void 0:p.businessId}};const c=await z(D(),l);if(console.log(c),c&&c.data){let a=m(N);a[k]=v,A(N,a),X({id:t})}}},S=()=>{const u=r=>{var _,p;return{id:r,lbl:(p=(_=m("businesslist"))==null?void 0:_[r])==null?void 0:p.name}};return U(m("businesslist")).map(u)};return e("div",{...t?{"dialog-key-id":t}:"",className:"pym81b sendBx upd_alert_bx",style:{background:"var(--color_backgrond_input)"},children:d("div",{className:"sendBtn  _mrgSwith  margin_form hybrid_login_form ",style:{minHeight:120,padding:"20px 68px 40px"},children:[e("div",{className:"login_title ",style:{marginLeft:1,textAlign:"left"},children:e("div",{children:"Actualizar"})}),e("div",{className:"in_stock_switch _dsplFlx",style:{marginTop:10},children:e("span",{className:"sw_rgh_span",children:`Relacionar a (${(C=m(N))==null?void 0:C.name}) al Negocio`})}),e("div",{className:" year_container  ",style:{maxWidth:"fit-content"},children:e(ce,{data:S(),value:(F=m(N))==null?void 0:F.businessId,updValue:u=>h("businessId",u)})}),d("div",{className:"in_stock_switch _dsplFlx",style:{marginTop:10},children:[e("div",{className:"in_stock_switch_btn",children:e(E,{initvalue:(n=m(N))==null?void 0:n.isBusinessOwner,keyCode:77,updChange:u=>h("isBusinessOwner",u)})}),e("span",{className:"sw_rgh_span",children:"Es Due\xF1o de Negocio"})]}),e("button",{className:"btn login_button btn_submit btn_small",type:"submit",autocomplete:"off",tabindex:"0","data-uia":"login-submit-button",onClick:w,children:"Actualizar"})]})})};export{Ne as default};
