import{u as I,h as V,r as g,a as c,j as e,k as u,n,o as f,q as b,t as q,v as C,w,x as L}from"./index.2dd67c8e.js";import{v as D}from"./validations.6c3f96aa.js";import{InputNFX as h}from"./LoginInput.42acb82d.js";const v="loginFrm",M=({})=>{I(V);const[t,x]=g.exports.useState(!1),[N,r]=g.exports.useState(!1),[$,s]=g.exports.useState([]);let o={username:{reqired:!0,minLength:4},password:{reqired:!0,minLength:6,maxLength:60}};t&&(o={phoneNumber:{reqired:!0,number:!0,minLength:8,maxLength:8},password:{reqired:!0,minLength:6},username:{reqired:!0,minLength:4}});const p=(i,d)=>{let m=u(v)||{};m[i]=d,n(v,m)},y=async i=>{i.preventDefault();let d=u(v)||{},m={query:t?"singup":"login",params:d};if(D(o,d).valid){const a=await f(w(),m);if(a&&a.data){if(a.data.error==="507")r(!0),s(["No podemos encontrar una cuenta con esta informacion. Reint\xE9ntalo o crea una cuenta nueva."]);else if(a.data.error==="907")r(!0),s(["Su cuenta ha sido bloqueda","debido a muchos intentos de inicio de sesi\xF3n","debe esperar al menos 10 minutos para volver a intentarlo"]);else if(a.data.error==="509")r(!0),s(["Dispositivo no authorizado"," ha alcanzado el maximo de dispositivos permitidos","contacte con el administador para revisar o modificar sus dispositivos",`deviceId: ${u("fingerprintID")}`]);else if(a.data.error==="607")r(!0),s(["Cuenta desactivada por pago no realizado"]);else if(a.data.error==="609")r(!0),s(["Cuenta desactivada"]);else if(a.data.error==="532")r(!0),s(["Usuario en uso"]);else if(a.data.error==="535")r(!0),s(["Dispositivo utilizado por otra cuenta","contacte con el administador para revisar o modificar sus dispositivos",`deviceId: ${u("fingerprintID")}`]);else if(a.data.error==="101")r(!0),s(["Su cuenta ha sido creada y esta siendo revisada por nuestro equipo","si en 4 horas su cuenta no esta activa contacte con el administador","whatsApp:  (5023892075)","",`usuario: ${d.username} `,`deviceId: ${u("fingerprintID")} `]);else if(a.data.token){r(!1),s([""]);let S=new Date().getTime(),_=new Date(S+6e4*60*24*365),k=L();document.cookie=`${k}=${a.data.token}; expires=${_}; path=/;g_state = {"i_l":1,"i_p":${_}}`,n("singinView",!1),n("appLoaded",!0),b();let F={params:{tkn:a.data.token},query:"getTkn"};const l=await f(w(),F);l&&l.data&&l.data.username&&(n("userProfile",l.data),q(l.data.isAdmin),n("singinView",!1),n("appLoaded",!0),b(),C())}}}else s(["formulario invalido"]),r(!0)};return c("div",{className:"hybrid_login_wrapper",style:{heigth:"100vw"},children:[e("div",{className:"login_wrapper_background",children:e("img",{className:"concord-img vlv-creative",src:"/static/media/login_small.jpg",srcset:"/static/media/login_small.jpg 1000w, /static/media/login_medium.jpg 1500w, /static/media/login_large.jpg 1800w",alt:""})}),e("div",{className:"login_body",children:e("div",{className:"padd ",children:e("div",{className:"login_content login_form hybrid_login_form hybrid_login_form_signup","data-uia":"login_page-container",children:c("div",{className:"hybrid_login_form_main",children:[e("h1",{"data-uia":"login_page_title",children:t?"Registrarse":"Inicia sesi\xF3n"}),N&&c("div",{"data-uia":"error_message_container",className:"ui_message_container ui_message_error",children:[e("div",{className:"ui_message_icon"}),e("div",{className:"multi_msg",children:$.map(i=>e("div",{"data-uia":"text",className:"ui_message_contents",children:i}))})]}),c("form",{className:"login_form",action:"",onSubmit:y,children:[e(h,{validationMsg:"Su usuario debe contener entre 4 y 20 caracteres.",validation:o.username,type:"text",placeholder:"Usuario",updChange:i=>p("username",i)}),e(h,{validationMsg:"Su contrase\xF1a debe contener entre 4 y 60 caracteres.",validation:o.password,type:"password",placeholder:"Contrase\xF1a",updChange:i=>p("password",i)}),t&&e(h,{validationMsg:"Su telefono debe contener 8 caracteres numericos.",validation:o.phoneNumber,type:"number",placeholder:"Telefono",updChange:i=>p("phoneNumber",i)}),e("button",{className:"btn login_button btn_submit btn_small",type:"submit",autocomplete:"off",tabindex:"0","data-uia":"login-submit-button",children:t?"Registrarse":"Iniciar sesi\xF3n"})]}),c("div",{className:"login_signup_now","data-uia":"login-signup-now",children:[t?"Volver a":"\xBFPrimera vez en Hlgflix?",e("div",{onClick:()=>x(!t),className:"subsribe",children:t?"Iniciar sesi\xF3n":"Registrate ahora"})]})]})})})})]})};export{M as default};
