import{I as B,b as F,w as k,S as D,r as x,a as o,j as e,e as n,B as O,a1 as L,E as A,h as v,H as G,G as R,O as H,p as f,k as T,J as z}from"./index.5d7f8be5.js";const M=B(),U=F(),j=k(),q=D(),S="ctscont",$=({view:t})=>{var C,I;const[l,c]=x.exports.useState(""),[h,d]=x.exports.useState(""),s=async()=>{let a={query:"getAllOperationsHRG",params:{businessId:n("businessId")}};const r=await A(f(),a);r&&r.data&&(v("operationsHRGlist",r.data),d(G()))},i=async()=>{let a={query:"getAllAccountsByUserId",params:{businessId:n("businessId")}};const r=await A(f(),a);r&&r.data&&v("cuentaslist",R(r.data,"accountId"));let w={query:"getAllSubAccounts",params:{businessId:n("businessId")}};const _=await A(f(),w);_&&_.data&&(v("sub_cuentas_list",_.data),v("sub_cuentas_dict",R(_.data,"sub_accountId")))};x.exports.useEffect(()=>()=>{},[]);const p=a=>{let m={};m.zIndex=450,m.props={item:a,minHeight:"700px",overlay:!0},H(m)},y=()=>O("operationsHRGListFilter",[n("operationsHRGlist"),l,n("showAll_operationsHRG")],()=>{var w;let a="name";const m=u=>{var N,b;let _=(l==null?void 0:l.toLowerCase())&&((b=(N=u==null?void 0:u[a])==null?void 0:N.toLowerCase())==null?void 0:b.indexOf(l.toLowerCase()))>=0;if(n("showAll_operationsHRG")||_)return u},r=(u,_)=>{console.log(u);let N=u[a],b=_[a];return N<b?-1:N>b?1:0};return(w=n("operationsHRGlist"))==null?void 0:w.filter(m).sort(r)});x.exports.useEffect(()=>{setTimeout(()=>{window.scrollTo(0,0),i(),s()},170)},[t]);const g=a=>{v("showAll_operationsHRG",a),d(G())};return o("div",{className:"",style:{marginLeft:"2vw"},children:[e("div",{className:"login_title ",children:e("div",{children:"Operations"})}),o("div",{className:"_dsplFlx ",children:[e("div",{className:"login_title ",children:e(U,{lbl:"Agregar ",icon:"account",theme:"",updChanges:p})}),e("div",{className:"sendBtn _dsplFlx spaceAround ",style:{marginTop:8},children:o("div",{className:"in_stock_switch _dsplFlx",children:[e("div",{className:"in_stock_switch_btn",children:e(j,{initvalue:n("showAll_operationsHRG"),keyCode:77,updChange:g})}),e("span",{className:"sw_rgh_span",children:"Mostrar Todas"})]})}),e("div",{className:"flexSpace"})]}),e("div",{className:" _search_MrgV  ",children:n("showAll_operationsHRG")?null:e("div",{className:"years_card ",style:{marginLeft:"2vw"},children:e(q,{updChanges:c,placeholderCode:"buscar..."})})}),e("div",{className:"_dsplFlx  ",children:e("div",{className:"_dsplFlx cuenta_bx_details header",children:o("div",{className:"_dsplFlx ",children:[e("div",{className:"_header_item",style:{width:120},children:e("div",{children:"Fecha"})}),e("div",{className:"_header_item",style:{width:150},children:e("div",{children:"Documento"})}),e("div",{className:"_header_item",style:{width:120},children:e("div",{children:"Importe"})}),e("div",{className:"_header_item",style:{width:300},children:e("div",{children:"Nombre Asiento"})}),e("div",{className:"_header_item",style:{width:150},children:o("div",{children:["Debito"," "]})}),e("div",{className:"_header_item",style:{width:150},children:e("div",{children:"Credito"})})]})})}),e("div",{className:"operationsHRGlist",children:((C=y())==null?void 0:C.length)>0&&((I=y())==null?void 0:I.map(a=>a&&e(J,{item:a,refreshlist:s})))})]})},J=({item:t,refreshlist:l})=>{const c=s=>O("getSubAccountByopK_"+s,[n("sub_cuentas_dict"),s],()=>{var y,g;let i=(y=n("sub_cuentas_dict"))==null?void 0:y[s],p=(g=n("cuentaslist"))==null?void 0:g[i==null?void 0:i.accountId];return`${p==null?void 0:p.code}${i!=null&&i.subAccount?" - "+(i==null?void 0:i.subAccount):""}`}),h=()=>{v(S,t),v(S+"_backUp",JSON.stringify(t));let s={};s.zIndex=450,s.props={item:t,minHeight:"1vh",overlay:!0},H(s)},d=()=>{let s={};s.zIndex=450,s.props={item:t,minHeight:"1vh",overlay:!0},s.content=e(Q,{confirm:()=>l()}),H(s)};return e("div",{className:"_dsplFlx cuenta_details ",style:{},children:o("div",{className:"_dsplFlx cuenta_bx_details ",style:{},children:[o("div",{className:"_dsplFlx ",onClick:h,children:[e("div",{className:"_asiento_item",style:{width:120},children:e("div",{children:L(t.date)})}),e("div",{className:"_asiento_item",style:{width:150},children:e("div",{children:t.document})}),e("div",{className:"_asiento_item",style:{width:120},children:e("div",{children:t.amount})}),e("div",{className:"_asiento_item",style:{width:300},children:e("div",{children:t.entryName})}),e("div",{className:"_asiento_item",style:{width:150},children:o("div",{children:[c(t.debitAccount)," "]})}),e("div",{className:"_asiento_item",style:{width:150},children:e("div",{children:c(t.creditAccount)})})]}),e("div",{className:"flexSpace"}),e("div",{className:"_dsplFlx",children:e("div",{className:"_dsplFlx delete_icon",onClick:d,children:e(M,{name:"delete",size:24,color:"#b00000"})})})]})})},Q=({data:t,confirm:l})=>{const{modalID:c,item:h}=t||{},d=async()=>{let s={query:"deleteOperationsHRGs",params:{id:h.id}};const p=await T(f(),s);p&&p.data&&(z({id:c}),l(h))};return o("div",{...c?{"dialog-key-id":c}:"",className:"pym81b sendBx upd_alert_bx",style:{background:"var(--color_backgrond_input)"},children:[e("div",{className:"login_title ",style:{margin:"1vw"},children:e("div",{children:`Borrar Asiento "${h.name}"`})}),e("div",{className:"delete_alert_t2 ",children:e("div",{children:"Una vez borrado no podras recuperarlo"})}),e("div",{className:"sendBtn _dsplFlx spaceAround",children:e("div",{className:"play-button-wrapper",style:{margin:"2vw 1vw 0"},children:e("div",{className:"play-button",onClick:d,children:e("div",{className:"lbl",children:"Borrar"})})})})]})};function K(t,l,c){let h=JSON.parse(c),d=null;return t&&t.map((s,i)=>{l[s]!==h[s]&&(d||(d={}),d[s]=l[s])}),d}export{K as compareJson,$ as default};
