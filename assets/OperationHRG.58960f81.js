import{I as P,y as U,z as j,S as q,l as I,_ as A,u as J,m as Q,r as m,a as _,j as e,k as n,F as L,H as B,B as W,J as K,D as N,n as h,G as D,E,O as k,w as g,C as X}from"./index.2dd67c8e.js";const Y=P(),Z=U(),ee=j(),se=q(),te=I(()=>A(()=>import("./ViewAsientosBox.c374fd38.js"),["assets/ViewAsientosBox.c374fd38.js","assets/index.2dd67c8e.js","assets/index.1aca3d94.css"])),ae=I(()=>A(()=>import("./ViewAsientosItem.a59cfc44.js"),["assets/ViewAsientosItem.a59cfc44.js","assets/index.2dd67c8e.js","assets/index.1aca3d94.css"])),ie=I(()=>A(()=>import("./AddManuallyAsientos.d23388e1.js"),["assets/AddManuallyAsientos.d23388e1.js","assets/index.2dd67c8e.js","assets/index.1aca3d94.css"])),T="ctscont",oe=({view:a})=>{var O,H;J(Q);const[t,r]=m.exports.useState(""),[d,s]=m.exports.useState(""),[c,v]=m.exports.useState(!1),u=async()=>{let l={query:"getAllOperationsHRG",params:{businessId:n("businessId")}};const o=await N(g(),l);o&&o.data&&(h("operationsHRGlist",o.data),s(D()))},M=async()=>{let l={query:"getAllAccountsByUserId",params:{businessId:n("businessId")}};const o=await N(g(),l);o&&o.data&&h("cuentaslist",E(o.data,"accountId"));let f={query:"getAllSubAccounts",params:{businessId:n("businessId")}};const i=await N(g(),f);i&&i.data&&(h("sub_cuentas_list",i.data),h("sub_cuentas_dict",E(i.data,"sub_accountId")))};m.exports.useEffect(()=>()=>{},[]);const V=l=>{v(!0)},C=()=>W("operationsHRGListFilter",[n("operationsHRGlist"),t,n("showAll_operationsHRG")],()=>{var w;let l="date",x=["date","entryName","amount"];const o=i=>{var p,R;let b=!1;x.forEach(z=>{var S,G,F;(t==null?void 0:t.toLowerCase())&&((F=(G=(S=i==null?void 0:i[z])==null?void 0:S.toString())==null?void 0:G.toLowerCase())==null?void 0:F.indexOf(t.toLowerCase()))>=0&&(b=!0)});let y=(t==null?void 0:t.toLowerCase())&&((R=(p=i==null?void 0:i.key)==null?void 0:p.toLowerCase())==null?void 0:R.indexOf(t.toLowerCase()))>=0;if(n("showAll_operationsHRG")||b||y)return i},f=(i,b)=>{let y=i[l],p=b[l];return y<p?-1:y>p?1:0};return(w=n("operationsHRGlist"))==null?void 0:w.filter(o).sort(f)});m.exports.useEffect(()=>{setTimeout(()=>{window.scrollTo(0,0),M(),u()},170)},[a]);const $=l=>{h("showAll_operationsHRG",l),s(D())};return _("div",{className:"",style:{marginLeft:"2vw"},children:[e("div",{className:"login_title ",children:e("div",{children:"Operaciones"})}),_("div",{className:"_dsplFlx ",children:[e("div",{className:"login_title ",children:e(Z,{lbl:"Agregar ",icon:"account",theme:"",updChanges:V})}),e("div",{className:"sendBtn _dsplFlx spaceAround ",style:{marginTop:8},children:_("div",{className:"in_stock_switch _dsplFlx",children:[e("div",{className:"in_stock_switch_btn",children:e(ee,{initvalue:n("showAll_operationsHRG"),keyCode:77,updChange:$})}),e("span",{className:"sw_rgh_span",children:"Mostrar Todas"})]})}),e("div",{className:"flexSpace"})]}),c?e(ie,{close:()=>v(!1)}):_(L,{children:[e("div",{className:" _search_MrgV  ",children:n("showAll_operationsHRG")?null:e("div",{className:"years_card ",style:{marginLeft:"2vw"},children:e(se,{updChanges:r,placeholderCode:"buscar..."})})}),B()?null:e("div",{className:"_dsplFlx  ",children:e("div",{className:"_dsplFlx cuenta_bx_details header",children:_("div",{className:"_dsplFlx ",children:[e("div",{className:"_header_item",style:{width:120},children:e("div",{children:"Fecha"})}),e("div",{className:"_header_item",style:{width:150},children:e("div",{children:"Documento"})}),e("div",{className:"_header_item",style:{width:300},children:e("div",{children:"Nombre Asiento"})}),e("div",{className:"_header_item",style:{width:120,textAlign:"left"},children:"Importe"})]})})}),e("div",{className:"operationsHRGlist",children:((O=C())==null?void 0:O.length)>0&&((H=C())==null?void 0:H.map(l=>l&&e(L,{children:B()?e(ae,{refreshlist:u,item:l}):e(le,{item:l,refreshlist:u})})))})]})]})},le=({item:a,refreshlist:t})=>{const r=()=>{h(T,a),h(T+"_backUp",JSON.stringify(a));let s={};s.zIndex=450,s.props={item:a,minHeight:"1vh",overlay:!0},s.content=e(te,{refreshlist:t,item:a}),k(s)},d=()=>{let s={};s.zIndex=450,s.props={minHeight:"1vh",overlay:!0},s.content=e(ne,{confirm:()=>t(),item:a}),k(s)};return e("div",{className:"_dsplFlx cuenta_details ",style:{},children:_("div",{className:"_dsplFlx cuenta_bx_details ",style:{},children:[e("div",{children:_("div",{className:"_dsplFlx ",onClick:r,children:[e("div",{className:"_asiento_item",style:{width:120},children:e("div",{children:K(a.date)})}),e("div",{className:"_asiento_item",style:{width:150},children:e("div",{children:a.document})}),e("div",{className:"_asiento_item",style:{width:300},children:e("div",{children:a.entryName})}),e("div",{className:"_asiento_item",style:{width:120,textAlign:"right"},children:e("div",{children:(a.amount*1).toFixed(2)})})]})}),e("div",{className:"flexSpace"}),e("div",{className:"_dsplFlx",children:e("div",{className:"_dsplFlx delete_icon",onClick:d,children:e(Y,{name:"delete",size:24,color:"#b00000"})})})]})})},ne=({data:a,confirm:t,item:r})=>{const{modalID:d}=a||{},s=async()=>{let c={query:"deleteOperationsHRG",params:{operationId:r.operationId,businessId:n("businessId")}};const u=await N(g(),c);u&&u.data&&(X({id:d}),t(r))};return _("div",{...d?{"dialog-key-id":d}:"",className:"pym81b sendBx upd_alert_bx",style:{background:"var(--color_backgrond_input)"},children:[e("div",{className:"login_title ",style:{margin:"1vw"},children:e("div",{children:`Borrar Asiento "${r.document}"`})}),e("div",{className:"delete_alert_t2 ",children:e("div",{children:"Una vez borrado no podras recuperarlo"})}),e("button",{className:"btn login_button btn_submit btn_small",type:"submit",autocomplete:"off",tabindex:"0","data-uia":"login-submit-button",onClick:s,children:"Borrar"})]})};function de(a,t,r){let d=JSON.parse(r),s=null;return a&&a.map((c,v)=>{t[c]!==d[c]&&(s||(s={}),s[c]=t[c])}),s}export{de as compareJson,oe as default};
