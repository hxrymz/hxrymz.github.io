import{I as z,b as M,z as $,S as P,l as k,_ as T,u as U,c as j,r as y,a as p,j as e,f as r,D as F,H as q,F as J,a5 as Q,K as N,n as _,N as L,L as B,O as I,v as g,P as K}from"./index.514a39b7.js";const W=z(),X=M(),Y=$(),Z=P(),ee=k(()=>T(()=>import("./ViewAsientosBox.a6b22ee6.js"),["assets/ViewAsientosBox.a6b22ee6.js","assets/loginScreen.811cabed.css","assets/index.514a39b7.js","assets/index.f55f9e34.css"])),se=k(()=>T(()=>import("./ViewAsientosItem.1a2508bb.js"),["assets/ViewAsientosItem.1a2508bb.js","assets/loginScreen.811cabed.css","assets/index.514a39b7.js","assets/index.f55f9e34.css"])),D="ctscont",le=({view:a})=>{var A,H;U(j);const[t,d]=y.exports.useState(""),[c,s]=y.exports.useState(""),n=async()=>{let i={query:"getAllOperationsHRG",params:{businessId:r("businessId")}};const o=await N(g(),i);o&&o.data&&(_("operationsHRGlist",o.data),s(L()))},x=async()=>{let i={query:"getAllAccountsByUserId",params:{businessId:r("businessId")}};const o=await N(g(),i);o&&o.data&&_("cuentaslist",B(o.data,"accountId"));let f={query:"getAllSubAccounts",params:{businessId:r("businessId")}};const l=await N(g(),f);l&&l.data&&(_("sub_cuentas_list",l.data),_("sub_cuentas_dict",B(l.data,"sub_accountId")))};y.exports.useEffect(()=>()=>{},[]);const m=i=>{let h={};h.zIndex=450,h.props={item:i,minHeight:"700px",overlay:!0},I(h)},C=()=>q("operationsHRGListFilter",[r("operationsHRGlist"),t,r("showAll_operationsHRG")],()=>{var w;let i="date",h=["date","entryName","amount"];const o=l=>{var u,O;let v=!1;h.forEach(V=>{var S,R,G;(t==null?void 0:t.toLowerCase())&&((G=(R=(S=l==null?void 0:l[V])==null?void 0:S.toString())==null?void 0:R.toLowerCase())==null?void 0:G.indexOf(t.toLowerCase()))>=0&&(v=!0)});let b=(t==null?void 0:t.toLowerCase())&&((O=(u=l==null?void 0:l.key)==null?void 0:u.toLowerCase())==null?void 0:O.indexOf(t.toLowerCase()))>=0;if(r("showAll_operationsHRG")||v||b)return l},f=(l,v)=>{let b=l[i],u=v[i];return b<u?1:b>u?-1:0};return(w=r("operationsHRGlist"))==null?void 0:w.filter(o).sort(f)});y.exports.useEffect(()=>{setTimeout(()=>{window.scrollTo(0,0),x(),n()},170)},[a]);const E=i=>{_("showAll_operationsHRG",i),s(L())};return p("div",{className:"",style:{marginLeft:"2vw"},children:[e("div",{className:"login_title ",children:e("div",{children:"Operations"})}),p("div",{className:"_dsplFlx ",children:[e("div",{className:"login_title ",children:e(X,{lbl:"Agregar ",icon:"account",theme:"",updChanges:m})}),e("div",{className:"sendBtn _dsplFlx spaceAround ",style:{marginTop:8},children:p("div",{className:"in_stock_switch _dsplFlx",children:[e("div",{className:"in_stock_switch_btn",children:e(Y,{initvalue:r("showAll_operationsHRG"),keyCode:77,updChange:E})}),e("span",{className:"sw_rgh_span",children:"Mostrar Todas"})]})}),e("div",{className:"flexSpace"})]}),e("div",{className:" _search_MrgV  ",children:r("showAll_operationsHRG")?null:e("div",{className:"years_card ",style:{marginLeft:"2vw"},children:e(Z,{updChanges:d,placeholderCode:"buscar..."})})}),F()?null:e("div",{className:"_dsplFlx  ",children:e("div",{className:"_dsplFlx cuenta_bx_details header",children:p("div",{className:"_dsplFlx ",children:[e("div",{className:"_header_item",style:{width:120},children:e("div",{children:"Fecha"})}),e("div",{className:"_header_item",style:{width:150},children:e("div",{children:"Documento"})}),e("div",{className:"_header_item",style:{width:300},children:e("div",{children:"Nombre Asiento"})}),e("div",{className:"_header_item",style:{width:120},children:e("div",{children:"Importe"})})]})})}),e("div",{className:"operationsHRGlist",children:((A=C())==null?void 0:A.length)>0&&((H=C())==null?void 0:H.map(i=>i&&e(J,{children:F()?e(se,{refreshlist:n,item:i}):e(te,{item:i,refreshlist:n})})))})]})},te=({item:a,refreshlist:t})=>{const d=()=>{_(D,a),_(D+"_backUp",JSON.stringify(a));let s={};s.zIndex=450,s.props={item:a,minHeight:"1vh",overlay:!0},s.content=e(ee,{refreshlist:t,item:a}),I(s)},c=()=>{let s={};s.zIndex=450,s.props={minHeight:"1vh",overlay:!0},s.content=e(ae,{confirm:()=>t(),item:a}),I(s)};return e("div",{className:"_dsplFlx cuenta_details ",style:{},children:p("div",{className:"_dsplFlx cuenta_bx_details ",style:{},children:[e("div",{children:p("div",{className:"_dsplFlx ",onClick:d,children:[e("div",{className:"_asiento_item",style:{width:120},children:e("div",{children:Q(a.date)})}),e("div",{className:"_asiento_item",style:{width:150},children:e("div",{children:a.document})}),e("div",{className:"_asiento_item",style:{width:300},children:e("div",{children:a.entryName})}),e("div",{className:"_asiento_item",style:{width:120},children:e("div",{children:a.amount})})]})}),e("div",{className:"flexSpace"}),e("div",{className:"_dsplFlx",children:e("div",{className:"_dsplFlx delete_icon",onClick:c,children:e(W,{name:"delete",size:24,color:"#b00000"})})})]})})},ae=({data:a,confirm:t,item:d})=>{const{modalID:c}=a||{},s=async()=>{let n={query:"deleteOperationsHRG",params:{operationId:d.operationId,businessId:r("businessId")}};const m=await N(g(),n);m&&m.data&&(K({id:c}),t(d))};return p("div",{...c?{"dialog-key-id":c}:"",className:"pym81b sendBx upd_alert_bx",style:{background:"var(--color_backgrond_input)"},children:[e("div",{className:"login_title ",style:{margin:"1vw"},children:e("div",{children:`Borrar Asiento "${d.document}"`})}),e("div",{className:"delete_alert_t2 ",children:e("div",{children:"Una vez borrado no podras recuperarlo"})}),e("button",{className:"btn login_button btn_submit btn_small",type:"submit",autocomplete:"off",tabindex:"0","data-uia":"login-submit-button",onClick:s,children:"Borrar"})]})};function ne(a,t,d){let c=JSON.parse(d),s=null;return a&&a.map((n,x)=>{t[n]!==c[n]&&(s||(s={}),s[n]=t[n])}),s}export{ne as compareJson,le as default};
