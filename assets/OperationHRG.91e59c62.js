import{I as U,A as J,B as K,S as Q,l as R,_ as G,u as W,m as X,r as C,a as y,j as e,k as i,F as Y,K as Z,E as O,L as k,G as D,o as N,J as P,H as $,P as j,O as q,x as H,C as ee}from"./index.99da3eb9.js";import{g as I}from"./index.8bfbd684.js";const te=U(),se=J(),ae=K(),ne=Q(),oe=R(()=>G(()=>import("./ViewAsientosBox.5f916ec6.js"),["assets/ViewAsientosBox.5f916ec6.js","assets/index.99da3eb9.js","assets/index.f65525d5.css"]));R(()=>G(()=>import("./ViewAsientosItem.a013513e.js"),["assets/ViewAsientosItem.a013513e.js","assets/index.99da3eb9.js","assets/index.f65525d5.css","assets/index.8bfbd684.js"]));const ie=R(()=>G(()=>import("./AddManuallyAsientos.3140c7d4.js"),["assets/AddManuallyAsientos.3140c7d4.js","assets/index.99da3eb9.js","assets/index.f65525d5.css","assets/index.8bfbd684.js"])),ue=({view:l})=>{var s,b;W(X);const[o,u]=C.exports.useState(""),[m,c]=C.exports.useState(""),[d,p]=C.exports.useState(!1),t=async()=>{let a={query:"getAllOperationsHRG",params:{businessId:i("businessId")}};const r=await D(H(),a);r&&r.data&&(N("operationsHRGlist",r.data),p(!1),c(P()))},_=async()=>{let a={query:"getAllAccountsByUserId",params:{businessId:i("businessId")}};const r=await D(H(),a);r&&r.data&&N("cuentaslist",$(r.data,"accountId"));let g={query:"getAllSubAccounts",params:{businessId:i("businessId")}};const A=await D(H(),g);A&&A.data&&(N("sub_cuentas_list",A.data),N("sub_cuentas_dict",$(A.data,"sub_accountId")))};C.exports.useEffect(()=>()=>{},[]);const v=a=>{p(!0)},h=()=>O("operationsHRGListFilter",[i("operationsHRGlist"),o,i("showAll_operationsHRG")],()=>{var L;let a="date",x=["date","entryName","amount"],r={},g=[];const F=n=>{var w,E;let S=!1;x.forEach(z=>{var T,V,M;(o==null?void 0:o.toLowerCase())&&((M=(V=(T=n==null?void 0:n[z])==null?void 0:T.toString())==null?void 0:V.toLowerCase())==null?void 0:M.indexOf(o.toLowerCase()))>=0&&(S=!0)});let B=(o==null?void 0:o.toLowerCase())&&((E=(w=n==null?void 0:n.key)==null?void 0:w.toLowerCase())==null?void 0:E.indexOf(o.toLowerCase()))>=0;if(i("showAll_operationsHRG")||S||B)return r[n.document]||(r[n.document]={},g.push({document:n.document,date:n.date,entryName:n.entryName,description:n.description})),r[n.document][n.operationId]=n,n},A=(n,S)=>{let B=n[a],w=S[a];return B<w?-1:B>w?1:0};return(L=i("operationsHRGlist"))==null||L.filter(F),N("groupByDocument",r),g.sort(A)});C.exports.useEffect(()=>{setTimeout(()=>{window.scrollTo(0,0),_(),t()},170)},[l]);const f=a=>{N("showAll_operationsHRG",a),c(P())};return y("div",{className:"",style:{marginLeft:"2vw"},children:[e("div",{className:"login_title ",children:e("div",{children:"Comprobantes"})}),y("div",{className:"_dsplFlx ",children:[e("div",{className:"login_title ",children:e(se,{lbl:"Agregar ",icon:"account",theme:"",updChanges:v})}),e("div",{className:"sendBtn _dsplFlx spaceAround ",style:{marginTop:8},children:y("div",{className:"in_stock_switch _dsplFlx",children:[e("div",{className:"in_stock_switch_btn",children:e(ae,{initvalue:i("showAll_operationsHRG"),keyCode:77,updChange:f})}),e("span",{className:"sw_rgh_span",children:"Mostrar Todas"})]})}),e("div",{className:"flexSpace"})]}),d?e(ie,{close:()=>p(!1),refreshlist:t}):y(Y,{children:[e("div",{className:" _search_MrgV  ",children:i("showAll_operationsHRG")?null:e("div",{className:"years_card ",style:{marginLeft:"2vw"},children:e(ne,{updChanges:u,placeholderCode:"buscar..."})})}),Z()?null:e("div",{className:"_dsplFlx  ",children:e("div",{className:"_dsplFlx cuenta_bx_details header",children:y("div",{className:"_dsplFlx ",children:[e("div",{className:"_header_item",style:{width:120},children:e("div",{children:"Fecha"})}),e("div",{className:"_header_item",style:{width:150},children:e("div",{children:"Documento"})}),e("div",{className:"_header_item",style:{width:300},children:e("div",{children:"Nombre Asiento"})}),e("div",{className:"_header_item",style:{width:120,textAlign:"left"},children:"Importe"})]})})}),e("div",{className:"operationsHRGlist",children:((s=h())==null?void 0:s.length)>0&&((b=h())==null?void 0:b.map(a=>a&&e(le,{item:a,refreshlist:t})))})]})]})},le=({item:l,refreshlist:o})=>{var p;const u=t=>O("getSumAmount_"+t,[i("groupByDocument"),t],()=>{var v,h;let _=0;return(h=j(((v=i("groupByDocument"))==null?void 0:v[t])||{}))==null||h.map(f=>{var s,b,a,x,r,g;(a=(b=(s=i("groupByDocument"))==null?void 0:s[t])==null?void 0:b[f])!=null&&a.creditAccount&&(_+=((g=(r=(x=i("groupByDocument"))==null?void 0:x[t])==null?void 0:r[f])==null?void 0:g.amount)*1)}),_}),m=t=>O("getEntriesByDocument_"+t,[i("groupByDocument"),t],()=>{var v,h;let _=[];return(h=j(((v=i("groupByDocument"))==null?void 0:v[t])||{}))==null||h.map(f=>{var b,a;let s=(a=(b=i("groupByDocument"))==null?void 0:b[t])==null?void 0:a[f];s!=null&&s.debitAccount&&_.push({account:I(s.debitSubAccount),sub_acc:I(s.debitSubAccount,!0),debit:s.amount}),s!=null&&s.creditAccount&&_.push({account:I(s.creditSubAccount),sub_acc:I(s.creditSubAccount,!0),credit:s.amount})}),_}),c=()=>{N("entries2View",m(l.document));let t={};t.zIndex=450,t.props={item:l,minHeight:"1vh",overlay:!0},t.content=e(oe,{refreshlist:o,item:l}),q(t)},d=()=>{let t={};t.zIndex=450,t.props={minHeight:"1vh",overlay:!0},t.content=e(re,{confirm:()=>o(),item:l}),q(t)};return e("div",{className:"_dsplFlx cuenta_details ",style:{},children:y("div",{className:"_dsplFlx cuenta_bx_details ",style:{},children:[e("div",{children:y("div",{className:"_dsplFlx ",onClick:c,children:[e("div",{className:"_asiento_item",style:{width:120},children:e("div",{children:k(l.date)})}),e("div",{className:"_asiento_item",style:{width:150},children:e("div",{children:l.document})}),e("div",{className:"_asiento_item",style:{width:300},children:e("div",{children:l.entryName?l.entryName:"Custom"})}),e("div",{className:"_asiento_item",style:{width:120,textAlign:"right"},children:e("div",{children:(p=u(l.document))==null?void 0:p.toFixed(2)})})]})}),e("div",{className:"flexSpace"}),e("div",{className:"_dsplFlx",children:e("div",{className:"_dsplFlx delete_icon",onClick:d,children:e(te,{name:"delete",size:24,color:"#b00000"})})})]})})},re=({data:l,confirm:o,item:u})=>{const{modalID:m}=l||{},c=async()=>{let d={query:"deleteOperationsHRG",params:{operationId:u.operationId,businessId:i("businessId")}};const t=await D(H(),d);t&&t.data&&(ee({id:m}),o(u))};return y("div",{...m?{"dialog-key-id":m}:"",className:"pym81b sendBx upd_alert_bx",style:{background:"var(--color_backgrond_input)"},children:[e("div",{className:"login_title ",style:{margin:"1vw"},children:e("div",{children:`Borrar Asiento "${u.document}"`})}),e("div",{className:"delete_alert_t2 ",children:e("div",{children:"Una vez borrado no podras recuperarlo"})}),e("button",{className:"btn login_button btn_submit btn_small",type:"submit",autocomplete:"off",tabindex:"0","data-uia":"login-submit-button",onClick:c,children:"Borrar"})]})};function me(l,o,u){let m=JSON.parse(u),c=null;return l&&l.map((d,p)=>{o[d]!==m[d]&&(c||(c={}),c[d]=o[d])}),c}export{me as compareJson,ue as default};
