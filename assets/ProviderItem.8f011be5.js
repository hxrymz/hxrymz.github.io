import{j as i,a as o,S as O,ad as T,ae as $,r as t,t as j,b as k,g as r,u as n}from"./index.9d80a6be.js";/* empty css                   */import{CloseModal as w,OpenModal as P}from"./DialogHRM.691362e1.js";import{a as L,g as U,d as B}from"./server_fetching.da785052.js";import{a as J,g as R,b as K}from"./server_fetching.d11ad7c6.js";/* empty css                  */const q=({data:e,confirm:u,handleClick:v,close:a})=>{const{modalID:p}=e,m=_=>{w({id:p})};return i("div",{style:{maxHeight:"40vh",minHeight:"28vh",overflow:"auto",background:"#fff",borderRadius:13,padding:"10px 19px"},children:[i("div",{className:"_dsplFlx ",children:[o("p",{className:"form_title",children:"Eliminar Comprobante"}),o("div",{className:"flexSpace"})]}),o("div",{className:"_dsplFlx ",children:o("span",{children:"Una vez eliminado no podra ser recuperado"})}),i("div",{className:"_dsplFlx ",style:{padding:"15px 10px"},children:[o("div",{className:"flexSpace"}),o("p",{className:"group_title addBtn",onClick:m,children:"Cancelar"}),o("p",{className:"group_title addBtn red",onClick:()=>{u(),m()},children:"Eliminar"})]})]})},G=O(),Q=T(),V=$(),ce=({data:e,elmId:u,handleRefreshAll:v})=>{var N,x,y,C,S,I,A;const[a,p]=t.exports.useState(!1),[m,d]=t.exports.useState(0),[_,h]=t.exports.useState(0),g=j();let l=e.account+"_"+e.subAccount;t.exports.useEffect(()=>{a||(p(!0),d(k()))});const b=()=>{d(k())},F=()=>{U(b)},f=async()=>{n("upd_provider",e),n("upd_provider_bck",JSON.parse(JSON.stringify(e)));let s={};s.zIndex=450,s.height="80vh",s.props={minHeight:"1vh",overlay:!0},s.content=o(Q,{confirm:F}),P(s)},z=s=>{if((e==null?void 0:e.type)==="provider"){let c={account:e==null?void 0:e.account,subAccount:e==null?void 0:e.subAccount,customerId:e==null?void 0:e.customerId};n("Acc2Pay",c),J(()=>{g({pathname:"/pay"})})}else if((e==null?void 0:e.type)==="customer"){let c={account:e==null?void 0:e.account,subAccount:e==null?void 0:e.subAccount,customerId:e==null?void 0:e.customerId};n("Acc2Collect",c),R(()=>{g({pathname:"/collect"})})}},M=()=>{B(e==null?void 0:e.providerId,v)},D=()=>{let s=r("lastTimeCallModal")||0;if(Date.now()>s){n("lastTimeCallModal",Date.now()+320);let c={};c.zIndex=450,c.height="40vh",c.props={minHeight:"1vh",overlay:!0,closeEvent:()=>{}},c.content=o(q,{confirm:M,item:e}),P(c)}};L((N=r("sub_provider_group"))==null?void 0:N[e.providerId],"subProvider");const E=s=>{K(e,l,()=>{setTimeout(()=>{h(!1),b()},200)})},H=s=>{var c;(c=r("rec_by_acc"))!=null&&c[l]||(h(!0),E())};return o("div",{className:"item_acc",id:`${l}`,children:i("div",{className:"_dsplFlx item_box provider_header",onMouseEnter:H,children:[i("div",{className:"_dsplFlx",onClick:f,children:[o("div",{className:"code"}),o("div",{className:"name",children:e==null?void 0:e.name}),o("div",{className:"unit",children:e==null?void 0:e.unit})]}),o("div",{className:"flexSpace"}),_?i("div",{className:"_dsplFlx",onClick:f,children:[o("div",{className:"icon",style:{marginRight:19},children:o(V,{stroke:"#646cff",size:24})}),o("div",{className:"loading_lbl",children:"cargando ...."})]}):o("div",{className:" addSbAcc purple",onClick:()=>z(),children:(e==null?void 0:e.type)==="provider"?((x=r("rec_by_acc"))==null?void 0:x[l])&&!isNaN(((y=r("rec_by_acc"))==null?void 0:y[l])*-1)?`Por Pagar $${(((C=r("rec_by_acc"))==null?void 0:C[l])*-1).toFixed(2)}`:null:((S=r("rec_by_acc"))==null?void 0:S[l])&&!isNaN(((I=r("rec_by_acc"))==null?void 0:I[l])*1)?`Por Cobrar $${(((A=r("rec_by_acc"))==null?void 0:A[l])*1).toFixed(2)}`:null}),o("div",{className:"icon",style:{marginLeft:19},onClick:D,children:o(G,{name:"outline_delete",color:"#c62828"})})]})})};export{ce as default};
