import{k as q,d as R,T,r as b,u,g as d,j as p,a as t,b as n,H as j,p as _}from"./index.31b09617.js";/* empty css                */import{CloseModal as k}from"./DialogHRM.d8036a1f.js";/* empty css                  */q();R();const m=T(),o="entry_operation_comprobante",U=({data:i,confirm:h,item:c})=>{var x,g,I,C,v,N;const[w,D]=b.exports.useState(!1),[G,f]=b.exports.useState(0);b.exports.useEffect(()=>{w||(D(!0),u("accountPicker",{}),f(d()))});const l=(e,r,a)=>{let s=n(o)||{};a?(s[a]||(s[a]={}),s[a][e]=r):s[e]=r,u(o,s),f(d())},A=async()=>{var S,y;let e={...n(o)};e.date||(e.date=Date.now());let r=new Date;e.comprobanteId=r.getFullYear()+""+(r.getMonth()+1)+"-"+j(),e.amount=e.amount*1,e.description=c.name;let a={...e};a.type="debit",a.account=c.debitAccount,a.subAccount=c.debitSubAccount,a.operationId=d();let s={...e};s.type="credit",s.account=c.creditAccount,s.subAccount=c.creditSubAccount,s.operationId=d();let F={query:"addOperationsHRG",params:{businessId:(S=n("profileUser"))==null?void 0:S.businessId},form:a},H={query:"addOperationsHRG",params:{businessId:(y=n("profileUser"))==null?void 0:y.businessId},form:s};await _(F),await _(H),i!=null&&i.modalID&&k({id:i==null?void 0:i.modalID}),setTimeout(()=>{u("accountListOnCmp",null),u(o,null),f(d()),h&&h()},400)};return p("div",{style:{maxHeight:"90vh",minHeight:"88vh",width:"560px",overflow:"auto",background:"#fff",borderRadius:13,padding:"10px 19px"},children:[p("div",{className:"_dsplFlx ",children:[t("p",{className:"form_title",children:"Asiento Manual"}),t("div",{className:"flexSpace"})]}),p("div",{className:"_dsplFlx ",children:[t(m,{init:(x=n(o))==null?void 0:x.date,label:"Fecha",width:120,updChanges:e=>l("date",e)}),t("div",{className:"flexSpace"}),t("div",{className:"",style:{maxWidth:130},children:t(m,{init:(g=n("accountPicker"))==null?void 0:g.amount,label:"Importe",width:120,type:"number",updChanges:e=>l("amount",e)})}),t("div",{className:"flexSpace"}),t(m,{init:(I=n(o))==null?void 0:I.document,label:"Documento",width:120,updChanges:e=>l("document",e)})]}),t(m,{init:(C=n(o))==null?void 0:C.description,label:"Descripcion",width:520,updChanges:e=>l("description",e)}),p("div",{className:"_dsplFlx ",children:[t("div",{className:"flexSpace"}),((v=n(o))==null?void 0:v.document)&&((N=n(o))==null?void 0:N.amount)?t("div",{className:"card",children:t("button",{className:"group_title addBtn purple",onClick:A,children:"Guardar"})}):null]})]})};export{U as default};
