import{k as j,d as k,T as G,r as h,u as p,g as d,j as m,a as t,b as s,H as M,p as O}from"./index.45b640e6.js";/* empty css                */import{CloseModal as z}from"./DialogHRM.86667e02.js";/* empty css                  */j();k();const f=G(),c="entry_operation_comprobante",J=({data:r,confirm:C,item:n})=>{var x,y,g,I,v,_;const[F,H]=h.exports.useState(!1),[B,b]=h.exports.useState(0);h.exports.useEffect(()=>{F||(H(!0),p("accountPicker",{}),b(d()))});const u=(e,l,a)=>{let o=s(c)||{};a?(o[a]||(o[a]={}),o[a][e]=l):o[e]=l,p(c,o),b(d())},q=async()=>{var S,w,A,D;let e={...s(c)};e.date||(e.date=Date.now());let l=new Date;e.comprobanteId=l.getFullYear()+""+(l.getMonth()+1)+"-"+M(),e.amount=e.amount*1,e.description=n.name;let a={...e};a.type="debit",a.account=n.debitAccount,a.subAccount=n.debitSubAccount,a.operationId=d();let o=(S=s("account_ids"))==null?void 0:S[n.debitAccount];o.payOrCollect&&(i.payOrCollect=o.payOrCollect);let i={...e};i.type="credit",i.account=n.creditAccount;let N=(w=s("account_ids"))==null?void 0:w[n.creditAccount];N.payOrCollect&&(i.payOrCollect=N.payOrCollect),i.subAccount=n.creditSubAccount,i.operationId=d();let R={query:"addOperationsHRG",params:{businessId:(A=s("profileUser"))==null?void 0:A.businessId},form:a},T={query:"addOperationsHRG",params:{businessId:(D=s("profileUser"))==null?void 0:D.businessId},form:i};await O(R),await O(T),r!=null&&r.modalID&&z({id:r==null?void 0:r.modalID}),setTimeout(()=>{p("accountListOnCmp",null),p(c,null),b(d()),C&&C()},400)};return m("div",{style:{maxHeight:"90vh",minHeight:"88vh",width:"560px",overflow:"auto",background:"#fff",borderRadius:13,padding:"10px 19px"},children:[m("div",{className:"_dsplFlx ",children:[t("p",{className:"form_title",children:"Asiento Manual"}),t("div",{className:"flexSpace"})]}),m("div",{className:"_dsplFlx ",children:[t(f,{init:(x=s(c))==null?void 0:x.date,label:"Fecha",width:120,updChanges:e=>u("date",e)}),t("div",{className:"flexSpace"}),t("div",{className:"",style:{maxWidth:130},children:t(f,{init:(y=s("accountPicker"))==null?void 0:y.amount,label:"Importe",width:120,type:"number",updChanges:e=>u("amount",e)})}),t("div",{className:"flexSpace"}),t(f,{init:(g=s(c))==null?void 0:g.document,label:"Documento",width:120,updChanges:e=>u("document",e)})]}),t(f,{init:(I=s(c))==null?void 0:I.description,label:"Descripcion",width:520,updChanges:e=>u("description",e)}),m("div",{className:"_dsplFlx ",children:[t("div",{className:"flexSpace"}),((v=s(c))==null?void 0:v.document)&&((_=s(c))==null?void 0:_.amount)?t("div",{className:"card",children:t("button",{className:"group_title addBtn purple",onClick:q,children:"Guardar"})}):null]})]})};export{J as default};
