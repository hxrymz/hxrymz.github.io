import{O as G,u as y,T as de,P as le,r as O,g as P,j,a as i,b as a,f as pe,c as ce,X as q,x as fe}from"./index.5e7d3da0.js";import{P as me,S as _e,r as S}from"./PDFButton.40b48a62.js";import{OpenModal as ye}from"./DialogHRM.6670a4f3.js";/* empty css                  */const ue={type:"text",text:"",x:48,y:215,size:12,pageNo:0},ge={type:"text",text:"",size:12,x:95,y:215,pageNo:0},xe={type:"text",text:"",size:12,x:135,y:454,pageNo:0},he={type:"text",text:"",size:12,x:290,y:214,pageNo:0},be={type:"text",text:"",size:12,x:490,y:214,pageNo:0},Ne={type:"text",text:"",x:162,y:256,size:12,pageNo:0},Ce={type:"text",text:"",size:12,x:292,y:270,pageNo:0},we={type:"text",text:"",size:12,x:490,y:270,pageNo:0},Te={type:"text",text:"",size:12,x:115,y:284,pageNo:0},ze={type:"text",text:"",x:120,y:298,size:12,pageNo:0},Ie={type:"text",text:"",x:124,y:312,size:12,pageNo:0},Me={type:"text",text:"",x:162,y:355,size:12,pageNo:0},Se={type:"text",text:"",size:12,x:292,y:369,pageNo:0},Pe={type:"text",text:"",size:12,x:490,y:369,pageNo:0},Oe={type:"text",text:"",size:12,x:115,y:382,pageNo:0},De={type:"text",text:"",x:120,y:396,size:12,pageNo:0},Fe={type:"text",text:" ",x:124,y:410,size:12,pageNo:0},ke={type:"text",text:"",size:12,x:110,y:566,pageNo:0},Be={type:"text",text:"",size:12,x:110,y:580,pageNo:0},Le={type:"text",text:"",size:12,x:240,y:678,pageNo:0},je={type:"text",text:"",size:12,x:147,y:467,pageNo:0},qe={type:"text",text:"",size:12,x:469,y:580,pageNo:0},Ae={type:"text",text:" ",x:294,y:510,size:12,pageNo:0},Ue={type:"text",text:" ",x:490,y:510,size:12,pageNo:0},$e={type:"text",text:"",size:12,x:292,y:439,pageNo:0},Je={type:"text",text:"",size:12,x:490,y:439,pageNo:0},Re={tomo:ue,folio:ge,date_of_married:xe,city_registration:he,state_registration:be,name:Ne,city_pob:Ce,state_pob:we,dob_p:Te,fatherName:ze,motherName:Ie,name_sp2:Me,city_pob_sp2:Se,state_pob_sp2:Pe,dob_p_sp2:Oe,fatherName_sp2:De,motherName_sp2:Fe,revised_by:ke,prepared_by:Be,registration_officer:Le,marriage_registration_officer:je,date_of_peticion:qe,city_office:Ae,state_office:Ue,city2_registration:$e,state2_registration:Je};function Ee(e){let x=new Blob([e],{type:"application/pdf"});return(window.URL||window.webkitURL).createObjectURL(x)}async function He(e,x,h){let l=Re||[];G(e).map(f=>{l[f]&&e[f]&&(l[f].text=e[f])});const z=await fetch("http://192.168.1.235/getStatic/marriage_certificate.pdf").then(f=>f.arrayBuffer()),u=await me.load(z,{ignoreEncryption:!0}),g=await u.embedFont(_e.Helvetica),d=u.getPages(),c=d[0],{width:$,height:J}=c.getSize();if(y("pdfSize",{width:$,height:J,pages:d.length}),h&&l&&G(l).map(f=>{var D,F,k,B;let s=l[f];if(s){let b=s.pageNo,N=(D=d==null?void 0:d[b])==null?void 0:D.getSize();if(s.type==="text")(F=d[b])==null||F.drawText(s.text?s.text.toString():"",{x:s.x,y:N.height-s.y,size:s.size||10,font:g,color:s.color?S(s.color[0]/255,s.color[1]/255,s.color[2]/255):S(0,.1,.1)});else if(s.type==="textboxn"){let C=(s.text?s.text.toString():s.id.toString()).split("");C==null||C.map((M,A)=>{var L;(L=d[b])==null||L.drawText(M,{x:s.x+A*s.space,y:N.height-s.y,size:s.size||10,font:g,color:s.color?S(s.color[0]/255,s.color[1]/255,s.color[2]/255):S(0,.1,.1)})})}else if(s.type==="checkBox"){let C=(N==null?void 0:N.height)-s.y,M="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z";(k=d[b])==null||k.moveTo(s.x+2,C),(B=d[b])==null||B.drawSvgPath(M,{borderColor:s.color?S(s.color[0]/255,s.color[1]/255,s.color[2]/255):S(0,0,0),borderWidth:1,scale:.5})}}}),x){const f=await u.save();return Ee(f)}else return u.saveAsBase64({dataUri:!0})}const m=de(),r="marriage_certificate",Ge=le();let Ke=["folio","tomo","state_registration","registration_officer","revised_by","prepared_by","city_office","state_office","city_registration","dop","dom","marriage_registration_officer","spouse2Id"];const Qe=({data:e,elmId:x,updObs:h,close:l})=>{var D,F,k,B,b,N,C,M,A,L,K,V,W,X,Z,Q,Y,v,ee,te,ie,oe,ae,se;const[T,z]=O.exports.useState(!1),[u,g]=O.exports.useState(0),d=async()=>{var w,n,re,ne;let t={query:"getScanDocumentsNotary",params:{":customerId":a("upd_client").clientNotaryId,":documentType":"MCT"},queryString:"!* contain :customerId AND documentType contain :documentType"};const o=await pe(ce(),t);if(o&&o.data&&!o.data.error){let I=G(o.data)[0],R=a("upd_client");if(o.data[I]){y(r,o.data[I]),y(r+"_bck",JSON.parse(JSON.stringify(o.data[I])));let E=U(R);if(((w=o.data[I])==null?void 0:w.spouse1Id)===R.clientNotaryId){y("MCT_spouse1",E);let H=U((n=o.data[I])==null?void 0:n.spouse2Info);y("MCT_spouse1",E),y("MCT_spouse2",H)}else if(((re=o.data[I])==null?void 0:re.spouse2Id)===R.clientNotaryId){let H=U((ne=o.data[I])==null?void 0:ne.spouse1Info);y("MCT_spouse2",E),y("MCT_spouse1",H)}g(P())}else y("MCT_spouse1",frm_userInfo)}};O.exports.useEffect(()=>{T||(z(!0),d(),g(P()))});const c=(t,p)=>{let o=a(r)||{};o[t]=p,y(r,o),g(P())},$=async()=>{let t=["name","city_pob","state_pob","dob","fatherName","motherName"],p={};t.map(n=>{p[n+"_sp2"]=a("MCT_spouse2")[n]});let o=Object.assign({},a(r),a("MCT_spouse1"),p);if(o.dob){let n=new Date(o.dob).getTime();n&&(o.dob_p=q(n))}if(o.dob_sp2){let n=new Date(o.dob_sp2).getTime();n&&(o.dob_p_sp2=q(n))}if(o.dom){let n=new Date(o.dom).getTime();n&&(o.date_of_married=q(n))}if(o.dop){let n=new Date(o.dop).getTime();n&&(o.date_of_peticion=q(n))}o.city2_registration=o.city_registration,o.state2_registration=o.state_registration;let w=await He(o,!0,!0);window.open(w)},J=async()=>{let t=a(r),p={};if(t.documentNotaryId){let n=fe(Ke,a(r),a(r+"_bck"));p={query:"updateDocumentsNotary",params:{documentNotaryId:t.documentNotaryId},data2update:n.data}}else t.spouse1Id=a("upd_client").clientNotaryId,t.documentType="MCT",t.documentNotaryId=P(),p={query:"addDocumentsNotary",form:t};const w=await pe(ce(),p);w&&w.data&&(y(r,w.data),g(P()),l(!0))},f=(t,p)=>{c(p,t.clientNotaryId);let o=U(t);y("MCT_spouse2",o)},s=t=>{let p={};p.zIndex=450,p.props={minHeight:"1vh",overlay:!0},p.content=i(Ge,{handleClick:o=>f(o,t)}),ye(p)};return j("div",{children:[j("div",{className:"_dsplFlx ",children:[i("p",{className:"form_title",children:"Traducion de Certificacion de Matrimonio"}),i("div",{className:"flexSpace"}),i("p",{className:"group_title addBtn",onClick:()=>l(!1),children:"cerrar"})]}),i("p",{className:"group_title",children:"Lugar y datos del Matrimonio"}),j("div",{className:"_dsplFlx spaceAround",children:[i(m,{init:(D=a(r))==null?void 0:D.folio,label:"Folio",width:60,updChanges:t=>c("folio",t)}),i(m,{init:(F=a(r))==null?void 0:F.tomo,label:"Tomo",width:60,updChanges:t=>c("tomo",t)})]}),i(m,{init:(k=a(r))==null?void 0:k.dom,label:"Fecha de matrimonio",width:360,updChanges:t=>c("dom",t)}),i(m,{init:(B=a(r))==null?void 0:B.city_registration,label:"Municipio",width:360,updChanges:t=>c("city_registration",t)}),i(m,{init:(b=a(r))==null?void 0:b.state_registration,label:"Provincia",width:360,updChanges:t=>c("state_registration",t)}),i(m,{init:(N=a(r))==null?void 0:N.marriage_registration_officer,label:"Nombre de la Notaria",width:360,updChanges:t=>c("marriage_registration_officer",t)}),i("div",{className:"separator"}),i("p",{className:"group_title",children:"Oficina donde se solitito el Documento"}),i(m,{init:(C=a(r))==null?void 0:C.dop,label:"Fecha de solicitud",width:360,updChanges:t=>c("dop",t)}),i(m,{init:(M=a(r))==null?void 0:M.city_office,label:"Municipio",width:360,updChanges:t=>c("city_office",t)}),i(m,{init:(A=a(r))==null?void 0:A.state_office,label:"Provincia",width:360,updChanges:t=>c("state_office",t)}),i(m,{init:(L=a(r))==null?void 0:L.prepared_by,label:"Preparado por",width:360,updChanges:t=>c("prepared_by",t)}),i(m,{init:(K=a(r))==null?void 0:K.revised_by,label:"Revisado por",width:360,updChanges:t=>c("revised_by",t)}),i(m,{init:(V=a(r))==null?void 0:V.registration_officer,label:"Firmado por",width:360,updChanges:t=>c("registration_officer",t)}),i("div",{className:"separator"}),i("p",{className:"group_title",children:"Conyuge (1)"}),i(_,{init:(W=a("MCT_spouse1"))==null?void 0:W.name,label:"Nombre",width:520}),i(_,{init:(X=a("MCT_spouse1"))==null?void 0:X.dateOfBirth,label:"Fecha de nacimiento",width:360}),i(_,{init:(Z=a("MCT_spouse1"))==null?void 0:Z.city_pob,label:"Municipio",width:360}),i(_,{init:(Q=a("MCT_spouse1"))==null?void 0:Q.state_pob,label:"Provincia",width:360}),i(_,{init:(Y=a("MCT_spouse1"))==null?void 0:Y.fatherName,label:"Nombre del Padre",width:360}),i(_,{init:(v=a("MCT_spouse1"))==null?void 0:v.motherName,label:"Nombre de la Madre",width:360}),i("div",{className:"separator"}),i("p",{className:"group_title",onClick:()=>s("spouse2Id"),children:"Conyuge (2)"}),i(_,{init:(ee=a("MCT_spouse2"))==null?void 0:ee.name,label:"Nombre",width:520}),i(_,{init:(te=a("MCT_spouse2"))==null?void 0:te.dateOfBirth,label:"Fecha de nacimiento",width:360}),i(_,{init:(ie=a("MCT_spouse2"))==null?void 0:ie.city_pob,label:"Municipio",width:360}),i(_,{init:(oe=a("MCT_spouse2"))==null?void 0:oe.state_pob,label:"Provincia",width:360}),i(_,{init:(ae=a("MCT_spouse2"))==null?void 0:ae.fatherName,label:"Nombre del Padre",width:360}),i(_,{init:(se=a("MCT_spouse2"))==null?void 0:se.motherName,label:"Nombre de la Madre",width:360}),j("div",{className:"card _dsplFlx",children:[i("button",{onClick:J,children:"Guardar"}),i("div",{className:"flexSpace"}),i("button",{onClick:$,children:"Imprimir"})]})]})},_=({init:e,label:x,width:h})=>{const[l,T]=O.exports.useState(!1),[z,u]=O.exports.useState(0);return O.exports.useEffect(()=>{l||(T(!0),u(P()))}),e?j("div",{children:[i("p",{className:"label",children:x}),i("div",{style:h?{width:h}:null,className:"r7gAOb yyJm8b",children:e})]}):null},U=e=>{var x,h,l,T,z,u,g,d;return{city_pob:(x=e==null?void 0:e.placeOfBirth)==null?void 0:x.city,state_pob:(h=e==null?void 0:e.placeOfBirth)==null?void 0:h.state,fatherName:(l=e==null?void 0:e.fatherInfo)!=null&&l.firstName?`${(T=e==null?void 0:e.fatherInfo)==null?void 0:T.firstName} ${(z=e==null?void 0:e.fatherInfo)==null?void 0:z.lastName} `:"",dob:e==null?void 0:e.dob,dateOfBirth:q(e==null?void 0:e.dob),motherName:(u=e==null?void 0:e.motherInfo)!=null&&u.firstName?`${(g=e==null?void 0:e.motherInfo)==null?void 0:g.firstName} ${(d=e==null?void 0:e.motherInfo)==null?void 0:d.lastName} `:"",name:e!=null&&e.firstName?`${e==null?void 0:e.firstName} ${e==null?void 0:e.lastName} `:""}};export{Qe as default};
