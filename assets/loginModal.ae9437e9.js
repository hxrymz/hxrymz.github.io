import{x as I,l as L,_ as U,u as q,f as z,r as l,a as p,j as e,e as h,h as V,k as $,m as P,J as T,p as j,t as B}from"./index.5d7f8be5.js";import{v as x}from"./validations.6c3f96aa.js";const v=I(),H=L(()=>U(()=>import("./index.1feb8808.js"),["assets/index.1feb8808.js","assets/index.e20b7794.css","assets/index.5d7f8be5.js","assets/index.95310fc6.css"])),d="loginFrm",Q=b=>{q(z);const{data:N}=b,{modalID:c}=N,[w,y]=l.exports.useState(!1),[i,C]=l.exports.useState(!1),[S,r]=l.exports.useState(!1),[k,s]=l.exports.useState(""),[E,_]=l.exports.useState(!1);let u={password:{reqired:!0,minLength:6},username:{reqired:!0,minLength:5}};i&&(u={phoneNumber:{reqired:!0,number:!0,minLength:8,maxLength:8},password:{reqired:!0,minLength:6},username:{reqired:!0,minLength:5}}),l.exports.useEffect(()=>{w||y(!0)});const m=(a,o)=>{let n=h(d)||{};n[a]=o,V(d,n),g()},g=async()=>{let a=h(d)||{};var o=x(u,a);o.valid?(_(o.valid),r(!1)):(_(o.valid),r(!0),s(o.msg))};return p("div",{...c?{"dialog-key-id":c}:"",className:"pym81b sendBx upd_alert_bx",style:{background:"var(--color_backgrond_input)"},children:[e("style",{children:`
        .palette{
          --base-color: rgb(21, 100, 191,1);
          --base-color-gradient: 21, 100, 191;
        }
        `}),p("div",{className:" _dsplFlx",children:[e("div",{className:"flexSpace"}),e("div",{className:"singUp",onClick:()=>{C(!i),setTimeout(()=>g(),350)},children:i?"volver a login":"registrarse"})]}),e("div",{className:"login_title ",children:e("div",{children:i?"Crear cuenta":"Iniciar Seccion"})}),e("div",{className:"delete_alert_t2 ",children:e("div",{children:i?"rellene el formulario para crear su cuenta ser\xE1 activada en ~ 24h":"debe estar logeado para acceder a los titulos y ver el contenido"})}),p("div",{className:"sendBtn  _mrgSwith  margin_form",children:[e("div",{className:"years_card input_username_width",children:e(v,{updChanges:a=>m("username",a),placeholderCode:"Usuario",type:"text",icon:"user"})}),e("div",{className:"years_card input_username_width",children:e(v,{updChanges:a=>m("password",a),placeholderCode:"Contrase\xF1a",icon:"key",type:"password"})}),i&&e("div",{className:"years_card input_username_width",children:e(v,{updChanges:a=>m("phoneNumber",a),placeholderCode:"Telefono",icon:"cellphone",type:"number"})})]}),S&&e("div",{className:"has_error_lbl ",children:e("div",{children:k})}),e("div",{className:"sendBtn _dsplFlx spaceAround",children:E&&e(H,{icon:"",lbl:i?"Suscr\xEDbirse":"Inicia sesi\xF3n",clickEvt:async()=>{let a=h(d)||{},o={query:i?"singup":"login",params:a};var n=x(u,a);if(n.valid){const t=await $(j(),o);if(t&&t.data)if(t.data.error==="507")r(!0),s("Usuario o contrase\xF1a invalidos");else if(t.data.error==="509")r(!0),s("Dispositivo no authorizado");else if(t.data.error==="607")r(!0),s("Cuenta desactivada por pago no realizado");else if(t.data.error==="609")r(!0),s("Cuenta desactivada");else if(t.data.error==="532")r(!0),s("Usuario en uso");else if(t.data.error==="535")r(!0),s("Dispositivo utilizado por otra cuenta");else{s("");let F=new Date().getTime();var f=new Date(F+6e4*60*24*365);let D=B();document.cookie=`${D}=${t.data}; expires=${f}; path=/;g_state = {"i_l":1,"i_p":${f}}`,window.location.reload(!0),P(),T({id:c})}}else s(n.msg),r(!0)}})})]})};export{Q as default};
