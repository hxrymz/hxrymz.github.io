import{b as l,p as b,u as i,q as A,s as g,t as y,v as m,O as f}from"./index.77dade03.js";const I=async t=>{var s;let e={query:"getAllAccountsByUserId",params:{limit:250,businessId:(s=l("profileUser"))==null?void 0:s.businessId,":search":l("searchQry")},queryString:"!* contain :search"};const c=await b(e);c&&(i("account_list",_(c,"code")),i("account_ids",A(c,"accountId")),t&&t())},O=async t=>{var s;let e={query:"getAllSubAccounts",params:{limit:250,businessId:(s=l("profileUser"))==null?void 0:s.businessId},queryString:"!* contain :search"};const c=await b(e);c&&(i("sub_account_list",h(c,"subAccount")),i("sub_account_group",g(c,"accountId")),i("sub_account_ids",A(c,"sub_accountId")),I(),t&&t())},w=async t=>{var s;let e={query:"getScanAccounts",params:{limit:250,businessId:(s=l("profileUser"))==null?void 0:s.businessId,":search":l("searchQry")},queryString:"!* contain :search"};const c=await b(e);c&&(i("account_list",_(m(c),"code")),t&&t())},j=async(t,e)=>{let n={query:"getScanOperationsHRG",params:{limit:250,businessId:l("profileUser").businessId,":account":t.account},queryString:"account = :account"};t!=null&&t.subAccount&&(n.params[":sub_account"]=t==null?void 0:t.subAccount,n.queryString+=" AND subAccount contain :sub_account");const s=await b(n);s&&!s.error&&(i("submayor_list",s),i("submayor_group",S(s))),e&&e()};function S(t,e){var n={operations:[]};let c=0,s=t&&f(t);return s.length>0?s.map(o=>{let r=t[o];r.type&&(e?c+=r.type==="debit"?r.amount*-1:r.amount*1:c+=r.type==="credit"?r.amount*-1:r.amount*1,n.operations.push(q(r)))}):n=null,n}function q(t){var n,c;let e={};return e.account=(n=l("account_ids"))==null?void 0:n[t.account],e.sub_account=(c=l("sub_account_ids"))==null?void 0:c[t.subAccount],e.comprobanteId=t.comprobanteId,e.document=t.document,e.date=t.date,t.type==="credit"?(e.debit=0,e.credit=t.amount):t.type==="debit"&&(e.credit=0,e.debit=t.amount),e}const _=(t,e)=>y("sortAccounts",[t],()=>t.sort((c,s)=>{let o=c[e]*1,r=s[e]*1;return o<r?-1:o>r?1:0})),h=(t,e)=>y("sortSubAccounts",[t],()=>t.sort((c,s)=>{let o=c[e]*1,r=s[e]*1;return o<r?-1:o>r?1:0})),B=(t,e,n)=>y("calcSubmayor",[t,e,n],()=>{let c="date",s=t.sort((u,a)=>{let d=new Date(u[c]).getTime(),p=new Date(a[c]).getTime();return d<p?-1:d>p?1:0}),o=0;const r=u=>{var d;let a={...u};return((d=u==null?void 0:u.account)==null?void 0:d.type)==="credit"?a.saldo=o+a.credit*1-a.debit*1:a.saldo=o+a.debit*1-a.credit*1,o=a.saldo,a};return s.map(u=>r(u))});export{I as a,h as b,j as c,B as d,O as g,w as s};
