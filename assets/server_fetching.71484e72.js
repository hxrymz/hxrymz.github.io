import{m as d,g as a,i as y,u as i,h as p}from"./index.d7d73e67.js";const f=async c=>{var s,e,u;let n={query:"getScanOperationsHRG",params:{limit:250,businessId:(s=a("profileUser"))==null?void 0:s.businessId,":collect":"collect",":account":(e=a("Acc2Collect"))==null?void 0:e.account,":sub_account":(u=a("Acc2Collect"))==null?void 0:u.subAccount},queryString:"payOrCollect = :collect  AND account = :account AND subAccount contain :sub_account"};const t=await y(n);if(t&&!t.error){i("collect_list",t),i("collect_by_doc",b(t));let r=a("Acc2Collect").account+"_"+a("Acc2Collect").subAccount;m(t,r)}c&&c()},S=async c=>{var s,e,u,r;let n={query:"getScanOperationsHRG",params:{limit:250,businessId:(s=a("profileUser"))==null?void 0:s.businessId,":collect":"pay",":account":(e=a("Acc2Pay"))==null?void 0:e.account,":sub_account":(u=a("Acc2Pay"))==null?void 0:u.subAccount,":providerId":(r=a("Acc2Pay"))==null?void 0:r.providerId},queryString:"payOrCollect = :collect  AND account = :account AND subAccount contain :sub_account"};const t=await y(n);if(t&&!t.error){i("toPay_list",t),i("toPay_by_doc",b(t,!0));let l=a("Acc2Pay").account+"_"+a("Acc2Pay").subAccount;m(t,l)}c&&c()};function b(c,n){var o={};let t=c&&p(c);return t.length>0?t.map(s=>{let e=c[s],u=e.document;o[u]||(o[u]={},["date","description","document","entryName"].forEach(l=>{o[u][l]=e[l]}),o[u].amount=0,o[u].operations=[]),e.type&&(n?o[u].amount+=e.type==="debit"?e.amount*-1:e.amount*1:o[u].amount+=e.type==="credit"?e.amount*-1:e.amount*1,o[u].operations.push(_(e)))}):o=null,o}function _(c){var o,t;let n={};return n.account=(o=a("account_ids"))==null?void 0:o[c.account],n.sub_account=(t=a("sub_account_ids"))==null?void 0:t[c.subAccount],n.comprobanteId=c.comprobanteId,n.date=c.date,c.type==="credit"?(n.debit=0,n.credit=c.amount):c.type==="debit"&&(n.credit=0,n.debit=c.amount),n}const I=(c,n,o)=>d("SumDocuments",[c,n,o],()=>{var s;let t=0;return c&&((s=p(c))==null||s.map((e,u)=>{var r;t+=((r=c[e])==null?void 0:r[n])*1})),t}),A=(c,n,o)=>{var s;let t=0;return c&&((s=p(c))==null||s.map((e,u)=>{var r,l;t+=((r=c[e])==null?void 0:r.amount)*(((l=c[e])==null?void 0:l.type)==="credit"?-1:1)})),t},m=async(c,n,o)=>{let t=a("rec_by_acc")||{};t[n]=A(c)||"no",i("rec_by_acc",t),o&&o()},q=async(c,n,o)=>{var u;let t={query:"getScanOperationsHRG",params:{limit:250,businessId:(u=a("profileUser"))==null?void 0:u.businessId,":account":c==null?void 0:c.account,":sub_account":c==null?void 0:c.subAccount},queryString:"account = :account AND subAccount contain :sub_account"};const e=await y(t);e&&!e.error&&m(e,n),o&&o()};export{I as S,S as a,q as b,f as g};
