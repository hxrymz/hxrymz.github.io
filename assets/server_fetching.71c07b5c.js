import{m as _,g as u,i as y,u as m,h as p}from"./index.822d4baa.js";const S=async c=>{var s,n,a;let o={query:"getScanOperationsHRG",params:{businessId:(s=u("profileUser"))==null?void 0:s.businessId,":collect":"collect",":account":(n=u("Acc2Collect"))==null?void 0:n.account,":sub_account":(a=u("Acc2Collect"))==null?void 0:a.subAccount},queryString:"account = :account AND subAccount = :sub_account"};const t=await y(o);if(t&&!t.error){m("collect_list",t),m("collect_by_doc",d(t));let r=u("Acc2Collect").account+"_"+u("Acc2Collect").subAccount;b(t,r)}c&&c()},I=async c=>{var s,n,a;let o={query:"getScanOperationsHRG",params:{businessId:(s=u("profileUser"))==null?void 0:s.businessId,":account":(n=u("Acc2Pay"))==null?void 0:n.account,":sub_account":(a=u("Acc2Pay"))==null?void 0:a.subAccount},queryString:"account = :account AND subAccount = :sub_account"};const t=await y(o);if(t&&!t.error){m("toPay_list",t),m("toPay_by_doc",d(t,!0));let r=u("Acc2Pay").account+"_"+u("Acc2Pay").subAccount;b(t,r)}c&&c()};function d(c,o){var e={};let t=c&&p(c);return t.length>0?t.map(s=>{let n=c[s],a=n.document;if(e[a]||(e[a]={},["date","description","document","entryName"].forEach(l=>{e[a][l]=n[l]}),e[a].amount=0,e[a].operations=[]),n.type){let r=parseFloat((n.amount*1).toFixed(3)),l=parseFloat((e[a].amount*1).toFixed(3)),i=0;o?i=l+(n.type==="debit"?r*-1:r):i=l+(n.type==="credit"?r*-1:r),e[a].amount=parseFloat(i.toFixed(3)),e[a].operations.push(g(n))}}):e=null,e}function g(c){var t,s;let o={};o.account=(t=u("account_ids"))==null?void 0:t[c.account],o.sub_account=(s=u("sub_account_ids"))==null?void 0:s[c.subAccount],o.comprobanteId=c.comprobanteId,o.date=c.date;let e=parseFloat((c.amount*1).toFixed(3));return c.type==="credit"?(o.debit=0,o.credit=e):c.type==="debit"&&(o.credit=0,o.debit=e),o}const F=(c,o,e)=>_("SumDocuments",[c,o,e],()=>{var s;let t=0;return c&&((s=p(c))==null||s.map((n,a)=>{var r;t+=((r=c[n])==null?void 0:r[o])*1})),t}),A=(c,o,e)=>{var s;let t=0;return c&&((s=p(c))==null||s.map((n,a)=>{var l,i;t+=parseFloat((((l=c[n])==null?void 0:l.amount)*1).toFixed(3))*(((i=c[n])==null?void 0:i.type)==="credit"?-1:1)})),t},b=async(c,o,e)=>{let t=u("rec_by_acc")||{};t[o]=A(c)||"no",m("rec_by_acc",t),e&&e()},q=async(c,o,e)=>{var a;let t={query:"getScanOperationsHRG",params:{limit:250,businessId:(a=u("profileUser"))==null?void 0:a.businessId,":account":c==null?void 0:c.account,":sub_account":c==null?void 0:c.subAccount},queryString:"account = :account AND subAccount contain :sub_account"};const n=await y(t);n&&!n.error&&b(n,o),e&&e()};export{F as S,I as a,q as b,S as g};
