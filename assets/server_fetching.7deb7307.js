import{b as c,p,u as i,t as u}from"./index.4d86f257.js";const y=async t=>{var o;let e={query:"getAllOperationsHRG",params:{limit:250,businessId:(o=c("profileUser"))==null?void 0:o.businessId},queryString:"!* contain :search"};const a=await p(e);a&&!a.error&&(i("comprobante_list",a),i("comprobante_by_doc",d(a)),t&&t())},b=async t=>{var o;let e={query:"getScanOperationsHRG",params:{limit:250,businessId:(o=c("profileUser"))==null?void 0:o.businessId,":search":c("search_acc_record")},queryString:"!* contain :search"};const a=await p(e);a&&!a.error&&(i("comprobante_list",a),i("comprobante_by_doc",d(a)),t&&t())},I=async(t,e)=>{let r=[];t.map(o=>{var n;let s={query:"deleteOperationsHRG",params:{businessId:(n=c("profileUser"))==null?void 0:n.businessId,operationId:o.operationId}};r.push(s)});const a=r.map(async o=>{await p(o)});await Promise.all(a),e&&e()};function d(t){var e={};return t.length>0?t.map(r=>{let o=new Date(r.date).getTime()+"_"+r.comprobanteId;e[o]||(e[o]={},["date","description","document","entryName","comprobanteId"].forEach(n=>{e[o][n]=r[n]}),e[o].amount=0,e[o].operations=[]),r.type?(e[o].amount+=r.type==="credit"?r.amount*1:0,e[o].operations.push(m(r))):e[o].amount+=r.creditAccount?r.amount*1:0}):e=null,e}function m(t){var r,a;let e={};return e.account=(r=c("account_ids"))==null?void 0:r[t.account],e.sub_account=(a=c("sub_account_ids"))==null?void 0:a[t.subAccount],e.comprobanteId=t.comprobanteId,e.operationId=t.operationId,e.type=t.type,t.type==="credit"?(e.debit=0,e.credit=t.amount):t.type==="debit"&&(e.credit=0,e.debit=t.amount),e}const _=t=>u("sortComprobantesByType",[t],()=>{let e="type";return t.sort((a,o)=>{let s=a[e],n=o[e];return s===n?o[n]-a[s]:n>s?1:-1})});export{_ as a,I as d,y as g,b as s};
