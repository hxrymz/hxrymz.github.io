import{b as u,p as b,u as o,q as A,s as m,t as d,v as g,O as f}from"./index.9d7fe9a9.js";const I=async t=>{var c;let e={query:"getAllAccountsByUserId",params:{limit:250,businessId:(c=u("profileUser"))==null?void 0:c.businessId,":search":u("searchQry")},queryString:"!* contain :search"};const s=await b(e);s&&(o("account_list",_(s,"code")),o("account_ids",A(s,"accountId")),t&&t())},O=async t=>{var c;let e={query:"getAllSubAccounts",params:{limit:250,businessId:(c=u("profileUser"))==null?void 0:c.businessId},queryString:"!* contain :search"};const s=await b(e);s&&(o("sub_account_list",h(s,"subAccount")),o("sub_account_group",m(s,"accountId")),o("sub_account_ids",A(s,"sub_accountId")),I(),t&&t())},w=async t=>{var c;let e={query:"getScanAccounts",params:{limit:250,businessId:(c=u("profileUser"))==null?void 0:c.businessId,":search":u("searchQry")},queryString:"!* contain :search"};const s=await b(e);s&&(o("account_list",_(g(s),"code")),t&&t())},j=async(t,e)=>{let n={query:"getScanOperationsHRG",params:{limit:250,businessId:u("profileUser").businessId,":account":t.account},queryString:"account = :account"};t!=null&&t.subAccount&&(n.params[":sub_account"]=t==null?void 0:t.subAccount,n.queryString+=" AND subAccount contain :sub_account");const c=await b(n);c&&!c.error&&(o("submayor_list",c),o("submayor_group",S(c))),e&&e()};function S(t,e){var n={operations:[]};let s=0,c=t&&f(t);return c.length>0?c.map(a=>{let r=t[a];r.type&&(e?s+=r.type==="debit"?r.amount*-1:r.amount*1:s+=r.type==="credit"?r.amount*-1:r.amount*1,n.operations.push(q(r)))}):n=null,n}function q(t){var n,s;let e={};return e.account=(n=u("account_ids"))==null?void 0:n[t.account],e.sub_account=(s=u("sub_account_ids"))==null?void 0:s[t.subAccount],e.comprobanteId=t.comprobanteId,e.date=t.date,t.type==="credit"?(e.debit=0,e.credit=t.amount):t.type==="debit"&&(e.credit=0,e.debit=t.amount),e}const _=(t,e)=>d("sortAccounts",[t],()=>t.sort((s,c)=>{let a=s[e]*1,r=c[e]*1;return a<r?-1:a>r?1:0})),h=(t,e)=>d("sortSubAccounts",[t],()=>t.sort((s,c)=>{let a=s[e]*1,r=c[e]*1;return a<r?-1:a>r?1:0})),B=(t,e,n)=>d("calcSubmayor",[t,e,n],()=>{let s="date",c=t.sort((l,i)=>{let y=new Date(l[s]).getTime(),p=new Date(i[s]).getTime();return y<p?-1:y>p?1:0}),a=0;const r=l=>{let i={...l};return i.saldo=a+i.debit*1-i.credit*1,a=i.saldo,i};return c.map(l=>r(l))});export{I as a,h as b,j as c,B as d,O as g,w as s};
