import{g as c,i as p,u as i,y as d,n as u,m as l}from"./index.388c4500.js";const g=async t=>{var o;let e={query:"getAllOperationsHRG",params:{limit:250,businessId:(o=c("profileUser"))==null?void 0:o.businessId},queryString:"!* contain :search"};const r=await p(e);r&&!r.error&&(i("comprobante_list",r),i("comprobante_by_doc",m(r)),t&&t())},I=async t=>{var o;let e={query:"getScanOperationsHRG",params:{limit:250,businessId:(o=c("profileUser"))==null?void 0:o.businessId,":search":c("search_acc_record")},queryString:"!* contain :search"};const r=await p(e);r&&!r.error&&(i("comprobante_list",r),i("comprobante_by_doc",m(u(r))),t&&t())},_=async(t,e)=>{let a=[];t.map(o=>{var n;let s={query:"deleteOperationsHRG",params:{businessId:(n=c("profileUser"))==null?void 0:n.businessId,operationId:o.operationId}};a.push(s)});const r=a.map(async o=>{await p(o)});await Promise.all(r),e&&e()};function m(t){var e={};return t.length>0?t.map(a=>{let o=new Date(a.date).getTime()+"_"+a.comprobanteId;e[o]||(e[o]={},["date","description","document","entryName","comprobanteId"].forEach(n=>{e[o][n]=a[n]}),e[o].amount=0,e[o].operations=[]),a.type&&(e[o].amount+=a.type==="credit"?d(a.amount,2):0,e[o].operations.push(y(a)))}):e=null,e}function y(t){var r,o;let e={};e.account=(r=c("account_ids"))==null?void 0:r[t.account],e.sub_account=(o=c("sub_account_ids"))==null?void 0:o[t.subAccount],e.comprobanteId=t.comprobanteId,e.operationId=t.operationId,e.type=t.type;let a=d(t.amount,2);return t.type==="credit"?(e.debit=0,e.credit=a):t.type==="debit"&&(e.credit=0,e.debit=a),e}const f=t=>l("sortComprobantesByType",[t],()=>{let e="type";return t&&t.sort((r,o)=>{let s=r[e],n=o[e];return s===n?o[n]-r[s]:n>s?1:-1})});export{f as a,_ as d,g,I as s};
