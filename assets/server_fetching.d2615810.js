import{m as g,g as s,i as b,u as m,h as p,y as i}from"./index.4583f769.js";const I=async c=>{var a,n,u;let o={query:"getScanOperationsHRG",params:{businessId:(a=s("profileUser"))==null?void 0:a.businessId,":collect":"collect",":account":(n=s("Acc2Collect"))==null?void 0:n.account,":sub_account":(u=s("Acc2Collect"))==null?void 0:u.subAccount},queryString:"account = :account AND subAccount = :sub_account"};const t=await b(o);if(t&&!t.error){m("collect_list",t),m("collect_by_doc",_(t));let r=s("Acc2Collect").account+"_"+s("Acc2Collect").subAccount;d(t,r)}c&&c()},q=async c=>{var a,n,u;let o={query:"getScanOperationsHRG",params:{businessId:(a=s("profileUser"))==null?void 0:a.businessId,":account":(n=s("Acc2Pay"))==null?void 0:n.account,":sub_account":(u=s("Acc2Pay"))==null?void 0:u.subAccount},queryString:"account = :account AND subAccount = :sub_account"};const t=await b(o);if(t&&!t.error){m("toPay_list",t),m("toPay_by_doc",_(t,!0));let r=s("Acc2Pay").account+"_"+s("Acc2Pay").subAccount;d(t,r)}c&&c()};function _(c,o){var e={};let t=c&&p(c);return t.length>0?t.map(a=>{let n=c[a],u=n.document;if(e[u]||(e[u]={},["date","description","document","entryName"].forEach(l=>{e[u][l]=n[l]}),e[u].amount=0,e[u].operations=[]),n.type){let r=i(n.amount,2),l=i(e[u].amount,2),y=0;o?y=l+(n.type==="debit"?r*-1:r):y=l+(n.type==="credit"?r*-1:r),e[u].amount=i(y,2),e[u].operations.push(A(n))}}):e=null,e}function A(c){var t,a;let o={};o.account=(t=s("account_ids"))==null?void 0:t[c.account],o.sub_account=(a=s("sub_account_ids"))==null?void 0:a[c.subAccount],o.comprobanteId=c.comprobanteId,o.date=c.date;let e=i(c.amount,2);return c.type==="credit"?(o.debit=0,o.credit=e):c.type==="debit"&&(o.credit=0,o.debit=e),o}const D=(c,o,e)=>g("SumDocuments",[c,o,e],()=>{var a;let t=0;return c&&((a=p(c))==null||a.map((n,u)=>{var r;t+=((r=c[n])==null?void 0:r[o])*1})),t}),f=(c,o,e)=>{var a;let t=0;return c&&((a=p(c))==null||a.map((n,u)=>{var l;t+=i(c[n].amount,2)*(((l=c[n])==null?void 0:l.type)==="credit"?-1:1)})),t},d=async(c,o,e)=>{let t=s("rec_by_acc")||{};t[o]=f(c)||"no",m("rec_by_acc",t),e&&e()},P=async(c,o,e)=>{var u;let t={query:"getScanOperationsHRG",params:{limit:250,businessId:(u=s("profileUser"))==null?void 0:u.businessId,":account":c==null?void 0:c.account,":sub_account":c==null?void 0:c.subAccount},queryString:"account = :account AND subAccount contain :sub_account"};const n=await b(t);n&&!n.error&&d(n,o),e&&e()};export{D as S,q as a,P as b,I as g};
