import{b as r,p as d,u as i}from"./index.ff191f77.js";const m=async c=>{var n;let e={query:"getAllOperationsHRG",params:{limit:250,businessId:(n=r("profileUser"))==null?void 0:n.businessId},queryString:"!* contain :search"};const t=await d(e);t&&!t.error&&(i("comprobante_list",t),i("comprobante_by_doc",p(t)),c&&c())},l=async c=>{var n;let e={query:"getScanOperationsHRG",params:{limit:250,businessId:(n=r("profileUser"))==null?void 0:n.businessId,":search":r("search_acc_record")},queryString:"!* contain :search"};const t=await d(e);t&&!t.error&&(i("comprobante_list",t),i("comprobante_by_doc",p(t)),c&&c())};function p(c){let e="comprobanteId";var o={};return c.length>0?c.map(t=>{if(o[t[e]]||(o[t[e]]={},["date","description","document","entryName","comprobanteId"].forEach(a=>{o[t[e]][a]=t[a]}),o[t[e]].amount=0,o[t[e]].operations=[]),t.type?o[t[e]].amount+=t.type==="credit"?t.amount*1:0:o[t[e]].amount+=t.creditAccount?t.amount*1:0,t.creditAccount&&t.debitAccount){let n={...t},a={...t};delete n.creditAccount,delete a.debitAccount,o[t[e]].operations.push(u(n)),o[t[e]].operations.push(u(a))}t.type?o[t[e]].operations.push(b(t)):o[t[e]].operations.push(u(t))}):o=null,o}function u(c){var o,t,n,a;let e={};return e.comprobanteId=c.comprobanteId,c.creditAccount?(e.debit=0,e.credit=c.amount,e.account=(o=r("account_ids"))==null?void 0:o[c.creditAccount],e.sub_account=(t=r("sub_account_ids"))==null?void 0:t[c.creditSubAccount]):c.debitAccount&&(e.credit=0,e.debit=c.amount,e.account=(n=r("account_ids"))==null?void 0:n[c.debitAccount],e.sub_account=(a=r("sub_account_ids"))==null?void 0:a[c.debitSubAccount]),e}function b(c){var o,t;let e={};return e.account=(o=r("account_ids"))==null?void 0:o[c.account],e.sub_account=(t=r("sub_account_ids"))==null?void 0:t[c.subAccount],e.comprobanteId=c.comprobanteId,c.type==="credit"?(e.debit=0,e.credit=c.amount):c.type==="debit"&&(e.credit=0,e.debit=c.amount),e}export{m as g,l as s};
