import{g as n,i as p,u as l,n as b,k as f,m as y,h as g}from"./index.b7d6b41c.js";const q=async t=>{var s;let e={query:"getAllProductsHRGByBusinessId",params:{limit:250,businessId:(s=n("profileUser"))==null?void 0:s.businessId}};const r=await p(e);r&&(l("products_list",_(b(r),"code")),l("products_ids",f(b(r),"productId")),t&&t())},P=async t=>{var s;let e={query:"getScanProductsHRG",params:{limit:250,businessId:(s=n("profileUser"))==null?void 0:s.businessId,":search":n("searchQry")},queryString:"!* contain :search"};const r=await p(e);r&&(l("products_list",_(b(r),"code")),t&&t())},h=async(t,e)=>{let o={query:"getScanOperationsHRG",params:{limit:250,businessId:n("profileUser").businessId,":product":t.product},queryString:"product = :product"};t!=null&&t.subProduct&&(o.params[":sub_product"]=t==null?void 0:t.subProduct,o.queryString+=" AND subProduct contain :sub_product");const s=await p(o);s&&!s.error&&(l("submayor_list",s),l("submayor_group",I(s))),e&&e()};function I(t,e){var o={operations:[]};let r=0,s=t&&g(t);return s.length>0?s.map(c=>{let u=t[c];u.type&&(e?r+=u.type==="debit"?u.amount*-1:u.amount*1:r+=u.type==="credit"?u.amount*-1:u.amount*1,o.operations.push(A(u)))}):o=null,o}function A(t){var o,r;let e={};return e.product=(o=n("products_ids"))==null?void 0:o[t.product],e.sub_product=(r=n("sub_products_ids"))==null?void 0:r[t.subProduct],e.comprobanteId=t.comprobanteId,e.document=t.document,e.date=t.date,t.type==="credit"?(e.debit=0,e.credit=t.amount):t.type==="debit"&&(e.credit=0,e.debit=t.amount),e}const _=(t,e)=>y("sortProducts",[t],()=>t&&t.sort((r,s)=>{let c=r[e]*1,u=s[e]*1;return c<u?-1:c>u?1:0})),w=(t,e)=>y("sortSubProducts",[t],()=>t&&t.sort((r,s)=>{let c=r[e]*1,u=s[e]*1;return c<u?-1:c>u?1:0})),B=(t,e,o)=>y("calcSubmayor",[t,e,o],()=>{let r="date",s=t.sort((a,d)=>{let i=new Date(a[r]).getTime(),m=new Date(d[r]).getTime();return i<m?-1:i>m?1:0}),c=0;const u=a=>{var i;let d={...a};return((i=a==null?void 0:a.product)==null?void 0:i.type)==="credit"?d.saldo=c+d.credit*1-d.debit*1:d.saldo=c+d.debit*1-d.credit*1,c=d.saldo,d};return s.map(a=>u(a))}),v=async(t,e)=>{var c;let o={query:"deleteProductsHRG",params:{businessId:(c=n("profileUser"))==null?void 0:c.businessId,productId:t}};await p(o)&&e&&e()};export{w as a,h as b,B as c,v as d,q as g,P as s};
