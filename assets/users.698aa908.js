import{l as O,S as V,m as j,_ as k,r as d,a as e,n as E,j as c,k as l,o as M,q as i,t as N,v as S,w as P,g as h}from"./index.81185f1e.js";const p=O(),$=V(),R=j(()=>k(()=>import("./user_item.a1aeda8c.js"),["assets/user_item.a1aeda8c.js","assets/index.81185f1e.js","assets/index.ed13fd6f.css"])),H=({view:q})=>{var v,g,w;const[a,b]=d.exports.useState(null),[r,L]=d.exports.useState(""),[z,o]=d.exports.useState("");if(!E())return e("div",{children:"No tiene privilegios para usar esta opcion"});const m=async()=>{if((l("getAllUsers_last_request")||0)<Date.now()){i("getAllUsers_last_request",Date.now()+100);let n={query:"getAllUsers"};const s=await N(S(),n);s&&s.data&&(b(s.data),U())}},U=async()=>{if((l("getAllBusiness_last_request")||0)<Date.now()){i("getAllBusiness_last_request",Date.now()+150);let n={query:"getAllBusiness",params:{":isActive":!0},queryString:"isActive = :isActive"};const s=await N(S(),n);s&&s.data&&(s.data.error||(i("businessArr",s.data),i("businesslist",P(s.data,"businessId"))))}},_=()=>M("usersListFilter",[a,r,l("showAll_users")],()=>{let t="name",n="email";const u=s=>{var f,A,x,y,C;if(!s.name)return null;let I=(r==null?void 0:r.toLowerCase())&&((A=(f=s==null?void 0:s[t])==null?void 0:f.toLowerCase())==null?void 0:A.indexOf(r.toLowerCase()))>=0,T=(r==null?void 0:r.toLowerCase())&&((C=(y=(x=s==null?void 0:s[n])==null?void 0:x.toString())==null?void 0:y.toLowerCase())==null?void 0:C.indexOf(r.toLowerCase()))>=0;if(l("showAll_users")||I||T)return s};return a==null?void 0:a.filter(s=>u(s))});d.exports.useEffect(()=>{setTimeout(()=>{window.scrollTo(0,0),m()},170)},[q]);const B=t=>{i("showAll_users",t),o(h())},F=t=>{i("filter_user_expired",t),o(h())},D=t=>{i("filter_user_active",t),o(h())};return c("div",{className:"",style:{marginLeft:"2vw"},children:[e("div",{className:"login_title ",children:e("div",{children:"Usuarios"})}),c("div",{className:"_dsplFlx ",children:[e("div",{className:"sendBtn _dsplFlx spaceAround ",style:{marginTop:8},children:c("div",{className:"in_stock_switch _dsplFlx",children:[e("div",{className:"in_stock_switch_btn",children:e(p,{initvalue:l("showAll_users"),keyCode:77,updChange:B})}),e("span",{className:"sw_rgh_span",children:"Mostrar todos"})]})}),e("div",{className:"sendBtn _dsplFlx spaceAround ",style:{marginTop:8},children:c("div",{className:"in_stock_switch _dsplFlx",children:[e("div",{className:"in_stock_switch_btn",children:e(p,{initvalue:l("filter_user_expired"),keyCode:71,updChange:F})}),e("span",{className:"sw_rgh_span",children:"Cuentas Vencidas"})]})}),e("div",{className:"sendBtn _dsplFlx spaceAround ",style:{marginTop:8},children:c("div",{className:"in_stock_switch _dsplFlx",children:[e("div",{className:"in_stock_switch_btn",children:e(p,{initvalue:l("filter_user_active"),keyCode:73,updChange:D})}),e("span",{className:"sw_rgh_span",children:"Cuentas Desactivadas"})]})}),e("div",{className:"flexSpace"}),e("div",{className:"userqty",children:`${(v=_())==null?void 0:v.length} de ${a!=null&&a.length?(a==null?void 0:a.length)-1:0}`})]}),e("div",{className:" _search_MrgV  ",children:e("div",{className:"years_card ",style:{marginLeft:"2vw"},children:e($,{updChanges:L,placeholderCode:"buscar usuario"})})}),e("div",{className:"userslist",style:{marginLeft:"2vw"},children:((g=_())==null?void 0:g.length)>0&&((w=_())==null?void 0:w.map(t=>t&&e(R,{item:t,refreshlist:m})))})]})};export{H as default};
