"use strict";(self.webpackChunkhrmfinance=self.webpackChunkhrmfinance||[]).push([[1228,9760],{9760:(e,i,l)=>{l.r(i),l.d(i,{CloseModal:()=>r,OpenModal:()=>c,default:()=>d});var s=l(2791),t=l(5408),a=l(2350),n=l(184);const o="listDialog_mdh392",d=()=>{const e=(0,a.bh)("listDialog")||{};(0,t.Z)(o);let i=Object.keys(e);return(0,n.jsx)(n.Fragment,{children:i.map(((i,l)=>{let t=e[i];if(t&&t.visible){let e={};t.height&&(e.heigth=t.height),t.width,t.zIndex&&(e.zIndex=t.zIndex-1);let l={zIndex:t.zIndex},a=null,o=t.data;return t.content&&(a=s.cloneElement(t.content,{data:o})),(0,n.jsxs)("div",{className:"ltr-1kbnjow",style:e,children:[(0,n.jsx)("div",{className:"ltr-hoe9xz",children:(0,n.jsx)("div",{className:"ltr-1wao6ny",style:l,id:i,children:a})}),t.data.overlay?(0,n.jsx)("div",{className:"DialogHRMOverlay ".concat(t.visible?"active":""),onClick:()=>{var e;e=i,document.getElementsByTagName("html")[0].classList.remove("has-level-two"),r({id:e})}}):null]},i)}}))})},c=e=>{let i=(0,a.bh)("listDialog")||{},l=(0,a.M5)();i[l]||(i[l]={}),i[l].visible=!0;let s={};e.props?(s=e.props,s.modalID=l):s.modalID=l;let t=document.getElementsByTagName("body")[0];null!==t&&void 0!==t&&t.style&&(t.style.overflowY="hidden"),i[l].isView=e.isView,i[l].observeResize=e.observeResize,i[l].observeResize&&(i[l].observeInterval=setInterval((()=>{let e=document.querySelector("[dialog-key-id='".concat(l,"']")),s=e&&e.getBoundingClientRect();s&&(s.width===i[l].width&&s.height===i[l].height||(i[l].height=s.height+10,i[l].width=s.width,(0,a.Rz)("listDialog",i),(0,a.wt)(o)))}),200)),i[l].display=!0,e.zIndex&&(i[l].zIndex=e.zIndex),e.height&&(i[l].height=e.height),e.width&&(i[l].width=e.width),e.content&&(i[l].content=e.content),i[l].data=s,(0,a.Rz)("listDialog",i),(0,a.wt)(o),setTimeout((()=>{document.getElementsByTagName("html")[0].classList.add("has-level-two"),(0,a.Rz)("modalOpen",l),(0,a.wt)(o)}),125)},r=e=>{let i=(0,a.bh)("listDialog")||{},l=e.id;if(i[l]){var s,t,n;i[l].observeResize&&i[l].observeInterval&&clearInterval(i[l].observeInterval),i[l].display=!1,null===(s=i[l])||void 0===s||null===(t=s.data)||void 0===t||null===(n=t.closeEvent)||void 0===n||n.call(t),(0,a.Rz)("listDialog",i),delete i[l],document.getElementsByTagName("body")[0].style.overflowY=null,(0,a.wt)(o),setTimeout((()=>{delete i[l],document.getElementsByTagName("html")[0].classList.remove("has-level-two"),(0,a.Rz)("modalOpen",null)}),750)}}},1228:(e,i,l)=>{l.r(i),l.d(i,{default:()=>p});var s=l(2791),t=l(2350),a=(l(3971),l(9760)),n=l(6496),o=l(2647),d=(l(261),l(184));const c=e=>{let{data:i,confirm:l,handleClick:s,close:t}=e;const{modalID:n}=i,o=e=>{(0,a.CloseModal)({id:n})};return(0,d.jsxs)("div",{style:{maxHeight:"40vh",minHeight:"28vh",overflow:"auto",background:"var(--hrm_palette-general-background-b)",borderRadius:13,padding:"10px 19px"},children:[(0,d.jsxs)("div",{className:"_dsplFlx ",children:[(0,d.jsx)("p",{className:"form_title",children:"Eliminar Invoice"}),(0,d.jsx)("div",{className:"flexSpace"})]}),(0,d.jsx)("div",{className:"_dsplFlx ",children:(0,d.jsx)("span",{children:"Una vez eliminado no podra ser recuperado"})}),(0,d.jsxs)("div",{className:"_dsplFlx ",style:{padding:"15px 10px"},children:[(0,d.jsx)("div",{className:"flexSpace"}),(0,d.jsx)("p",{className:"group_title addBtn",onClick:o,children:"Cancelar"}),(0,d.jsx)("p",{className:"group_title addBtn red",onClick:()=>{l(),o()},children:"Eliminar"})]})]})},r=e=>{let{data:i,confirm:l,handleClick:s,close:t}=e;const{modalID:n}=i;return(0,d.jsxs)("div",{style:{maxHeight:"40vh",minHeight:"18vh",overflow:"auto",background:"#fff",borderRadius:13,padding:"10px 19px"},children:[(0,d.jsxs)("div",{className:"_dsplFlx ",children:[(0,d.jsx)("p",{className:"form_title",style:{color:"var(--hrm_palette-static-brand-red"},children:"Lo sentimos"}),(0,d.jsx)("div",{className:"flexSpace"})]}),(0,d.jsx)("div",{className:"_dsplFlx ",children:(0,d.jsx)("span",{children:"no tiene acceso a esta operacion"})}),(0,d.jsxs)("div",{className:"_dsplFlx ",style:{padding:"5px 10px"},children:[(0,d.jsx)("div",{className:"flexSpace"}),(0,d.jsx)("p",{className:"group_title addBtn blue",onClick:()=>{(0,a.CloseModal)({id:n})},children:"OK"})]})]})};var v=l(5986);const m=(0,o.PU)(),h=(0,v.DY)(),p=e=>{var i;let{data:l,elmId:o,handleRefreshAll:v}=e;const[p,u]=(0,s.useState)(!1),[x,b]=(0,s.useState)(0);(0,s.useEffect)((()=>{p||(u(!0),b((0,t.M5)()))}));const g=()=>{b((0,t.M5)())},I=()=>{(0,n.p9)(g)},_=()=>{(0,n.jB)(null===l||void 0===l?void 0:l.invoiceId,v)};(0,n.Hy)(null===(i=(0,t.bh)("sub_invoice_group"))||void 0===i?void 0:i[l.invoiceId],"subInvoice");return(0,d.jsx)("div",{className:"item_acc",children:(0,d.jsxs)("div",{className:"_dsplFlx item_box invoice_header",children:[(0,d.jsx)("div",{className:"name",children:(0,t.sJ)(null===l||void 0===l?void 0:l.date)}),(0,d.jsx)("div",{className:"code",style:{marginLeft:15},children:null===l||void 0===l?void 0:l.document}),(0,d.jsx)("div",{className:"description",style:{marginLeft:15},children:null===l||void 0===l?void 0:l.description}),(0,d.jsx)("div",{className:"flexSpace"}),(0,d.jsx)("div",{className:"flexSpace"}),(0,d.jsx)("div",{className:" addSbAcc purple",onClick:()=>(e=>{let i={zIndex:450,height:"80vh",props:{minHeight:"1vh",overlay:!0}};i.content=(0,d.jsx)(h,{confirm:I,item:l}),(0,a.OpenModal)(i)})(),children:"See Details"}),(0,d.jsxs)("div",{className:"name hideOnHover",children:["$",(1*(null===l||void 0===l?void 0:l.amount)).toFixed(2)]}),(0,t.I0)()?(0,d.jsx)("div",{className:"icon",style:{marginLeft:19,zIndex:10},onClick:()=>{let e=(0,t.bh)("lastTimeCallModal")||0;if((0,t.I0)()){if(Date.now()>e){(0,t.Rz)("lastTimeCallModal",Date.now()+320);let e={zIndex:450,height:"40vh",props:{minHeight:"1vh",overlay:!0,closeEvent:()=>{}}};e.content=(0,d.jsx)(c,{confirm:_,item:l}),(0,a.OpenModal)(e)}}else{let e={zIndex:450,height:"40vh",props:{minHeight:"1vh",overlay:!0,closeEvent:()=>{}}};e.content=(0,d.jsx)(r,{}),(0,a.OpenModal)(e)}},children:(0,d.jsx)(m,{name:"outline_delete",color:"#c62828"})}):null]})})}},6496:(e,i,l)=>{l.d(i,{Hy:()=>n,S$:()=>d,_3:()=>a,jB:()=>o,p9:()=>t});var s=l(2350);const t=async e=>{let i=(0,s.bh)("getall_invoice_last")||0;if(Date.now()>i){var l,t;(0,s.Rz)("getall_invoice_last",Date.now()+190);let i={...null===(l=(0,s.bh)((0,s.hQ)()))||void 0===l?void 0:l.all_invoices};i.params={businessId:null===(t=(0,s.bh)("profileUser"))||void 0===t?void 0:t.businessId};const a=(0,s.I7)(i),o=await a;o&&((0,s.Rz)("invoices_list",n(o,"date")),(0,s.Rz)("invoices_ids",(0,s.ME)((0,s.jQ)(o),"invoiceId")),e&&e())}},a=async e=>{var i,l;let t={...null===(i=(0,s.bh)((0,s.hQ)()))||void 0===i?void 0:i.search_invoice};t.params={businessId:null===(l=(0,s.bh)("profileUser"))||void 0===l?void 0:l.businessId,":search":(0,s.bh)("searchQry")};const a=(0,s.I7)(t),o=await a;o&&((0,s.Rz)("invoices_list",n((0,s.jQ)(o),"date")),e&&e())},n=(e,i)=>(0,s.MV)("sortInvoices",[e],(()=>e&&e.sort(((e,l)=>{let s=e[i],t=l[i];return s<t?-1:s>t?1:0})))),o=async(e,i)=>{var l,t;let a={...null===(l=(0,s.bh)((0,s.hQ)()))||void 0===l?void 0:l.delete_invoice};a.params={businessId:null===(t=(0,s.bh)("profileUser"))||void 0===t?void 0:t.businessId,invoiceId:e};const n=(0,s.I7)(a);await n&&i&&i()},d=async e=>{var i,l;let t={...null===(i=(0,s.bh)((0,s.hQ)()))||void 0===i?void 0:i.all_invoices};t.params={businessId:null===(l=(0,s.bh)("profileUser"))||void 0===l?void 0:l.businessId};const a=(0,s.I7)(t),n=await a;n&&((0,s.Rz)("invoiceCmp",n),c("SSJsgB2uUqcuoagD",(()=>{c("v5MkYLwPAbgci3wW",(()=>{let i=r();(0,s.Rz)("invoiceCmpDocs",i),e&&e()}))})))},c=async(e,i)=>{var l,t;let a={...null===(l=(0,s.bh)((0,s.hQ)()))||void 0===l?void 0:l.filter_search_opera};a.params={businessId:null===(t=(0,s.bh)("profileUser"))||void 0===t?void 0:t.businessId,year:(0,s.bh)("date_current_year"),":account":e};const n=(0,s.I7)(a),o=await n;o&&!o.error?((0,s.Rz)("invoiceCmp"+e,o),i&&i()):i&&i()},r=()=>{let e=(0,s.bh)("invoiceCmp"),i=(0,s.bh)("invoiceCmpSSJsgB2uUqcuoagD"),l=(0,s.bh)("invoiceCmpv5MkYLwPAbgci3wW"),t={};return(0,s._2)(e).map((i=>{let l=e[i].document.trim();t[l]||(t[l]={document:l,amount:0,saldo:0,hasAnticipo:0,cc_c:0,cc_d:0,comprobanteIds:{}}),t[l].amount+=e[i].amount,t[l].saldo+=1*e[i].amount,t[l].date=e[i].date})),(0,s._2)(i).map((e=>{var l,s,a;let n=i[e].document.trim();t[n]||(t[n]={document:n,amount:0,saldo:0,hasAnticipo:0,cc_c:0,cc_d:0,comprobanteIds:{}}),t[n].cc_d+="debit"===(null===(l=i[e])||void 0===l?void 0:l.type)?1*i[e].amount:0,t[n].cc_c+="credit"===(null===(s=i[e])||void 0===s?void 0:s.type)?1*i[e].amount:0,t[n].saldo+="credit"===(null===(a=i[e])||void 0===a?void 0:a.type)?-1*i[e].amount:0,t[n].comprobanteIds[i[e].comprobanteId]={date:i[e].date,description:i[e].description}})),(0,s._2)(l).map((e=>{var i,s;let a=l[e].document.trim();a.indexOf("A-")>=0&&(a=a.split("A-")[1]),t[a]||(t[a]={document:a,amount:0,hasAnticipo:0,cc_c:0,cc_d:0,saldo:0,comprobanteIds:{}}),t[a].hasAnticipo+="credit"===(null===(i=l[e])||void 0===i?void 0:i.type)?1*l[e].amount:-1*l[e].amount,t[a].saldo+=-1*("credit"===(null===(s=l[e])||void 0===s?void 0:s.type)?1*l[e].amount:-1*l[e].amount),t[a].comprobanteIds[l[e].comprobanteId]={date:l[e].date,description:l[e].description}})),t}},3971:()=>{},261:()=>{}}]);
//# sourceMappingURL=1228.d48a4abf.chunk.js.map