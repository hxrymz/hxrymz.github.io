"use strict";(self.webpackChunkhrmfinance=self.webpackChunkhrmfinance||[]).push([[1367],{9760:(e,t,o)=>{o.r(t),o.d(t,{CloseModal:()=>s,OpenModal:()=>c,default:()=>r});var a=o(2791),n=o(5408),l=o(2350),i=o(184);const d="listDialog_mdh392",r=()=>{const e=(0,l.bh)("listDialog")||{};(0,n.Z)(d);let t=Object.keys(e);return(0,i.jsx)(i.Fragment,{children:t.map(((t,o)=>{let n=e[t];if(n&&n.visible){let e={};n.height&&(e.heigth=n.height),n.width,n.zIndex&&(e.zIndex=n.zIndex-1);let o={zIndex:n.zIndex},l=null,d=n.data;return n.content&&(l=a.cloneElement(n.content,{data:d})),(0,i.jsxs)("div",{className:"ltr-1kbnjow",style:e,children:[(0,i.jsx)("div",{className:"ltr-hoe9xz",children:(0,i.jsx)("div",{className:"ltr-1wao6ny",style:o,id:t,children:l})}),n.data.overlay?(0,i.jsx)("div",{className:"DialogHRMOverlay ".concat(n.visible?"active":""),onClick:()=>{var e;e=t,document.getElementsByTagName("html")[0].classList.remove("has-level-two"),s({id:e})}}):null]},t)}}))})},c=e=>{let t=(0,l.bh)("listDialog")||{},o=(0,l.M5)();t[o]||(t[o]={}),t[o].visible=!0;let a={};e.props?(a=e.props,a.modalID=o):a.modalID=o;let n=document.getElementsByTagName("body")[0];null!==n&&void 0!==n&&n.style&&(n.style.overflowY="hidden"),t[o].isView=e.isView,t[o].observeResize=e.observeResize,t[o].observeResize&&(t[o].observeInterval=setInterval((()=>{let e=document.querySelector("[dialog-key-id='".concat(o,"']")),a=e&&e.getBoundingClientRect();a&&(a.width===t[o].width&&a.height===t[o].height||(t[o].height=a.height+10,t[o].width=a.width,(0,l.Rz)("listDialog",t),(0,l.wt)(d)))}),200)),t[o].display=!0,e.zIndex&&(t[o].zIndex=e.zIndex),e.height&&(t[o].height=e.height),e.width&&(t[o].width=e.width),e.content&&(t[o].content=e.content),t[o].data=a,(0,l.Rz)("listDialog",t),(0,l.wt)(d),setTimeout((()=>{document.getElementsByTagName("html")[0].classList.add("has-level-two"),(0,l.Rz)("modalOpen",o),(0,l.wt)(d)}),125)},s=e=>{let t=(0,l.bh)("listDialog")||{},o=e.id;if(t[o]){var a,n,i;t[o].observeResize&&t[o].observeInterval&&clearInterval(t[o].observeInterval),t[o].display=!1,null===(a=t[o])||void 0===a||null===(n=a.data)||void 0===n||null===(i=n.closeEvent)||void 0===i||i.call(n),(0,l.Rz)("listDialog",t),delete t[o],document.getElementsByTagName("body")[0].style.overflowY=null,(0,l.wt)(d),setTimeout((()=>{delete t[o],document.getElementsByTagName("html")[0].classList.remove("has-level-two"),(0,l.Rz)("modalOpen",null)}),750)}}},3588:(e,t,o)=>{o.d(t,{Eb:()=>m,Gg:()=>u,N$:()=>l,Ng:()=>r,WB:()=>c,g5:()=>i,ly:()=>n});var a=o(2350);const n=async e=>{var t,o;let n={...null===(t=(0,a.bh)((0,a.hQ)()))||void 0===t?void 0:t.all_opera};n.params={businessId:null===(o=(0,a.bh)("profileUser"))||void 0===o?void 0:o.businessId,year:(0,a.bh)("date_current_year")};const l=(0,a.I7)(n),i=await l;i&&!i.error&&(d(i),(0,a.bh)("showAllCmpbnt")&&((0,a.Rz)("comprobante_list",i),(0,a.Rz)("comprobante_by_doc",s((0,a.jQ)(i)))),e&&e())},l=async e=>{if((0,a.bh)("search_acc_record").length>3){var t,o,n,l;let i={...null===(t=(0,a.bh)((0,a.hQ)()))||void 0===t?void 0:t.filter_search_opera};i.params={businessId:null===(o=(0,a.bh)("profileUser"))||void 0===o?void 0:o.businessId,year:(0,a.bh)("date_current_year"),":date1":null===(n=(0,a.bh)("date_range_comps"))||void 0===n?void 0:n.initDate,":date2":null===(l=(0,a.bh)("date_range_comps"))||void 0===l?void 0:l.lastDate},(0,a.bh)("search_acc_record").split(" ").map(((e,t)=>{e&&(i.params[":search"+t]=e.trim())}));const d=(0,a.I7)(i),r=await d;if(r&&!r.error){(0,a.Rz)("comprobante_list",r);let t=s((0,a.jQ)(r));(0,a.Rz)("comprobante_by_doc",t),e&&e()}}else(0,a.Rz)("comprobante_list",null),(0,a.Rz)("comprobante_by_doc",null),e&&e()},i=async e=>{var t,o;let n=(new Date).getTime(),l={...null===(t=(0,a.bh)((0,a.hQ)()))||void 0===t?void 0:t.all_opera};l.params={businessId:null===(o=(0,a.bh)("profileUser"))||void 0===o?void 0:o.businessId,year:(0,a.bh)("date_current_year")};const i=(0,a.I7)(l),d=await i;if(d&&!d.error){let t=await async function(e){var t={};let o=[];e.length>0&&e.map((e=>{var o,n;let l=null===(o=e.document)||void 0===o?void 0:o.trim(),i=e.account,d=null===(n=(0,a.bh)("account_ids"))||void 0===n?void 0:n[e.account],r=null;var c;e.subAccount&&(r=null===(c=(0,a.bh)("sub_account_ids"))||void 0===c?void 0:c[e.subAccount],r.accountId===e.account&&(i=i+"_"+(e.subAccount?e.subAccount:"")));if(l&&i&&d&&"real"===d.clasification&&d){let o=1*(0,a.Zv)(e.amount,3);if(d.ignoreGroupByDocs){let a=i,n="1000-AP24";if(t[a]||(t[a]={balance:0,document:n,employeeId:e.employeeId,entryName:e.entryName,account:e.account,subAccount:e.subAccount}),t[a].balance+=o,t[a].balance<0){let o="debit"===e.type?"credit":"debit";t[a].type=o}else t[a].type=e.type}else{let a=e.document.trim(),n=i+"_"+(a||"");if(t[n]||(t[n]={balance:0,document:a,account:e.account,employeeId:e.employeeId,entryName:e.entryName,subAccount:e.subAccount}),t[n].balance+=o,t[n].balance<0){let o="debit"===e.type?"credit":"debit";t[n].type=o}else t[n].type=e.type}}}));let n=(new Date).getTime()+800,l=await(0,a.fN)(n);return(0,a._2)(t).map((e=>{let i=t[e],d=1*(0,a.Zv)(i.balance,3);if(d>=0){let e=i;e.date||(e.date=n),e.type=i.type,e.account=i.account,e.document=i.document,e.amount=d,e.operationId=(0,a.M5)(),e.comprobanteId=l,e.description=i.description,e.employeeId=i.employeeId,e.entryName=i.entryName,e.subAccount=i.subaccount,o.push(e)}})),o}(d),o=s(t),l=o[(0,a._2)(o)[0]];l.description="Apertura year 2024 - 1000-AP24",console.log((new Date).getTime()-n),e&&e(l)}};const d=async e=>{let t={},o={},n={};for(let d in e){var l;let i=e[d],r=null===(l=(0,a.bh)("account_ids"))||void 0===l?void 0:l[i.account];if(r){(0,a.UE)(n[null===r||void 0===r?void 0:r.accountId])||(n[null===r||void 0===r?void 0:r.accountId]={saldo:0,name:(null===r||void 0===r?void 0:r.code)+" - "+(null===r||void 0===r?void 0:r.name),list:[]}),(0,a.UE)(t[i.comprobanteId])||(t[i.comprobanteId]=0,o[i.comprobanteId]=[]);let e=1*(0,a.Zv)(("debit"===i.type?1:-1)*i.amount,2);n[null===r||void 0===r?void 0:r.accountId].saldo=1*(0,a.Zv)(n[r.accountId].saldo,2)+1*e,n[null===r||void 0===r?void 0:r.accountId].list.push([i.comprobanteId,e]),t[i.comprobanteId]=1*(0,a.Zv)(t[i.comprobanteId],2)+e,o[i.comprobanteId].push({ammount:e,operationId:i.comprobanteId})}}let i=null;for(let a in t)t[a]&&(i||(i={}),i[a]=1);i&&((0,a.Rz)("comprobante_w_erros",i),(0,a.Rz)("has_filter_comp_error",!0))},r=async e=>{var t,o,n,l;let i={...null===(t=(0,a.bh)((0,a.hQ)()))||void 0===t?void 0:t.filter_search_opera};i.params={businessId:null===(o=(0,a.bh)("profileUser"))||void 0===o?void 0:o.businessId,year:(0,a.bh)("date_current_year"),":date1":(null===(n=(0,a.bh)("date_range_comps"))||void 0===n?void 0:n.initDate)-10,":date2":null===(l=(0,a.bh)("date_range_comps"))||void 0===l?void 0:l.lastDate};const r=(0,a.I7)(i),c=await r;if(c&&!c.error){(0,a.Rz)("comprobante_list",c);var u=[];(0,a.bh)("comprobante_all_list")&&(0,a.bh)("comprobante_all_list").map((e=>{c[e.operationId]||console.log(e)})),c&&(0,a._2)(c).map((e=>{var t,o;c[e].account&&c[e].date>(null===(t=(0,a.bh)("date_range_comps"))||void 0===t?void 0:t.initDate)-10&&c[e].date<=(null===(o=(0,a.bh)("date_range_comps"))||void 0===o?void 0:o.lastDate)&&u.push(c[e])})),(0,a.Rz)("comprobante_by_doc",s(u)),d(u),e&&e()}},c=async(e,t)=>{let o=[];e.map((e=>{var t,n;let l={...null===(t=(0,a.bh)((0,a.hQ)()))||void 0===t?void 0:t.delete_opera};l.params={businessId:null===(n=(0,a.bh)("profileUser"))||void 0===n?void 0:n.businessId,year:(0,a.bh)("date_current_year"),operationId:e.operationId},o.push(l)}));const n=o.map((async e=>{const t=(0,a.I7)(e);await t}));await Promise.all(n),t&&t()};function s(e){var t={};return e.length>0?e.map((e=>{let o=e.date;if(o&&e.account){let n=o+"_"+e.comprobanteId;if(!t[n]){t[n]={},["date","description","entryName","comprobanteId","employeeId"].forEach((o=>{t[n][o]=e[o]})),t[n].amount=0,t[n].balance=0,t[n].operations=[]}e.type&&t[n].operations.push(function(e){var t,o;let n={};n.account=null===(t=(0,a.bh)("account_ids"))||void 0===t?void 0:t[e.account],n.sub_account=null===(o=(0,a.bh)("sub_account_ids"))||void 0===o?void 0:o[e.subAccount],n.comprobanteId=e.comprobanteId,n.operationId=e.operationId,n.document=e.document,n.type=e.type;let l=(0,a.Zv)(e.amount,2);"credit"===e.type?(n.debit=0,n.credit=l):"debit"===e.type&&(n.credit=0,n.debit=l);return n}(e))}})):t=null,t}function u(e){(0,a.Rz)("has_filter_review",null),(0,a.Rz)("has_filter_comp_error",null),(0,a._2)(e).map((t=>{var o,n,l,i;null!==(o=(0,a.bh)("comp_under_review"))&&void 0!==o&&null!==(n=o.inReview)&&void 0!==n&&n[e[t].comprobanteId]&&(0,a.Rz)("has_filter_review",!0),null!==(l=(0,a.bh)("comp_under_review"))&&void 0!==l&&null!==(i=l.hasError)&&void 0!==i&&i[e[t].comprobanteId]&&(0,a.Rz)("has_filter_comp_error",!0)}))}const m=e=>(0,a.MV)("sortComprobantesByType",[e],(()=>{let t="type";return e&&e.sort(((e,o)=>{let a=e[t],n=o[t];return a===n?o[n]-e[a]:n>a?1:-1}))}))},1e3:()=>{}}]);
//# sourceMappingURL=1367.a4fc27fd.chunk.js.map