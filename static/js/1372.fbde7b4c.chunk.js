"use strict";(self.webpackChunkhrmfinance=self.webpackChunkhrmfinance||[]).push([[1372,4557],{1372:(e,l,n)=>{n.r(l),n.d(l,{default:()=>b});var o=n(2791),a=n(2350),d=(n(1e3),n(9760)),i=n(3588),r=n(2692),c=n(7689),s=n(2647),t=n(4557),v=n(1087),u=n(184);const m=(0,r.t8)(),p=(0,s.PU)(),h=e=>{var l,n,r,s,h,_,b,x;let{data:f,handleRefreshAll:I,updRvw:w,show:g,range2Scroll:j,inx:R,updRange:N}=e;const C=(0,o.useRef)(!1),[,k]=(0,o.useState)(0);let y=(0,c.TH)();const M=(0,c.s0)(),E=(0,o.useRef)(null),z=(0,o.useRef)(0),T=(0,o.useRef)(!1),S=(0,o.useRef)(null),B=null===(l=y.search)||void 0===l||null===(n=l.split("?"))||void 0===n?void 0:n[1],D=(0,a.mB)(B);if((0,o.useEffect)((()=>{C.current||(C.current=!0,setTimeout((()=>{null!==D&&void 0!==D&&D.cId&&(null===D||void 0===D?void 0:D.cId)===f.comprobanteId&&(U(),window.scrollTo(0,0))}),350))}),[D.cId]),(0,o.useEffect)((()=>(j&&(S.current=setInterval((()=>{let e=window.pageYOffset||document.documentElement.scrollTop;if(!T.current&&z.current!==e){z.current=e;let l=(0,a.cv)(E.current);l.top+l.height-z.current<0&&(0,a.Ey)(N)&&(T.current=!0,N())}}),250)),()=>{S.current&&clearInterval(S.current)})),[j]),!g)return null;const F=()=>{k((0,a.M5)())},H=()=>{(0,i.ly)(F)},O=()=>{I(),M({search:""})},U=()=>{let e=(0,a.bh)("lastTimeCallModal")||0;if(Date.now()>e){var l,n;(0,a.Rz)("lastTimeCallModal",Date.now()+320);const e=null===(l=y.search)||void 0===l||null===(n=l.split("?"))||void 0===n?void 0:n[1],o=(0,a.mB)(e);null!==o&&void 0!==o&&o.cId&&(null===o||void 0===o?void 0:o.cId)===f.comprobanteId||M({search:"?cId=".concat(f.comprobanteId)}),(0,a.Rz)("show_comprobante",f);let i={zIndex:450,height:"80vh"};i.props={minHeight:"1vh",overlay:!0,closeEvent:O},i.content=(0,u.jsx)(m,{confirm:H,item:f}),(0,d.OpenModal)(i)}},L=()=>{(0,i.WB)(null===f||void 0===f?void 0:f.operations,I)};let Q=null===(r=(0,a.bh)("comp_under_review"))||void 0===r||null===(s=r.inReview)||void 0===s?void 0:s[null===f||void 0===f?void 0:f.comprobanteId],A=(null===(h=(0,a.bh)("comp_under_review"))||void 0===h||null===(_=h.hasError)||void 0===_?void 0:_[null===f||void 0===f?void 0:f.comprobanteId])||(null===(b=(0,a.bh)("comprobante_w_erros"))||void 0===b?void 0:b[null===f||void 0===f?void 0:f.comprobanteId]);return(0,u.jsx)("div",{className:"item_acc",ref:E,"item-index":"".concat(R),...j?{"watching-scroll":"true"}:"",children:(0,u.jsxs)("div",{className:"_dsplFlx operation_item_box",children:[(0,u.jsx)("div",{className:"icon_revision",onClick:async()=>{var e;if(null!==(e=(0,a.bh)("comp_under_review"))&&void 0!==e&&e.balanceId){var l,n,o;let e={...(0,a.bh)("comp_under_review")},d={...e.inReview},i={...null===(l=(0,a.bh)((0,a.hQ)()))||void 0===l?void 0:l.upd_balances};i.params={businessId:null===(n=(0,a.bh)("profileUser"))||void 0===n?void 0:n.businessId,balanceId:null===(o=(0,a.bh)("comp_under_review"))||void 0===o?void 0:o.balanceId},d[null===f||void 0===f?void 0:f.comprobanteId]?delete d[null===f||void 0===f?void 0:f.comprobanteId]:d[null===f||void 0===f?void 0:f.comprobanteId]=!0,i.data2update={inReview:d};const r=(0,a.I7)(i);await r&&(e.inReview=d,(0,a.Rz)("comp_under_review",e),k((0,a.M5)()))}else{var d,r;let e={...(0,a.bh)("comp_under_review")};e.balanceId=(0,a.M5)(),e.type="comp_under_review",e.inReview={},e.inReview[null===f||void 0===f?void 0:f.comprobanteId]=!0;let l={...null===(d=(0,a.bh)((0,a.hQ)()))||void 0===d?void 0:d.add_balances};l.params={businessId:null===(r=(0,a.bh)("profileUser"))||void 0===r?void 0:r.businessId},l.form=e;const n=(0,a.I7)(l);await n&&((0,a.Rz)("comp_under_review",e),k((0,a.M5)()))}(0,i.Gg)((0,a.bh)("comprobante_by_doc")),w((0,a.M5)())},children:(0,u.jsx)(p,{name:A||Q?"alert":"check_circle",color:A?"var(--hrm_palette-selected-nav-text)":Q?"var(--hrm_palette-color-orange-800)":"var(--hrm_palette-success-fg)"})}),(0,u.jsxs)("div",{className:"_dsplFlx tr_bar_90",onClick:U,children:[(0,u.jsx)("div",{className:" tr_bar_15",children:(0,a.sJ)(null===f||void 0===f?void 0:f.date)}),(0,u.jsx)("div",{className:" tr_bar_25",style:A?{color:"var(--hrm_palette-selected-nav-text)"}:{},children:(0,u.jsx)(v.OL,{to:{pathname:"/accounting-ledger",search:"?cId=".concat(f.comprobanteId)},children:null===f||void 0===f?void 0:f.comprobanteId})}),(0,u.jsx)("div",{className:" tr_bar_55",style:{marginLeft:9},children:A?(0,u.jsx)("div",{className:"msg_alert_title",children:"El comprobante contiene errores"}):(0,u.jsx)("span",{children:null===f||void 0===f?void 0:f.description})})]}),(0,u.jsx)("div",{className:"flexSpace"}),null!==(x=(0,a.Ch)()[(0,a.bh)("date_current_year")])&&void 0!==x&&x.isClosed?null:(0,u.jsx)("div",{className:"icon tr_bar_5",onClick:()=>{let e=(0,a.bh)("lastTimeCallModal")||0;if(Date.now()>e){(0,a.Rz)("lastTimeCallModal",Date.now()+320);let e={zIndex:450,height:"40vh",props:{minHeight:"1vh",overlay:!0,closeEvent:()=>{}}};e.content=(0,u.jsx)(t.default,{confirm:L,item:f}),(0,d.OpenModal)(e)}},children:(0,u.jsx)(p,{name:"outline_delete",color:"#c62828"})})]})})},_=(e,l)=>l.elmId===e.elmId&&l.show===e.show&&l.range2Scroll===e.range2Scroll,b=(0,o.memo)(h,_)},4557:(e,l,n)=>{n.r(l),n.d(l,{default:()=>d});n(2791),n(1e3);var o=n(9760),a=n(184);const d=e=>{let{data:l,confirm:n,handleClick:d,close:i}=e;const{modalID:r}=l,c=e=>{(0,o.CloseModal)({id:r})};return(0,a.jsxs)("div",{style:{maxHeight:"40vh",minHeight:"28vh",overflow:"auto",background:"var(--hrm_palette-general-background-b)",borderRadius:13,padding:"10px 19px"},children:[(0,a.jsxs)("div",{className:"_dsplFlx ",children:[(0,a.jsx)("p",{className:"form_title",children:"Eliminar Comprobante"}),(0,a.jsx)("div",{className:"flexSpace"})]}),(0,a.jsx)("div",{className:"_dsplFlx ",children:(0,a.jsx)("span",{children:"Una vez eliminado no podra ser recuperado"})}),(0,a.jsxs)("div",{className:"_dsplFlx ",style:{padding:"15px 10px"},children:[(0,a.jsx)("div",{className:"flexSpace"}),(0,a.jsx)("p",{className:"group_title addBtn",onClick:c,children:"Cancelar"}),(0,a.jsx)("p",{className:"group_title addBtn red",onClick:()=>{n(),c()},children:"Eliminar"})]})]})}},1e3:()=>{}}]);
//# sourceMappingURL=1372.fbde7b4c.chunk.js.map