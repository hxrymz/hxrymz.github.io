"use strict";(self.webpackChunkhrmfinance=self.webpackChunkhrmfinance||[]).push([[1496,9760],{9760:function(e,n,i){i.r(n),i.d(n,{CloseModal:function(){return d},OpenModal:function(){return l},default:function(){return c}});var t=i(2791),o=i(5408),a=i(2350),r=i(184),s="listDialog_mdh392",c=function(){var e=(0,a.bh)("listDialog")||{},n=((0,o.Z)(s),Object.keys(e));return(0,r.jsx)(r.Fragment,{children:n.map((function(n,i){var o=e[n];if(o&&o.visible){var a={};o.height&&(a.heigth=o.height),o.width,o.zIndex&&(a.zIndex=o.zIndex-1);var s={zIndex:o.zIndex},c=null,l=o.data;return o.content&&(c=t.cloneElement(o.content,{data:l})),(0,r.jsxs)("div",{className:"ltr-1kbnjow",style:a,children:[(0,r.jsx)("div",{className:"ltr-hoe9xz",children:(0,r.jsx)("div",{className:"ltr-1wao6ny",style:s,id:n,children:c})}),o.data.overlay?(0,r.jsx)("div",{className:"DialogHRMOverlay ".concat(o.visible?"active":""),onClick:function(){var e;e=n,document.getElementsByTagName("html")[0].classList.remove("has-level-two"),d({id:e})}}):null]},n)}}))})},l=function(e){var n=(0,a.bh)("listDialog")||{},i=(0,a.M5)();n[i]||(n[i]={}),n[i].visible=!0;var t={};e.props?(t=e.props).modalID=i:t.modalID=i;var o=document.getElementsByTagName("body")[0];null!==o&&void 0!==o&&o.style&&(o.style.overflowY="hidden"),n[i].isView=e.isView,n[i].observeResize=e.observeResize,n[i].observeResize&&(n[i].observeInterval=setInterval((function(){var e=document.querySelector("[dialog-key-id='".concat(i,"']")),t=e&&e.getBoundingClientRect();t&&(t.width===n[i].width&&t.height===n[i].height||(n[i].height=t.height+10,n[i].width=t.width,(0,a.Rz)("listDialog",n),(0,a.wt)(s)))}),200)),n[i].display=!0,e.zIndex&&(n[i].zIndex=e.zIndex),e.height&&(n[i].height=e.height),e.width&&(n[i].width=e.width),e.content&&(n[i].content=e.content),n[i].data=t,(0,a.Rz)("listDialog",n),(0,a.wt)(s),setTimeout((function(){document.getElementsByTagName("html")[0].classList.add("has-level-two"),(0,a.Rz)("modalOpen",i),(0,a.wt)(s)}),125)},d=function(e){var n,i,t,o=(0,a.bh)("listDialog")||{},r=e.id;o[r]&&(o[r].observeResize&&o[r].observeInterval&&clearInterval(o[r].observeInterval),o[r].display=!1,null===(n=o[r])||void 0===n||null===(i=n.data)||void 0===i||null===(t=i.closeEvent)||void 0===t||t.call(i),(0,a.Rz)("listDialog",o),delete o[r],document.getElementsByTagName("body")[0].style.overflowY=null,(0,a.wt)(s),setTimeout((function(){delete o[r],document.getElementsByTagName("html")[0].classList.remove("has-level-two"),(0,a.Rz)("modalOpen",null)}),750))}},1496:function(e,n,i){i.r(n),i.d(n,{default:function(){return y}});var t=i(4165),o=i(5861),a=i(9439),r=i(2791),s=i(2350),c=i(2647),l=i(9760),d=(i(3971),i(5986)),u=i(6496),v=i(4050),h=(i(261),i(184)),p=(0,c.PU)(),m=(0,c.Vg)(),f=(0,c.YZ)(),b=function(e){e.data,e.item;var n,i=(0,r.useState)(0),t=(0,a.Z)(i,2)[1],o=(0,r.useState)(""),c=(0,a.Z)(o,2),l=c[0],d=c[1],v=(0,r.useState)(!1),b=(0,a.Z)(v,2),x=b[0],g=b[1],j=(0,r.useState)(!1),y=(0,a.Z)(j,2),w=y[0],I=y[1],N=(0,r.useState)(!1),Z=(0,a.Z)(N,2),O=Z[0],z=Z[1];(0,r.useEffect)((function(){x||(g(!0),(0,u.S$)(k))}),[x]);var k=function(){t((0,s.M5)()),I(!1)},D=function(e){d(e),w&&I(!1)},C={1:{color:"var(--hrm_palette-success-fg)",icon:"success"},2:{color:"var(--hrm_palette-selected-nav-text)",icon:"problem"},3:{color:"rgb(254, 120, 23)",icon:"alert"}};return(0,h.jsxs)("div",{style:{maxHeight:"96vh",minHeight:"94vh",width:"94vw",overflow:"auto",background:"var(--hrm_palette-general-background-b)",borderRadius:13,padding:"10px 19px 30px"},children:[(0,h.jsxs)("div",{className:"_dsplFlx ",children:[(0,h.jsx)("p",{className:"title_collect",children:"Compare Invoices"}),(0,h.jsx)("div",{className:"flexSpace"})]}),(0,h.jsxs)("div",{className:"_dsplFlx ",style:{marginTop:14},children:[(0,h.jsx)("div",{style:{marginTop:11},children:(0,h.jsx)(m,{placeholder:"Buscar ....",width:560,obs:t,fetchData:D,loading:w,change:function(e){!w&&I(!0),d(e)},callempty:D,keyFlds:"search_cmpInvoice"})}),(0,h.jsx)("div",{className:"flexSpace"}),(0,h.jsxs)("div",{className:"_dsplFlx ",style:{marginTop:20},children:[(0,h.jsx)(f,{initvalue:O,keyCode:57,updChange:z}),(0,h.jsx)("span",{className:"checklabel",children:"Need Attention"})]})]}),(0,h.jsxs)("div",{style:{marginTop:14},children:[(0,h.jsxs)("div",{className:"_dsplFlx hdr_bar purple",children:[(0,h.jsx)("div",{className:"tr_bar_5",children:" "}),(0,h.jsx)("div",{className:"tr_bar_15",children:"Fecha"}),(0,h.jsx)("div",{className:"tr_bar_15",children:"Documento"}),(0,h.jsx)("div",{className:"tr_bar_12",children:"Importe"}),(0,h.jsx)("div",{className:"tr_bar_12",children:"Vendido"}),(0,h.jsx)("div",{className:"tr_bar_12",children:"Anticipo"}),(0,h.jsx)("div",{className:"tr_bar_12",children:"Cobrado"}),(0,h.jsx)("div",{className:"tr_bar_12",children:"Saldo"}),(0,h.jsx)("div",{className:"tr_bar_5",children:" "})]}),(0,h.jsx)("div",{className:"scollVh subMHeight",children:(0,s.bh)("invoiceCmpDocs")&&(null===(n=(0,s._2)((0,s.bh)("invoiceCmpDocs")))||void 0===n?void 0:n.map((function(e,n){var i,t,o,a,r,c,d,u,v=null===(i=(0,s.bh)("invoiceCmpDocs"))||void 0===i?void 0:i[e];if((l||O)&&!_(v,l,O))return null;var m=(0,s.Zv)(null===v||void 0===v?void 0:v.saldo,2),f=m<0?2:m>0?3:(null===v||void 0===v?void 0:v.cc_c)>0?1:2;return(0,h.jsxs)("div",{className:"_dsplFlx hdr_bar manual_vrfy",children:[(0,h.jsx)("div",{className:"tr_bar_5",children:(0,h.jsx)("div",{children:(0,h.jsx)(p,{name:null===(t=C[f])||void 0===t?void 0:t.icon,color:null===(o=C[f])||void 0===o?void 0:o.color})})}),(0,h.jsx)("div",{className:"tr_bar_15",children:(null===v||void 0===v?void 0:v.date)&&(0,s.sJ)(v.date)}),(0,h.jsx)("div",{className:"tr_bar_15 comprobanteId",children:e}),(0,h.jsx)("div",{className:"tr_bar_12 ",children:null===(a=1*(null===v||void 0===v?void 0:v.amount))||void 0===a?void 0:a.toFixed(2)}),(0,h.jsx)("div",{className:"tr_bar_12",children:null===(r=1*(null===v||void 0===v?void 0:v.cc_d))||void 0===r?void 0:r.toFixed(2)}),(0,h.jsx)("div",{className:"tr_bar_12",children:null===(c=1*(null===v||void 0===v?void 0:v.hasAnticipo))||void 0===c?void 0:c.toFixed(2)}),(0,h.jsx)("div",{className:"tr_bar_12",children:null===(d=1*(null===v||void 0===v?void 0:v.cc_c))||void 0===d?void 0:d.toFixed(2)}),(0,h.jsx)("div",{className:"tr_bar_12",children:null===(u=1*(null===v||void 0===v?void 0:v.saldo))||void 0===u?void 0:u.toFixed(2)}),(0,h.jsx)("div",{className:"tr_bar_5",children:" "})]},n)})))})]})]})},_=function(e,n,i){var t=!1;if(n){var o=n.toLowerCase();["amount","document","cc_c","cc_d","saldo"].map((function(n){if(i){var a,r,c,l=(0,s.Zv)(null===e||void 0===e?void 0:e.saldo,2);1!==(l<0?2:l>0?3:(null===e||void 0===e?void 0:e.cc_c)>0?1:2)&&e[n]&&(null===(a=e[n])||void 0===a||null===(r=a.toString())||void 0===r||null===(c=r.toLowerCase())||void 0===c?void 0:c.indexOf(o))>=0&&(t=!0)}else{var d,u,v;e[n]&&(null===(d=e[n])||void 0===d||null===(u=d.toString())||void 0===u||null===(v=u.toLowerCase())||void 0===v?void 0:v.indexOf(o))>=0&&(t=!0)}}))}else{var a=(0,s.Zv)(null===e||void 0===e?void 0:e.saldo,2);1!==(a<0?2:a>0?3:(null===e||void 0===e?void 0:e.cc_c)>0?1:2)&&(t=!0)}return t},x=(0,c.Vg)(),g=(0,d.bb)(),j=(0,d.T5)(),y=function(e){e.data,e.elmId;var n,i,c=e.updObs,d=(0,r.useState)(!1),p=(0,a.Z)(d,2),m=p[0],f=p[1],_=(0,r.useState)(0),y=(0,a.Z)(_,2),w=(y[0],y[1]),I=(0,r.useState)(!1),N=(0,a.Z)(I,2),Z=N[0],O=N[1];(0,r.useEffect)((function(){m||(f(!0),w((0,s.M5)()),(0,u.p9)(D),(0,v.Ht)("global_accounts","global_account_params",c))}));var z=function(){},k=function(e){(0,u.p9)(D)},D=function(){var e=(0,o.Z)((0,t.Z)().mark((function e(n,i){return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:w((0,s.M5)()),O(!1);case 2:case"end":return e.stop()}}),e)})));return function(n,i){return e.apply(this,arguments)}}();return(0,h.jsxs)("div",{className:"",children:[(0,h.jsxs)("div",{className:"accounts_header",children:[(0,h.jsx)("h2",{children:"Invoices"}),(0,h.jsxs)("div",{className:"_dsplFlx ",children:[(0,h.jsx)("p",{className:"group_title addBtn purple",onClick:function(){var e={zIndex:450,height:"80vh",props:{minHeight:"1vh",overlay:!0}};e.content=(0,h.jsx)(j,{}),(0,l.OpenModal)(e)},children:"Add Invoice"}),(0,h.jsx)("p",{className:"group_title addBtn purple",onClick:function(){var e={zIndex:450,height:"80vh",props:{minHeight:"1vh",overlay:!0}};e.content=(0,h.jsx)(b,{}),(0,l.OpenModal)(e)},children:"Compare Invoice"})]}),(0,h.jsxs)("div",{className:"_dsplFlx ",style:{marginTop:14},children:[(0,h.jsx)(x,{placeholder:"Buscar ....",width:360,obs:w,fetchData:function(e){O(!0),(0,u._3)(D)},loading:Z,change:function(e){!Z&&O(!0)},callempty:k,keyFlds:"searchQry"}),(0,h.jsx)("div",{className:"flexSpace"}),(0,h.jsxs)("div",{className:"_dsplFlx ",children:[(0,h.jsx)("div",{className:"total_comprobante_title",children:"No de Invoices:"}),(0,h.jsx)("div",{className:"total_comprobante gray",children:(0,h.jsx)("span",{children:null===(n=(0,s._2)((0,s.bh)("invoices_list")))||void 0===n?void 0:n.length})})]})]})]}),(0,h.jsx)("div",{className:"invoices_container scollVh",children:(0,s.bh)("invoices_list")&&(null===(i=(0,s._2)((0,s.bh)("invoices_list")))||void 0===i?void 0:i.map((function(e){return(0,h.jsx)(g,{data:(0,s.bh)("invoices_list")[e],elmId:e,openUpdateView:z,handleRefreshAll:k},e)})))})]})}},6496:function(e,n,i){i.d(n,{Hy:function(){return l},S$:function(){return u},_3:function(){return c},jB:function(){return d},p9:function(){return s}});var t=i(4165),o=i(1413),a=i(5861),r=i(2350),s=function(){var e=(0,a.Z)((0,t.Z)().mark((function e(n){var i,a,s,c,d,u;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=(0,r.bh)("getall_invoice_last")||0,!(Date.now()>i)){e.next=10;break}return(0,r.Rz)("getall_invoice_last",Date.now()+190),(c=(0,o.Z)({},null===(a=(0,r.bh)((0,r.hQ)()))||void 0===a?void 0:a.all_invoices)).params={businessId:null===(s=(0,r.bh)("profileUser"))||void 0===s?void 0:s.businessId},d=(0,r.I7)(c),e.next=8,d;case 8:(u=e.sent)&&((0,r.Rz)("invoices_list",l(u,"date")),(0,r.Rz)("invoices_ids",(0,r.ME)((0,r.jQ)(u),"invoiceId")),n&&n());case 10:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),c=function(){var e=(0,a.Z)((0,t.Z)().mark((function e(n){var i,a,s,c,d;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(s=(0,o.Z)({},null===(i=(0,r.bh)((0,r.hQ)()))||void 0===i?void 0:i.search_invoice)).params={businessId:null===(a=(0,r.bh)("profileUser"))||void 0===a?void 0:a.businessId,":search":(0,r.bh)("searchQry")},c=(0,r.I7)(s),e.next=5,c;case 5:(d=e.sent)&&((0,r.Rz)("invoices_list",l((0,r.jQ)(d),"date")),n&&n());case 7:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),l=function(e,n){return(0,r.MV)("sortInvoices",[e],(function(){return e&&e.sort((function(e,i){var t=e[n],o=i[n];return t<o?-1:t>o?1:0}))}))},d=function(){var e=(0,a.Z)((0,t.Z)().mark((function e(n,i){var a,s,c,l;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(c=(0,o.Z)({},null===(a=(0,r.bh)((0,r.hQ)()))||void 0===a?void 0:a.delete_invoice)).params={businessId:null===(s=(0,r.bh)("profileUser"))||void 0===s?void 0:s.businessId,invoiceId:n},l=(0,r.I7)(c),e.next=5,l;case 5:e.sent&&i&&i();case 7:case"end":return e.stop()}}),e)})));return function(n,i){return e.apply(this,arguments)}}(),u=function(){var e=(0,a.Z)((0,t.Z)().mark((function e(n){var i,a,s,c,l;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(s=(0,o.Z)({},null===(i=(0,r.bh)((0,r.hQ)()))||void 0===i?void 0:i.all_invoices)).params={businessId:null===(a=(0,r.bh)("profileUser"))||void 0===a?void 0:a.businessId},c=(0,r.I7)(s),e.next=5,c;case 5:(l=e.sent)&&((0,r.Rz)("invoiceCmp",l),v("SSJsgB2uUqcuoagD",(function(){v("v5MkYLwPAbgci3wW",(function(){var e=h();(0,r.Rz)("invoiceCmpDocs",e),n&&n()}))})));case 7:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),v=function(){var e=(0,a.Z)((0,t.Z)().mark((function e(n,i){var a,s,c,l,d;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(c=(0,o.Z)({},null===(a=(0,r.bh)((0,r.hQ)()))||void 0===a?void 0:a.filter_search_opera)).params={businessId:null===(s=(0,r.bh)("profileUser"))||void 0===s?void 0:s.businessId,year:(0,r.bh)("date_current_year"),":account":n},l=(0,r.I7)(c),e.next=5,l;case 5:(d=e.sent)&&!d.error?((0,r.Rz)("invoiceCmp"+n,d),i&&i()):i&&i();case 7:case"end":return e.stop()}}),e)})));return function(n,i){return e.apply(this,arguments)}}(),h=function(){var e=(0,r.bh)("invoiceCmp"),n=(0,r.bh)("invoiceCmpSSJsgB2uUqcuoagD"),i=(0,r.bh)("invoiceCmpv5MkYLwPAbgci3wW"),t={};return(0,r._2)(e).map((function(n){var i=e[n].document.trim();t[i]||(t[i]={document:i,amount:0,saldo:0,hasAnticipo:0,cc_c:0,cc_d:0,comprobanteIds:{}}),t[i].amount+=e[n].amount,t[i].saldo+=1*e[n].amount,t[i].date=e[n].date})),(0,r._2)(n).map((function(e){var i,o,a,r=n[e].document.trim();t[r]||(t[r]={document:r,amount:0,saldo:0,hasAnticipo:0,cc_c:0,cc_d:0,comprobanteIds:{}}),t[r].cc_d+="debit"===(null===(i=n[e])||void 0===i?void 0:i.type)?1*n[e].amount:0,t[r].cc_c+="credit"===(null===(o=n[e])||void 0===o?void 0:o.type)?1*n[e].amount:0,t[r].saldo+="credit"===(null===(a=n[e])||void 0===a?void 0:a.type)?-1*n[e].amount:0,t[r].comprobanteIds[n[e].comprobanteId]={date:n[e].date,description:n[e].description}})),(0,r._2)(i).map((function(e){var n,o,a=i[e].document.trim();a.indexOf("A-")>=0&&(a=a.split("A-")[1]),t[a]||(t[a]={document:a,amount:0,hasAnticipo:0,cc_c:0,cc_d:0,saldo:0,comprobanteIds:{}}),t[a].hasAnticipo+="credit"===(null===(n=i[e])||void 0===n?void 0:n.type)?1*i[e].amount:-1*i[e].amount,t[a].saldo+=-1*("credit"===(null===(o=i[e])||void 0===o?void 0:o.type)?1*i[e].amount:-1*i[e].amount),t[a].comprobanteIds[i[e].comprobanteId]={date:i[e].date,description:i[e].description}})),t}},3971:function(){},261:function(){},1413:function(e,n,i){i.d(n,{Z:function(){return a}});var t=i(4942);function o(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),i.push.apply(i,t)}return i}function a(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?o(Object(i),!0).forEach((function(n){(0,t.Z)(e,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):o(Object(i)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))}))}return e}}}]);
//# sourceMappingURL=1496.0c4ef66b.chunk.js.map