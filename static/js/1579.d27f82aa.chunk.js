"use strict";(self.webpackChunkhrmfinance=self.webpackChunkhrmfinance||[]).push([[1579],{3796:(e,i,t)=>{t.d(i,{$F:()=>u,$Y:()=>n,G1:()=>p,QB:()=>v,TQ:()=>m,VU:()=>a,XX:()=>d,cC:()=>r,km:()=>l,mH:()=>c,se:()=>h,t8:()=>s});var o=t(4382);function a(){return(0,o.ZP)((()=>t.e(2580).then(t.bind(t,2580))))}function l(){return(0,o.ZP)((()=>t.e(6459).then(t.bind(t,6459))))}function d(){return(0,o.ZP)((()=>Promise.all([t.e(1276),t.e(1205),t.e(5530)]).then(t.bind(t,5530))))}function n(){return(0,o.ZP)((()=>t.e(9522).then(t.bind(t,9522))))}function r(){return(0,o.ZP)((()=>Promise.all([t.e(2670),t.e(4430)]).then(t.bind(t,4430))))}function s(){return(0,o.ZP)((()=>Promise.all([t.e(2670),t.e(2135)]).then(t.bind(t,2135))))}function c(){return(0,o.ZP)((()=>Promise.all([t.e(1276),t.e(1205),t.e(5905)]).then(t.bind(t,5905))))}function u(){return(0,o.ZP)((()=>t.e(6632).then(t.bind(t,6632))))}function h(){return(0,o.ZP)((()=>t.e(2613).then(t.bind(t,2613))))}function v(){return(0,o.ZP)((()=>t.e(4946).then(t.bind(t,4946))))}function p(){return(0,o.ZP)((()=>t.e(9669).then(t.bind(t,9669))))}function m(){return(0,o.ZP)((()=>Promise.all([t.e(2670),t.e(710)]).then(t.bind(t,710))))}},1579:(e,i,t)=>{t.r(i),t.d(i,{default:()=>x});var o=t(2791),a=t(2350),l=t(6963);async function d(e,i,t){var o;let d=(null===(o=(0,a.bh)("print_structure"))||void 0===o?void 0:o.marriage_struct_print)||[];(0,a._2)(e).map((i=>{d[i]&&e[i]&&(d[i].text=e[i])}));const n=await fetch("https://www.hrmfinance.com/data/marriage_certificate.pdf").then((e=>e.arrayBuffer())),r=await l.PDFDocument.load(n,{ignoreEncryption:!0}),s=await r.embedFont(l.StandardFonts.Helvetica);let c=(0,a.bh)("b64_signature"),u=null;if(c){const e=await fetch(c).then((e=>e.arrayBuffer()));u=await r.embedPng(e)}const h=r.getPages(),v=h[0],{width:p,height:m}=v.getSize();if((0,a.Rz)("pdfSize",{width:p,height:m,pages:h.length}),t&&d&&(0,a._2)(d).map((e=>{let i=d[e];if(i){var t;let e=i.pageNo,d=null===h||void 0===h||null===(t=h[e])||void 0===t?void 0:t.getSize();if("text"===i.type){var o;null===(o=h[e])||void 0===o||o.drawText(i.text?i.text.toString():"",{x:i.x,y:d.height-i.y,size:i.size||10,font:s,color:i.color?(0,l.rgb)(i.color[0]/255,i.color[1]/255,i.color[2]/255):(0,l.rgb)(0,.1,.1)})}else if("textboxn"===i.type){let t=(i.text?i.text.toString():i.id.toString()).split("");null===t||void 0===t||t.map(((t,o)=>{var a;null===(a=h[e])||void 0===a||a.drawText(t,{x:i.x+o*i.space,y:d.height-i.y,size:i.size||10,font:s,color:i.color?(0,l.rgb)(i.color[0]/255,i.color[1]/255,i.color[2]/255):(0,l.rgb)(0,.1,.1)})}))}else if("checkBox"===i.type){var a,n;let t=(null===d||void 0===d?void 0:d.height)-i.y,o="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z";null===(a=h[e])||void 0===a||a.moveTo(i.x+2,t),null===(n=h[e])||void 0===n||n.drawSvgPath(o,{borderColor:i.color?(0,l.rgb)(i.color[0]/255,i.color[1]/255,i.color[2]/255):(0,l.rgb)(0,0,0),borderWidth:1,scale:.5})}else"image"===i.type&&u&&h[e].drawImage(u,{x:i.x,y:d.height-i.y,width:i.w,height:i.h})}})),i){return function(e){let i=new Blob([e],{type:"application/pdf"});return(window.URL||window.webkitURL).createObjectURL(i)}(await r.save())}return r.saveAsBase64({dataUri:!0})}var n=t(2647),r=t(3796),s=t(9760),c=t(24),u=t(184);const h=(0,n.Np)(),v="marriage_certificate",p=(0,r.$Y)(),m=(0,c.f_)(),f=(0,r.t8)();let b=["folio","tomo","state_registration","registration_officer","revised_by","prepared_by","city_office","state_office","city_registration","dop","dom","marriage_registration_officer","spouse2Id"];const x=e=>{var i,t,l,n,r,c,x,y,N,j,w,C,I,M;let{data:T,elmId:P,updObs:z}=e;const[k,B]=(0,o.useState)(!1),[O,S]=(0,o.useState)(0);(0,o.useEffect)((()=>{k||(B(!0),setTimeout((()=>{(async()=>{let e={query:"getScanDocumentsNotary",params:{":customerId":(0,a.bh)("upd_client").clientNotaryId,":documentType":"MCT"},queryString:"!* contain :customerId AND documentType contain :documentType"};const i=(0,a.Bm)((0,a.uG)(),e),t=await i;if(t&&!t.error){let e=(0,a._2)(t.data)[0],i=(0,a.bh)("upd_client");if(t.data[e]){var o,l;(0,a.Rz)(v,t.data[e]),(0,a.Rz)(v+"_bck",JSON.parse(JSON.stringify(t.data[e])));let r=g(i);if((null===(o=t.data[e])||void 0===o?void 0:o.spouse1Id)===i.clientNotaryId){var d;(0,a.Rz)("MCT_spouse1",r);let i=g(null===(d=t.data[e])||void 0===d?void 0:d.spouse2Info);(0,a.Rz)("MCT_spouse1",r),(0,a.Rz)("MCT_spouse2",i)}else if((null===(l=t.data[e])||void 0===l?void 0:l.spouse2Id)===i.clientNotaryId){var n;let i=g(null===(n=t.data[e])||void 0===n?void 0:n.spouse1Info);(0,a.Rz)("MCT_spouse2",r),(0,a.Rz)("MCT_spouse1",i)}S((0,a.M5)())}else(0,a.Rz)("MCT_spouse1",null)}})()}),50),S((0,a.M5)()))}));const R=(e,i)=>{let t=(0,a.bh)(v)||{};t[e]=i,(0,a.Rz)(v,t),S((0,a.M5)())},F=()=>{(null===T||void 0===T?void 0:T.modalID)&&(0,s.CloseModal)({id:null===T||void 0===T?void 0:T.modalID})},D=e=>{let i={zIndex:450,props:{minHeight:"1vh",overlay:!0}};i.content=(0,u.jsx)(p,{handleClick:i=>((e,i)=>{R(i,e.clientNotaryId);let t=g(e);(0,a.Rz)("MCT_spouse2",t)})(i,e)}),(0,s.OpenModal)(i)},Z=e=>{let i={zIndex:450,height:"93vh",props:{minHeight:"1vh",overlay:!0}};i.content=(0,u.jsx)(f,{updObs:S,confirm:i=>((e,i)=>{R(e,i)})(e,i)}),(0,s.OpenModal)(i)};let L=(0,a.vy)(b,(0,a.bh)(v),(0,a.bh)(v+"_bck"));return(0,u.jsxs)("div",{style:{maxHeight:"80vh",width:"800px",overflow:"auto",background:"var(--hrm_palette-general-background-b)",borderRadius:13,padding:"10px 19px 30px"},children:[(0,u.jsxs)("div",{className:"_dsplFlx ",children:[(0,u.jsx)("p",{className:"form_title",children:"Traducion de Certificacion de Matrimonio"}),(0,u.jsx)("div",{className:"flexSpace"}),(0,u.jsx)("button",{className:"group_title purple addBtn",onClick:async()=>{let e={};["name","city_pob","state_pob","dob","dateOfBirth","fatherName","motherName"].map((i=>{e[i+"_sp2"]=(0,a.bh)("MCT_spouse2")[i]}));let i=Object.assign({},(0,a.bh)(v),(0,a.bh)("MCT_spouse1"),e);if(i.dom){let e=new Date(i.dom).getTime();e&&(i.date_of_married=(0,a.sG)(e))}if(i.dop){let e=new Date(i.dop).getTime();e&&(i.date_of_peticion=(0,a.sG)(e))}i.dateOfBirth&&(i.dob_p=(0,a.sG)(i.dateOfBirth)),i.dateOfBirth_sp2&&(i.dob_p_sp2=(0,a.sG)(i.dateOfBirth_sp2)),i.city2_registration=i.city_registration,i.state2_registration=i.state_registration,i.todayDate=(0,a.sJ)((new Date).getTime());let t=await d(i,!0,!0);window.open(t)},children:"Imprimir"})]}),(0,u.jsx)("p",{className:"group_title",children:"Lugar y datos del Matrimonio"}),(0,u.jsxs)("div",{className:"_dsplFlx spaceAround",children:[(0,u.jsx)(h,{init:null===(i=(0,a.bh)(v))||void 0===i?void 0:i.folio,label:"Folio",width:60,updChanges:e=>R("folio",e)}),(0,u.jsx)(h,{init:null===(t=(0,a.bh)(v))||void 0===t?void 0:t.tomo,label:"Tomo",width:60,updChanges:e=>R("tomo",e)}),(0,u.jsx)(m,{init:null===(l=(0,a.bh)(v))||void 0===l?void 0:l.dom,label:"Fecha de matrimonio",updDate:e=>R("dom",e)}),(0,u.jsx)("div",{className:"_dsplFlx ",children:(0,u.jsxs)("div",{children:[(0,u.jsx)("p",{className:"label",onClick:()=>Z("marriage_registration_officer"),children:"Nombre de la Notaria:"}),(0,u.jsx)("div",{className:"date2Upd",children:null===(n=(0,a.bh)(v))||void 0===n?void 0:n.marriage_registration_officer})]})})]}),(0,u.jsxs)("div",{className:"_dsplFlx spaceAround",children:[(0,u.jsx)(h,{init:null===(r=(0,a.bh)(v))||void 0===r?void 0:r.city_registration,label:"Municipio",width:240,updChanges:e=>R("city_registration",e)}),(0,u.jsx)(h,{init:null===(c=(0,a.bh)(v))||void 0===c?void 0:c.state_registration,label:"Provincia",width:240,updChanges:e=>R("state_registration",e)})]}),(0,u.jsx)("div",{className:"separator"}),(0,u.jsx)("p",{className:"group_title",children:"Oficina donde se solitito el Documento"}),(0,u.jsxs)("div",{className:"_dsplFlx spaceAround",children:[(0,u.jsx)(m,{init:null===(x=(0,a.bh)(v))||void 0===x?void 0:x.dop,label:"Fecha de solicitud",updDate:e=>R("dop",e)}),(0,u.jsx)(h,{init:null===(y=(0,a.bh)(v))||void 0===y?void 0:y.city_office,label:"Municipio",width:240,updChanges:e=>R("city_office",e)}),(0,u.jsx)(h,{init:null===(N=(0,a.bh)(v))||void 0===N?void 0:N.state_office,label:"Provincia",width:240,updChanges:e=>R("state_office",e)})]}),(0,u.jsxs)("div",{className:"_dsplFlx spaceAround flxWrp",style:{margin:"22px 0 12px"},children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("p",{className:"label",onClick:()=>Z("prepared_by"),children:"Preparado por:"}),(0,u.jsx)("div",{className:"date2Upd",children:null===(j=(0,a.bh)(v))||void 0===j?void 0:j.prepared_by})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("p",{className:"label",onClick:()=>Z("revised_by"),children:"Revisado por:"}),(0,u.jsx)("div",{className:"date2Upd",children:null===(w=(0,a.bh)(v))||void 0===w?void 0:w.revised_by})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("p",{className:"label",onClick:()=>Z("registration_officer"),children:"Firmado por:"}),(0,u.jsx)("div",{className:"date2Upd",children:null===(C=(0,a.bh)(v))||void 0===C?void 0:C.registration_officer})]})]}),(0,u.jsx)("div",{className:"separator"}),(0,u.jsxs)("div",{className:"_dsplFlx ",style:{margin:"9px 0"},children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("p",{className:"group_title",children:"Conyuge (1)"}),(0,u.jsx)(_,{init:null===(I=(0,a.bh)("MCT_spouse1"))||void 0===I?void 0:I.name,label:"Nombre",width:240})]}),(0,u.jsx)("div",{className:"flexSpace"}),(0,u.jsxs)("div",{children:[(0,u.jsx)("p",{className:"group_title",onClick:()=>D("spouse2Id"),children:"Conyuge (2)"}),(0,u.jsx)(_,{init:null===(M=(0,a.bh)("MCT_spouse2"))||void 0===M?void 0:M.name,label:"Nombre",width:240})]})]}),(0,u.jsxs)("div",{className:"_dsplFlx ",children:[(0,u.jsx)("div",{className:"flexSpace"}),null!==L&&void 0!==L&&L.hasChange?(0,u.jsx)("button",{className:"group_title purple addBtn",onClick:async()=>{let e=(0,a.bh)(v),i={};if(e.documentNotaryId){let t=(0,a.vy)(b,(0,a.bh)(v),(0,a.bh)(v+"_bck"));i={query:"updateDocumentsNotary",params:{documentNotaryId:e.documentNotaryId},data2update:t.data}}else e.spouse1Id=(0,a.bh)("upd_client").clientNotaryId,e.documentType="MCT",e.documentNotaryId=(0,a.M5)(),i={query:"addDocumentsNotary",form:e};const t=(0,a.Bm)((0,a.uG)(),i),o=await t;o&&o.data&&((0,a.Rz)(v,o.data),S((0,a.M5)())),F(!0)},children:"Guardar"}):null]})]})},_=e=>{let{init:i,label:t,width:l}=e;const[d,n]=(0,o.useState)(!1),[r,s]=(0,o.useState)(0);return(0,o.useEffect)((()=>{d||(n(!0),s((0,a.M5)()))})),i?(0,u.jsxs)("div",{children:[(0,u.jsx)("p",{className:"label",children:t}),(0,u.jsx)("div",{style:l?{width:l}:null,className:"r7gAOb yyJm8b",children:i})]}):null},g=e=>{var i,t,o,l,d,n,r,s,c,u,h,v;return{city_pob:null===e||void 0===e||null===(i=e.placeOfBirth)||void 0===i?void 0:i.city,state_pob:null===e||void 0===e||null===(t=e.placeOfBirth)||void 0===t?void 0:t.state,fatherName:null!==e&&void 0!==e&&null!==(o=e.fatherInfo)&&void 0!==o&&o.firstName?"".concat(null===e||void 0===e||null===(l=e.fatherInfo)||void 0===l?void 0:l.firstName," ").concat(null!==e&&void 0!==e&&null!==(d=e.fatherInfo)&&void 0!==d&&d.middleName?(null===e||void 0===e||null===(n=e.fatherInfo)||void 0===n?void 0:n.middleName)+" ":"").concat(null===e||void 0===e||null===(r=e.fatherInfo)||void 0===r?void 0:r.lastName," "):"",dob:null===e||void 0===e?void 0:e.dateOfBirth,dateOfBirth:(0,a.sG)(null===e||void 0===e?void 0:e.dateOfBirth),motherName:null!==e&&void 0!==e&&null!==(s=e.motherInfo)&&void 0!==s&&s.firstName?"".concat(null===e||void 0===e||null===(c=e.motherInfo)||void 0===c?void 0:c.firstName," ").concat(null!==e&&void 0!==e&&null!==(u=e.motherInfo)&&void 0!==u&&u.middleName?(null===e||void 0===e||null===(h=e.motherInfo)||void 0===h?void 0:h.middleName)+" ":"").concat(null===e||void 0===e||null===(v=e.motherInfo)||void 0===v?void 0:v.lastName," "):"",name:null!==e&&void 0!==e&&e.firstName?"".concat(null===e||void 0===e?void 0:e.firstName," ").concat(null!==e&&void 0!==e&&e.middleName?(null===e||void 0===e?void 0:e.middleName)+" ":"").concat(null===e||void 0===e?void 0:e.lastName," "):""}}}}]);
//# sourceMappingURL=1579.d27f82aa.chunk.js.map