"use strict";(self.webpackChunkhrmfinance=self.webpackChunkhrmfinance||[]).push([[1784],{1232:function(e,n,a){a.d(n,{GP:function(){return u},N$:function(){return l},hF:function(){return h},i7:function(){return r},nr:function(){return o},pj:function(){return m}});var t=a(4165),c=a(1413),s=a(5861),i=a(2350),r=function(){var e=(0,s.Z)((0,t.Z)().mark((function e(n,a){var s,r,o,l,u,v;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(o=(0,c.Z)({},null===(s=(0,i.bh)((0,i.hQ)()))||void 0===s?void 0:s.filter_search_opera)).params={businessId:null===(r=(0,i.bh)("profileUser"))||void 0===r?void 0:r.businessId,":account":null===n||void 0===n?void 0:n.account,":subAccount":null===n||void 0===n?void 0:n.subAccount},l=(0,i.I7)(o),e.next=5,l;case 5:u=e.sent,(0,i.wL)("getall_collects"),(0,i.wL)(o),(0,i.wL)(u),u&&!u.error&&((0,i.Rz)("collect_list",u),(0,i.Rz)("collect_by_doc",d(u)),(0,i.Rz)("collect_by_docM",d(u)),v=(null===n||void 0===n?void 0:n.account)+"_"+(null===n||void 0===n?void 0:n.subAccount),p(u,v)),a&&a();case 11:case"end":return e.stop()}}),e)})));return function(n,a){return e.apply(this,arguments)}}(),o=function(){var e=(0,s.Z)((0,t.Z)().mark((function e(n,a){var s,r,o,l,u,v;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(o=(0,c.Z)({},null===(s=(0,i.bh)((0,i.hQ)()))||void 0===s?void 0:s.filter_search_opera)).params={businessId:null===(r=(0,i.bh)("profileUser"))||void 0===r?void 0:r.businessId,":account":null===n||void 0===n?void 0:n.account,":subAccount":null===n||void 0===n?void 0:n.subAccount},l=(0,i.I7)(o),e.next=5,l;case 5:u=e.sent,(0,i.wL)("getall_toPay"),(0,i.wL)(o),(0,i.wL)(u),u&&!u.error&&((0,i.Rz)("toPay_list",u),(0,i.Rz)("toPay_by_doc",d(u,!0)),(0,i.Rz)("toPay_by_docM",d(u,!0)),v=(null===n||void 0===n?void 0:n.account)+"_"+(null===n||void 0===n?void 0:n.subAccount),p(u,v)),a&&a();case 11:case"end":return e.stop()}}),e)})));return function(n,a){return e.apply(this,arguments)}}(),l=function(){var e=(0,s.Z)((0,t.Z)().mark((function e(n){var a,s,r,o,l;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=(0,c.Z)({},null===(a=(0,i.bh)((0,i.hQ)()))||void 0===a?void 0:a.search_opera)).params={businessId:null===(s=(0,i.bh)("profileUser"))||void 0===s?void 0:s.businessId,":search":(0,i.bh)("search_acc_record")},o=(0,i.I7)(r),e.next=5,o;case 5:(l=e.sent)&&!l.error&&((0,i.Rz)("comprobante_list",l),(0,i.Rz)("comprobante_by_doc",d(l))),n&&n();case 8:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();function d(e,n){var a={},t=e&&(0,i._2)(e);return t.length>0?t.map((function(t){var c,s=e[t],r=null===(c=s.document)||void 0===c?void 0:c.trim();if(!a[r]){a[r]={};["date","description","document","entryName"].forEach((function(e){a[r][e]=s[e]})),a[r].amount=0,a[r].operations=[]}if(s.type){var o=(0,i.Zv)(s.amount,2),l=(0,i.Zv)(a[r].amount,2),d=0;d=n?1*l+o*("debit"===s.type?-1:1):1*l+o*("credit"===s.type?-1:1),a[r].amount=(0,i.Zv)(d,2),a[r].operations.push(function(e){var n,a,t={};t.account=null===(n=(0,i.bh)("account_ids"))||void 0===n?void 0:n[e.account],t.sub_account=null===(a=(0,i.bh)("sub_account_ids"))||void 0===a?void 0:a[e.subAccount],t.comprobanteId=e.comprobanteId,t.date=e.date,t.description=e.description;var c=(0,i.Zv)(e.amount,2);"credit"===e.type?(t.debit=0,t.credit=c):"debit"===e.type&&(t.credit=0,t.debit=c);return t}(s))}})):a=null,a}var u=function(e,n,a){return(0,i.MV)("SumDocuments",[e,n,a],(function(){var a,t=0;return e&&(null===(a=(0,i._2)(e))||void 0===a||a.map((function(a,c){var s;t+=1*(null===(s=e[a])||void 0===s?void 0:s[n])}))),t}))},v=function(e,n,a){var t,c=0;return e&&(null===(t=(0,i._2)(e))||void 0===t||t.map((function(n,a){var t,s=(0,i.Zv)(e[n].amount,2);c+=s*("credit"===(null===(t=e[n])||void 0===t?void 0:t.type)?-1:1)}))),c},p=function(){var e=(0,s.Z)((0,t.Z)().mark((function e(n,a,c){var s;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(s=(0,i.bh)("rec_by_acc")||{})[a]=v(n)||"no",(0,i.Rz)("rec_by_acc",s),c&&c();case 4:case"end":return e.stop()}}),e)})));return function(n,a,t){return e.apply(this,arguments)}}(),h=function(){var e=(0,s.Z)((0,t.Z)().mark((function e(n,a,s){var r,o,l,d,u;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(l=(0,c.Z)({},null===(r=(0,i.bh)((0,i.hQ)()))||void 0===r?void 0:r.filter_search_opera)).params={businessId:null===(o=(0,i.bh)("profileUser"))||void 0===o?void 0:o.businessId,":account":null===n||void 0===n?void 0:n.account,":subAccount":null===n||void 0===n?void 0:n.subAccount},d=(0,i.I7)(l),e.next=5,d;case 5:(u=e.sent)&&!u.error&&p(u,a),s&&s();case 8:case"end":return e.stop()}}),e)})));return function(n,a,t){return e.apply(this,arguments)}}(),m=function(){var e=(0,s.Z)((0,t.Z)().mark((function e(n,a,s){var r,o,l,d,u,v,p;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(l=(0,c.Z)({},null===(r=(0,i.bh)((0,i.hQ)()))||void 0===r?void 0:r.search_subacc_acc)).params={businessId:null===(o=(0,i.bh)("profileUser"))||void 0===o?void 0:o.businessId,":account":n,":search":a},d=(0,i.I7)(l),e.next=5,d;case 5:u=e.sent,(0,i.wL)("searchSubAccbyCode"),(0,i.wL)(l),(0,i.wL)(u),u&&!u.error&&(p=null===(v=(0,i._2)(u))||void 0===v?void 0:v[0],s&&s(u[p]));case 10:case"end":return e.stop()}}),e)})));return function(n,a,t){return e.apply(this,arguments)}}()},5207:function(e,n,a){a.r(n),a.d(n,{default:function(){return z}});var t=a(4165),c=a(5861),s=a(9439),i=a(2791),r=a(2350),o=a(2647),l=a(9760),d=a(1475),u=a(4050),v=a(7689),p=a(1413),h=a(184),m=function(e){var n=e.data,a=e.confirm,t=(e.handleClick,e.close,n.modalID),c=function(e){(0,l.CloseModal)({id:t})};return(0,h.jsxs)("div",{style:{maxHeight:"40vh",minHeight:"28vh",overflow:"auto",background:"#fff",borderRadius:13,padding:"10px 19px"},children:[(0,h.jsxs)("div",{className:"_dsplFlx ",children:[(0,h.jsx)("p",{className:"form_title",children:"Eliminar Comprobante"}),(0,h.jsx)("div",{className:"flexSpace"})]}),(0,h.jsx)("div",{className:"_dsplFlx ",children:(0,h.jsx)("span",{children:"Una vez eliminado no podra ser recuperado"})}),(0,h.jsxs)("div",{className:"_dsplFlx ",style:{padding:"15px 10px"},children:[(0,h.jsx)("div",{className:"flexSpace"}),(0,h.jsx)("p",{className:"group_title addBtn",onClick:c,children:"Cancelar"}),(0,h.jsx)("p",{className:"group_title addBtn red",onClick:function(){a(),c()},children:"Eliminar"})]})]})},f=(a(1232),a(9661)),b=((0,o.YZ)(),(0,o.Np)()),x=(0,o.tL)(),_=(0,f.a)(),j="upd_categoriesM",N=function(e){var n,a,o,d,u,v,m,f,N,y=e.data,g=e.confirm,Z=(0,i.useState)(!1),w=(0,s.Z)(Z,2),I=w[0],k=w[1],C=(0,i.useState)(0),M=(0,s.Z)(C,2),z=(M[0],M[1]);(0,i.useEffect)((function(){I||(k(!0),z((0,r.M5)()))}));var A=function(e,n,a){var t=(0,r.bh)(j)||{};a?(t[a]||(t[a]={}),t[a][e]=n):t[e]=n,(0,r.Rz)(j,t),z((0,r.M5)())},S=["type","name","description","account","subAccount"],R=function(){var e=(0,c.Z)((0,t.Z)().mark((function e(){var n,a,c,s,i,o;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=(0,r.bh)(j),s=(0,r.vy)(S,(0,r.bh)(j),(0,r.bh)(j+"_bck")),(i=(0,p.Z)({},null===(n=(0,r.bh)((0,r.hQ)()))||void 0===n?void 0:n.upd_categapp)).params={businessId:null===(a=(0,r.bh)("profileUser"))||void 0===a?void 0:a.businessId,categoryId:c.categoryId},i.data2update=s.data,o=(0,r.I7)(i),e.next=8,o;case 8:e.sent&&((0,r.Rz)(j,{}),(0,r.Rz)(j+"_bck",{}),g&&g(),(null===y||void 0===y?void 0:y.modalID)&&(0,l.CloseModal)({id:null===y||void 0===y?void 0:y.modalID}));case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),F=(0,r.vy)(S,(0,r.bh)(j),(0,r.bh)(j+"_bck"));return(0,h.jsxs)("div",{style:{maxHeight:"80vh",width:"560px",overflow:"auto",background:"var(--hrm_palette-general-background-b)",borderRadius:13,padding:"10px 19px 25px"},children:[(0,h.jsxs)("div",{className:"_dsplFlx ",children:[(0,h.jsx)("p",{className:"form_title",children:"Actualizar Provedor o Cliente"}),(0,h.jsx)("div",{className:"flexSpace"})]}),(0,h.jsx)("div",{className:"extra_container",children:null!==(n=(0,r.bh)(j))&&void 0!==n&&n.account?(0,h.jsxs)("div",{className:"",children:[(0,h.jsxs)("div",{className:"_dsplFlx",children:[(0,h.jsx)("div",{className:"employee_title",style:{color:"#646cff",cursor:"pointer"},onClick:function(){return function(e,n){var a=(0,r.bh)(j)||{};a.account=null,a.subAccount=null,(0,r.Rz)(j,a),z((0,r.M5)())}()},children:"Cuenta:"}),(0,h.jsx)("div",{className:"employee_name",children:null===(a=(0,r.bh)("account_ids"))||void 0===a||null===(o=a[(0,r.bh)(j).account])||void 0===o?void 0:o.name})]}),null!==(d=(0,r.bh)(j))&&void 0!==d&&d.subAccount?(0,h.jsxs)("div",{className:"_dsplFlx",children:[(0,h.jsx)("div",{className:"employee_title",style:{color:"#646cff",cursor:"pointer"},children:"SubCuenta:"}),(0,h.jsx)("div",{className:"employee_name",children:null===(u=(0,r.bh)("sub_account_ids"))||void 0===u||null===(v=u[(0,r.bh)(j).subAccount])||void 0===v?void 0:v.subAccountName})]}):null]}):(0,h.jsx)(_,{placeholder:"buscar una cuenta",width:420,handleClick:function(e,n){var a=(0,r.bh)(j)||{};a.account=e,a.subAccount=n,(0,r.Rz)(j,a),z((0,r.M5)())}})}),(0,h.jsx)(b,{init:null===(m=(0,r.bh)(j))||void 0===m?void 0:m.name,label:"Nombre",width:520,updChanges:function(e){return A("name",e)}}),(0,h.jsx)(b,{init:null===(f=(0,r.bh)(j))||void 0===f?void 0:f.description,label:"Descripcion",width:520,updChanges:function(e){return A("description",e)}}),(0,h.jsxs)("div",{className:"_dsplFlx ",style:{padding:"18px"},children:[(0,h.jsx)("div",{className:"flexSpace"}),(0,h.jsx)(x,{data:[{label:"Gastos",id:"expenses"},{label:"Ingresos",id:"incomes"}],active:null===(N=(0,r.bh)(j))||void 0===N?void 0:N.type,updSelect:function(e){return A("type",e)}}),(0,h.jsx)("div",{className:"flexSpace"})]}),(0,h.jsxs)("div",{className:"_dsplFlx ",children:[(0,h.jsx)("div",{className:"flexSpace"}),null!==F&&void 0!==F&&F.hasChange?(0,h.jsx)("div",{className:"card",children:(0,h.jsx)("button",{onClick:R,children:"Actualizar"})}):null]})]})},y=(0,o.PU)(),g=function(e){var n=e.data,a=(e.elmId,e.handleRefreshAll),o=(0,i.useState)(!1),u=(0,s.Z)(o,2),f=u[0],b=u[1],x=(0,i.useState)(0),_=(0,s.Z)(x,2),j=(_[0],_[1]),g=(0,i.useState)(0),Z=(0,s.Z)(g,2);Z[0],Z[1],(0,v.s0)();(0,i.useEffect)((function(){f||(b(!0),j((0,r.M5)()))}));var w=function(){j((0,r.M5)())},I=function(){(0,d.MX)(w)},k=function(){var e=(0,c.Z)((0,t.Z)().mark((function e(){var a;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(0,r.I0)()&&((0,r.Rz)("upd_categoriesM",n),(0,r.Rz)("upd_categoriesM_bck",(0,p.Z)({},n)),(a={}).zIndex=450,a.height="80vh",a.props={minHeight:"1vh",overlay:!0},a.content=(0,h.jsx)(N,{confirm:I}),(0,l.OpenModal)(a));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),C=function(){(0,d.M_)(null===n||void 0===n?void 0:n.movementId,a)};return(0,h.jsx)("div",{className:"item_acc",children:(0,h.jsxs)("div",{className:"_dsplFlx operation_item_box",children:[(0,h.jsx)("div",{className:"icon_revision",children:(0,h.jsx)(y,{name:n.account?"success":"alert",color:n.account?"var(--hrm_palette-success-fg)":"var(--hrm_palette-selected-nav-text)"})}),(0,h.jsxs)("div",{className:"_dsplFlx tr_bar_90",onClick:k,children:[(0,h.jsx)("div",{className:" tr_bar_25",children:null===n||void 0===n?void 0:n.name}),(0,h.jsx)("div",{className:" tr_bar_45  font_onm",style:{marginLeft:9}}),(0,h.jsx)("div",{className:" tr_bar_15",style:{color:"expense"===n.movementType?"var(--hrm_palette-selected-nav-text)":"var( --hrm_palette-blue-purple)"},children:null===n||void 0===n?void 0:n.type})]}),(0,h.jsx)("div",{className:"flexSpace"}),(0,h.jsx)("div",{className:"icon tr_bar_5",onClick:function(){var e=(0,r.bh)("lastTimeCallModal")||0;if(Date.now()>e){(0,r.Rz)("lastTimeCallModal",Date.now()+320);var a={zIndex:450,height:"40vh",props:{minHeight:"1vh",overlay:!0,closeEvent:function(){}}};a.content=(0,h.jsx)(m,{confirm:C,item:n}),(0,l.OpenModal)(a)}},children:(0,h.jsx)(y,{name:"outline_delete",color:"#c62828"})})]})})},Z=(0,o.Np)(),w=(0,o.tL)(),I=(0,f.a)(),k="new_mobile_categories",C=function(e){var n,a,o,d,u,v,m,f,b,x=e.data,_=e.confirm,j=(0,i.useState)(!1),N=(0,s.Z)(j,2),y=N[0],g=N[1],C=(0,i.useState)(0),M=(0,s.Z)(C,2),z=(M[0],M[1]);(0,i.useEffect)((function(){y||(g(!0),z((0,r.M5)()))}));var A=function(e,n,a){var t=(0,r.bh)(k)||{};a?(t[a]||(t[a]={}),t[a][e]=n):t[e]=n,(0,r.Rz)(k,t),z((0,r.M5)())},S=function(){var e=(0,c.Z)((0,t.Z)().mark((function e(){var n,a,c,s,i;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(c=(0,r.bh)(k)).categoryId=(0,r.M5)(),(s=(0,p.Z)({},null===(n=(0,r.bh)((0,r.hQ)()))||void 0===n?void 0:n.add_categapp)).params={businessId:null===(a=(0,r.bh)("profileUser"))||void 0===a?void 0:a.businessId},s.form=c,i=(0,r.I7)(s),e.next=8,i;case 8:e.sent&&((0,r.Rz)(k,{}),_&&_(),(null===x||void 0===x?void 0:x.modalID)&&(0,l.CloseModal)({id:null===x||void 0===x?void 0:x.modalID}));case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,h.jsxs)("div",{style:{maxHeight:"80vh",width:"560px",overflow:"auto",background:"var(--hrm_palette-general-background-b)",borderRadius:13,padding:"10px 19px"},children:[(0,h.jsxs)("div",{className:"_dsplFlx ",children:[(0,h.jsx)("p",{className:"form_title",children:"Agregar Categories"}),(0,h.jsx)("div",{className:"flexSpace"})]}),(0,h.jsx)("div",{className:"extra_container",children:null!==(n=(0,r.bh)(k))&&void 0!==n&&n.account?(0,h.jsxs)("div",{className:"",children:[(0,h.jsxs)("div",{className:"_dsplFlx",children:[(0,h.jsx)("div",{className:"employee_title",style:{color:"#646cff",cursor:"pointer"},onClick:function(){return function(e,n){var a=(0,r.bh)(k)||{};a.account=null,a.subAccount=null,(0,r.Rz)(k,a),z((0,r.M5)())}()},children:"Cuenta:"}),(0,h.jsx)("div",{className:"employee_name",children:null===(a=(0,r.bh)("account_ids"))||void 0===a||null===(o=a[(0,r.bh)(k).account])||void 0===o?void 0:o.name})]}),null!==(d=(0,r.bh)(k))&&void 0!==d&&d.subAccount?(0,h.jsxs)("div",{className:"_dsplFlx",children:[(0,h.jsx)("div",{className:"employee_title",style:{color:"#646cff",cursor:"pointer"},children:"SubCuenta:"}),(0,h.jsx)("div",{className:"employee_name",children:null===(u=(0,r.bh)("sub_account_ids"))||void 0===u||null===(v=u[(0,r.bh)(k).subAccount])||void 0===v?void 0:v.subAccountName})]}):null]}):(0,h.jsx)(I,{placeholder:"buscar una cuenta",width:420,handleClick:function(e,n){var a=(0,r.bh)(k)||{};a.account=e,a.subAccount=n,(0,r.Rz)(k,a),z((0,r.M5)())}})}),(0,h.jsx)(Z,{init:null===(m=(0,r.bh)(k))||void 0===m?void 0:m.name,label:"Nombre",width:520,updChanges:function(e){return A("name",e)}}),(0,h.jsx)(Z,{init:null===(f=(0,r.bh)(k))||void 0===f?void 0:f.description,label:"Descripcion",width:520,updChanges:function(e){return A("description",e)}}),(0,h.jsxs)("div",{className:"_dsplFlx ",style:{padding:"18px"},children:[(0,h.jsx)("div",{className:"flexSpace"}),(0,h.jsx)(w,{data:[{label:"Expenses",id:"expenses"},{label:"Incomes",id:"incomes"}],active:null===(b=(0,r.bh)(k))||void 0===b?void 0:b.type,updSelect:function(e){return A("type",e)}})]}),(0,h.jsxs)("div",{className:"_dsplFlx ",children:[(0,h.jsx)("div",{className:"flexSpace"}),(0,h.jsx)("div",{className:"card",children:(0,h.jsx)("button",{onClick:S,children:"Guardar"})})]})]})},M=(0,o.Vg)(),z=function(e){e.data,e.elmId,e.updObs;var n,a,o=(0,i.useState)(!1),p=(0,s.Z)(o,2),m=p[0],f=p[1],b=(0,i.useState)(0),x=(0,s.Z)(b,2),_=(x[0],x[1]),j=(0,i.useState)(!1),N=(0,s.Z)(j,2),y=N[0],Z=N[1];(0,v.s0)();(0,i.useEffect)((function(){m||(f(!0),_((0,r.M5)()),(0,u.Ht)("global_accounts","global_account_params",w),I())}));var w=function(){(0,u.ZX)(I)},I=function(){(0,d.bM)(z)},k=function(e){(0,d.bM)(z)},z=function(){var e=(0,c.Z)((0,t.Z)().mark((function e(n,a){return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:_((0,r.M5)()),Z(!1);case 2:case"end":return e.stop()}}),e)})));return function(n,a){return e.apply(this,arguments)}}();return(0,h.jsxs)("div",{className:"",children:[(0,h.jsxs)("div",{className:"accounts_header",children:[(0,h.jsx)("h2",{children:"Categorias"}),(0,r.I0)()?(0,h.jsx)("div",{className:"_dsplFlx ",children:(0,h.jsx)("p",{className:"group_title addBtn purple",onClick:function(e){var n={zIndex:450,height:"80vh",props:{minHeight:"1vh",overlay:!0}};n.content=(0,h.jsx)(C,{}),(0,l.OpenModal)(n)},children:"Agregar"})}):null,(0,h.jsxs)("div",{className:"_dsplFlx ",style:{marginTop:14},children:[(0,h.jsx)(M,{placeholder:"Buscar ....",width:360,obs:_,fetchData:function(e){Z(!0),(0,d.vC)(z)},loading:y,change:function(e){!y&&Z(!0)},callempty:k,keyFlds:"search_categories"}),(0,h.jsx)("div",{className:"flexSpace"}),(0,h.jsxs)("div",{className:"_dsplFlx ",children:[(0,h.jsx)("div",{className:"total_comprobante_title",children:"No de categorias:"}),(0,h.jsx)("div",{className:"total_comprobante gray",children:(0,h.jsx)("span",{children:null===(n=(0,r._2)((0,r.bh)("categories_list")))||void 0===n?void 0:n.length})})]})]})]}),(0,h.jsx)("div",{className:"providers_container scollVh",children:(0,r.bh)("categories_list")&&(null===(a=(0,r._2)((0,r.bh)("categories_list")))||void 0===a?void 0:a.map((function(e){return(0,h.jsx)(g,{data:(0,r.bh)("categories_list")[e],elmId:e,handleRefreshAll:k},e)})))})]})}}}]);
//# sourceMappingURL=1784.d175e451.chunk.js.map