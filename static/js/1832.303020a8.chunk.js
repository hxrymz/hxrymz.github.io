"use strict";(self.webpackChunkhrmfinance=self.webpackChunkhrmfinance||[]).push([[1832,9760],{9760:(e,l,o)=>{o.r(l),o.d(l,{CloseModal:()=>u,OpenModal:()=>s,default:()=>n});var t=o(2791),a=o(5408),i=o(2350),c=o(184);const d="listDialog_mdh392",n=()=>{const e=(0,i.bh)("listDialog")||{};(0,a.Z)(d);let l=Object.keys(e);return(0,c.jsx)(c.Fragment,{children:l.map(((l,o)=>{let a=e[l];if(a&&a.visible){let e={};a.height&&(e.heigth=a.height),a.width,a.zIndex&&(e.zIndex=a.zIndex-1);let o={zIndex:a.zIndex},i=null,d=a.data;return a.content&&(i=t.cloneElement(a.content,{data:d})),(0,c.jsxs)("div",{className:"ltr-1kbnjow",style:e,children:[(0,c.jsx)("div",{className:"ltr-hoe9xz",children:(0,c.jsx)("div",{className:"ltr-1wao6ny",style:o,id:l,children:i})}),a.data.overlay?(0,c.jsx)("div",{className:"DialogHRMOverlay ".concat(a.visible?"active":""),onClick:()=>{var e;e=l,document.getElementsByTagName("html")[0].classList.remove("has-level-two"),u({id:e})}}):null]},l)}}))})},s=e=>{let l=(0,i.bh)("listDialog")||{},o=(0,i.M5)();l[o]||(l[o]={}),l[o].visible=!0;let t={};e.props?(t=e.props,t.modalID=o):t.modalID=o;let a=document.getElementsByTagName("body")[0];null!==a&&void 0!==a&&a.style&&(a.style.overflowY="hidden"),l[o].isView=e.isView,l[o].observeResize=e.observeResize,l[o].observeResize&&(l[o].observeInterval=setInterval((()=>{let e=document.querySelector("[dialog-key-id='".concat(o,"']")),t=e&&e.getBoundingClientRect();t&&(t.width===l[o].width&&t.height===l[o].height||(l[o].height=t.height+10,l[o].width=t.width,(0,i.Rz)("listDialog",l),(0,i.wt)(d)))}),200)),l[o].display=!0,e.zIndex&&(l[o].zIndex=e.zIndex),e.height&&(l[o].height=e.height),e.width&&(l[o].width=e.width),e.content&&(l[o].content=e.content),l[o].data=t,(0,i.Rz)("listDialog",l),(0,i.wt)(d),setTimeout((()=>{document.getElementsByTagName("html")[0].classList.add("has-level-two"),(0,i.Rz)("modalOpen",o),(0,i.wt)(d)}),125)},u=e=>{let l=(0,i.bh)("listDialog")||{},o=e.id;if(l[o]){var t,a,c;l[o].observeResize&&l[o].observeInterval&&clearInterval(l[o].observeInterval),l[o].display=!1,null===(t=l[o])||void 0===t||null===(a=t.data)||void 0===a||null===(c=a.closeEvent)||void 0===c||c.call(a),(0,i.Rz)("listDialog",l),delete l[o],document.getElementsByTagName("body")[0].style.overflowY=null,(0,i.wt)(d),setTimeout((()=>{delete l[o],document.getElementsByTagName("html")[0].classList.remove("has-level-two"),(0,i.Rz)("modalOpen",null)}),750)}}},1832:(e,l,o)=>{o.r(l),o.d(l,{default:()=>y});var t=o(2791),a=o(2350),i=o(2647),c=(o(6021),o(9760)),d=o(9179),n=o(1232),s=o(24),u=o(184);const r=(0,i.PU)(),v=(0,s.f_)(),h=(0,i.Np)(),m=(0,i.tL)(),b=(0,d.NC)(),p=(0,d.a)(),_="new_cobro_comprobante",y=e=>{var l,o,i,d,s,r,y,N,A,g,f,w,I,C,z,R,M,P,D,T,F,k,S,O,E,L,U,Q,B,Z,Y,q,G,H,V,K,$,W,J;let{data:X,confirm:ee}=e;const[le,oe]=(0,t.useState)(!1),[te,ae]=(0,t.useState)(0);(0,t.useEffect)((()=>{le||(oe(!0),(0,a.Rz)("PaymentMethodAccount",null),(0,a.Rz)("accountPicker",{}),ae((0,a.M5)()))}));const ie=(e,l,o)=>{let t=(0,a.bh)(_)||{};o?(t[o]||(t[o]={}),t[o][e]=l):t[e]=l,(0,a.Rz)(_,t),ae((0,a.M5)())},ce=(e,l)=>{let o={account:e,subAccount:l};(0,a.Rz)("PaymentMethodAccount",o),ae((0,a.M5)())};let de=(0,n.GP)((0,a.bh)("toPay_by_doc"),"amount");return(0,u.jsxs)("div",{style:{maxHeight:"90vh",minHeight:"88vh",width:"560px",overflow:"auto",background:"var(--hrm_palette-general-background-b)",borderRadius:13,padding:"10px 19px"},children:[(0,u.jsxs)("div",{className:"_dsplFlx ",children:[(0,u.jsx)("p",{className:"form_title",children:"Registrando Pago"}),(0,u.jsx)("div",{className:"flexSpace"})]}),(0,u.jsx)("div",{className:"_dsplFlx ",children:(0,u.jsxs)("div",{className:"_dsplFlx ",style:{padding:"35px 18px 10px "},children:[(0,u.jsx)("div",{className:"flexSpace"}),(0,u.jsx)(m,{data:[{label:"Cheque",id:"check"},{label:"Tarjeta",id:"card"}],active:(null===(l=(0,a.bh)(_))||void 0===l?void 0:l.paymentType)||"check",updSelect:e=>(e=>{(0,a.Rz)("ComissionAccount",null),(0,a.Rz)("PaymentMethodAccount",null),ie("paymentType",e),ae((0,a.M5)())})(e)}),(0,u.jsx)("div",{className:"flexSpace"})]})}),"card"===(null===(o=(0,a.bh)(_))||void 0===o?void 0:o.paymentType)?(0,u.jsx)(b,{query:"Cred",type:null===(i=(0,a.bh)(_))||void 0===i?void 0:i.paymentType,handleClick:ce}):(0,u.jsx)(b,{query:"Efectivo",type:null===(d=(0,a.bh)(_))||void 0===d?void 0:d.paymentType,handleClick:ce}),(0,u.jsxs)("div",{className:"_dsplFlx",children:[(0,u.jsx)("div",{className:"flexSpace"}),null!==(s=(0,a.bh)("PaymentMethodAccount"))&&void 0!==s&&s.account?(0,u.jsxs)("div",{className:" acc_dtls",children:[(0,u.jsxs)("div",{className:"_dsplFlx",children:[(0,u.jsx)("div",{className:"code",style:{color:"#646cff"},children:null===(r=(0,a.bh)("account_ids"))||void 0===r||null===(y=r[null===(N=(0,a.bh)("PaymentMethodAccount"))||void 0===N?void 0:N.account])||void 0===y?void 0:y.code}),(0,u.jsx)("div",{className:"name",children:null===(A=(0,a.bh)("account_ids"))||void 0===A||null===(g=A[null===(f=(0,a.bh)("PaymentMethodAccount"))||void 0===f?void 0:f.account])||void 0===g?void 0:g.name})]}),(0,u.jsx)("div",{className:"flexSpace"}),null!==(w=(0,a.bh)("PaymentMethodAccount"))&&void 0!==w&&w.subAccount?(0,u.jsxs)("div",{className:"_dsplFlx",style:{margin:"10px 0 0 18px"},children:[(0,u.jsx)("div",{className:"code",children:null===(I=(0,a.bh)("sub_account_ids"))||void 0===I||null===(C=I[null===(z=(0,a.bh)("PaymentMethodAccount"))||void 0===z?void 0:z.subAccount])||void 0===C?void 0:C.subAccount}),(0,u.jsx)("div",{className:"name",children:null===(R=(0,a.bh)("sub_account_ids"))||void 0===R||null===(M=R[null===(P=(0,a.bh)("PaymentMethodAccount"))||void 0===P?void 0:P.subAccount])||void 0===M?void 0:M.subAccountName})]}):null]}):null]}),"card"===(null===(D=(0,a.bh)(_))||void 0===D?void 0:D.paymentType)&&null!==(T=(0,a.bh)("PaymentMethodAccount"))&&void 0!==T&&T.account?(0,u.jsxs)("div",{className:"",children:[(0,u.jsx)("div",{className:"separator"}),null!==(F=(0,a.bh)("ComissionAccount"))&&void 0!==F&&F.account?(0,u.jsxs)("div",{className:"",children:[(0,u.jsxs)("div",{className:" acc_dtls",children:[(0,u.jsxs)("div",{className:"_dsplFlx",children:[(0,u.jsx)("div",{className:"code",style:{color:"#646cff"},children:null===(k=(0,a.bh)("account_ids"))||void 0===k||null===(S=k[null===(O=(0,a.bh)("ComissionAccount"))||void 0===O?void 0:O.account])||void 0===S?void 0:S.code}),(0,u.jsx)("div",{className:"name",children:null===(E=(0,a.bh)("account_ids"))||void 0===E||null===(L=E[null===(U=(0,a.bh)("ComissionAccount"))||void 0===U?void 0:U.account])||void 0===L?void 0:L.name})]}),(0,u.jsx)("div",{className:"flexSpace"}),null!==(Q=(0,a.bh)("ComissionAccount"))&&void 0!==Q&&Q.subAccount?(0,u.jsxs)("div",{className:"_dsplFlx",style:{margin:"10px 0 0 18px"},children:[(0,u.jsx)("div",{className:"code",children:null===(B=(0,a.bh)("sub_account_ids"))||void 0===B||null===(Z=B[null===(Y=(0,a.bh)("ComissionAccount"))||void 0===Y?void 0:Y.subAccount])||void 0===Z?void 0:Z.subAccount}),(0,u.jsx)("div",{className:"name",children:null===(q=(0,a.bh)("sub_account_ids"))||void 0===q||null===(G=q[null===(H=(0,a.bh)("ComissionAccount"))||void 0===H?void 0:H.subAccount])||void 0===G?void 0:G.subAccountName})]}):null]}),(0,u.jsxs)("div",{className:"_dsplFlx",children:[(0,u.jsx)("div",{className:"flexSpace"}),(0,u.jsx)("div",{style:{maxWidth:120},children:(0,u.jsx)(h,{init:null===(V=(0,a.bh)("ComissionAccount"))||void 0===V?void 0:V.amount,label:"comision",width:80,updChanges:e=>((e,l,o)=>{let t=(0,a.bh)("ComissionAccount")||{};o?(t[o]||(t[o]={}),t[o][e]=l):t[e]=l,(0,a.Rz)("ComissionAccount",t),ae((0,a.M5)())})("amount",e)})}),(0,u.jsx)("div",{className:"flexSpace"})]})]}):(0,u.jsx)(p,{placeholder:"buscar cuenta de comision bancaria ",handleClick:(e,l)=>{let o={account:e,subAccount:l};(0,a.Rz)("ComissionAccount",o),ae((0,a.M5)())}}),(0,u.jsx)("div",{className:"separator"})]}):null,(0,u.jsxs)("div",{className:"_dsplFlx ",children:[(0,u.jsx)(v,{init:null===(K=(0,a.bh)(_))||void 0===K?void 0:K.date,updDate:e=>ie("date",e)}),(0,u.jsx)("div",{className:"flexSpace"}),(0,u.jsx)(h,{init:null===($=(0,a.bh)(_))||void 0===$?void 0:$.collectDocument,label:"Documento de Cobro",width:200,updChanges:e=>ie("collectDocument",e)})]}),(0,u.jsx)(h,{init:null===(W=(0,a.bh)(_))||void 0===W?void 0:W.description,label:"Descripcion",width:520,updChanges:e=>ie("description",e)}),de?(0,u.jsxs)("div",{className:"boxAddAcc",style:{margin:"18px 0"},children:[(0,u.jsxs)("div",{className:"_dsplFlx hdr_bar purple",style:{margin:"18px 0"},children:[(0,u.jsx)("div",{className:"tr_bar tr_bar_40",children:"Documento"}),(0,u.jsx)("div",{className:"tr_bar tr_bar_20",children:"Balance"}),(0,u.jsx)("div",{className:"tr_bar tr_bar_10"}),(0,u.jsx)("div",{className:"tr_bar tr_bar_25",children:"Por Pagar"})]}),de&&(0,a.bh)("toPay_by_doc")&&(null===(J=(0,a._2)((0,a.bh)("toPay_by_doc")))||void 0===J?void 0:J.map(((e,l)=>(0,u.jsx)(x,{idKey:e,data:(0,a.bh)("toPay_by_doc")[e],updObs:ae},e))))]}):null,(0,u.jsxs)("div",{className:"_dsplFlx ",children:[(0,u.jsx)("div",{className:"flexSpace"}),(0,u.jsx)("div",{className:"card",children:(0,u.jsx)("button",{onClick:async()=>{var e,l,o,t,i;let d=(0,a.bh)(_),n=[];d.date?d.date=new Date(d.date).getTime():d.date=(new Date).getTime()+800;let s=await(0,a.fN)(d.date);d.comprobanteId=s;let u="",r=(0,a.bh)("multi_pay_by_doc")&&(0,a._2)((0,a.bh)("multi_pay_by_doc"));if(r&&(null===r||void 0===r||r.map(((e,l)=>{var o,t,i,c,s;let r={...d},v=(0,a.bh)("multi_pay_by_doc")[e];r.document=e,u+=e+" ; ",r.account=null===(o=(0,a.bh)("Acc2Pay"))||void 0===o?void 0:o.account,r.subAccount=null===(t=(0,a.bh)("Acc2Pay"))||void 0===t?void 0:t.subAccount,r.providerId=null===(i=(0,a.bh)("Acc2Pay"))||void 0===i?void 0:i.providerId,r.type="debit",r.amount=1*v,r.payOrCollect="pay",r.operationId=(0,a.M5)();let h={...null===(c=(0,a.bh)((0,a.hQ)()))||void 0===c?void 0:c.add_opera};h.params={businessId:null===(s=(0,a.bh)("profileUser"))||void 0===s?void 0:s.businessId,year:new Date(d.date).getFullYear()},h.form=r,n.push(h)}))),null!==(e=(0,a.bh)("ComissionAccount"))&&void 0!==e&&e.account){var v,h,m;let e={...d};e.document=e.collectDocument,e.collectDocument=u,e.account=(0,a.bh)("ComissionAccount").account;let l=null===(v=(0,a.bh)("account_ids"))||void 0===v?void 0:v[e.account];l.payOrCollect&&(e.payOrCollect=l.payOrCollect),e.subAccount=(0,a.bh)("ComissionAccount").subAccount,e.type="debit",e.amount=1*(0,a.bh)("ComissionAccount").amount,e.operationId=(0,a.M5)();let o={...null===(h=(0,a.bh)((0,a.hQ)()))||void 0===h?void 0:h.add_opera};o.params={businessId:null===(m=(0,a.bh)("profileUser"))||void 0===m?void 0:m.businessId,year:new Date(d.date).getFullYear()},o.form=e,n.push(o)}let b={...d},p=j((0,a.bh)("multi_pay_by_doc"));b.document=b.collectDocument,b.collectDocument=u,b.account=(0,a.bh)("PaymentMethodAccount").account;let y=null===(l=(0,a.bh)("account_ids"))||void 0===l?void 0:l[b.account];y.payOrCollect&&(b.payOrCollect=y.payOrCollect),b.subAccount=(0,a.bh)("PaymentMethodAccount").subAccount,b.type="credit",b.amount=1*p,null!==(o=(0,a.bh)("ComissionAccount"))&&void 0!==o&&o.amount&&(b.amount+=1*(0,a.bh)("ComissionAccount").amount),b.operationId=(0,a.M5)();let x={...null===(t=(0,a.bh)((0,a.hQ)()))||void 0===t?void 0:t.add_opera};x.params={businessId:null===(i=(0,a.bh)("profileUser"))||void 0===i?void 0:i.businessId,year:new Date(d.date).getFullYear()},x.form=b,n.push(x);const N=n.map((async e=>{const l=(0,a.I7)(e);await l}));await Promise.all(N),(null===X||void 0===X?void 0:X.modalID)&&(0,c.CloseModal)({id:null===X||void 0===X?void 0:X.modalID}),setTimeout((()=>{(0,a.Rz)("multi_pay_by_doc",null),(0,a.Rz)(_,null),ae((0,a.M5)()),ee&&ee()}),400)},children:"Guardar"})})]})]})},x=e=>{let{data:l,updObs:o,idKey:i}=e;const[c,d]=(0,t.useState)(0),n=(e,l,o)=>{let t=(0,a.bh)("multi_pay_by_doc")||{};o?(t[o]||(t[o]={}),t[o][e]=l):t[e]=l,(0,a.Rz)("multi_pay_by_doc",t)};return 1*(null===l||void 0===l?void 0:l.amount)===0?null:(0,u.jsxs)("div",{className:"_dsplFlx hdr_bar",children:[(0,u.jsx)("div",{className:"tr_bar tr_bar_40",style:{marginTop:10},children:null===l||void 0===l?void 0:l.document}),(0,u.jsxs)("div",{className:"tr_bar tr_bar_20",style:{marginTop:10},children:["$",(1*(null===l||void 0===l?void 0:l.amount)).toFixed(2)]}),(0,u.jsx)("div",{className:"tr_bar tr_bar_10",style:{marginTop:10},children:c>(null===l||void 0===l?void 0:l.amount)?(0,u.jsx)("div",{className:"icon",children:(0,u.jsx)(r,{name:"alert",color:"#c62828"})}):null}),(0,u.jsx)("div",{className:"tr_bar tr_bar_25",children:(0,u.jsx)(h,{init:c,width:80,updChanges:e=>{return d(t=e),n(null===l||void 0===l?void 0:l.document,t),void o((0,a.M5)());var t}})})]})},j=e=>{var l;let o=0;return e&&(null===(l=(0,a._2)(e))||void 0===l||l.map(((l,t)=>{o+=(0,a.Zv)(e[l],2)}))),o}},1232:(e,l,o)=>{o.d(l,{GP:()=>n,N$:()=>c,hF:()=>u,i7:()=>a,nr:()=>i,pj:()=>r});var t=o(2350);const a=async(e,l)=>{var o,a;let i={...null===(o=(0,t.bh)((0,t.hQ)()))||void 0===o?void 0:o.filter_search_opera};i.params={businessId:null===(a=(0,t.bh)("profileUser"))||void 0===a?void 0:a.businessId,":account":null===e||void 0===e?void 0:e.account,":subAccount":null===e||void 0===e?void 0:e.subAccount};const c=(0,t.I7)(i),n=await c;if((0,t.wL)("getall_collects"),(0,t.wL)(i),(0,t.wL)(n),n&&!n.error){(0,t.Rz)("collect_list",n),(0,t.Rz)("collect_by_doc",d(n)),(0,t.Rz)("collect_by_docM",d(n));let l=(null===e||void 0===e?void 0:e.account)+"_"+(null===e||void 0===e?void 0:e.subAccount);s(n,l)}l&&l()},i=async(e,l)=>{var o,a;let i={...null===(o=(0,t.bh)((0,t.hQ)()))||void 0===o?void 0:o.filter_search_opera};i.params={businessId:null===(a=(0,t.bh)("profileUser"))||void 0===a?void 0:a.businessId,":account":null===e||void 0===e?void 0:e.account,":subAccount":null===e||void 0===e?void 0:e.subAccount};const c=(0,t.I7)(i),n=await c;if(n&&!n.error){(0,t.Rz)("toPay_list",n),(0,t.Rz)("toPay_by_doc",d(n,!0)),(0,t.Rz)("toPay_by_docM",d(n,!0));let l=(null===e||void 0===e?void 0:e.account)+"_"+(null===e||void 0===e?void 0:e.subAccount);s(n,l)}l&&l()},c=async e=>{var l,o;let a={...null===(l=(0,t.bh)((0,t.hQ)()))||void 0===l?void 0:l.search_opera};a.params={businessId:null===(o=(0,t.bh)("profileUser"))||void 0===o?void 0:o.businessId,":search":(0,t.bh)("search_acc_record")};const i=(0,t.I7)(a),c=await i;c&&!c.error&&((0,t.Rz)("comprobante_list",c),(0,t.Rz)("comprobante_by_doc",d(c))),e&&e()};function d(e,l){var o={};let a=e&&(0,t._2)(e);return a.length>0?a.map((a=>{var i;let c=e[a],d=null===(i=c.document)||void 0===i?void 0:i.trim();if(!o[d]){o[d]={},["date","description","document","entryName"].forEach((e=>{o[d][e]=c[e]})),o[d].amount=0,o[d].operations=[]}if(c.type){let e=(0,t.Zv)(c.amount,2),a=(0,t.Zv)(o[d].amount,2),i=0;i=l?1*a+e*("debit"===c.type?-1:1):1*a+e*("credit"===c.type?-1:1),o[d].amount=(0,t.Zv)(i,2),o[d].operations.push(function(e){var l,o;let a={};a.account=null===(l=(0,t.bh)("account_ids"))||void 0===l?void 0:l[e.account],a.sub_account=null===(o=(0,t.bh)("sub_account_ids"))||void 0===o?void 0:o[e.subAccount],a.comprobanteId=e.comprobanteId,a.operationId=e.operationId,a.date=e.date,a.description=e.description;let i=(0,t.Zv)(e.amount,2);"credit"===e.type?(a.debit=0,a.credit=i):"debit"===e.type&&(a.credit=0,a.debit=i);return a}(c))}})):o=null,o}const n=(e,l,o)=>(0,t.MV)("SumDocuments",[e,l,o],(()=>{var o;let a=0;return e&&(null===(o=(0,t._2)(e))||void 0===o||o.map(((o,t)=>{var i;a+=1*(null===(i=e[o])||void 0===i?void 0:i[l])}))),a})),s=async(e,l,o)=>{let a=(0,t.bh)("rec_by_acc")||{};a[l]=((e,l,o)=>{var a;let i=0;return e&&(null===(a=(0,t._2)(e))||void 0===a||a.map(((l,o)=>{var a;let c=(0,t.Zv)(e[l].amount,2);i+=c*("credit"===(null===(a=e[l])||void 0===a?void 0:a.type)?-1:1)}))),i})(e)||"no",(0,t.Rz)("rec_by_acc",a),o&&o()},u=async(e,l,o)=>{var a,i;let c={...null===(a=(0,t.bh)((0,t.hQ)()))||void 0===a?void 0:a.filter_search_opera};c.params={businessId:null===(i=(0,t.bh)("profileUser"))||void 0===i?void 0:i.businessId,":account":null===e||void 0===e?void 0:e.account,":subAccount":null===e||void 0===e?void 0:e.subAccount};const d=(0,t.I7)(c),n=await d;n&&!n.error&&s(n,l),o&&o()},r=async(e,l,o)=>{var a,i;let c={...null===(a=(0,t.bh)((0,t.hQ)()))||void 0===a?void 0:a.search_subacc_acc};c.params={businessId:null===(i=(0,t.bh)("profileUser"))||void 0===i?void 0:i.businessId,":account":e,":search":l};const d=(0,t.I7)(c),n=await d;if((0,t.wL)("searchSubAccbyCode"),(0,t.wL)(c),(0,t.wL)(n),n&&!n.error){var s;let e=null===(s=(0,t._2)(n))||void 0===s?void 0:s[0];o&&o(n[e])}}},6021:()=>{}}]);
//# sourceMappingURL=1832.303020a8.chunk.js.map