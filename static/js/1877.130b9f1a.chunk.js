"use strict";(self.webpackChunkhrmfinance=self.webpackChunkhrmfinance||[]).push([[1877],{3990:(l,e,a)=>{a.d(e,{Z:()=>_});var d=a(2791),i=a(2350),o=a(2647),c=(a(6021),a(9760)),n=a(9661),s=a(184);const t=(0,o.PU)(),r=(0,o.Np)(),u=(0,n.a)(),v=(0,o.JC)(),b=(0,o.tL)(),m=(0,o.YZ)(),h=l=>{var e,a,o,n,t,v,h,p,_;let{data:x,collectionName:j,confirm:y}=l;const[,N]=(0,d.useState)(0);let g=null===(e=(0,i.bh)("account_ids"))||void 0===e?void 0:e[null===(a=(0,i.bh)("extraAccountPicker"))||void 0===a?void 0:a.account],f=null===(o=(0,i.bh)("sub_account_ids"))||void 0===o?void 0:o[null===(n=(0,i.bh)("extraAccountPicker"))||void 0===n?void 0:n.subAccount];const A=(l,e,a)=>{let d=(0,i.bh)("extraAccountPicker")||{};a?(d[a]||(d[a]={}),d[a][l]=e):d[l]=e,(0,i.Rz)("extraAccountPicker",d),N((0,i.M5)())};return(0,s.jsxs)("div",{style:{maxHeight:"80vh",width:"560px",overflow:"auto",background:"var(--hrm_palette-general-background-b)",borderRadius:13,padding:"10px 19px"},children:[(0,s.jsxs)("div",{className:"_dsplFlx ",children:[(0,s.jsx)("p",{className:"form_title",children:"Agregar gastos extras"}),(0,s.jsx)("div",{className:"flexSpace"}),(0,s.jsxs)("div",{className:"_dsplFlx ",style:{marginTop:20},children:[(0,s.jsx)(m,{initvalue:null===(t=(0,i.bh)("extraAccountPicker"))||void 0===t?void 0:t.deducefromBank,keyCode:57,updChange:l=>A("deducefromBank",l)}),(0,s.jsx)("span",{className:"checklabel",children:"Deducir del Banco"})]})]}),null!==(v=(0,i.bh)("extraAccountPicker"))&&void 0!==v&&v.account?(0,s.jsx)("div",{className:"_dsplFlx ",style:{margin:"18px 0"},children:(0,s.jsxs)("div",{className:" acc_dtls",children:[(0,s.jsxs)("div",{className:"_dsplFlx",onClick:()=>{(0,i.Rz)("extraAccountPicker",null),N((0,i.M5)())},children:[(0,s.jsx)("div",{className:"code",style:{color:"#646cff"},children:null===g||void 0===g?void 0:g.upc_barcode}),(0,s.jsx)("div",{className:"name",children:null===g||void 0===g?void 0:g.name})]}),f?(0,s.jsxs)("div",{className:"_dsplFlx",style:{margin:"10px 0 0 18px"},children:[(0,s.jsx)("div",{className:"code",children:null===f||void 0===f?void 0:f.subAccount}),(0,s.jsx)("div",{className:"name",children:null===f||void 0===f?void 0:f.subAccountName})]}):null,(0,s.jsx)("div",{className:"flexSpace"})]})}):(0,s.jsx)("div",{className:"_dsplFlx ",style:{margin:"18px 0"},children:(0,s.jsx)(u,{width:420,handleClick:(l,e)=>{let a={account:l,subAccount:e};(0,i.Rz)("extraAccountPicker",a),N((0,i.M5)())}})}),(0,s.jsxs)("div",{className:"_dsplFlx spaceAround flxWrp",style:{marginLeft:7},children:[(0,s.jsxs)("div",{className:"_dsplFlx ",style:{padding:"18px"},children:[(0,s.jsx)("div",{className:"flexSpace"}),(0,s.jsx)(b,{data:[{label:"Deudoras",id:"debit"},{label:"Acredoras",id:"credit"}],active:null===(h=(0,i.bh)("extraAccountPicker"))||void 0===h?void 0:h.type,updSelect:l=>A("type",l)}),(0,s.jsx)("div",{className:"flexSpace"})]}),(0,s.jsx)(r,{init:null===(p=(0,i.bh)("extraAccountPicker"))||void 0===p?void 0:p.document,label:"Documento",width:220,updChanges:l=>A("document",l)}),(0,s.jsx)(r,{init:null===(_=(0,i.bh)("extraAccountPicker"))||void 0===_?void 0:_.amount,label:"Importe",width:120,type:"number",updChanges:l=>A("amount",l)})]}),(0,s.jsx)("div",{className:"card",children:(0,s.jsx)("button",{onClick:()=>{let l={...(0,i.bh)("extraAccountPicker")}||{},e={...(0,i.bh)(j)}||{},a=(0,i.M5)();l.type||(l.type="debit"),l.amount=1*l.amount,e[a]=l,(0,i.Rz)(j,e),(0,i.Rz)("extraAccountPicker",null),N((0,i.M5)()),y&&y(),(0,c.CloseModal)({id:x.modalID})},children:"Agregar"})})]})},p=l=>{var e,a;let{data:d,deleteItem:o,idKey:c}=l,n=null===(e=(0,i.bh)("account_ids"))||void 0===e?void 0:e[null===d||void 0===d?void 0:d.account],r=null===(a=(0,i.bh)("sub_account_ids"))||void 0===a?void 0:a[null===d||void 0===d?void 0:d.subAccount];return(0,s.jsxs)("div",{className:"_dsplFlx hdr_bar",children:[(0,s.jsx)("div",{className:"tr_bar tr_bar_25",children:(0,s.jsx)(v,{data:n,labelField:"code",infoField:"name"})}),(0,s.jsx)("div",{className:"tr_bar tr_bar_25",children:(0,s.jsx)(v,{data:r,labelField:"subAccount",infoField:"subAccountName"})}),(0,s.jsx)("div",{className:"tr_bar tr_bar_25",children:null===d||void 0===d?void 0:d.document}),(0,s.jsx)("div",{className:"tr_bar tr_bar_25",children:(0,i.Zv)(null===d||void 0===d?void 0:d.amount,2)}),(0,s.jsx)("div",{className:"flexSpace"}),(0,s.jsx)("div",{className:"icon",onClick:()=>{o(c)},children:(0,s.jsx)(t,{name:"outline_delete",color:"#c62828"})})]})},_=l=>{var e;let{collectionName:a}=l;const[,o]=(0,d.useState)(0),n=()=>{o((0,i.M5)())},t=l=>{let e=(0,i.bh)(a)||{};delete e[l],(0,i.Rz)(a,e),o((0,i.M5)())};return(0,s.jsxs)("div",{className:"boxAddAcc",style:{margin:"18px 0"},children:[(0,s.jsx)("div",{className:"_dsplFlx",children:(0,s.jsx)("p",{className:"group_title addBtn purple",onClick:()=>{let l={zIndex:450,height:"80vh",props:{minHeight:"1vh",overlay:!0}};l.content=(0,s.jsx)(h,{collectionName:a,confirm:n}),(0,c.OpenModal)(l)},children:"Agregar gastos"})}),(0,s.jsxs)("div",{className:"_dsplFlx hdr_bar purple",style:{margin:"18px 0"},children:[(0,s.jsx)("div",{className:"tr_bar tr_bar_25",children:"Cuenta"}),(0,s.jsx)("div",{className:"tr_bar tr_bar_25",children:"Sub Cuenta"}),(0,s.jsx)("div",{className:"tr_bar tr_bar_25",children:"Documento"}),(0,s.jsx)("div",{className:"tr_bar tr_bar_25",children:"Monto"})]}),(0,i.bh)(a)&&(null===(e=(0,i._2)((0,i.bh)(a)))||void 0===e?void 0:e.map(((l,e)=>(0,s.jsx)(p,{idKey:l,data:(0,i.bh)(a)[l],deleteItem:t},l))))]})}},1877:(l,e,a)=>{a.r(e),a.d(e,{default:()=>I});var d=a(2791),i=a(2350),o=a(2647),c=(a(6021),a(9760)),n=a(1232),s=a(9661),t=a(7689),r=a(24),u=a(3990),v=a(4050),b=a(184);const m=(0,o.PU)(),h=(0,o.Np)(),p=(0,s.LZ)(),_=(0,r.f_)(),x=(0,o.JC)(),j="new_multi_pay_prov",y="Acc2MPay",N="multi_pay_by_prov_Doc",g="toPay_by_docM",f="multi_pay_2S",A="extraAccountListOnPay",I=l=>{var e,a,o,n,s,r,m,p,x,I,C;let{data:z,confirm:P}=l;const[M,D]=(0,d.useState)(!1),[w,S]=(0,d.useState)(0),O=(0,t.s0)(),T=()=>{S((0,i.M5)())};(0,d.useEffect)((()=>{M||(D(!0),(0,v.Ht)("global_accounts","global_account_params",T),(0,i.Rz)(f,null),(0,i.Rz)(g,null),(0,i.Rz)(N,null),(0,i.Rz)("accountPicker",{}),S((0,i.M5)()))}));const Z=(l,e,a)=>{let d=(0,i.bh)(j)||{};a?(d[a]||(d[a]={}),d[a][l]=e):d[l]=e,(0,i.Rz)(j,d),S((0,i.M5)())};let B=null===(e=(0,i.bh)("global_account_params"))||void 0===e?void 0:e.cash_bank;const H=()=>{let l={...(0,i.bh)(N)}||{},e={...(0,i.bh)(f)}||{};(0,i._2)(l).map((a=>{var d,o;let c=(null===(d=(0,i.bh)(y))||void 0===d?void 0:d.account)+"_"+(null===(o=(0,i.bh)(y))||void 0===o?void 0:o.subAccount)+"_"+a,n={...(0,i.bh)(y)};e[c]={},e[c].amount=1*l[a],e[c].document=a,e[c].type="debit",e[c].account=null===n||void 0===n?void 0:n.account,e[c].providerId=null===n||void 0===n?void 0:n.providerId,e[c].subAccount=null===n||void 0===n?void 0:n.subAccount})),(0,i.Rz)(f,e),(0,i.Rz)(N,null),(0,i.Rz)(y,null),S((0,i.M5)())};return(0,b.jsxs)("div",{style:{maxHeight:"90vh",minHeight:"88vh",width:"720px",overflow:"auto",background:"var(--hrm_palette-general-background-b)",borderRadius:13,padding:"10px 19px"},children:[(0,b.jsxs)("div",{className:"_dsplFlx ",children:[(0,b.jsx)("p",{className:"form_title",children:"Registrando Pago"}),(0,b.jsx)("div",{className:"flexSpace"})]}),(0,b.jsxs)("div",{className:"_dsplFlx",children:[(0,b.jsx)("div",{className:"flexSpace"}),null!==B&&void 0!==B&&B.account?(0,b.jsxs)("div",{className:" acc_dtls",children:[(0,b.jsxs)("div",{className:"_dsplFlx",children:[(0,b.jsx)("div",{className:"code",style:{color:"#646cff"},children:null===(a=(0,i.bh)("account_ids"))||void 0===a||null===(o=a[null===B||void 0===B?void 0:B.account])||void 0===o?void 0:o.code}),(0,b.jsx)("div",{className:"name",children:null===(n=(0,i.bh)("account_ids"))||void 0===n||null===(s=n[null===B||void 0===B?void 0:B.account])||void 0===s?void 0:s.name})]}),(0,b.jsx)("div",{className:"flexSpace"})]}):null]}),(0,b.jsxs)("div",{className:"_dsplFlx ",children:[(0,b.jsx)(_,{init:null===(r=(0,i.bh)(j))||void 0===r?void 0:r.date,updDate:l=>Z("date",l)}),(0,b.jsx)("div",{className:"flexSpace"}),(0,b.jsx)(h,{init:null===(m=(0,i.bh)(j))||void 0===m?void 0:m.paymentDocument,label:"Documento de Pago",width:200,updChanges:l=>Z("paymentDocument",l)})]}),(0,b.jsx)(h,{init:null===(p=(0,i.bh)(j))||void 0===p?void 0:p.description,label:"Descripcion",width:520,updChanges:l=>Z("description",l)}),(0,b.jsxs)("div",{className:" _dsplFlx",children:[(0,b.jsx)("div",{className:"flexSpace"}),(0,b.jsx)("p",{className:"group_title addBtn purple",onClick:()=>{let l={zIndex:450,height:"93vh",props:{minHeight:"1vh",overlay:!0}};l.content=(0,b.jsx)(F,{updObs:S,confirm:H}),(0,c.OpenModal)(l)},children:"Provedores"})]}),(0,i.bh)(f)&&(0,i._2)((0,i.bh)(f)).length>0?(0,b.jsxs)("div",{className:"boxAddAcc",style:{margin:"18px 0"},children:[(0,b.jsxs)("div",{className:"_dsplFlx hdr_bar purple",style:{margin:"18px 0"},children:[(0,b.jsx)("div",{className:"tr_bar tr_bar_25",children:"Cuenta"}),(0,b.jsx)("div",{className:"tr_bar tr_bar_25",children:"Sub Cuenta"}),(0,b.jsx)("div",{className:"tr_bar tr_bar_25",children:"Documento"}),(0,b.jsx)("div",{className:"tr_bar tr_bar_25",children:"Balance"})]}),(0,i.bh)(f)&&(null===(x=(0,i._2)((0,i.bh)(f)))||void 0===x?void 0:x.map(((l,e)=>(0,b.jsx)(k,{idKey:l,data:(0,i.bh)(f)[l],updObs:S},l)))),(0,b.jsx)(k,{data:{account:null===B||void 0===B?void 0:B.account,amount:R((0,i.bh)(f)),type:"credit",document:null===(I=(0,i.bh)(j))||void 0===I?void 0:I.paymentDocument},updObs:S})]}):null,(0,b.jsx)(u.Z,{collectionName:A}),null!==(C=(0,i.bh)(j))&&void 0!==C&&C.paymentDocument&&R((0,i.bh)(f))>0?(0,b.jsxs)("div",{className:"_dsplFlx ",children:[(0,b.jsx)("div",{className:"flexSpace"}),(0,b.jsx)("div",{className:"card",children:(0,b.jsx)("button",{onClick:async()=>{var l,e,a;let d=(0,i.bh)(j)||{},o=[];d.date?d.date=new Date(d.date).getTime()+4800:d.date=(new Date).getTime()+4800;let n=await(0,i.fN)(d.date),s={date:d.date,comprobanteId:n,description:d.description,businessId:null===(l=(0,i.bh)("profileUser"))||void 0===l?void 0:l.businessId,year:new Date(d.date).getFullYear()};delete d.date;let t="",r=(0,i.bh)(f)&&(0,i._2)((0,i.bh)(f));r&&(null===r||void 0===r||r.map(((l,e)=>{let a={...d},c=(0,i.bh)(f)[l];a.document=null===c||void 0===c?void 0:c.document,t+=(null===c||void 0===c?void 0:c.document)+" ; ",a.account=null===c||void 0===c?void 0:c.account,a.subAccount=null===c||void 0===c?void 0:c.subAccount,a.providerId=null===c||void 0===c?void 0:c.providerId,a.type=null===c||void 0===c?void 0:c.type,a.amount=null===c||void 0===c?void 0:c.amount,a.payOrCollect="pay",a.operationId=(0,i.M5)(),o.push(a)})));let u=(0,i.bh)(A)&&(0,i._2)((0,i.bh)(A));u&&(null===u||void 0===u||u.map(((l,e)=>{let a={...d},c=(0,i.bh)(A)[l];a.document=a.paymentDocument,a.account=null===c||void 0===c?void 0:c.account,a.subAccount=null===c||void 0===c?void 0:c.subAccount,a.type="debit",a.amount=null===c||void 0===c?void 0:c.amount,a.operationId=(0,i.M5)(),o.push(a);let n={...d};n.document=n.paymentDocument,n.paymentDocument=t,n.account=null===B||void 0===B?void 0:B.account,n.type="credit",n.amount=1*(null===c||void 0===c?void 0:c.amount),n.operationId=(0,i.M5)(),o.push(n)})));let v={...d},b=R((0,i.bh)(f));v.document=v.paymentDocument,v.paymentDocument=t,v.account=null===B||void 0===B?void 0:B.account;let m=null===(e=(0,i.bh)("account_ids"))||void 0===e?void 0:e[v.account];m.payOrCollect&&(v.payOrCollect=m.payOrCollect),v.type="credit",v.amount=1*b,v.operationId=(0,i.M5)(),o.push(v);let h={...null===(a=(0,i.bh)((0,i.hQ)()))||void 0===a?void 0:a.add_multi_opera};h.params=s,h.form=o;const p=(0,i.I7)(h);await p&&setTimeout((()=>{(0,i.Rz)(N,null),(0,i.Rz)(j,null),(null===z||void 0===z?void 0:z.modalID)&&(0,c.CloseModal)({id:null===z||void 0===z?void 0:z.modalID}),O({pathname:"/accounting-ledger",search:"?cId=".concat(n)})}),400)},children:"Guardar"})})]}):null]})},k=l=>{var e,a;let{data:d}=l;return 1*(null===d||void 0===d?void 0:d.amount)===0?null:(0,b.jsxs)("div",{className:"_dsplFlx hdr_bar",children:[(0,b.jsx)("div",{className:"tr_bar tr_bar_25",style:{marginTop:10},children:(0,b.jsx)(x,{data:null===(e=(0,i.bh)("account_ids"))||void 0===e?void 0:e[null===d||void 0===d?void 0:d.account],color:"debit"===d.type?"#009688":"#c62828",labelField:"code",infoField:"name"})}),(0,b.jsx)("div",{className:"tr_bar tr_bar_25",style:{marginTop:10},children:null!==d&&void 0!==d&&d.subAccount?(0,b.jsx)(x,{data:null===(a=(0,i.bh)("sub_account_ids"))||void 0===a?void 0:a[null===d||void 0===d?void 0:d.subAccount],color:"debit"===d.type?"#009688":"#c62828",labelField:"subAccount",infoField:"subAccountName"}):null}),(0,b.jsx)("div",{className:"tr_bar tr_bar_25",style:{marginTop:10},children:null===d||void 0===d?void 0:d.document}),(0,b.jsxs)("div",{className:"tr_bar tr_bar_25",style:{marginTop:10},children:["$",(1*(null===d||void 0===d?void 0:d.amount)).toFixed(2)]})]})},F=l=>{var e,a,o,s,t,r,u,v,m,h,_,x,j,N,f,A;let{data:I,confirm:k}=l;const[F,R]=(0,d.useState)(0),z=()=>{R((0,i.M5)())};return(0,b.jsxs)("div",{style:{maxHeight:"92vh",minHeight:"90vh",width:"720px",overflow:"auto",background:"#fff",borderRadius:13,padding:"10px 19px"},children:[(0,b.jsxs)("div",{className:"_dsplFlx ",children:[(0,b.jsx)("p",{className:"form_title",children:"Pagos por Provedores"}),(0,b.jsx)("div",{className:"flexSpace"})]}),(0,b.jsx)("div",{style:{margin:"18px 0"},children:null!==(e=(0,i.bh)(y))&&void 0!==e&&e.account?(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:" acc_dtls",children:[(0,b.jsxs)("div",{className:"_dsplFlx",children:[(0,b.jsx)("div",{className:"code",style:{color:"#646cff"},onClick:()=>{(0,i.Rz)(y,null),R((0,i.M5)())},children:null===(a=(0,i.bh)("account_ids"))||void 0===a||null===(o=a[null===(s=(0,i.bh)(y))||void 0===s?void 0:s.account])||void 0===o?void 0:o.code}),(0,b.jsx)("div",{className:"name",children:null===(t=(0,i.bh)("account_ids"))||void 0===t||null===(r=t[null===(u=(0,i.bh)(y))||void 0===u?void 0:u.account])||void 0===r?void 0:r.name})]}),(0,b.jsx)("div",{className:"flexSpace"}),null!==(v=(0,i.bh)(y))&&void 0!==v&&v.subAccount?(0,b.jsxs)("div",{className:"_dsplFlx",style:{margin:"10px 0 0 18px"},children:[(0,b.jsx)("div",{className:"code",children:null===(m=(0,i.bh)("sub_account_ids"))||void 0===m||null===(h=m[null===(_=(0,i.bh)(y))||void 0===_?void 0:_.subAccount])||void 0===h?void 0:h.subAccount}),(0,b.jsx)("div",{className:"name",children:null===(x=(0,i.bh)("sub_account_ids"))||void 0===x||null===(j=x[null===(N=(0,i.bh)(y))||void 0===N?void 0:N.subAccount])||void 0===j?void 0:j.subAccountName})]}):null]}),(0,b.jsxs)("div",{className:"boxAddAcc",style:{margin:"18px 0"},children:[(0,b.jsxs)("div",{className:"_dsplFlx hdr_bar purple",style:{margin:"18px 0"},children:[(0,b.jsx)("div",{className:"tr_bar tr_bar_50",children:"Documento"}),(0,b.jsx)("div",{className:"tr_bar tr_bar_20",children:"Balance"}),(0,b.jsx)("div",{className:"tr_bar tr_bar_5"}),(0,b.jsx)("div",{className:"tr_bar tr_bar_25",children:"Por Pagar"})]}),(0,i.bh)(g)&&(null===(f=(0,i._2)((0,i.bh)(g)))||void 0===f?void 0:f.map(((l,e)=>(0,b.jsx)(C,{idKey:l,data:(0,i.bh)(g)[l],updObs:R},l))))]})]}):(0,b.jsx)(p,{placeholder:"buscar un provedor",width:420,handleClick:l=>{let e={account:null===l||void 0===l?void 0:l.account,subAccount:null===l||void 0===l?void 0:l.subAccount,providerId:null===l||void 0===l?void 0:l.providerId};(0,i.Rz)(y,e),(0,n.nr)(e,z)}})}),null!==(A=(0,i.bh)(y))&&void 0!==A&&A.subAccount?(0,b.jsxs)("div",{className:"_dsplFlx ",children:[(0,b.jsx)("div",{className:"flexSpace"}),(0,b.jsx)("p",{className:"group_title addBtn purple",onClick:()=>{k&&k(),(null===I||void 0===I?void 0:I.modalID)&&(0,c.CloseModal)({id:null===I||void 0===I?void 0:I.modalID})},children:"Guardar"})]}):null]})},C=l=>{let{data:e,updObs:a,idKey:o}=l;const[c,n]=(0,d.useState)(0),s=(l,e,a)=>{let d=(0,i.bh)(N)||{};a?(d[a]||(d[a]={}),d[a][l]=e):d[l]=e,(0,i.Rz)(N,d)};return 1*(null===e||void 0===e?void 0:e.amount)===0?null:(0,b.jsxs)("div",{className:"_dsplFlx hdr_bar",children:[(0,b.jsx)("div",{className:"tr_bar tr_bar_50",style:{marginTop:10},children:null===e||void 0===e?void 0:e.document}),(0,b.jsxs)("div",{className:"tr_bar tr_bar_20",style:{marginTop:10},children:["$",(1*(null===e||void 0===e?void 0:e.amount)).toFixed(2)]}),(0,b.jsx)("div",{className:"tr_bar tr_bar_5",style:{marginTop:10},children:c>(null===e||void 0===e?void 0:e.amount)?(0,b.jsx)("div",{className:"icon",children:(0,b.jsx)(m,{name:"alert",color:"#c62828"})}):null}),(0,b.jsx)("div",{className:"tr_bar tr_bar_25",children:(0,b.jsx)(h,{init:c,width:80,updChanges:l=>{return n(d=l),s(null===e||void 0===e?void 0:e.document,d),void a((0,i.M5)());var d}})})]})},R=l=>{var e;let a=0;return l&&(null===(e=(0,i._2)(l))||void 0===e||e.map(((e,d)=>{var o;a+=1*(0,i.Zv)(null===(o=l[e])||void 0===o?void 0:o.amount,2)}))),a}},1232:(l,e,a)=>{a.d(e,{GP:()=>s,N$:()=>c,hF:()=>r,i7:()=>i,nr:()=>o,pj:()=>u});var d=a(2350);const i=async(l,e)=>{var a,i;let o={...null===(a=(0,d.bh)((0,d.hQ)()))||void 0===a?void 0:a.filter_search_opera};o.params={businessId:null===(i=(0,d.bh)("profileUser"))||void 0===i?void 0:i.businessId,":account":null===l||void 0===l?void 0:l.account,":subAccount":null===l||void 0===l?void 0:l.subAccount,year:(0,d.bh)("date_current_year")};const c=(0,d.I7)(o),s=await c;if(s&&!s.error){(0,d.Rz)("collect_list",s),(0,d.Rz)("collect_by_doc",n(s)),(0,d.Rz)("collect_by_docM",n(s));let e=(null===l||void 0===l?void 0:l.account)+"_"+(null===l||void 0===l?void 0:l.subAccount);t(s,e)}e&&e()},o=async(l,e)=>{var a,i;let o={...null===(a=(0,d.bh)((0,d.hQ)()))||void 0===a?void 0:a.filter_search_opera};o.params={businessId:null===(i=(0,d.bh)("profileUser"))||void 0===i?void 0:i.businessId,":account":null===l||void 0===l?void 0:l.account,":subAccount":null===l||void 0===l?void 0:l.subAccount,year:(0,d.bh)("date_current_year")};const c=(0,d.I7)(o),s=await c;if(s&&!s.error){(0,d.Rz)("toPay_list",s),(0,d.Rz)("toPay_by_doc",n(s,!0)),(0,d.Rz)("toPay_by_docM",n(s,!0));let e=(null===l||void 0===l?void 0:l.account)+"_"+(null===l||void 0===l?void 0:l.subAccount);t(s,e)}e&&e()},c=async l=>{var e,a;let i={...null===(e=(0,d.bh)((0,d.hQ)()))||void 0===e?void 0:e.search_opera};i.params={businessId:null===(a=(0,d.bh)("profileUser"))||void 0===a?void 0:a.businessId,":search":(0,d.bh)("search_acc_record"),year:(0,d.bh)("date_current_year")};const o=(0,d.I7)(i),c=await o;c&&!c.error&&((0,d.Rz)("comprobante_list",c),(0,d.Rz)("comprobante_by_doc",n(c))),l&&l()};function n(l,e){var a={};let i=l&&(0,d._2)(l);return i.length>0?i.map((i=>{var o;let c=l[i],n=null===(o=c.document)||void 0===o?void 0:o.trim();if(!a[n]){a[n]={},["date","description","document","entryName"].forEach((l=>{a[n][l]=c[l]})),a[n].amount=0,a[n].operations=[]}if(c.type){let l=(0,d.Zv)(c.amount,2),i=(0,d.Zv)(a[n].amount,2),o=0;o=e?1*i+l*("debit"===c.type?-1:1):1*i+l*("credit"===c.type?-1:1),a[n].amount=(0,d.Zv)(o,2),a[n].operations.push(function(l){var e,a;let i={};i.account=null===(e=(0,d.bh)("account_ids"))||void 0===e?void 0:e[l.account],i.sub_account=null===(a=(0,d.bh)("sub_account_ids"))||void 0===a?void 0:a[l.subAccount],i.comprobanteId=l.comprobanteId,i.operationId=l.operationId,i.date=l.date,i.description=l.description;let o=(0,d.Zv)(l.amount,2);"credit"===l.type?(i.debit=0,i.credit=o):"debit"===l.type&&(i.credit=0,i.debit=o);return i}(c))}})):a=null,a}const s=(l,e,a)=>(0,d.MV)("SumDocuments",[l,e,a],(()=>{var a;let i=0;return l&&(null===(a=(0,d._2)(l))||void 0===a||a.map(((a,d)=>{var o;i+=1*(null===(o=l[a])||void 0===o?void 0:o[e])}))),i})),t=async(l,e,a)=>{let i=(0,d.bh)("rec_by_acc")||{};i[e]=((l,e,a)=>{var i;let o=0;return l&&(null===(i=(0,d._2)(l))||void 0===i||i.map(((e,a)=>{var i;let c=(0,d.Zv)(l[e].amount,2);o+=c*("credit"===(null===(i=l[e])||void 0===i?void 0:i.type)?-1:1)}))),o})(l)||"no",(0,d.Rz)("rec_by_acc",i),a&&a()},r=async(l,e,a)=>{var i,o;let c={...null===(i=(0,d.bh)((0,d.hQ)()))||void 0===i?void 0:i.filter_search_opera};c.params={businessId:null===(o=(0,d.bh)("profileUser"))||void 0===o?void 0:o.businessId,":account":null===l||void 0===l?void 0:l.account,":subAccount":null===l||void 0===l?void 0:l.subAccount,year:(0,d.bh)("date_current_year")};const n=(0,d.I7)(c),s=await n;s&&!s.error&&t(s,e),a&&a()},u=async(l,e,a)=>{var i,o;let c={...null===(i=(0,d.bh)((0,d.hQ)()))||void 0===i?void 0:i.search_subacc_acc};c.params={businessId:null===(o=(0,d.bh)("profileUser"))||void 0===o?void 0:o.businessId,":account":l,":search":e,year:(0,d.bh)("date_current_year")};const n=(0,d.I7)(c),s=await n;if(s&&!s.error){var t;let l=null===(t=(0,d._2)(s))||void 0===t?void 0:t[0];a&&a(s[l])}}},6021:()=>{}}]);
//# sourceMappingURL=1877.130b9f1a.chunk.js.map