"use strict";(self.webpackChunkhrmfinance=self.webpackChunkhrmfinance||[]).push([[1879,9760],{9760:function(e,t,n){n.r(t),n.d(t,{CloseModal:function(){return a},OpenModal:function(){return s},default:function(){return c}});var i=n(2791),o=n(5408),d=n(2350),r=n(184),l="listDialog_mdh392",c=function(){var e=(0,d.bh)("listDialog")||{},t=((0,o.Z)(l),Object.keys(e));return(0,r.jsx)(r.Fragment,{children:t.map((function(t,n){var o=e[t];if(o&&o.visible){var d={};o.height&&(d.heigth=o.height),o.width,o.zIndex&&(d.zIndex=o.zIndex-1);var l={zIndex:o.zIndex},c=null,s=o.data;return o.content&&(c=i.cloneElement(o.content,{data:s})),(0,r.jsxs)("div",{className:"ltr-1kbnjow",style:d,children:[(0,r.jsx)("div",{className:"ltr-hoe9xz",children:(0,r.jsx)("div",{className:"ltr-1wao6ny",style:l,id:t,children:c})}),o.data.overlay?(0,r.jsx)("div",{className:"DialogHRMOverlay ".concat(o.visible?"active":""),onClick:function(){var e;e=t,document.getElementsByTagName("html")[0].classList.remove("has-level-two"),a({id:e})}}):null]},t)}}))})},s=function(e){var t=(0,d.bh)("listDialog")||{},n=(0,d.M5)();t[n]||(t[n]={}),t[n].visible=!0;var i={};e.props?(i=e.props).modalID=n:i.modalID=n;var o=document.getElementsByTagName("body")[0];null!==o&&void 0!==o&&o.style&&(o.style.overflowY="hidden"),t[n].isView=e.isView,t[n].observeResize=e.observeResize,t[n].observeResize&&(t[n].observeInterval=setInterval((function(){var e=document.querySelector("[dialog-key-id='".concat(n,"']")),i=e&&e.getBoundingClientRect();i&&(i.width===t[n].width&&i.height===t[n].height||(t[n].height=i.height+10,t[n].width=i.width,(0,d.Rz)("listDialog",t),(0,d.wt)(l)))}),200)),t[n].display=!0,e.zIndex&&(t[n].zIndex=e.zIndex),e.height&&(t[n].height=e.height),e.width&&(t[n].width=e.width),e.content&&(t[n].content=e.content),t[n].data=i,(0,d.Rz)("listDialog",t),(0,d.wt)(l),setTimeout((function(){document.getElementsByTagName("html")[0].classList.add("has-level-two"),(0,d.Rz)("modalOpen",n),(0,d.wt)(l)}),125)},a=function(e){var t,n,i,o=(0,d.bh)("listDialog")||{},r=e.id;o[r]&&(o[r].observeResize&&o[r].observeInterval&&clearInterval(o[r].observeInterval),o[r].display=!1,null===(t=o[r])||void 0===t||null===(n=t.data)||void 0===n||null===(i=n.closeEvent)||void 0===i||i.call(n),(0,d.Rz)("listDialog",o),delete o[r],document.getElementsByTagName("body")[0].style.overflowY=null,(0,d.wt)(l),setTimeout((function(){delete o[r],document.getElementsByTagName("html")[0].classList.remove("has-level-two"),(0,d.Rz)("modalOpen",null)}),750))}},1879:function(e,t,n){n.r(t);var i=n(6459),o=n(4165),d=n(1413),r=n(5861),l=n(9439),c=n(2791),s=n(2350),a=n(2647),u=(n(1534),n(9760)),v=n(7689),p=n(9661),h=n(24),m=n(713),b=n(184),f=(0,a.PU)(),x=(0,a.Np)(),y=(0,h.f_)(),j=(0,p.FC)(),_=(0,h.Az)(),g="new_product_out_comprobante";t.default=function(e){var t,n,i,a,p,h,m,f,j=e.data,_=e.confirm,k=(0,c.useState)(!1),w=(0,l.Z)(k,2),N=w[0],P=w[1],Z=(0,c.useState)(0),z=(0,l.Z)(Z,2),R=(z[0],z[1]),C=(0,v.s0)();(0,c.useEffect)((function(){N||(P(!0),(0,s.Rz)("accountPicker",{}),R((0,s.M5)()))}));var D=function(e,t,n){var i=(0,s.bh)(g)||{};n?(i[n]||(i[n]={}),i[n][e]=t):i[e]=t,(0,s.Rz)(g,i),R((0,s.M5)())},M=function(){var e=(0,r.Z)((0,o.Z)().mark((function e(){var t,n,i,l,c,a,v,p,h,m,b,f,x,y,O,I,k,w,N,P,Z,z,D,M,S,L,q,F,A,T,E,B,Q,U,H,K;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,s.bh)(g),i=(new Date).getTime()+800,n.date&&(l=new Date(n.date).getTime(),i=l||i),n.date=i,c=[],e.next=7,(0,s.fN)(n.date);case 7:return a=e.sent,n.comprobanteId=a,v=0,p=0,h=(0,s.bh)("global_account_params"),(m=(0,s.bh)("productListOnOut")&&(0,s._2)((0,s.bh)("productListOnOut")))&&(null===m||void 0===m||m.map(function(){var e=(0,r.Z)((0,o.Z)().mark((function e(t,r){var l,a,u,h,m,b;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:u=(0,d.Z)({},(0,s.bh)("productListOnOut")[t]),(h=(0,d.Z)({},u)).document=n.document.trim(),h.date=i,h.price=1*u.price,h.qty=-1*u.qty,h.comprobanteId=n.comprobanteId,h.inventoryId=(0,s.M5)(),delete h.product,delete h.account,delete h.subAccount,m=1*u.qty*(1*u.price),v+=m,p+=m,h.amount=-1*m,(b=(0,d.Z)({},null===(l=(0,s.bh)((0,s.hQ)()))||void 0===l?void 0:l.add_inventory)).params={businessId:null===(a=(0,s.bh)("profileUser"))||void 0===a?void 0:a.businessId},b.form=h,c.push(b);case 19:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())),p>0&&((k=(0,d.Z)({},n)).type="credit",k.account=null===h||void 0===h||null===(b=h.inventory)||void 0===b?void 0:b.account,k.amount=p,k.operationId=(0,s.M5)(),(w=(0,d.Z)({},null===(f=(0,s.bh)((0,s.hQ)()))||void 0===f?void 0:f.add_opera)).params={businessId:null===(x=(0,s.bh)("profileUser"))||void 0===x?void 0:x.businessId},w.form=k,c.push(w),(N=(0,d.Z)({},n)).type="debit",N.account=null===h||void 0===h||null===(y=h.inventory_expensess)||void 0===y?void 0:y.account,N.amount=p,N.operationId=(0,s.M5)(),(P=(0,d.Z)({},null===(O=(0,s.bh)((0,s.hQ)()))||void 0===O?void 0:O.add_opera)).params={businessId:null===(I=(0,s.bh)("profileUser"))||void 0===I?void 0:I.businessId},P.form=N,c.push(P)),v>0&&(0,s.bh)("customerOutPicker").account&&((F=(0,d.Z)({},n)).type="debit",F.account=null===(Z=(0,s.bh)("customerOutPicker"))||void 0===Z?void 0:Z.account,F.subAccount=null===(z=(0,s.bh)("customerOutPicker"))||void 0===z?void 0:z.subAccount,F.providerId=null===(D=(0,s.bh)("customerOutPicker"))||void 0===D?void 0:D.providerId,F.operationId=(0,s.M5)(),(A=null===(M=(0,s.bh)("account_ids"))||void 0===M?void 0:M[null===(S=(0,s.bh)("customerOutPicker"))||void 0===S?void 0:S.account])&&A.payOrCollect&&(F.payOrCollect=A.payOrCollect),F.amount=1*F.amount,(T=(0,d.Z)({},null===(L=(0,s.bh)((0,s.hQ)()))||void 0===L?void 0:L.add_opera)).params={businessId:null===(q=(0,s.bh)("profileUser"))||void 0===q?void 0:q.businessId},T.form=F,c.push(T)),null!==h&&void 0!==h&&null!==(t=h.sales_income)&&void 0!==t&&t.account&&((U=(0,d.Z)({},n)).type="credit",U.account=null===h||void 0===h||null===(E=h.sales_income)||void 0===E?void 0:E.account,U.operationId=(0,s.M5)(),U.amount=1*U.amount,(H=(0,d.Z)({},null===(B=(0,s.bh)((0,s.hQ)()))||void 0===B?void 0:B.add_opera)).params={businessId:null===(Q=(0,s.bh)("profileUser"))||void 0===Q?void 0:Q.businessId},H.form=U,c.push(H)),K=c.map(function(){var e=(0,r.Z)((0,o.Z)().mark((function e(t){var n;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,s.I7)(t),e.next=3,n;case 3:e.sent;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=20,Promise.all(K);case 20:(null===j||void 0===j?void 0:j.modalID)&&(0,u.CloseModal)({id:null===j||void 0===j?void 0:j.modalID}),setTimeout((function(){(0,s.Rz)("extraAccountListOnCmp",null),(0,s.Rz)("productListOnOut",null),(0,s.Rz)("customerOutPicker",null),(0,s.Rz)(g,null),R((0,s.M5)()),_&&_(),C({pathname:"/accounting-ledger",search:"?cId=".concat(a)})}),400);case 22:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,b.jsxs)("div",{style:{maxHeight:"90vh",minHeight:"88vh",width:"750px",overflow:"auto",background:"var(--hrm_palette-general-background-b)",borderRadius:13,padding:"10px 19px"},children:[(0,b.jsxs)("div",{className:"_dsplFlx ",children:[(0,b.jsx)("p",{className:"form_title",children:"Salida de Mercancias"}),(0,b.jsx)("div",{className:"flexSpace"})]}),(0,b.jsxs)("div",{className:"_dsplFlx ",children:[(0,b.jsx)(y,{init:null===(t=(0,s.bh)(g))||void 0===t?void 0:t.date,updDate:function(e){return D("date",e)}}),(0,b.jsx)("div",{className:"flexSpace"}),(0,b.jsx)(x,{init:null===(n=(0,s.bh)(g))||void 0===n?void 0:n.document,label:"Documento",width:120,updChanges:function(e){return D("document",e)}}),(0,b.jsx)("div",{className:"flexSpace"}),(0,b.jsx)(x,{init:null===(i=(0,s.bh)(g))||void 0===i?void 0:i.amount,label:"Importe de la venta",width:120,updChanges:function(e){return D("amount",e)}})]}),(0,b.jsx)(x,{init:null===(a=(0,s.bh)(g))||void 0===a?void 0:a.description,label:"Descripcion",width:520,updChanges:function(e){return D("description",e)}}),(0,b.jsxs)("div",{className:"_dsplFlx ",style:{margin:"18px 0"},children:[(0,b.jsx)("div",{className:"flexSpace"}),(0,b.jsx)(O,{})]}),(0,b.jsx)(I,{}),(0,b.jsxs)("div",{className:"_dsplFlx ",children:[(0,b.jsx)("div",{className:"flexSpace"}),null!==(p=(0,s.bh)(g))&&void 0!==p&&p.document&&null!==(h=(0,s.bh)(g))&&void 0!==h&&h.amount&&null!==(m=(0,s.bh)("customerOutPicker"))&&void 0!==m&&m.account&&(null===(f=(0,s._2)((0,s.bh)("productListOnOut")))||void 0===f?void 0:f.length)>0?(0,b.jsx)("div",{className:"card",children:(0,b.jsx)("button",{onClick:M,children:"Guardar"})}):null]})]})};var O=function(e){var t,n;(0,i.Z)(e);var o=(0,c.useState)(0),d=(0,l.Z)(o,2),r=(d[0],d[1]),a=null===(t=(0,s.bh)("providers_ids"))||void 0===t?void 0:t[null===(n=(0,s.bh)("customerOutPicker"))||void 0===n?void 0:n.providerId];return(0,b.jsx)("div",{children:null!==a&&void 0!==a&&a.name?(0,b.jsx)("div",{className:"_dsplFlx ",style:{margin:"18px 0"},children:(0,b.jsxs)("div",{className:" acc_dtls",children:[(0,b.jsx)("div",{className:"_dsplFlx",children:(0,b.jsx)("div",{className:"code",style:{color:"#646cff"},onClick:function(){(0,s.Rz)("customerOutPicker",null),r((0,s.M5)())},children:null===a||void 0===a?void 0:a.name})}),(0,b.jsx)("div",{className:"flexSpace"})]})}):(0,b.jsx)(j,{placeholder:"buscar una provedor",width:320,handleClick:function(e){var t={providerId:e.providerId,account:e.account,subAccount:e.subAccount};(0,s.Rz)("customerOutPicker",t),r((0,s.M5)())}})})},I=function(e){var t,n,o,r,a,u,v,p,h,f,y,j,g;(0,i.Z)(e);var O=(0,c.useState)(0),I=(0,l.Z)(O,2),w=(I[0],I[1]),N=function(){w((0,s.M5)())},P=null===(t=(0,s.bh)("products_ids"))||void 0===t?void 0:t[null===(n=(0,s.bh)("productPicker"))||void 0===n?void 0:n.productId],Z=function(e){var t=(0,s.bh)("productListOnOut")||{};delete t[e],(0,s.Rz)("productListOnOut",t),w((0,s.M5)())};return(0,b.jsxs)("div",{className:"boxAddAcc",style:{margin:"18px 0"},children:[null!==(o=(0,s.bh)("productPicker"))&&void 0!==o&&o.productId?(0,b.jsx)("div",{className:"_dsplFlx ",style:{margin:"18px 0"},children:(0,b.jsxs)("div",{className:" acc_dtls",children:[(0,b.jsxs)("div",{className:"_dsplFlx",onClick:function(e){(0,s.Rz)("productPicker",null),w((0,s.M5)())},children:[(0,b.jsx)("div",{className:"code",style:{color:"#646cff"},children:null===P||void 0===P?void 0:P.upc_barcode}),(0,b.jsx)("div",{className:"name",children:null===P||void 0===P?void 0:P.name})]}),(0,b.jsx)("div",{className:"flexSpace"})]})}):(0,b.jsx)(_,{width:420,handleClick:function(e){var t={productId:e.productId,product:e.product,subAccount:e.subAccount};(0,s.Rz)("productPicker",t),(0,m.Rd)(e.productId,N)}}),null!==(r=(0,s.bh)("products_stock"))&&void 0!==r&&null!==(a=r[null===(u=(0,s.bh)("productPicker"))||void 0===u?void 0:u.productId])&&void 0!==a&&a.qty?(0,b.jsxs)("div",{className:"_dsplFlx ",children:[(0,b.jsx)(x,{init:null===(v=(0,s.bh)("productPicker"))||void 0===v?void 0:v.qty,label:"Cantidad",width:120,type:"number",updChanges:function(e){return function(e,t,n){var i=(0,s.bh)("productPicker")||{};n?(i[n]||(i[n]={}),i[n][e]=t):i[e]=t,(0,s.Rz)("productPicker",i),w((0,s.M5)())}("qty",e)}}),(0,b.jsx)("div",{className:"flexSpace"}),null!==(p=(0,s.bh)("productPicker"))&&void 0!==p&&p.qty&&(null===(h=(0,s.bh)("productPicker"))||void 0===h?void 0:h.qty)<=(null===(f=(0,s.bh)("products_stock"))||void 0===f||null===(y=f[null===(j=(0,s.bh)("productPicker"))||void 0===j?void 0:j.productId])||void 0===y?void 0:y.qty)?(0,b.jsx)("div",{style:{marginTop:38},children:(0,b.jsx)("button",{onClick:function(){var e,t,n,i,o,r,l=(0,d.Z)({},(0,s.bh)("productPicker"))||{},c=(0,d.Z)({},(0,s.bh)("productPicker"))||{},a=(0,d.Z)({},(0,s.bh)("productListOnOut"))||{},u=l.productId,v=(null===(e=(0,s.bh)("products_stock"))||void 0===e||null===(t=e[null===(n=(0,s.bh)("productPicker"))||void 0===n?void 0:n.productId])||void 0===t?void 0:t.amount)/(null===(i=(0,s.bh)("products_stock"))||void 0===i||null===(o=i[null===(r=(0,s.bh)("productPicker"))||void 0===r?void 0:r.productId])||void 0===o?void 0:o.qty);l.price=v,a[u]=l,(0,s.Rz)("productListOnOut",a),c.productId=null,c.qty="",c.price="",(0,s.Rz)("productPicker",c),w((0,s.M5)())},children:"Agregar"})}):null]}):null,(0,b.jsxs)("div",{className:"_dsplFlx hdr_bar purple",style:{margin:"18px 0"},children:[(0,b.jsx)("div",{className:"tr_bar tr_bar_50 ",children:"Producto"}),(0,b.jsx)("div",{className:"tr_bar tr_bar_20",children:"Qty"}),(0,b.jsx)("div",{className:"tr_bar tr_bar_20",children:"Costo (un)"}),(0,b.jsx)("div",{className:"tr_bar tr_bar_5"})]}),(0,s.bh)("productListOnOut")&&(null===(g=(0,s._2)((0,s.bh)("productListOnOut")))||void 0===g?void 0:g.map((function(e,t){return(0,b.jsx)(k,{idKey:e,data:(0,s.bh)("productListOnOut")[e],deleteItem:Z},e)})))]})},k=function(e){var t,n=e.data,i=e.deleteItem,o=e.idKey,d=null===(t=(0,s.bh)("products_ids"))||void 0===t?void 0:t[null===n||void 0===n?void 0:n.productId];return(0,b.jsxs)("div",{className:"_dsplFlx hdr_bar",children:[(0,b.jsx)("div",{className:"tr_bar tr_bar_50",children:null===d||void 0===d?void 0:d.name}),(0,b.jsx)("div",{className:"tr_bar tr_bar_20",children:(0,s.Zv)(null===n||void 0===n?void 0:n.qty,2)}),(0,b.jsx)("div",{className:"tr_bar tr_bar_20",children:(0,s.Zv)(null===n||void 0===n?void 0:n.price,2)}),(0,b.jsx)("div",{className:"flexSpace"}),(0,b.jsx)("div",{className:"icon",onClick:function(){i(o)},children:(0,b.jsx)(f,{name:"outline_delete",color:"#c62828"})})]})}},1534:function(){},6459:function(e,t,n){function i(e){if(null==e)throw new TypeError("Cannot destructure "+e)}n.d(t,{Z:function(){return i}})},1413:function(e,t,n){n.d(t,{Z:function(){return d}});var i=n(4942);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}}}]);
//# sourceMappingURL=1879.5e7f75d3.chunk.js.map