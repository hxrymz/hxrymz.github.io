"use strict";(self.webpackChunkhrmfinance=self.webpackChunkhrmfinance||[]).push([[2972],{2972:(s,e,i)=>{i.r(e),i.d(e,{default:()=>u});var a=i(2791),t=i(2350),l=i(2647),d=(i(9760),i(8202),i(9803),i(5261)),o=i(9498),n=i(4050),r=i(713),p=i(184);const c=(0,l.Vg)(),h=(0,d.J2)(),u=s=>{var e,i;let{data:l,elmId:d,updObs:u}=s;const[v,m]=(0,a.useState)(!1),[_,b]=(0,a.useState)(0),[f,x]=(0,a.useState)(64),[I,y]=(0,a.useState)(!1);(0,a.useEffect)((()=>{v||(m(!0),b((0,t.M5)()),(0,r.N0)(u),(0,n.Ht)("global_accounts","global_account_params",u))}));const j=()=>{},g=s=>{(0,o.EY)(N)},w=()=>{x((s=>s+64))},N=()=>{var s;(async(s,e)=>{64!==f?x(64):b((0,t.M5)()),y(!1)})();let e=Math.ceil((null===(s=(0,t._2)((0,t.bh)("deposits_list")))||void 0===s?void 0:s.length)/64);(0,t.Z$)(w,1250,e),setTimeout((()=>{y(!1)}),230)};return(0,p.jsxs)("div",{className:"",children:[(0,p.jsxs)("div",{className:"accounts_header",children:[(0,p.jsx)("h2",{children:"Deposits"}),(0,p.jsx)("div",{className:"_dsplFlx ",children:(0,p.jsxs)("div",{className:"group_title addBtn purple upl",children:["Import Deposits from File",(0,p.jsx)("input",{id:"fileupload",type:"file",onChange:s=>{var e=new FileReader;e.onload=function(s){var e=s.target.result;(0,o.LY)(e)},e.readAsText(s.target.files[0],"UTF-8")}})]})}),(0,p.jsxs)("div",{className:"_dsplFlx ",style:{marginTop:14},children:[(0,p.jsx)(c,{placeholder:"Buscar ....",width:360,obs:b,fetchData:s=>{y(!0),(0,o.hj)(N)},loading:I,change:s=>{!I&&y(!0)},callempty:g,keyFlds:"searchQryDept"}),(0,p.jsx)("div",{className:"flexSpace"}),(0,p.jsxs)("div",{className:"_dsplFlx ",children:[(0,p.jsx)("div",{className:"total_comprobante_title",children:"No de Deposits:"}),(0,p.jsx)("div",{className:"total_comprobante gray",children:(0,p.jsx)("span",{children:null===(e=(0,t._2)((0,t.bh)("deposits_list")))||void 0===e?void 0:e.length})})]})]})]}),(0,p.jsx)("div",{className:"deposits_container scollVh",style:{height:"calc(98vh - 230px)"},children:(0,t.bh)("deposits_list")&&(null===(i=(0,t._2)((0,t.bh)("deposits_list")))||void 0===i?void 0:i.map(((s,e)=>(0,p.jsx)(h,{data:(0,t.bh)("deposits_list")[s],elmId:s,openUpdateView:j,handleRefreshAll:g,show:e<f,index:e},s))))})]})}},9498:(s,e,i)=>{i.d(e,{EY:()=>t,LY:()=>n,Sb:()=>o,hj:()=>l,in:()=>d});var a=i(2350);const t=async s=>{let e=(0,a.bh)("getall_deposit_last")||0;if(Date.now()>e){var i,t;(0,a.Rz)("getall_deposit_last",Date.now()+190);let e={...null===(i=(0,a.bh)((0,a.hQ)()))||void 0===i?void 0:i.scan_deposit_summary};e.params={businessId:null===(t=(0,a.bh)("profileUser"))||void 0===t?void 0:t.businessId};const l=(0,a.I7)(e),o=await l;o&&((0,a.Rz)("deposits_list",d(o,"depositDate")),(0,a.Rz)("deposits_ids",(0,a.ME)((0,a.jQ)(o),"depositId")),s&&s())}},l=async s=>{var e,i;let t={...null===(e=(0,a.bh)((0,a.hQ)()))||void 0===e?void 0:e.scan_deposit_summary};t.params={businessId:null===(i=(0,a.bh)("profileUser"))||void 0===i?void 0:i.businessId},(0,a.bh)("searchQryDept").split(" ").map(((s,e)=>{s&&(t.params[":search"+e]=s.trim())}));const l=(0,a.I7)(t),o=await l;o?((0,a.Rz)("deposits_list",d((0,a.jQ)(o),"date")),(0,a.Rz)("deposits_ids",o),s&&s()):(0,a.Rz)("deposits_list",[])},d=(s,e,i)=>(0,a.MV)("sortDeposits",[s],(()=>s&&s.sort(((s,a)=>{let t=s[e],l=a[e];return t<l?i?-1:1:t>l?i?1:-1:0})))),o=async(s,e)=>{var i,t;let l={...null===(i=(0,a.bh)((0,a.hQ)()))||void 0===i?void 0:i.delete_deposit};l.params={businessId:null===(t=(0,a.bh)("profileUser"))||void 0===t?void 0:t.businessId,depositId:s};const d=(0,a.I7)(l);await d&&e&&e()},n=async s=>{var e,i;let t={...null===(e=(0,a.bh)((0,a.hQ)()))||void 0===e?void 0:e.all_deposit_summary};t.params={businessId:null===(i=(0,a.bh)("profileUser"))||void 0===i?void 0:i.businessId,":search1":"  "};const l=(0,a.I7)(t),d=await l;if(d){let e=[],i=(0,a._U)(d,"id");(0,a.sO)(s)&&(s=JSON.parse(s)),s.map((s=>{let t={...s};if(t.depositSummaryId=s.id,s.id&&s.amount&&s.paymentDepositFee&&!i[s.id]){var l,d;console.log("id 2 save ",s.id);let i={...null===(l=(0,a.bh)((0,a.hQ)()))||void 0===l?void 0:l.add_deposit_summary};i.params={businessId:null===(d=(0,a.bh)("profileUser"))||void 0===d?void 0:d.businessId},i.form=t,e.push(i)}})),(0,a.DF)(e,r)}},r=async s=>{const e=(0,a.I7)(s),i=await e;if(i)return i}},8202:()=>{},9803:()=>{}}]);
//# sourceMappingURL=2972.0530e816.chunk.js.map