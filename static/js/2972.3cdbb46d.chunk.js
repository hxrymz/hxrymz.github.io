"use strict";(self.webpackChunkhrmfinance=self.webpackChunkhrmfinance||[]).push([[2972],{2972:(s,e,i)=>{i.r(e),i.d(e,{default:()=>_});var l=i(2791),a=i(2350),t=i(2647),d=i(9760),o=(i(8202),i(9803),i(5261)),n=i(9498),r=i(4050),c=i(713),p=i(8037),h=i(184);const u=(0,t.Vg)(),m=(0,t.YZ)(),v=(0,o.J2)(),_=s=>{var e,i;let{data:t,elmId:_,updObs:b}=s;const[x,f]=(0,l.useState)(!1),[j,I]=(0,l.useState)(0),[y,g]=(0,l.useState)(64),[N,F]=(0,l.useState)(!1),[w,S]=(0,l.useState)(!1);(0,l.useEffect)((()=>{x||(f(!0),I((0,a.M5)()),(0,c.N0)(b),(0,r.Ht)("global_accounts","global_account_params",b))}));const D=()=>{},Q=s=>{(0,n.EY)(R)},k=()=>{g((s=>s+64))},R=()=>{var s;(async(s,e)=>{64!==y?g(64):I((0,a.M5)()),S(!1)})();let e=Math.ceil((null===(s=(0,a._2)((0,a.bh)("deposits_list")))||void 0===s?void 0:s.length)/64);(0,a.Z$)(k,1250,e),setTimeout((()=>{S(!1)}),230)};return(0,h.jsxs)("div",{className:"",children:[(0,h.jsxs)("div",{className:"accounts_header",children:[(0,h.jsx)("h2",{children:"Deposits"}),(0,h.jsxs)("div",{className:"_dsplFlx ",children:[(0,h.jsxs)("div",{className:"group_title addBtn purple upl",children:["Import Deposits from File",(0,h.jsx)("input",{id:"fileupload",type:"file",onChange:s=>{var e=new FileReader;e.onload=function(s){var e=s.target.result;(0,n.LY)(e)},e.readAsText(s.target.files[0],"UTF-8")}})]}),(0,h.jsx)("div",{className:"flexSpace"}),(0,h.jsxs)("div",{className:"_dsplFlx centerBx",children:[(0,h.jsx)("span",{className:"checklabel",children:"Add Fee"}),(0,h.jsx)(m,{initvalue:N,keyCode:57,updChange:F})]}),(0,h.jsx)("div",{className:"_dsplFlx ",style:{marginLeft:14},children:N?(0,h.jsx)(p.N,{color:"#007bfc",label:"Add Fee ",clickHandler:()=>{let s=(0,a.bh)("depositFeeSelected")||{},e="fee for deposit Ids",i=0;(0,a._2)(s).map((l=>{i+=s[l],e+=" ".concat(l,";")}));let l={zIndex:450,height:"80vh",props:{minHeight:"1vh",overlay:!0}};l.content=(0,h.jsx)(o.MI,{confirm:Q,description:e,feeAmount:i,item:t}),(0,d.OpenModal)(l)}}):null})]}),(0,h.jsxs)("div",{className:"_dsplFlx ",style:{marginTop:14},children:[(0,h.jsx)(u,{placeholder:"Buscar ....",width:360,obs:I,fetchData:s=>{S(!0),(0,n.hj)(R)},loading:w,change:s=>{!w&&S(!0)},callempty:Q,keyFlds:"searchQryDept"}),(0,h.jsx)("div",{className:"flexSpace"}),(0,h.jsxs)("div",{className:"_dsplFlx ",children:[(0,h.jsx)("div",{className:"total_comprobante_title",children:"No de Deposits:"}),(0,h.jsx)("div",{className:"total_comprobante gray",children:(0,h.jsx)("span",{children:null===(e=(0,a._2)((0,a.bh)("deposits_list")))||void 0===e?void 0:e.length})})]})]})]}),(0,h.jsx)("div",{className:"deposits_container scollVh",style:{height:"calc(98vh - 230px)"},children:(0,a.bh)("deposits_list")&&(null===(i=(0,a._2)((0,a.bh)("deposits_list")))||void 0===i?void 0:i.map(((s,e)=>(0,h.jsx)(v,{data:(0,a.bh)("deposits_list")[s],elmId:s,openUpdateView:D,handleRefreshAll:Q,show:e<y,index:e,viewFee:N},s))))})]})}},9498:(s,e,i)=>{i.d(e,{EY:()=>a,LY:()=>n,Sb:()=>o,hj:()=>t,in:()=>d});var l=i(2350);const a=async s=>{let e=(0,l.bh)("getall_deposit_last")||0;if(Date.now()>e){var i,a;(0,l.Rz)("getall_deposit_last",Date.now()+190);let e={...null===(i=(0,l.bh)((0,l.hQ)()))||void 0===i?void 0:i.scan_deposit_summary};e.params={businessId:null===(a=(0,l.bh)("profileUser"))||void 0===a?void 0:a.businessId};const t=(0,l.I7)(e),o=await t;o&&((0,l.Rz)("deposits_list",d(o,"depositSummaryId")),(0,l.Rz)("deposits_ids",(0,l.ME)((0,l.jQ)(o),"depositId")),s&&s())}},t=async s=>{var e,i;let a={...null===(e=(0,l.bh)((0,l.hQ)()))||void 0===e?void 0:e.scan_deposit_summary};a.params={businessId:null===(i=(0,l.bh)("profileUser"))||void 0===i?void 0:i.businessId},(0,l.bh)("searchQryDept").split(" ").map(((s,e)=>{s&&(a.params[":search"+e]=s.trim())}));const t=(0,l.I7)(a),o=await t;o?((0,l.Rz)("deposits_list",d((0,l.jQ)(o),"depositSummaryId")),(0,l.Rz)("deposits_ids",o),s&&s()):(0,l.Rz)("deposits_list",[])},d=(s,e,i)=>s&&s.sort(((s,l)=>{let a=s[e],t=l[e];return a<t?i?-1:1:a>t?i?1:-1:0})),o=async(s,e)=>{var i,a;let t={...null===(i=(0,l.bh)((0,l.hQ)()))||void 0===i?void 0:i.delete_deposit};t.params={businessId:null===(a=(0,l.bh)("profileUser"))||void 0===a?void 0:a.businessId,depositId:s};const d=(0,l.I7)(t);await d&&e&&e()},n=async s=>{var e,i;let a={...null===(e=(0,l.bh)((0,l.hQ)()))||void 0===e?void 0:e.all_deposit_summary};a.params={businessId:null===(i=(0,l.bh)("profileUser"))||void 0===i?void 0:i.businessId,":search1":"  "};const t=(0,l.I7)(a),d=await t;if(d){let e=[],i=(0,l._U)(d,"id");(0,l.sO)(s)&&(s=JSON.parse(s)),s.map((s=>{let a={...s};a.depositSummaryId=s.id;let t=!i[s.id];s.id;let d=(null===s||void 0===s?void 0:s.transactions.length)>0;if(s.id&&s.amount&&s.paymentDepositFee&&t&&d){var o,n;console.log("id 2 save ",s.id);let i={...null===(o=(0,l.bh)((0,l.hQ)()))||void 0===o?void 0:o.add_deposit_summary};i.params={businessId:null===(n=(0,l.bh)("profileUser"))||void 0===n?void 0:n.businessId},i.form=a,e.push(i)}})),(0,l.DF)(e,r)}},r=async s=>{const e=(0,l.I7)(s),i=await e;if(i)return i}},8202:()=>{},9803:()=>{}}]);
//# sourceMappingURL=2972.3cdbb46d.chunk.js.map