"use strict";(self.webpackChunkhrmfinance=self.webpackChunkhrmfinance||[]).push([[3108],{2018:(e,a,l)=>{l.r(a),l.d(a,{default:()=>u});var s=l(2791),d=(l(6794),l(2350)),i=l(2502),r=l(7689),o=l(9760),t=l(2647),n=l(1087),c=(l(8098),l(8779)),m=l(3588),p=l(184);const v=(0,t.h0)(),h=(0,t.PU)(),u=e=>{var a,l,t,n,c;let{data:m,item:u}=e;const[_,j]=(0,s.useState)(0);(0,s.useEffect)((()=>{}),[u]);const y=()=>{j((0,d.M5)())},g=((0,r.s0)(),e=>{(0,o.CloseModal)({id:m.modalID})}),N=e=>{if(null!==e&&void 0!==e&&e.initDate&&null!==e&&void 0!==e&&e.lastDate){let a={...e};a.initDate=a.initDate-100,a.lastDate=a.lastDate+8638e4,(0,d.Rz)("date_range_comps",a)}(0,i.lG)(null===u||void 0===u?void 0:u.employeeId,y)};let f=(null===(a=(0,d.bh)("date_range_comps"))||void 0===a?void 0:a.initDate)&&(0,d.sJ)(null===(l=(0,d.bh)("date_range_comps"))||void 0===l?void 0:l.initDate)+"-"+(0,d.sJ)(null===(t=(0,d.bh)("date_range_comps"))||void 0===t?void 0:t.lastDate);return(0,p.jsxs)("div",{style:{maxHeight:"80vh",width:"960px",overflow:"auto",background:"var(--hrm_palette-general-background-b)",borderRadius:13,padding:"10px 19px 30px"},children:[(0,p.jsxs)("div",{className:"_dsplFlx ",children:[(0,p.jsx)("p",{className:"title_collect",children:"Movimientos de Nomina"}),(0,p.jsx)("div",{className:"flexSpace"}),(0,p.jsx)("div",{children:(0,p.jsxs)("div",{className:"filter_date_btn _dsplFlx",onClick:()=>{var e,a;let l={zIndex:950,height:"80vh",props:{minHeight:"1vh",overlay:!0}};l.content=(0,p.jsx)(v,{onConfirm:N,init:null===(e=(0,d.bh)("date_range_comps"))||void 0===e?void 0:e.initDate,last:null===(a=(0,d.bh)("date_range_comps"))||void 0===a?void 0:a.lastDate,isRange:!0}),(0,o.OpenModal)(l)},children:[(0,p.jsx)("div",{className:"lbl date",children:f||"Fecha"}),(0,p.jsx)(h,{name:"calendar",color:"#66666"})]})})]}),(0,p.jsx)("div",{className:" acc_dtls",style:{marginTop:10},children:(0,p.jsxs)("div",{className:"_dsplFlx",children:[(0,p.jsx)("div",{className:"code",style:{color:"#646cff"},children:null===u||void 0===u?void 0:u.name}),(0,p.jsx)("div",{className:"name",children:null===u||void 0===u?void 0:u.unit})]})}),(0,p.jsxs)("div",{className:"_dsplFlx acc_dtls",children:[(0,p.jsx)("div",{className:"flexSpace"}),(0,p.jsxs)("div",{className:"_dsplFlx",children:[(0,p.jsx)("div",{className:"code",style:{color:"var(--hrm_palette-item_coll_gray)"},children:"Acumulado:"}),(0,p.jsxs)("div",{className:"name",style:{color:"var(--hrm_palette-inverse-background-b)"},children:["$",null===(n=b((0,d.bh)("paystub_submayor_group")))||void 0===n?void 0:n.toFixed(2)]})]})]}),(0,p.jsxs)("div",{className:"_dsplFlx hdr_bar purple",children:[(0,p.jsx)("div",{className:"tr_bar_30",children:"Comprobante"}),(0,p.jsx)("div",{className:"tr_bar_20",children:"Fecha"}),(0,p.jsx)("div",{className:"tr_bar_30",children:"Documento"}),(0,p.jsx)("div",{className:"tr_bar_20",children:"Amount"})]}),(0,p.jsx)("div",{className:"scollVh subMHeight",children:(0,d.bh)("paystub_submayor_group")&&(null===(c=(0,d._2)((0,d.bh)("paystub_submayor_group")))||void 0===c?void 0:c.map(((e,a)=>{let l=(0,d.bh)("paystub_submayor_group")[e];return(0,p.jsx)(x,{element:l,close:g,updObserve:y},a)})))})]})},x=e=>{var a;let{element:l,close:s,updObserve:i}=e;const r=()=>{(0,m.WB)(l.operations,s)};return null!==l&&void 0!==l&&l.comprobanteId?(0,p.jsxs)("div",{className:"_dsplFlx hdr_bar",children:[(0,p.jsx)("div",{className:"tr_bar_30 ",children:(0,p.jsx)(n.OL,{to:{pathname:"/accounting-ledger",search:"?cId=".concat(null===l||void 0===l?void 0:l.comprobanteId)},children:(0,p.jsx)("div",{className:" comprobante_id",onClick:()=>s(l),children:l.comprobanteId})})}),(0,p.jsx)("div",{className:"tr_bar_20",children:l.date&&(0,d.sJ)(l.date)}),(0,p.jsx)("div",{className:"tr_bar_30",children:l.document}),(0,p.jsxs)("div",{className:"tr_bar_20",children:["$",null===(a=1*l.balance)||void 0===a?void 0:a.toFixed(2)]})]}):(0,p.jsxs)("div",{className:"_dsplFlx hdr_bar",children:[(0,p.jsx)("div",{className:"tr_bar_90",children:(0,p.jsx)("div",{className:"name comprobante_id",style:{color:"var(--hrm_palette-selected-nav-text)"},children:"El registro contiene errores"})}),(0,p.jsx)("div",{className:"tr_bar_10",children:(0,p.jsx)("div",{className:"icon",onClick:()=>(()=>{let e={zIndex:450,height:"40vh",props:{minHeight:"1vh",overlay:!0,closeEvent:()=>{}}};e.content=(0,p.jsx)(c.Z,{label:"Peligro va a eliminar registros contables !!!",labelColor:"var(--hrm_palette-selected-nav-text)",body:"los registros estan corruptos pero debe saber que no podra recuperarlos",btnConfirm:"OK",confirm:r}),(0,o.OpenModal)(e)})(),children:(0,p.jsx)(h,{name:"outline_delete",color:"var(--hrm_palette-selected-nav-text)"})})})]})},b=e=>{var a;let l=0;return e&&(null===(a=(0,d._2)(e))||void 0===a||a.map(((a,s)=>{let i=1*e[a].balance;l=1*(0,d.Zv)(l,2)+1*(0,d.Zv)(i,2)}))),l}},2502:(e,a,l)=>{l.d(a,{Dy:()=>d,G:()=>t,aU:()=>o,kQ:()=>i,lG:()=>r});var s=l(2350);const d=async e=>{var a,l;let d={...null===(a=(0,s.bh)((0,s.hQ)()))||void 0===a?void 0:a.all_employee};d.params={businessId:null===(l=(0,s.bh)("profileUser"))||void 0===l?void 0:l.businessId};const i=(0,s.I7)(d),r=await i;r&&((0,s.Rz)("employees_list",o((0,s.jQ)(r),"code")),(0,s.Rz)("employees_ids",(0,s.ME)((0,s.jQ)(r),"employeeId")),e&&e())},i=async e=>{var a,l;let d={...null===(a=(0,s.bh)((0,s.hQ)()))||void 0===a?void 0:a.search_employee};d.params={businessId:null===(l=(0,s.bh)("profileUser"))||void 0===l?void 0:l.businessId,":search":(0,s.bh)("searchQry")};const i=(0,s.I7)(d),r=await i;r&&((0,s.Rz)("employees_list",o((0,s.jQ)(r),"code")),e&&e())},r=async(e,a)=>{var l,d,i,r;let o={...null===(l=(0,s.bh)((0,s.hQ)()))||void 0===l?void 0:l.filter_search_opera};o.params={businessId:null===(d=(0,s.bh)("profileUser"))||void 0===d?void 0:d.businessId,year:(0,s.bh)("date_current_year"),":date1":(null===(i=(0,s.bh)("date_range_comps"))||void 0===i?void 0:i.initDate)-10,":date2":null===(r=(0,s.bh)("date_range_comps"))||void 0===r?void 0:r.lastDate,":search0":e};const t=(0,s.I7)(o),n=await t;n&&!n.error&&((0,s.Rz)("paystub_submayor_list",n),(0,s.Rz)("paystub_submayor_group",function(e){var a={};e.length>0?e.map((e=>{let l=e.date+"_"+e.comprobanteId;if(!a[l]){a[l]={},["date","description","entryName","comprobanteId","employeeId","document"].forEach((s=>{a[l][s]=e[s]})),a[l].amount=0,a[l].balance=0,a[l].operations=[]}e.type&&(a[l].balance=1*(0,s.Zv)(a[l].balance,2)+("debit"===e.type?1*(0,s.Zv)(e.amount,2):0),a[l].operations.push(function(e){var a;let l={};l.employeeId=null===(a=(0,s.bh)("employees_ids"))||void 0===a?void 0:a[e.employeeId],l.comprobanteId=e.comprobanteId,l.operationId=e.operationId,l.document=e.document,l.date=e.date,"credit"===e.type?(l.debit=0,l.credit=e.amount):"debit"===e.type&&(l.credit=0,l.debit=e.amount);return l}(e)))})):a=null;return a}((0,s.jQ)(n)))),a&&a()};const o=(e,a)=>(0,s.MV)("sortEmployees",[e],(()=>e&&e.sort(((e,l)=>{let s=1*e[a],d=1*l[a];return s<d?-1:s>d?1:0})))),t=async(e,a)=>{var l;let d={query:"deleteEmployeesHRG",params:{businessId:null===(l=(0,s.bh)("profileUser"))||void 0===l?void 0:l.businessId,employeeId:e}};const i=(0,s.I7)(d);await i&&a&&a()}},8779:(e,a,l)=>{l.d(a,{Z:()=>i});l(2791),l(1534);var s=l(9760),d=l(184);const i=e=>{let{data:a,confirm:l,label:i,labelColor:r,body:o,btnConfirm:t}=e;const{modalID:n}=a,c=e=>{(0,s.CloseModal)({id:n})};return(0,d.jsxs)("div",{style:{maxHeight:"40vh",minHeight:"28vh",overflow:"auto",background:"#fff",borderRadius:13,padding:"10px 19px"},children:[(0,d.jsxs)("div",{className:"_dsplFlx ",children:[(0,d.jsx)("p",{className:"form_title",style:r?{color:r}:null,children:i}),(0,d.jsx)("div",{className:"flexSpace"})]}),(0,d.jsx)("div",{className:"_dsplFlx ",style:{margin:"15px 0"},children:(0,d.jsx)("span",{children:o||"Una vez eliminado no podra ser recuperado"})}),(0,d.jsxs)("div",{className:"_dsplFlx ",style:{padding:"15px 10px"},children:[(0,d.jsx)("div",{className:"flexSpace"}),(0,d.jsx)("p",{className:"group_title addBtn",onClick:c,children:"Cancelar"}),(0,d.jsx)("p",{className:"group_title addBtn red",onClick:()=>{l&&l(),c()},children:t||"Eliminar"})]})]})}},8098:(e,a,l)=>{l.d(a,{Z:()=>i});l(2791),l(1534);var s=l(9760),d=l(184);const i=e=>{let{data:a,confirm:l,handleClick:i,close:r}=e;const{modalID:o}=a,t=e=>{(0,s.CloseModal)({id:o})};return(0,d.jsxs)("div",{style:{maxHeight:"40vh",minHeight:"28vh",overflow:"auto",background:"#fff",borderRadius:13,padding:"10px 19px"},children:[(0,d.jsxs)("div",{className:"_dsplFlx ",children:[(0,d.jsx)("p",{className:"form_title",children:"Eliminar Registro del Inventario"}),(0,d.jsx)("div",{className:"flexSpace"})]}),(0,d.jsx)("div",{className:"_dsplFlx ",children:(0,d.jsx)("span",{children:"Una vez eliminado no podra ser recuperado"})}),(0,d.jsxs)("div",{className:"_dsplFlx ",style:{padding:"15px 10px"},children:[(0,d.jsx)("div",{className:"flexSpace"}),(0,d.jsx)("p",{className:"group_title addBtn",onClick:t,children:"Cancelar"}),(0,d.jsx)("p",{className:"group_title addBtn red",onClick:()=>{l(),t()},children:"Eliminar"})]})]})}},6794:()=>{},1534:()=>{}}]);
//# sourceMappingURL=3108.502af5cf.chunk.js.map