"use strict";(self.webpackChunkhrmfinance=self.webpackChunkhrmfinance||[]).push([[3173],{4304:function(e,n,a){a.d(n,{lp:function(){return s},NK:function(){return l}});a(2791);var i=a(1087),t=a(184),l=function(e){var n=e.clickHandler,a=e.label,l=e.navTo;return(0,t.jsx)("button",{className:"gHAsFI dqnOfN jUrKkb",onClick:n,children:(0,t.jsx)(i.OL,{className:" jaqJnq",to:l,children:a})})},s=function(e){var n=e.children;return(0,t.jsx)("div",{className:"jRutKh",children:(0,t.jsx)("div",{className:"jSvsvz",children:(0,t.jsx)("div",{className:"jzcvbH",children:(0,t.jsx)("div",{className:" kfqEsq",children:n})})})})}},9377:function(e,n,a){a.r(n),a.d(n,{default:function(){return F}});var i=a(4165),t=a(5861),l=a(9439),s=a(2791),r=a(2350),o=(a(5196),a(5288)),c=a(9760),d=a(2927),u=a(2647),m=(a(5027),a(184)),v=function(e){var n=e.data,a=e.confirm,i=(e.handleClick,e.close,n.modalID),t=function(e){(0,c.CloseModal)({id:i})};return(0,m.jsxs)("div",{style:{maxHeight:"40vh",minHeight:"28vh",overflow:"auto",background:"#fff",borderRadius:13,padding:"10px 19px"},children:[(0,m.jsxs)("div",{className:"_dsplFlx ",children:[(0,m.jsx)("p",{className:"form_title",children:"Eliminar Comprobante"}),(0,m.jsx)("div",{className:"flexSpace"})]}),(0,m.jsx)("div",{className:"_dsplFlx ",children:(0,m.jsx)("span",{children:"Una vez eliminado no podra ser recuperado"})}),(0,m.jsxs)("div",{className:"_dsplFlx ",style:{padding:"15px 10px"},children:[(0,m.jsx)("div",{className:"flexSpace"}),(0,m.jsx)("p",{className:"group_title addBtn",onClick:t,children:"Cancelar"}),(0,m.jsx)("p",{className:"group_title addBtn red",onClick:function(){a(),t()},children:"Eliminar"})]})]})},p=a(1413),h=a(4304),x=a(24),f=a(7689),_=((0,u.PU)(),(0,u.JC)()),b=((0,u.tW)(),(0,u.Np)()),j=(0,x.f_)(),N="cmp_feedfromMobile",g=function(e){var n,a,o,u,v,h=e.data,x=e.item,_=(e.handleRefreshAll,(0,s.useState)(!1)),g=(0,l.Z)(_,2),w=g[0],k=g[1],I=(0,s.useState)(0),Z=(0,l.Z)(I,2),F=(Z[0],Z[1]),M=(0,f.s0)();(0,s.useEffect)((function(){if(!w){var e,n;k(!0);var a="debit",i="credit",t=(0,p.Z)({},x);"expense"===(null===t||void 0===t?void 0:t.movementType)&&(a="credit",i="debit");var l=(null===t||void 0===t?void 0:t.title)+"; "+(null===t||void 0===t?void 0:t.description);L("description",l),L("date",null===t||void 0===t?void 0:t.date);var s=null===(e=(0,r.bh)("categories_ids"))||void 0===e?void 0:e[null===t||void 0===t?void 0:t.categoryId],o={};o.amount=null===t||void 0===t?void 0:t.amount,o.movementId=null===t||void 0===t?void 0:t.movementId,o.description=l,o.date=null===t||void 0===t?void 0:t.date;var c=(0,p.Z)({},o);o.account=null===(n=(0,r.bh)("global_account_params"))||void 0===n?void 0:n.cash_bank.account,o.type=a,c.account=null===s||void 0===s?void 0:s.account,null!==s&&void 0!==s&&s.subAccount&&(c.subAccount=null===s||void 0===s?void 0:s.subAccount),c.type=i,(0,r.Rz)("cmpListfromMbl",[c,o]),F((0,r.M5)())}}),[null===(n=(0,r.bh)(N))||void 0===n?void 0:n.movementId]);var L=function(e,n,a){var i=(0,r.bh)(N)||{};a?(i[a]||(i[a]={}),i[a][e]=n):i[e]=n,(0,r.Rz)(N,i),F((0,r.M5)())},S=function(){var e=(0,t.Z)((0,i.Z)().mark((function e(){var n,a,l,s,o,d,u,m,v;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(o=(0,p.Z)({},(0,r.bh)(N))).date?o.date=new Date(o.date).getTime():o.date=(new Date).getTime()+800,e.next=4,(0,r.fN)(o.date);case 4:return d=e.sent,o.comprobanteId=d,o.document=null===(n=o.document)||void 0===n?void 0:n.trim(),u=[],(0,r.bh)("cmpListfromMbl")&&(null===(a=(0,r._2)((0,r.bh)("cmpListfromMbl")))||void 0===a||a.map(function(){var e=(0,t.Z)((0,i.Z)().mark((function e(n,a){var t,l,s,c,d;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=(0,r.bh)("cmpListfromMbl")[n],!isNaN(1*t.amount)&&1*t.amount>0&&((c=(0,p.Z)({},o)).account=t.account,t.subAccount&&(c.subAccount=t.subAccount),c.movementRef=x.movementId,c.type=t.type,c.amount=1*t.amount,c.operationId=(0,r.M5)(),(d=(0,p.Z)({},null===(l=(0,r.bh)((0,r.hQ)()))||void 0===l?void 0:l.add_opera)).params={businessId:null===(s=(0,r.bh)("profileUser"))||void 0===s?void 0:s.businessId},d.form=c,u.push(d));case 2:case"end":return e.stop()}}),e)})));return function(n,a){return e.apply(this,arguments)}}())),(m=(0,p.Z)({},null===(l=(0,r.bh)((0,r.hQ)()))||void 0===l?void 0:l.upd__incms_expns)).params={businessId:null===(s=(0,r.bh)("profileUser"))||void 0===s?void 0:s.businessId,movementId:x.movementId},m.data2update={comprobanteId:d},u.push(m),v=u.map(function(){var e=(0,t.Z)((0,i.Z)().mark((function e(n){var a;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=(0,r.I7)(n),e.next=3,a;case 3:e.sent;case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),e.next=16,Promise.all(v);case 16:setTimeout((function(){(0,r.Rz)("cmpListfromMbl",null),(0,r.Rz)(N,null),(null===h||void 0===h?void 0:h.modalID)&&(0,c.CloseModal)({id:null===h||void 0===h?void 0:h.modalID}),M({pathname:"/accounting-ledger",search:"?cId=".concat(d)})}),400);case 17:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),A=function(e){window.open(e)};return(0,m.jsxs)("div",{style:{maxHeight:"90vh",minHeight:"88vh",width:"960px",overflow:"auto",background:"var(--hrm_palette-general-background-b)",borderRadius:13,padding:"10px 19px"},children:[(0,m.jsxs)("div",{className:"_dsplFlx ",children:[(0,m.jsx)("p",{className:"form_title",children:"Associar Asiento"}),(0,m.jsx)("div",{className:"flexSpace"}),null!==x&&void 0!==x&&x.imagePath?(0,m.jsx)("p",{className:"group_title addBtn purple",onClick:function(){(0,d.Qq)(x,A)},children:"See Image"}):null]}),(0,m.jsxs)("div",{className:"_dsplFlx ",children:[(0,m.jsx)(j,{init:null===(a=(0,r.bh)(N))||void 0===a?void 0:a.date,updDate:function(e){return L("date",e)}}),(0,m.jsx)("div",{className:"flexSpace"}),(0,m.jsx)(b,{init:null===(o=(0,r.bh)(N))||void 0===o?void 0:o.document,label:"Documento",width:120,updChanges:function(e){return L("document",e)}})]}),(0,m.jsx)("div",{className:"_dsplFlx ",children:(0,m.jsx)(b,{init:null===(u=(0,r.bh)(N))||void 0===u?void 0:u.description,label:"Descripcion",width:520,updChanges:function(e){return L("description",e)}})}),(0,m.jsx)("div",{style:{marginTop:19},children:(0,m.jsx)(C,{item:(0,r.bh)("cmpListfromMbl"),updFrm:L,document:null===(v=(0,r.bh)(N))||void 0===v?void 0:v.document})}),(0,m.jsxs)("div",{className:"_dsplFlx ",style:{margin:"32px 32px 0 0"},children:[(0,m.jsx)("div",{className:"flexSpace"}),(0,m.jsx)(y,{clickHandler:S,label:"Salvar"})]})]})},y=function(e){var n=e.clickHandler,a=e.label;return(0,m.jsx)("button",{className:"gHAsFI dqnOfN jUrKkb",onClick:n,children:(0,m.jsx)("div",{className:" jaqJnq",children:a})})},C=function(e){var n=e.item,a=e.updFrm,i=e.document,t=(0,s.useState)(0),o=(0,l.Z)(t,2),c=(o[0],o[1]),d=function(e,i,t){var l,s=n||(null===(l=(0,r.bh)("global_account_params"))||void 0===l?void 0:l.w2_params);t?(s[t]||(s[t]={}),s[t][e]=i):s[e]=i,a("w2",s),c((0,r.M5)())};return(0,m.jsxs)(h.lp,{children:[(0,m.jsx)("div",{className:"iMTYiw hiKoiM",children:"Comprobante Contables"}),(0,m.jsx)("div",{className:"_dsplFlx w_100prc",style:{marginTop:19}}),(0,m.jsxs)("div",{className:"_dsplFlx w_100prc",children:[(0,m.jsx)("div",{className:"igLyC tr_bar_20 pddBtm-12",children:(0,m.jsx)("div",{className:"txfnt_lfal whi_headr",children:"Cuenta"})}),(0,m.jsx)("div",{className:"igLyC tr_bar_20 pddBtm-12",children:(0,m.jsx)("div",{className:"txfnt_lfal whi_headr",children:"Sub Cuenta"})}),(0,m.jsx)("div",{className:"igLyC tr_bar_30 pddBtm-12",children:(0,m.jsx)("div",{className:"txfnt_lfal whi_headr",children:"Documento"})}),(0,m.jsx)("div",{className:"igLyC tr_bar_15 pddBtm-12 tr_bar_15",children:(0,m.jsx)("div",{className:"txt_al_r whi_headr",children:"debito"})}),(0,m.jsx)("div",{className:"igLyC tr_bar_15 pddBtm-12 tr_bar_15",children:(0,m.jsx)("div",{className:"txt_al_r whi_headr",children:"Credito"})})]}),n&&n.map((function(e,n){return(0,m.jsx)(w,{item:e,document:i,label:"Federal Tax",percentDefault:14.5,onChange:d,keyFld:"federalTax"},e.movementId+"_"+n)}))]})},w=function(e){e.label;var n,a,i=e.item,t=e.document,l=(e.keyFld,e.percentDefault,function(e){}),s=null===(n=(0,r.bh)("account_ids"))||void 0===n?void 0:n[null===i||void 0===i?void 0:i.account],o=null===(a=(0,r.bh)("sub_account_ids"))||void 0===a?void 0:a[null===i||void 0===i?void 0:i.subAccount];return(0,m.jsxs)("div",{className:"_dsplFlx w_100prc",children:[(0,m.jsx)("div",{className:"igLyC light_300_color tr_bar_20 pddBtm-12",children:(0,m.jsx)("div",{className:"txfnt_lfal",children:(0,m.jsx)(_,{data:s,color:"var(--light-300)",labelField:"code",infoField:"name"})})}),(0,m.jsx)("div",{className:"igLyC light_300_color tr_bar_20 pddBtm-12",children:(0,m.jsx)("div",{className:"txfnt_lfal",children:(0,m.jsx)(_,{data:o,color:"var(--light-300)",labelField:"subAccount",infoField:"subAccountName"})})}),(0,m.jsx)("div",{className:"igLyC light_300_color tr_bar_30 pddBtm-12",children:(0,m.jsx)("div",{className:"txfnt_lfal",children:t})}),"debit"===i.type?(0,m.jsx)(k,{keyFld:"amount",item:i,onChange:l}):(0,m.jsx)("div",{className:"igLyC light_300_color tr_bar_15",children:(0,m.jsx)("div",{className:" txt_al_r",children:"0.00"})}),"credit"===i.type?(0,m.jsx)(k,{keyFld:"amount",item:i,onChange:l}):(0,m.jsx)("div",{className:"igLyC light_300_color tr_bar_15",children:(0,m.jsx)("div",{className:" txt_al_r",children:"0.00"})})]})},k=function(e){e.label;var n=e.item,a=e.onChange,i=e.keyFld,t=(e.percentDefault,(0,s.useState)(0)),o=(0,l.Z)(t,2),c=o[0],d=o[1],u=(0,s.useState)(0),v=(0,l.Z)(u,2),p=v[0],h=v[1];p||null===n||void 0===n||n[i];return c?(0,m.jsx)("div",{className:"igLyC light_300_color tr_bar_15",children:(0,m.jsx)("input",{className:"inpyt_tx",type:"number","aria-haspopup":"false","auto-capitalize":"off","auto-complete":"off","auto-correct":"off","spell-check":"false",onChange:function(e){h(e.target.value)},onKeyDown:function(e){13===e.keyCode&&((0,r.UE)(p)&&a&&a(i,p),d(!1))}})}):(0,m.jsx)("div",{className:"igLyC light_300_color tr_bar_15",onClick:function(){return d(!c)},children:(0,m.jsx)("div",{className:" txt_al_r",children:(1*n[i]).toFixed(2)})})},I=(0,u.PU)(),Z=(0,o.Hb)(),F=((0,u.tW)(),function(e){var n=e.data,a=(e.elmId,e.handleRefreshAll),o=(0,s.useState)(!1),u=(0,l.Z)(o,2),p=u[0],h=u[1],x=(0,s.useState)(0),_=(0,l.Z)(x,2),b=(_[0],_[1]),j=((0,f.s0)(),(0,s.useState)(0)),N=(0,l.Z)(j,2);N[0],N[1];(0,s.useEffect)((function(){p||(h(!0),b((0,r.M5)()))}));var y=function(){b((0,r.M5)())},C=function(){(0,d.MX)(y)},w=function(){var e=(0,t.Z)((0,i.Z)().mark((function e(){var a;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(0,r.I0)()&&((0,r.Rz)("upd_fromMobile",n),(0,r.Rz)("upd_fromMobile_bck",JSON.parse(JSON.stringify(n))),(a={}).zIndex=450,a.height="80vh",a.props={minHeight:"1vh",overlay:!0},a.content=(0,m.jsx)(Z,{confirm:C}),(0,c.OpenModal)(a));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),k=function(){(0,d.M_)(null===n||void 0===n?void 0:n.movementId,a)},F=function(){var e=(0,t.Z)((0,i.Z)().mark((function e(){var a,t;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(0,r.I0)()&&(n.comprobanteId?(a=window.location.origin+"/#/accounting-ledger?cId=".concat(n.comprobanteId),window.open(a)):((t={}).zIndex=450,t.height="80vh",t.props={minHeight:"1vh",overlay:!0},t.content=(0,m.jsx)(g,{confirm:C,item:n}),(0,c.OpenModal)(t)));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),M=function(e){window.open(e)};return(0,m.jsx)("div",{className:"item_acc",children:(0,m.jsxs)("div",{className:"_dsplFlx operation_item_box",children:[(0,m.jsx)("div",{className:"icon_revision",onClick:F,children:(0,m.jsx)(I,{name:n.comprobanteId?"success":"alert",color:n.comprobanteId?"var(--hrm_palette-success-fg)":"var(--hrm_palette-selected-nav-text)"})}),(0,m.jsxs)("div",{className:"_dsplFlx tr_bar_90",onClick:w,children:[(0,m.jsx)("div",{className:" tr_bar_15",children:(0,r.sJ)(null===n||void 0===n?void 0:n.date)}),(0,m.jsx)("div",{className:" tr_bar_25 font_onm",style:{color:"expense"===n.movementType?"var(--hrm_palette-selected-nav-text)":"var( --hrm_palette-blue-purple)"},children:null===n||void 0===n?void 0:n.title}),(0,m.jsx)("div",{className:" tr_bar_45  font_onm",style:{marginLeft:9},children:null===n||void 0===n?void 0:n.description}),(0,m.jsx)("div",{className:" tr_bar_15 txt_al_r",style:{color:"expense"===n.movementType?"var(--hrm_palette-selected-nav-text)":"var( --hrm_palette-blue-purple)"},children:null===n||void 0===n?void 0:n.amount})]}),(0,m.jsx)("div",{className:"flexSpace"}),null!==n&&void 0!==n&&n.imagePath?(0,m.jsx)("div",{className:"icon tr_bar_5",onClick:function(){(0,d.Qq)(n,M)},children:(0,m.jsx)(I,{name:"image_outline",color:"var(--partial-success)"})}):(0,m.jsx)("div",{className:"icon tr_bar_5"}),(0,m.jsx)("div",{className:"icon tr_bar_5",onClick:function(){var e=(0,r.bh)("lastTimeCallModal")||0;if(Date.now()>e){(0,r.Rz)("lastTimeCallModal",Date.now()+320);var a={zIndex:450,height:"40vh",props:{minHeight:"1vh",overlay:!0,closeEvent:function(){}}};a.content=(0,m.jsx)(v,{confirm:k,item:n}),(0,c.OpenModal)(a)}},children:(0,m.jsx)(I,{name:"outline_delete",color:"#c62828"})})]})})})},5196:function(){},5027:function(){}}]);
//# sourceMappingURL=3173.1519e240.chunk.js.map