"use strict";(self.webpackChunkhrmfinance=self.webpackChunkhrmfinance||[]).push([[3264,9760],{9760:(e,l,i)=>{i.r(l),i.d(l,{CloseModal:()=>c,OpenModal:()=>r,default:()=>n});var s=i(2791),t=i(5408),d=i(2350),o=i(184);const a="listDialog_mdh392",n=()=>{const e=(0,d.bh)("listDialog")||{};(0,t.Z)(a);let l=Object.keys(e);return(0,o.jsx)(o.Fragment,{children:l.map(((l,i)=>{let t=e[l];if(t&&t.visible){let e={};t.height&&(e.heigth=t.height),t.width,t.zIndex&&(e.zIndex=t.zIndex-1);let i={zIndex:t.zIndex},d=null,a=t.data;return t.content&&(d=s.cloneElement(t.content,{data:a})),(0,o.jsxs)("div",{className:"ltr-1kbnjow",style:e,children:[(0,o.jsx)("div",{className:"ltr-hoe9xz",children:(0,o.jsx)("div",{className:"ltr-1wao6ny",style:i,id:l,children:d})}),t.data.overlay?(0,o.jsx)("div",{className:"DialogHRMOverlay ".concat(t.visible?"active":""),onClick:()=>{var e;e=l,document.getElementsByTagName("html")[0].classList.remove("has-level-two"),c({id:e})}}):null]},l)}}))})},r=e=>{let l=(0,d.bh)("listDialog")||{},i=(0,d.M5)();l[i]||(l[i]={}),l[i].visible=!0;let s={};e.props?(s=e.props,s.modalID=i):s.modalID=i;let t=document.getElementsByTagName("body")[0];null!==t&&void 0!==t&&t.style&&(t.style.overflowY="hidden"),l[i].isView=e.isView,l[i].observeResize=e.observeResize,l[i].observeResize&&(l[i].observeInterval=setInterval((()=>{let e=document.querySelector("[dialog-key-id='".concat(i,"']")),s=e&&e.getBoundingClientRect();s&&(s.width===l[i].width&&s.height===l[i].height||(l[i].height=s.height+10,l[i].width=s.width,(0,d.Rz)("listDialog",l),(0,d.wt)(a)))}),200)),l[i].display=!0,e.zIndex&&(l[i].zIndex=e.zIndex),e.height&&(l[i].height=e.height),e.width&&(l[i].width=e.width),e.content&&(l[i].content=e.content),l[i].data=s,(0,d.Rz)("listDialog",l),(0,d.wt)(a),setTimeout((()=>{document.getElementsByTagName("html")[0].classList.add("has-level-two"),(0,d.Rz)("modalOpen",i),(0,d.wt)(a)}),125)},c=e=>{let l=(0,d.bh)("listDialog")||{},i=e.id;if(l[i]){var s,t,o;l[i].observeResize&&l[i].observeInterval&&clearInterval(l[i].observeInterval),l[i].display=!1,null===(s=l[i])||void 0===s||null===(t=s.data)||void 0===t||null===(o=t.closeEvent)||void 0===o||o.call(t),(0,d.Rz)("listDialog",l),delete l[i],document.getElementsByTagName("body")[0].style.overflowY=null,(0,d.wt)(a),setTimeout((()=>{delete l[i],document.getElementsByTagName("html")[0].classList.remove("has-level-two"),(0,d.Rz)("modalOpen",null)}),750)}}},713:(e,l,i)=>{i.d(l,{$P:()=>h,B8:()=>_,IR:()=>n,QJ:()=>v,Rd:()=>o,VI:()=>x,Ve:()=>u,WA:()=>b,ZW:()=>d,Zj:()=>p,ii:()=>c,nj:()=>m,qT:()=>a,qv:()=>r,yk:()=>t});var s=i(2350);const t=async e=>{var l,i;let t={...null===(l=(0,s.bh)((0,s.hQ)()))||void 0===l?void 0:l.scan_voucher_production};if(t.params={businessId:null===(i=(0,s.bh)("profileUser"))||void 0===i?void 0:i.businessId,limit:120},(0,s.bh)("searchVoucherQry")&&(0,s.bh)("searchVoucherQry").length>1){(0,s.bh)("searchVoucherQry").split(" ").map(((e,l)=>{e&&(t.params[":search"+l]=e.trim())}));const l=(0,s.I7)(t),i=await l;i&&((0,s.Rz)("voucher_production",i),(0,s.Rz)("vouchers_list",p((0,s.jQ)(i),"voucherId")),e&&e())}else(0,s.Rz)("vouchers_list",null),e&&e()},d=async(e,l)=>{var i,t;let d={...null===(i=(0,s.bh)((0,s.hQ)()))||void 0===i?void 0:i.get_inventory_prod};d.params={businessId:null===(t=(0,s.bh)("profileUser"))||void 0===t?void 0:t.businessId,":productId":e};const o=(0,s.I7)(d),a=await o;a&&((0,s.Rz)("inv_products_list",p((0,s.jQ)(a.list),"name")),(0,s.Rz)("inv_products_stock",a.stock),l&&l())},o=async(e,l)=>{var i,t;let d={...null===(i=(0,s.bh)((0,s.hQ)()))||void 0===i?void 0:i.get_prod_stock};d.params={businessId:null===(t=(0,s.bh)("profileUser"))||void 0===t?void 0:t.businessId,productId:e};const o=(0,s.I7)(d),a=await o;if(a){let i={...(0,s.bh)("products_stock")};i[e]=a.stock,(0,s.Rz)("products_stock",i),l&&l()}},a=async e=>{var l,i;let t={...null===(l=(0,s.bh)((0,s.hQ)()))||void 0===l?void 0:l.all_prods};t.params={businessId:null===(i=(0,s.bh)("profileUser"))||void 0===i?void 0:i.businessId},t.subQuerys={},t.subQuerys.stock=1;const d=(0,s.I7)(t),o=await d;if(o){let l={},i=[],t=0;o.map((e=>{var d;if(null!==e&&void 0!==e&&null!==(d=e.inventory)&&void 0!==d&&d.qty){var o,a,n;if(t+=1*(0,s.Zv)(null===e||void 0===e||null===(o=e.inventory)||void 0===o?void 0:o.amount,2),l[e.unit])l[e.unit]+=null===e||void 0===e||null===(a=e.inventory)||void 0===a?void 0:a.qty;else l[e.unit]=null===e||void 0===e||null===(n=e.inventory)||void 0===n?void 0:n.qty;i.push({productId:e.productId,name:e.name,unit:e.unit,qty:(1*e.inventory.qty).toFixed(2),amount:(1*e.inventory.amount).toFixed(2),cost:(e.inventory.amount/e.inventory.qty*1).toFixed(2)})}})),(0,s.Ey)(e)&&e({list:p(i,"name"),total:t,units:l})}},n=async(e,l)=>{var i,t;let d={...null===(i=(0,s.bh)((0,s.hQ)()))||void 0===i?void 0:i.group_prod_stock};d.params={businessId:null===(t=(0,s.bh)("profileUser"))||void 0===t?void 0:t.businessId};const o=(0,s.I7)(d),a=await o;if(a){let i=(0,s._I)(a.comps),t=0,d=0,o=0,n=[],r=[];(0,s._2)(e).map((l=>{let c={...e[l]},u=("debit"===e[l].type?1:-1)*e[l].amount,v=1*(0,s.Zv)(u,2);if(t+=v,a.comps[e[l].comprobanteId]){c.inventory=a.comps[e[l].comprobanteId];let t=0;if((0,s._2)(a.comps[e[l].comprobanteId]).map((i=>{t=1*(0,s.Zv)(t,2)+1*(0,s.Zv)(a.comps[e[l].comprobanteId][i],2)})),t=t<0?-1*t:t,t=1*(0,s.Zv)(t,2),c.inventoryAmount=t,d+=t,v=v<0?-1*v:v,v-t!==0){let e=v-t;o+=e,r.push(c),console.log("diff",c,v,t,e)}else n.push(c);delete i[e[l].comprobanteId]}else o+=u,r.push(c)}));let c=0;(0,s._2)(i).map((e=>{let l=0;(0,s._2)(i[e]).map((t=>{l=1*(0,s.Zv)(l,2)+1*(0,s.Zv)(i[e][t],2)})),c+=l})),console.log("inventoryBack",i,"inventoryBackTotal",c),(0,s.Rz)("inv_comprobantes_compare",{hasError:r,success:n,inventoryBack:i}),(0,s.Ey)(l)&&l()}},r=async e=>{var l,i,t;let d={...null===(l=(0,s.bh)((0,s.hQ)()))||void 0===l?void 0:l.filter_search_opera};d.params={businessId:null===(i=(0,s.bh)("profileUser"))||void 0===i?void 0:i.businessId,year:(0,s.bh)("date_current_year"),":account":null===(t=(0,s.bh)("global_account_params"))||void 0===t?void 0:t.inventory.account};const o=(0,s.I7)(d),a=await o;a&&!a.error&&(0,s.Ey)(e)&&e(p((0,s.jQ)(a),"date"))},c=async e=>{var l,i;let t={...null===(l=(0,s.bh)((0,s.hQ)()))||void 0===l?void 0:l.all_prods};t.params={businessId:null===(i=(0,s.bh)("profileUser"))||void 0===i?void 0:i.businessId};const d=(0,s.I7)(t),o=await d;o&&((0,s.Rz)("products_list",p(o,"name")),(0,s.Rz)("products_ids",(0,s.ME)((0,s.jQ)(o),"productId")),e&&e())},u=async e=>{var l,i;let t={...null===(l=(0,s.bh)((0,s.hQ)()))||void 0===l?void 0:l.search_prod};if(t.params={businessId:null===(i=(0,s.bh)("profileUser"))||void 0===i?void 0:i.businessId,limit:120},(0,s.bh)("searchQry").length>1){(0,s.bh)("searchQry").split(" ").map(((e,l)=>{e&&(t.params[":search"+l]=e.trim())}));const l=(0,s.I7)(t),i=await l;i&&((0,s.Rz)("products_list",p((0,s.jQ)(i),"code")),e&&e())}else(0,s.Rz)("products_list",null),e&&e()},v=async e=>{var l,i;let t={...null===(l=(0,s.bh)((0,s.hQ)()))||void 0===l?void 0:l.all_entry_invoices};t.params={businessId:null===(i=(0,s.bh)("profileUser"))||void 0===i?void 0:i.businessId};const d=(0,s.I7)(t),o=await d;o&&((0,s.Rz)("movements_list",p(o,"date")),(0,s.Rz)("movements_ids",(0,s.ME)((0,s.jQ)(o),"inventoryId")),e&&e())},h=async e=>{var l;if((null===(l=(0,s.bh)("searchMovQry"))||void 0===l?void 0:l.length)>1){var i,t;let l={...null===(i=(0,s.bh)((0,s.hQ)()))||void 0===i?void 0:i.search_inventory};l.params={businessId:null===(t=(0,s.bh)("profileUser"))||void 0===t?void 0:t.businessId,":search0":(0,s.bh)("searchMovQry")};const d=(0,s.I7)(l),o=await d;o&&((0,s.Rz)("movements_list",function(e){var l={};let i=e&&(0,s._2)(e);i.length>0?i.map((i=>{let s=e[i];l[s.comprobanteId]||(l[s.comprobanteId]={},l[s.comprobanteId].amount=0,l[s.comprobanteId].document=s.document,l[s.comprobanteId].date=s.date,l[s.comprobanteId].comprobanteId=s.comprobanteId,l[s.comprobanteId].products=[]),l[s.comprobanteId].amount+=s.qty*s.price,l[s.comprobanteId].products.push({productId:s.productId,qty:s.qty,price:s.price,inventoryId:s.inventoryId})})):l=null;return l}(o)),(0,s.Rz)("movements_ids",o),e&&e())}else(0,s.Rz)("movements_list",[]),(0,s.Rz)("movements_ids",{}),e&&e()};const p=(e,l)=>(0,s.MV)("sortProducts",[e],(()=>e&&e.sort(((e,i)=>{let s=e[l],t=i[l];return s<t?-1:s>t?1:0})))),m=async(e,l)=>{var i,t;let d={...null===(i=(0,s.bh)((0,s.hQ)()))||void 0===i?void 0:i.delete_prod};d.params={businessId:null===(t=(0,s.bh)("profileUser"))||void 0===t?void 0:t.businessId,productId:e};const o=(0,s.I7)(d);await o&&l&&l()},b=async(e,l)=>{var i,t;let d={...null===(i=(0,s.bh)((0,s.hQ)()))||void 0===i?void 0:i.delete_inventory};d.params={businessId:null===(t=(0,s.bh)("profileUser"))||void 0===t?void 0:t.businessId,inventoryId:e};const o=(0,s.I7)(d);await o&&l&&l()},x=async(e,l)=>{var i,t;({...null===(i=(0,s.bh)((0,s.hQ)()))||void 0===i?void 0:i.entry_invoice_acc_2}).params={businessId:null===(t=(0,s.bh)("profileUser"))||void 0===t?void 0:t.businessId,entriesInvoiceId:e}},_=(e,l)=>(0,s.MV)("rangeProdArr",[e,l],(()=>e?(0,s._2)(e).slice(0,l):[]))},3264:(e,l,i)=>{i.r(l),i.d(l,{default:()=>N});var s=i(2791),t=i(2350),d=i(2647),o=(i(261),i(9760)),a=i(9661),n=i(184);const r=(0,d.Np)(),c=(0,d.PU)(),u=e=>{var l,i,d,o;let{updParent:a}=e;const[c,u]=(0,s.useState)(0),[v,h]=(0,s.useState)(!1),p=(e,l,i)=>{let s=(0,t.bh)("extraChargesInvoice")||{};i?(s[i]||(s[i]={}),s[i][e]=l):s[e]=l,(0,t.Rz)("extraChargesInvoice",s),u((0,t.M5)())};return(0,n.jsxs)("div",{children:[v?(0,n.jsx)("div",{className:"load_animation"}):(0,n.jsx)("div",{className:"",style:{maxWidth:130,marginLeft:7},children:(0,n.jsx)(r,{init:null===(l=(0,t.bh)("extraChargesInvoice"))||void 0===l?void 0:l.description,label:(0,t.zE)(4),width:750,updChanges:e=>p("description",e)})}),v?(0,n.jsxs)("div",{className:"_dsplFlx",children:[(0,n.jsx)("div",{className:"flexSpace"}),(0,n.jsx)("div",{className:"form_title",children:"Saving....."})]}):(0,n.jsxs)("div",{className:"_dsplFlx",children:[(0,n.jsx)(r,{init:null===(i=(0,t.bh)("extraChargesInvoice"))||void 0===i?void 0:i.salePrice,label:(0,t.zE)(14),width:120,type:"number",updChanges:e=>p("salePrice",e)}),(0,n.jsx)("div",{className:"flexSpace"}),null!==(d=(0,t.bh)("extraChargesInvoice"))&&void 0!==d&&d.description&&null!==(o=(0,t.bh)("extraChargesInvoice"))&&void 0!==o&&o.salePrice?(0,n.jsx)("div",{className:"card",children:(0,n.jsx)("button",{onClick:()=>{h(!0);let e={...(0,t.bh)("extraChargesInvoice")}||{},l={...(0,t.bh)("extraChargesInvoiceList")}||{},i=(0,t.M5)();e.qty=1,l[i]=e,(0,t.Rz)("extraChargesInvoiceList",l),(0,t.Rz)("extraChargesInvoice",null),a((0,t.M5)()),setTimeout((()=>{h(!1)}),350)},children:(0,t.zE)(7)})}):null]})]})},v=e=>{var l,i;let{data:s,deleteItem:d,idKey:o}=e;null===(l=(0,t.bh)("account_ids"))||void 0===l||l[null===s||void 0===s?void 0:s.account],null===(i=(0,t.bh)("sub_account_ids"))||void 0===i||i[null===s||void 0===s?void 0:s.subAccount];return(0,n.jsxs)("div",{className:"_dsplFlx hdr_bar",children:[(0,n.jsx)("div",{className:"tr_bar tr_bar_80",style:{textAlign:"left"},children:null===s||void 0===s?void 0:s.description}),(0,n.jsx)("div",{className:"tr_bar tr_bar_20",children:(0,t.Zv)(null===s||void 0===s?void 0:s.salePrice,2)}),(0,n.jsx)("div",{className:"flexSpace"}),(0,n.jsx)("div",{className:"icon",onClick:()=>{d(o)},children:(0,n.jsx)(c,{name:"outline_delete",color:"#c62828"})})]})},h=e=>{var l;let{updMain:i}=e;const[d,o]=(0,s.useState)(0),a=e=>{let l=(0,t.bh)("extraChargesInvoiceList")||{};delete l[e],(0,t.Rz)("extraChargesInvoiceList",l),i((0,t.M5)())};return(0,n.jsxs)("div",{className:"boxAddAcc",style:{margin:"18px 0"},children:[(0,n.jsx)(u,{updParent:o}),(0,n.jsxs)("div",{className:"_dsplFlx hdr_bar purple",style:{margin:"18px 0"},children:[(0,n.jsx)("div",{className:"tr_bar tr_bar_80",children:(0,t.zE)(4)}),(0,n.jsx)("div",{className:"tr_bar tr_bar_20",children:(0,t.zE)(14)})]}),(0,t.bh)("extraChargesInvoiceList")&&(null===(l=(0,t._2)((0,t.bh)("extraChargesInvoiceList")))||void 0===l?void 0:l.map(((e,l)=>(0,n.jsx)(v,{idKey:e,data:(0,t.bh)("extraChargesInvoiceList")[e],deleteItem:a},e))))]})};var p=i(24),m=i(713);const b=(0,d.PU)(),x=(0,d.Np)(),_=(0,p.f_)(),y=(0,d.YZ)(),I=(0,a.FC)(),j=(0,p.Az)(),g="new_fatura_sale_comprobante",N=e=>{var l,i,d,a,r,c,u,v,p,m,b,I,j,N,k;let{data:w,confirm:R}=e;const[C,O]=(0,s.useState)(!1),[,M]=(0,s.useState)(0);(0,s.useEffect)((()=>{C||(O(!0),(0,t.Rz)("accountPicker",{}),M((0,t.M5)()))}));const A=(e,l,i)=>{let s=(0,t.bh)(g)||{};i?(s[i]||(s[i]={}),s[i][e]=l):s[e]=l,(0,t.Rz)(g,s),M((0,t.M5)())};let E=null!==(l=(0,t.bh)(g))&&void 0!==l&&l.isAdvance?P((0,t.bh)("productListOnOut"),(0,t.bh)("extraChargesInvoiceList")):null===(i=(0,t.bh)(g))||void 0===i?void 0:i.totalAmount;return(0,n.jsxs)("div",{style:{maxHeight:"90vh",minHeight:"58vh",width:"860px",overflow:"auto",background:"var(--hrm_palette-general-background-b)",borderRadius:13,padding:"10px 19px"},children:[(0,n.jsxs)("div",{className:"_dsplFlx ",children:[(0,n.jsx)("p",{className:"form_title",children:(0,t.zE)(1)}),(0,n.jsx)("div",{className:"flexSpace"}),(0,n.jsxs)("div",{className:"_dsplFlx ",style:{marginTop:20},children:[(0,n.jsx)(y,{initvalue:null===(d=(0,t.bh)(g))||void 0===d?void 0:d.isAdvance,keyCode:57,updChange:e=>A("isAdvance",e)}),(0,n.jsx)("span",{className:"checklabel",children:"Avanzado"})]})]}),(0,n.jsxs)("div",{className:"_dsplFlx ",children:[(0,n.jsx)(_,{label:(0,t.zE)(3),init:null===(a=(0,t.bh)(g))||void 0===a?void 0:a.date,updDate:e=>A("date",e)}),(0,n.jsx)("div",{className:"flexSpace"}),(0,n.jsx)(x,{init:null===(r=(0,t.bh)(g))||void 0===r?void 0:r.document,label:(0,t.zE)(2),width:120,updChanges:e=>A("document",e)}),(0,n.jsx)("div",{className:"flexSpace"}),null!==(c=(0,t.bh)(g))&&void 0!==c&&c.isAdvance?(0,n.jsx)(x,{init:null===(u=(0,t.bh)(g))||void 0===u?void 0:u.hasTax,label:(0,t.zE)(16),width:120,updChanges:e=>A("hasTax",e)}):null,(0,n.jsx)("div",{className:"flexSpace"}),null!==(v=(0,t.bh)(g))&&void 0!==v&&v.isAdvance?(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"label",children:"Total"}),(0,n.jsx)("div",{className:"date2Upd",style:{marginRight:30},children:(E||0).toFixed(2)})]}):(0,n.jsx)(x,{init:null===(p=(0,t.bh)(g))||void 0===p?void 0:p.totalAmount,label:"Monto",width:120,type:"number",updChanges:e=>A("totalAmount",e)})]}),null!==(m=(0,t.bh)(g))&&void 0!==m&&m.isAdvance?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"_dsplFlx ",style:{margin:"18px 10px"},children:[(0,n.jsx)(f,{}),(0,n.jsx)("div",{className:"flexSpace"}),(0,n.jsx)(x,{init:null===(b=(0,t.bh)(g))||void 0===b?void 0:b.hasAdvancePay,label:(0,t.zE)(15),width:120,updChanges:e=>A("hasAdvancePay",e)})]}),(0,n.jsxs)("div",{className:"_dsplFlx ",style:{margin:"18px 0"},children:[(0,n.jsx)("div",{className:"flexSpace"}),(0,n.jsx)(x,{init:null===(I=(0,t.bh)(g))||void 0===I?void 0:I.description,label:(0,t.zE)(4),width:520,updChanges:e=>A("description",e)}),(0,n.jsx)("div",{className:"flexSpace"})]}),(0,n.jsx)(z,{updMain:M}),(0,n.jsx)(h,{updMain:M})]}):(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"_dsplFlx ",style:{margin:"18px 10px"},children:[(0,n.jsx)("div",{className:"flexSpace"}),(0,n.jsx)(f,{}),(0,n.jsx)("div",{className:"flexSpace"})]}),(0,n.jsxs)("div",{className:"_dsplFlx ",style:{margin:"18px 10px"},children:[(0,n.jsx)("div",{className:"flexSpace"}),(0,n.jsx)(x,{init:null===(j=(0,t.bh)(g))||void 0===j?void 0:j.clientName,label:"Nombe del cliente",width:420,updChanges:e=>A("clientName",e)}),(0,n.jsx)("div",{className:"flexSpace"})]})]}),(0,n.jsxs)("div",{className:"_dsplFlx ",children:[(0,n.jsx)("div",{className:"flexSpace"}),null!==(N=(0,t.bh)(g))&&void 0!==N&&N.document&&null!==(k=(0,t.bh)("customerOutPicker"))&&void 0!==k&&k.account&&E>0?(0,n.jsx)("div",{className:"card",children:(0,n.jsx)("button",{onClick:async()=>{var e,l,i,s,d,a;let n=(0,t.bh)(g),r=(new Date).getTime()+800;if(n.date){let e=new Date(n.date).getTime();r=e||r}n.date=r;let c=[],u=n.hasAdvancePay,v=n.hasTax,h=n.isAdvance;delete n.hasTax,delete n.hasAdvancePay;let p=0,m=0,b=[],x={...n},_=n.clientName?" "+n.clientName:"",y=(0,t.bh)("global_account_params");if(h){var I;let e=(0,t.bh)("productListOnOut")&&(0,t._2)((0,t.bh)("productListOnOut"));if(e&&(null===e||void 0===e||e.map((async(e,l)=>{let i={...(0,t.bh)("productListOnOut")[e]},s=1*i.qty*(1*i.price);p+=s,m+=s,b.push({inventoryId:(0,t.M5)(),product:i.productId,qty:1*i.qty,salePrice:1*i.salePrice,price:1*i.price,amount:s})}))),m>0){var j,N;let e={...n};e.type="credit",e.account=null===y||void 0===y||null===(j=y.inventory)||void 0===j?void 0:j.account,e.amount=m,e.operationId=(0,t.M5)(),c.push(e);let l={...n};l.type="debit",l.account=null===y||void 0===y||null===(N=y.inventory_expensess)||void 0===N?void 0:N.account,l.amount=m,l.operationId=(0,t.M5)(),c.push(l)}if(p>0&&(0,t.bh)("customerOutPicker").account){var f,z,k,P,C;let e={...n};e.type="debit",e.account=null===(f=(0,t.bh)("customerOutPicker"))||void 0===f?void 0:f.account,e.subAccount=null===(z=(0,t.bh)("customerOutPicker"))||void 0===z?void 0:z.subAccount,e.providerId=null===(k=(0,t.bh)("customerOutPicker"))||void 0===k?void 0:k.providerId,e.operationId=(0,t.M5)();let l=null===(P=(0,t.bh)("account_ids"))||void 0===P?void 0:P[null===(C=(0,t.bh)("customerOutPicker"))||void 0===C?void 0:C.account];l&&l.payOrCollect&&(e.payOrCollect=l.payOrCollect),e.amount=v?v/100*E+1*E:1*E,c.push(e)}if(v){var O;let e={...n};e.type="credit",e.account=null===y||void 0===y||null===(O=y.sale_tax)||void 0===O?void 0:O.account,e.operationId=(0,t.M5)(),e.amount=E*v/100,c.push(e)}if(null!==y&&void 0!==y&&null!==(I=y.sales_income)&&void 0!==I&&I.account){var A;let e={...n};e.type="credit",e.account=null===y||void 0===y||null===(A=y.sales_income)||void 0===A?void 0:A.account,e.operationId=(0,t.M5)(),e.amount=E,c.push(e)}u&&(x.hasAdvancePay=1*u),v&&(x.hasTax=v/100*E),x.extras=(0,t.bh)("extraChargesInvoiceList")}else{var Q,S;E=n.totalAmount;let e=null===(Q=(0,t.bh)("providers_ids")[null===(S=(0,t.bh)("customerOutPicker"))||void 0===S?void 0:S.providerId])||void 0===Q?void 0:Q.name;e&&(x.description="Sale to ".concat(e).concat(_))}x.invoiceId=(0,t.M5)(),x.products=b,x.amount=1*E,x.createdBy=null===(e=(0,t.bh)("profileUser"))||void 0===e?void 0:e.userId,x.customer={account:null===(l=(0,t.bh)("customerOutPicker"))||void 0===l?void 0:l.account,subAccount:null===(i=(0,t.bh)("customerOutPicker"))||void 0===i?void 0:i.subAccount,providerId:null===(s=(0,t.bh)("customerOutPicker"))||void 0===s?void 0:s.providerId},x.comprobantes=c;let q={...null===(d=(0,t.bh)((0,t.hQ)()))||void 0===d?void 0:d.add_invoice};q.params={businessId:null===(a=(0,t.bh)("profileUser"))||void 0===a?void 0:a.businessId},q.form=x;{const e=(0,t.I7)(q);await e;(null===w||void 0===w?void 0:w.modalID)&&(0,o.CloseModal)({id:null===w||void 0===w?void 0:w.modalID}),setTimeout((()=>{(0,t.Rz)("extraChargesInvoiceList",null),(0,t.Rz)("productListOnOut",null),(0,t.Rz)("customerOutPicker",null),(0,t.Rz)(g,null),M((0,t.M5)()),R&&R()}),400)}},children:(0,t.zE)(5)})}):null]})]})},f=e=>{var l,i;let{}=e;const[d,o]=(0,s.useState)(0);let a=null===(l=(0,t.bh)("providers_ids"))||void 0===l?void 0:l[null===(i=(0,t.bh)("customerOutPicker"))||void 0===i?void 0:i.providerId];return(0,n.jsx)("div",{children:null!==a&&void 0!==a&&a.name?(0,n.jsx)("div",{className:"_dsplFlx ",style:{margin:"18px 0"},children:(0,n.jsxs)("div",{className:" acc_dtls",children:[(0,n.jsx)("div",{className:"_dsplFlx",children:(0,n.jsx)("div",{className:"code",style:{color:"#646cff"},onClick:()=>{(0,t.Rz)("customerOutPicker",null),o((0,t.M5)())},children:null===a||void 0===a?void 0:a.name})}),(0,n.jsx)("div",{className:"flexSpace"})]})}):(0,n.jsx)(I,{placeholder:"buscar una provedor",width:320,handleClick:e=>{let l={providerId:e.providerId,account:e.account,subAccount:e.subAccount};(0,t.Rz)("customerOutPicker",l),o((0,t.M5)())}})})},z=e=>{var l,i,d,o,a,r,c,u,v,h,p,b,_,y;let{updMain:I}=e;const[g,N]=(0,s.useState)(0),f=()=>{N((0,t.M5)())};let z=null===(l=(0,t.bh)("products_ids"))||void 0===l?void 0:l[null===(i=(0,t.bh)("productPicker"))||void 0===i?void 0:i.productId];const P=(e,l,i)=>{let s=(0,t.bh)("productPicker")||{};i?(s[i]||(s[i]={}),s[i][e]=l):s[e]=l,(0,t.Rz)("productPicker",s),N((0,t.M5)())},w=e=>{let l=(0,t.bh)("productListOnOut")||{};delete l[e],(0,t.Rz)("productListOnOut",l),I((0,t.M5)())};return(0,n.jsxs)("div",{className:"boxAddAcc",style:{margin:"18px 0"},children:[null!==(d=(0,t.bh)("productPicker"))&&void 0!==d&&d.productId?(0,n.jsx)("div",{className:"_dsplFlx ",style:{margin:"18px 0"},children:(0,n.jsxs)("div",{className:" acc_dtls",children:[(0,n.jsxs)("div",{className:"_dsplFlx",onClick:e=>{(0,t.Rz)("productPicker",null),N((0,t.M5)())},children:[(0,n.jsx)("div",{className:"code",style:{color:"#646cff"},children:null===z||void 0===z?void 0:z.upc_barcode}),(0,n.jsx)("div",{className:"name",children:null===z||void 0===z?void 0:z.name})]}),(0,n.jsx)("div",{className:"flexSpace"})]})}):(0,n.jsx)(j,{width:420,handleClick:e=>{let l={productId:e.productId,product:e.product,subAccount:e.subAccount};(0,t.Rz)("productPicker",l),(0,m.Rd)(e.productId,f)}}),null!==(o=(0,t.bh)("products_stock"))&&void 0!==o&&null!==(a=o[null===(r=(0,t.bh)("productPicker"))||void 0===r?void 0:r.productId])&&void 0!==a&&a.qty?(0,n.jsxs)("div",{className:"_dsplFlx ",children:[(0,n.jsx)(x,{init:null===(c=(0,t.bh)("productPicker"))||void 0===c?void 0:c.qty,label:(0,t.zE)(10),width:120,type:"number",updChanges:e=>P("qty",e)}),(0,n.jsx)("div",{style:{margin:"0 5px"}}),(0,n.jsx)(x,{init:null===(u=(0,t.bh)("productPicker"))||void 0===u?void 0:u.salePrice,label:(0,t.zE)(11),width:120,type:"number",updChanges:e=>P("salePrice",e)}),(0,n.jsx)("div",{className:"flexSpace"}),null!==(v=(0,t.bh)("productPicker"))&&void 0!==v&&v.qty&&(null===(h=(0,t.bh)("productPicker"))||void 0===h?void 0:h.qty)<=(null===(p=(0,t.bh)("products_stock"))||void 0===p||null===(b=p[null===(_=(0,t.bh)("productPicker"))||void 0===_?void 0:_.productId])||void 0===b?void 0:b.qty)?(0,n.jsx)("div",{style:{marginTop:38},children:(0,n.jsx)("button",{onClick:()=>{var e,l,i,s,d,o;let a={...(0,t.bh)("productPicker")}||{},n={...(0,t.bh)("productPicker")}||{},r={...(0,t.bh)("productListOnOut")}||{},c=a.productId,u=(null===(e=(0,t.bh)("products_stock"))||void 0===e||null===(l=e[null===(i=(0,t.bh)("productPicker"))||void 0===i?void 0:i.productId])||void 0===l?void 0:l.amount)/(null===(s=(0,t.bh)("products_stock"))||void 0===s||null===(d=s[null===(o=(0,t.bh)("productPicker"))||void 0===o?void 0:o.productId])||void 0===d?void 0:d.qty);a.price=u,r[c]=a,(0,t.Rz)("productListOnOut",r),n.productId=null,n.qty="",n.price="",(0,t.Rz)("productPicker",n),I((0,t.M5)())},children:(0,t.zE)(7)})}):null]}):null,(0,n.jsxs)("div",{className:"_dsplFlx hdr_bar purple",style:{margin:"18px 0"},children:[(0,n.jsx)("div",{className:"tr_bar tr_bar_50 ",children:(0,t.zE)(8)}),(0,n.jsx)("div",{className:"tr_bar tr_bar_20",children:"Qty"}),(0,n.jsx)("div",{className:"tr_bar tr_bar_20",children:(0,t.zE)(11)}),(0,n.jsx)("div",{className:"tr_bar tr_bar_5"})]}),(0,t.bh)("productListOnOut")&&(null===(y=(0,t._2)((0,t.bh)("productListOnOut")))||void 0===y?void 0:y.map(((e,l)=>(0,n.jsx)(k,{idKey:e,data:(0,t.bh)("productListOnOut")[e],deleteItem:w},e))))]})},k=e=>{var l;let{data:i,deleteItem:s,idKey:d}=e,o=null===(l=(0,t.bh)("products_ids"))||void 0===l?void 0:l[null===i||void 0===i?void 0:i.productId];return(0,n.jsxs)("div",{className:"_dsplFlx hdr_bar",children:[(0,n.jsx)("div",{className:"tr_bar tr_bar_50",children:null===o||void 0===o?void 0:o.name}),(0,n.jsx)("div",{className:"tr_bar tr_bar_20",children:(0,t.Zv)(null===i||void 0===i?void 0:i.qty,2)}),(0,n.jsx)("div",{className:"tr_bar tr_bar_20",children:(0,t.Zv)(null===i||void 0===i?void 0:i.salePrice,2)}),(0,n.jsx)("div",{className:"flexSpace"}),(0,n.jsx)("div",{className:"icon",onClick:()=>{s(d)},children:(0,n.jsx)(b,{name:"outline_delete",color:"#c62828"})})]})},P=(e,l)=>{var i,s;let d=0;return e&&(null===(i=(0,t._2)(e))||void 0===i||i.map(((l,i)=>{let s=1*e[l].salePrice*(1*e[l].qty);d=1*(0,t.Zv)(d,2)+1*(0,t.Zv)(s,2)}))),l&&(null===(s=(0,t._2)(l))||void 0===s||s.map(((e,i)=>{let s=1*l[e].salePrice*(1*l[e].qty);d=1*(0,t.Zv)(d,2)+1*(0,t.Zv)(s,2)}))),d}},261:()=>{}}]);
//# sourceMappingURL=3264.4e2f3cc1.chunk.js.map