"use strict";(self.webpackChunkhrmfinance=self.webpackChunkhrmfinance||[]).push([[3753],{810:function(e,n,t){var o=t(9439),a=t(2791),i=t(2350),l=t(2647),r=(t(1636),t(4050)),s=t(184),u=(0,l.kp)();n.Z=function(e){var n,t=e.handleClick,l=(0,a.useState)(!1),c=(0,o.Z)(l,2),v=c[0],m=c[1],f=(0,a.useState)(0),x=(0,o.Z)(f,2),h=(x[0],x[1]),b=(0,a.useState)(!1),p=(0,o.Z)(b,2),y=p[0],F=p[1],z=(0,a.useState)([]),R=(0,o.Z)(z,2),T=R[0],g=R[1],w=(0,a.useRef)();(0,a.useEffect)((function(){v||(m(!0),(0,r.ZX)(B))}));var B=function(e){h((0,i.M5)())},I=function(e){t(e),w.current.clearTx()};return(0,s.jsx)("div",{children:(0,s.jsx)(u,{placeholder:"associar una cuenta",width:420,fetchData:function(e){g((0,i.MA)((0,i.bh)("account_list"),e)),y&&F(!1)},loading:y,change:function(e){!y&&F(!0)},callempty:function(e){g([]),y&&F(!1)},ref:w,children:(0,s.jsx)("div",{className:"",children:T&&(null===(n=(0,i._2)(T))||void 0===n?void 0:n.map((function(e){return(0,s.jsx)(d,{data:T[e],elmId:e,selectItem:I},e)})))})})})};var d=function(e){var n=e.data,t=e.selectItem;return(0,s.jsx)("div",{className:"item_acc",children:(0,s.jsx)("div",{className:"_dsplFlx account_item_box account_header",children:(0,s.jsxs)("div",{className:"_dsplFlx",onClick:function(){return t(null===n||void 0===n?void 0:n.accountId,null)},children:[(0,s.jsx)("div",{className:"code",children:null===n||void 0===n?void 0:n.code}),(0,s.jsx)("div",{className:"name",children:null===n||void 0===n?void 0:n.name})]})})})}},3266:function(e,n,t){t.d(n,{$z:function(){return p},f9:function(){return z}});var o=t(4165),a=t(5861),i=t(6963),l=t(2350),r=t(4e3);function s(e){var n=new Blob([e],{type:"application/pdf"});return(window.URL||window.webkitURL).createObjectURL(n)}var u=0,d=null,c=null,v=null;function m(e,n,t){var o,a,r=0,s=[];s.push({yInc:0,label:{value:"Balance de Resultado",x:110,size:14,font:"TimesRomanBold"}});var u={yInc:0,label:{value:"Fecha: "+(0,l.Gv)(Date.now()),x:490,size:12,font:"timesRomanFont"}};s.push(u),e&&(0,l._2)(e).map((function(o,a){var u,d,v=0,m={yInc:20,label:{value:o,x:30,y:20,size:13,font:"TimesRomanBold"}};s.push(m),Array.isArray(e[o])?e[o].map((function(e,o){v=x(e,n,t,v,0,s)})):(0,l._2)(e[o]).map((function(a,i){var r={yInc:16,label:{value:a,x:40,size:11,font:"TimesRomanBold"}};s.push(r),(0,l._2)(e[o][a]).map((function(i,l){var r=e[o][a][i];v=x(r,n,t,v,0,s)}))}));var f=c.widthOfTextAtSize((null===(u=v)||void 0===u?void 0:u.toFixed(2))+"",11);r+="Ingresos"===o?v:-1*v;var h={yInc:16,line:{x:520,y:10,width:70,height:.5,borderColor:(0,i.rgb)(0,0,0)},label:{value:"Total "+o,x:30,size:11,font:"TimesRomanBold"},amount:{value:null===(d=v)||void 0===d?void 0:d.toFixed(2),x:580-f,size:11,font:"TimesRomanBold"}};s.push(h)}));var d=c.widthOfTextAtSize((null===(o=r)||void 0===o?void 0:o.toFixed(2))+"",11),v={yInc:16,line:{x:520,y:10,width:70,height:.5,borderColor:(0,i.rgb)(0,0,0)},label:{value:"Ganancia o perdida  (Ingresos - gastos)",x:30,size:11,font:"TimesRomanBold"},amount:{value:null===(a=r)||void 0===a?void 0:a.toFixed(2),x:580-d,size:11,font:"TimesRomanBold"}};return s.push(v),{totalGP:r,listArr:s}}function f(e,n,t,o){var a,r,s=0,u=[];u.push({yInc:0,label:{value:"Balance de Situacion",x:110,size:14,font:"TimesRomanBold"}});var d={yInc:0,label:{value:"Fecha: "+(0,l.Gv)(Date.now()),x:490,size:12,font:"timesRomanFont"}};u.push(d),e&&(0,l._2)(e).map((function(a,r){var d,v,m=0,f={yInc:20,label:{value:a,x:30,y:20,size:13,font:"TimesRomanBold"}};u.push(f),Array.isArray(e[a])?e[a].map((function(e,a){m=x(e,n,t,m,o,u)})):(0,l._2)(e[a]).map((function(i,r){var s={yInc:16,label:{value:i,x:40,size:11,font:"TimesRomanBold"}};u.push(s),(0,l._2)(e[a][i]).map((function(l,r){var s=e[a][i][l];m=x(s,n,t,m,o,u)}))})),s+="Activos"!==a?m:0;var h=c.widthOfTextAtSize((null===(d=m)||void 0===d?void 0:d.toFixed(2))+"",11),b={yInc:16,line:{x:520,y:10,width:70,height:.5,borderColor:(0,i.rgb)(0,0,0)},label:{value:"Total "+a,x:30,size:11,font:"TimesRomanBold"},amount:{value:null===(v=m)||void 0===v?void 0:v.toFixed(2),x:580-h,size:11,font:"TimesRomanBold"}};u.push(b)}));var v=c.widthOfTextAtSize((null===(a=s)||void 0===a?void 0:a.toFixed(2))+"",11),m={yInc:16,line:{x:520,y:10,width:70,height:.5,borderColor:(0,i.rgb)(0,0,0)},label:{value:"Total ( Pasivos + Patrimonio )",x:30,size:11,font:"TimesRomanBold"},amount:{value:null===(r=s)||void 0===r?void 0:r.toFixed(2),x:580-v,size:11,font:"TimesRomanBold"}};return u.push(m),u}var x=function(e,n,t,o,a,i){var r,s,u=10,c=n[e.key],v=(0,l._2)(c)[0],m=null===c||void 0===c||null===(r=c[v])||void 0===r?void 0:r.saldo,f=null===(s=(0,l.bh)("account_ids"))||void 0===s?void 0:s[v];if("Resultado (ganancia o perdida)"===e.key&&a&&0!==a){var x=a;o+=x;var h=d.widthOfTextAtSize((null===x||void 0===x?void 0:x.toFixed(2))+"",u),b={yInc:13,label:{value:e.key,x:50,size:u,font:"timesRomanFont"},amount:{value:null===x||void 0===x?void 0:x.toFixed(2),x:580-h,size:u,font:"timesRomanFont"}};i.push(b)}else if(m&&0!==m&&(0,l._2)(c).length>0){var p,y=null===(p=c[t[e.key]])||void 0===p?void 0:p.sub;if(m="credit"===(null===f||void 0===f?void 0:f.type)?-1*m:m,y&&(0,l._2)(y).length>0){var F,z,R={yInc:13,label:{value:f.code+" - "+e.key,x:50,size:u,font:"timesRomanFont"}};i.push(R),(0,l._2)(y).map((function(e){var t,o=e,a=n&&(null===(t=(0,l.bh)("sub_account_ids"))||void 0===t?void 0:t[o]),r=y[e].saldo;if(0!==(r="credit"===(null===f||void 0===f?void 0:f.type)?-1*r:r)){var s,c,v=d.widthOfTextAtSize((null===(s=r)||void 0===s?void 0:s.toFixed(2))+"",u),m={yInc:13,label:{value:null===a||void 0===a?void 0:a.subAccountName,x:70,size:u,font:"timesRomanFont"},amount:{value:null===(c=r)||void 0===c?void 0:c.toFixed(2),x:520-v,size:u,font:"timesRomanFont"}};i.push(m)}})),o+=m;var T=d.widthOfTextAtSize((null===(F=m)||void 0===F?void 0:F.toFixed(2))+"",u),g={yInc:13,label:{value:"Total "+e.key,x:60,size:u,font:"TimesRomanBold"},amount:{value:null===(z=m)||void 0===z?void 0:z.toFixed(2),x:580-T,size:u,font:"TimesRomanBold"}};i.push(g)}else{var w=c[t[e.key]].saldo;if(0!==(w="credit"===(null===f||void 0===f?void 0:f.type)?-1*w:w)){"Depreciacion Activos fijos"===e.key&&(w*=-1),o+=w;var B=w;e.key;var I=d.widthOfTextAtSize((null===B||void 0===B?void 0:B.toFixed(2))+"",u),S={yInc:13,label:{value:f.code+" - "+e.key,x:50,size:u,font:"timesRomanFont"},amount:{value:null===B||void 0===B?void 0:B.toFixed(2),x:580-I,size:u,font:"timesRomanFont"}};i.push(S)}}}return o};function h(e,n){return b.apply(this,arguments)}function b(){return(b=(0,a.Z)((0,o.Z)().mark((function e(n,t){var a,l,r,s;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=n.addPage(),l=a.getSize(),r=l.height,u=r-30,60,s=Math.ceil(t.length/60),Array.from(Array(s).keys()).map((function(e){e>0&&(a=n.addPage(),u=r-30);var o=t.slice(60*e,60*(e+1));o&&o.map((function(e,n){u-=e.yInc,e.line&&a.drawRectangle({x:e.line.x,y:u+e.line.y,width:e.line.width,height:e.line.height,borderColor:(0,i.rgb)(0,0,0)}),e.label&&a.drawText(e.label.value,{x:e.label.x,y:u,size:e.label.size,font:"TimesRomanBold"===e.label.font?c:d,color:(0,i.rgb)(0,0,0)}),e.amount&&a.drawText(e.amount.value,{x:e.amount.x,y:u,size:e.amount.size,font:"TimesRomanBold"===e.amount.font?c:d,color:(0,i.rgb)(0,0,0)})}))}));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(e,n,t,o,a){return y.apply(this,arguments)}function y(){return(y=(0,a.Z)((0,o.Z)().mark((function e(n,t,a,u,x){var b,p,y,F,z,R,T,g,w,B,I,S,k;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.PDFDocument.create();case 2:return(b=e.sent).registerFontkit(r.Z),e.next=6,b.embedFont(i.StandardFonts.TimesRoman,{subset:!0});case 6:return d=e.sent,e.next=9,b.embedFont(i.StandardFonts.TimesRomanBold,{subset:!0});case 9:return c=e.sent,e.next=12,b.embedFont(i.StandardFonts.TimesRomanBold,{subset:!0});case 12:if(v=e.sent,!(0,l.bh)("modernFontReport")){e.next=35;break}return p=(0,l.bh)("Roboto-Bold.ttf"),y=(0,l.bh)("ggSans-Italic.ttf"),F=(0,l.bh)("ggSans-Medium.ttf"),e.next=19,fetch(p).then((function(e){return e.arrayBuffer()}));case 19:return z=e.sent,e.next=22,b.embedFont(z,{subset:!0});case 22:return c=e.sent,e.next=25,fetch(y).then((function(e){return e.arrayBuffer()}));case 25:return R=e.sent,e.next=28,b.embedFont(R,{subset:!0});case 28:return d=e.sent,e.next=31,fetch(F).then((function(e){return e.arrayBuffer()}));case 31:return T=e.sent,e.next=34,b.embedFont(T,{subset:!0});case 34:v=e.sent;case 35:return g=m(u,null===n||void 0===n?void 0:n.result,x),w=g.totalGP,B=g.listArr,I=f(t,null===n||void 0===n?void 0:n.general,a,w),h(b,B),h(b,I),e.next=41,b.save();case 41:S=e.sent,k=s(S),window.open(k);case 44:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var F=function(e){var n,t,o,a,l=[],r=10,s=0,u=0;e&&e.map((function(e,n){var t=(e.saldo,1*e.saldo);if(t){var o={};if(e.sub_cuenta){var a=d.widthOfTextAtSize((null===t||void 0===t?void 0:t.toFixed(2))+"",r);o={yInc:13,code:{value:e.sub_cuenta,x:45,size:r,font:"timesRomanFont"},name:{value:"- "+e.nombre_sub_cuenta,x:70,size:r,font:"timesRomanFont"},amount:{value:null===t||void 0===t?void 0:t.toFixed(2),x:460-a,size:r,font:"timesRomanFont"}}}else{var i=c.widthOfTextAtSize((null===t||void 0===t?void 0:t.toFixed(2))+"",r);"debit"===e.type?s+=t:u+=t,o={yInc:13,code:{value:e.cuenta,x:30,size:r,font:"TimesRomanBold"},name:{value:e.nombre,x:65,size:r,font:"TimesRomanBold"},amount:{value:null===t||void 0===t?void 0:t.toFixed(2),x:("debit"===e.type?520:580)-i,size:r,font:"TimesRomanBold"}}}l.push(o)}}));var v=c.widthOfTextAtSize((null===(n=s)||void 0===n?void 0:n.toFixed(2))+"",r),m=c.widthOfTextAtSize((null===(t=u)||void 0===t?void 0:t.toFixed(2))+"",r),f={yInc:21,line:{x:517-v,y:10,width:583-(517-v),height:.5,borderColor:(0,i.rgb)(0,0,0)},name:{value:null===(o=s)||void 0===o?void 0:o.toFixed(2),x:520-v,size:r,font:"TimesRomanBold"},amount:{value:null===(a=u)||void 0===a?void 0:a.toFixed(2),x:580-m,size:r,font:"TimesRomanBold"}};return l.push(f),l},z=function(){var e=(0,a.Z)((0,o.Z)().mark((function e(n){var t,a,m,f,x,h,b,p,y,z,R,T,g,w;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.PDFDocument.create();case 2:return(t=e.sent).registerFontkit(r.Z),e.next=6,t.embedFont(i.StandardFonts.TimesRoman);case 6:return d=e.sent,e.next=9,t.embedFont(i.StandardFonts.TimesRomanBold);case 9:return c=e.sent,e.next=12,t.embedFont(i.StandardFonts.TimesRomanBold);case 12:if(v=e.sent,!(0,l.bh)("modernFontReport")){e.next=35;break}return a=(0,l.bh)("Roboto-Bold.ttf"),m=(0,l.bh)("ggSans-Italic.ttf"),f=(0,l.bh)("ggSans-Medium.ttf"),e.next=19,fetch(a).then((function(e){return e.arrayBuffer()}));case 19:return x=e.sent,e.next=22,t.embedFont(x,{subset:!0});case 22:return c=e.sent,e.next=25,fetch(m).then((function(e){return e.arrayBuffer()}));case 25:return h=e.sent,e.next=28,t.embedFont(h,{subset:!0});case 28:return d=e.sent,e.next=31,fetch(f).then((function(e){return e.arrayBuffer()}));case 31:return b=e.sent,e.next=34,t.embedFont(b,{subset:!0});case 34:v=e.sent;case 35:return p=t.addPage(),y=p.getSize(),y.width,z=y.height,u=z-40,55,p.drawText("Balance de Comprobacion",{x:110,y:u,size:16,font:v,color:(0,i.rgb)(0,0,0)}),p.drawText("Fecha: "+(0,l.Gv)(Date.now()),{x:500,y:u,size:11,font:d,color:(0,i.rgb)(0,0,0)}),u-=15,R=F(n),T=Math.ceil(R.length/55),Array.from(Array(T).keys()).map((function(e){e>0&&(p=t.addPage(),u=z-40);var n=R.slice(55*e,55*(e+1));n&&n.map((function(e,n){u-=e.yInc,e.line&&p.drawRectangle({x:e.line.x,y:u+e.line.y,width:e.line.width,height:e.line.height,borderColor:(0,i.rgb)(0,0,0)}),e.code&&p.drawText(e.code.value,{x:e.code.x,y:u,size:e.code.size,font:"TimesRomanBold"===e.code.font?v:d,color:(0,i.rgb)(0,0,0)}),e.name&&p.drawText(e.name.value,{x:e.name.x,y:u,size:e.name.size,font:"TimesRomanBold"===e.name.font?v:d,color:(0,i.rgb)(0,0,0)}),e.amount&&p.drawText(e.amount.value,{x:e.amount.x,y:u,size:e.amount.size,font:"TimesRomanBold"===e.amount.font?v:d,color:(0,i.rgb)(0,0,0)})}))})),e.next=47,t.save();case 47:g=e.sent,w=s(g),window.open(w);case 50:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()},1636:function(){}}]);
//# sourceMappingURL=3753.341ee932.chunk.js.map