"use strict";(self.webpackChunkhrmfinance=self.webpackChunkhrmfinance||[]).push([[3753],{810:function(e,t,n){var o=n(9439),a=n(2791),i=n(2350),l=n(2647),r=(n(1636),n(4050)),s=n(184),d=(0,l.kp)();t.Z=function(e){var t,n=e.handleClick,l=(0,a.useState)(!1),c=(0,o.Z)(l,2),m=c[0],v=c[1],f=(0,a.useState)(0),x=(0,o.Z)(f,2),h=(x[0],x[1]),p=(0,a.useState)(!1),b=(0,o.Z)(p,2),g=b[0],y=b[1],F=(0,a.useState)([]),z=(0,o.Z)(F,2),R=z[0],T=z[1],w=(0,a.useRef)();(0,a.useEffect)((function(){m||(v(!0),(0,r.ZX)(S))}));var S=function(e){h((0,i.M5)())},B=function(e){n(e),w.current.clearTx()};return(0,s.jsx)("div",{children:(0,s.jsx)(d,{placeholder:"associar una cuenta",width:420,fetchData:function(e){T((0,i.MA)((0,i.bh)("account_list"),e)),g&&y(!1)},loading:g,change:function(e){!g&&y(!0)},callempty:function(e){T([]),g&&y(!1)},ref:w,children:(0,s.jsx)("div",{className:"",children:R&&(null===(t=(0,i._2)(R))||void 0===t?void 0:t.map((function(e){return(0,s.jsx)(u,{data:R[e],elmId:e,selectItem:B},e)})))})})})};var u=function(e){var t=e.data,n=e.selectItem;return(0,s.jsx)("div",{className:"item_acc",children:(0,s.jsx)("div",{className:"_dsplFlx account_item_box account_header",children:(0,s.jsxs)("div",{className:"_dsplFlx",onClick:function(){return n(null===t||void 0===t?void 0:t.accountId,null)},children:[(0,s.jsx)("div",{className:"code",children:null===t||void 0===t?void 0:t.code}),(0,s.jsx)("div",{className:"name",children:null===t||void 0===t?void 0:t.name})]})})})}},3266:function(e,t,n){n.d(t,{$z:function(){return p},f9:function(){return y}});var o=n(4165),a=n(5861),i=n(6963),l=n(2350),r=n(4e3);function s(e){var t=new Blob([e],{type:"application/pdf"});return(window.URL||window.webkitURL).createObjectURL(t)}var d=0,u=null,c=null;function m(e,t,n){var o,a,r=0,s=[];s.push({yInc:0,label:{value:"Balance de Resultado",x:110,size:14,font:"TimesRomanBold"}});var d={yInc:0,label:{value:"Fecha: "+(0,l.Gv)(Date.now()),x:490,size:12,font:"timesRomanFont"}};s.push(d),e&&(0,l._2)(e).map((function(o,a){var d,u,m=0,v={yInc:20,label:{value:o,x:30,y:20,size:13,font:"TimesRomanBold"}};s.push(v),Array.isArray(e[o])?e[o].map((function(e,o){m=f(e,t,n,m,0,s)})):(0,l._2)(e[o]).map((function(a,i){var r={yInc:16,label:{value:a,x:40,size:11,font:"TimesRomanBold"}};s.push(r),(0,l._2)(e[o][a]).map((function(i,l){var r=e[o][a][i];m=f(r,t,n,m,0,s)}))}));var x=c.widthOfTextAtSize((null===(d=m)||void 0===d?void 0:d.toFixed(2))+"",11);r+="Ingresos"===o?m:-1*m;var h={yInc:16,line:{x:520,y:10,width:70,height:.5,borderColor:(0,i.rgb)(0,0,0)},label:{value:"Total "+o,x:30,size:11,font:"TimesRomanBold"},amount:{value:null===(u=m)||void 0===u?void 0:u.toFixed(2),x:580-x,size:11,font:"TimesRomanBold"}};s.push(h)}));var u=c.widthOfTextAtSize((null===(o=r)||void 0===o?void 0:o.toFixed(2))+"",11),m={yInc:16,line:{x:520,y:10,width:70,height:.5,borderColor:(0,i.rgb)(0,0,0)},label:{value:"Ganancia o perdida  (Ingresos - gastos)",x:30,size:11,font:"TimesRomanBold"},amount:{value:null===(a=r)||void 0===a?void 0:a.toFixed(2),x:580-u,size:11,font:"TimesRomanBold"}};return s.push(m),{totalGP:r,listArr:s}}function v(e,t,n,o){var a,r,s=0,d=[];d.push({yInc:0,label:{value:"Balance de Situacion",x:110,size:14,font:"TimesRomanBold"}});var u={yInc:0,label:{value:"Fecha: "+(0,l.Gv)(Date.now()),x:490,size:12,font:"timesRomanFont"}};d.push(u),e&&(0,l._2)(e).map((function(a,r){var u,m,v=0,x={yInc:20,label:{value:a,x:30,y:20,size:13,font:"TimesRomanBold"}};d.push(x),Array.isArray(e[a])?e[a].map((function(e,a){v=f(e,t,n,v,o,d)})):(0,l._2)(e[a]).map((function(i,r){var s={yInc:16,label:{value:i,x:40,size:11,font:"TimesRomanBold"}};d.push(s),(0,l._2)(e[a][i]).map((function(l,r){var s=e[a][i][l];v=f(s,t,n,v,o,d)}))})),s+="Activos"!==a?v:0;var h=c.widthOfTextAtSize((null===(u=v)||void 0===u?void 0:u.toFixed(2))+"",11),p={yInc:16,line:{x:520,y:10,width:70,height:.5,borderColor:(0,i.rgb)(0,0,0)},label:{value:"Total "+a,x:30,size:11,font:"TimesRomanBold"},amount:{value:null===(m=v)||void 0===m?void 0:m.toFixed(2),x:580-h,size:11,font:"TimesRomanBold"}};d.push(p)}));var m=c.widthOfTextAtSize((null===(a=s)||void 0===a?void 0:a.toFixed(2))+"",11),v={yInc:16,line:{x:520,y:10,width:70,height:.5,borderColor:(0,i.rgb)(0,0,0)},label:{value:"Total ( Pasivos + Patrimonio )",x:30,size:11,font:"TimesRomanBold"},amount:{value:null===(r=s)||void 0===r?void 0:r.toFixed(2),x:580-m,size:11,font:"TimesRomanBold"}};return d.push(v),d}var f=function(e,t,n,o,a,i){var r,s,d=10,c=t[e.key],m=(0,l._2)(c)[0],v=null===c||void 0===c||null===(r=c[m])||void 0===r?void 0:r.saldo,f=null===(s=(0,l.bh)("account_ids"))||void 0===s?void 0:s[m];if("Resultado (ganancia o perdida)"===e.key&&a&&0!==a){var x=a;o+=x;var h=u.widthOfTextAtSize((null===x||void 0===x?void 0:x.toFixed(2))+"",d),p={yInc:13,label:{value:e.key,x:50,size:d,font:"timesRomanFont"},amount:{value:null===x||void 0===x?void 0:x.toFixed(2),x:580-h,size:d,font:"timesRomanFont"}};i.push(p)}else if(v&&0!==v&&(0,l._2)(c).length>0){var b,g=null===(b=c[n[e.key]])||void 0===b?void 0:b.sub;if(v="credit"===(null===f||void 0===f?void 0:f.type)?-1*v:v,g&&(0,l._2)(g).length>0){var y,F,z={yInc:13,label:{value:f.code+" - "+e.key,x:50,size:d,font:"timesRomanFont"}};i.push(z),(0,l._2)(g).map((function(e){var n,o=e,a=t&&(null===(n=(0,l.bh)("sub_account_ids"))||void 0===n?void 0:n[o]),r=g[e].saldo;if(0!==(r="credit"===(null===f||void 0===f?void 0:f.type)?-1*r:r)){var s,c,m=u.widthOfTextAtSize((null===(s=r)||void 0===s?void 0:s.toFixed(2))+"",d),v={yInc:13,label:{value:null===a||void 0===a?void 0:a.subAccountName,x:70,size:d,font:"timesRomanFont"},amount:{value:null===(c=r)||void 0===c?void 0:c.toFixed(2),x:520-m,size:d,font:"timesRomanFont"}};i.push(v)}})),o+=v;var R=u.widthOfTextAtSize((null===(y=v)||void 0===y?void 0:y.toFixed(2))+"",d),T={yInc:13,label:{value:"Total "+e.key,x:60,size:d,font:"TimesRomanBold"},amount:{value:null===(F=v)||void 0===F?void 0:F.toFixed(2),x:580-R,size:d,font:"TimesRomanBold"}};i.push(T)}else{var w=c[n[e.key]].saldo;if(0!==(w="credit"===(null===f||void 0===f?void 0:f.type)?-1*w:w)){"Depreciacion Activos fijos"===e.key&&(w*=-1),o+=w;var S=w;e.key;var B=u.widthOfTextAtSize((null===S||void 0===S?void 0:S.toFixed(2))+"",d),k={yInc:13,label:{value:f.code+" - "+e.key,x:50,size:d,font:"timesRomanFont"},amount:{value:null===S||void 0===S?void 0:S.toFixed(2),x:580-B,size:d,font:"timesRomanFont"}};i.push(k)}}}return o};function x(e,t){return h.apply(this,arguments)}function h(){return(h=(0,a.Z)((0,o.Z)().mark((function e(t,n){var a,l,r,s;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.addPage(),l=a.getSize(),r=l.height,d=r-30,60,s=Math.ceil(n.length/60),Array.from(Array(s).keys()).map((function(e){e>0&&(a=t.addPage(),d=r-30);var o=n.slice(60*e,60*(e+1));o&&o.map((function(e,t){d-=e.yInc,e.line&&a.drawRectangle({x:e.line.x,y:d+e.line.y,width:e.line.width,height:e.line.height,borderColor:(0,i.rgb)(0,0,0)}),e.label&&a.drawText(e.label.value,{x:e.label.x,y:d,size:e.label.size,font:"TimesRomanBold"===e.label.font?c:u,color:(0,i.rgb)(0,0,0)}),e.amount&&a.drawText(e.amount.value,{x:e.amount.x,y:d,size:e.amount.size,font:"TimesRomanBold"===e.amount.font?c:u,color:(0,i.rgb)(0,0,0)})}))}));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(e,t,n,o,a){return b.apply(this,arguments)}function b(){return(b=(0,a.Z)((0,o.Z)().mark((function e(t,n,a,d,f){var h,p,b,g,y,F,z,R,T,w;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.PDFDocument.create();case 2:return(h=e.sent).registerFontkit(r.Z),e.next=6,h.embedFont(i.StandardFonts.TimesRoman,{subset:!0});case 6:return u=e.sent,e.next=9,h.embedFont(i.StandardFonts.TimesRomanBold,{subset:!0});case 9:return c=e.sent,e.next=12,h.embedFont(i.StandardFonts.TimesRomanBold,{subset:!0});case 12:if(e.sent,!(0,l.bh)("modernFontReport")){e.next=35;break}return"https://qvamarkets.com/gql_api/getStatic?fileName=Roboto-Bold.ttf",e.next=17,fetch("https://qvamarkets.com/gql_api/getStatic?fileName=Roboto-Bold.ttf").then((function(e){return e.arrayBuffer()}));case 17:return p=e.sent,e.next=20,h.embedFont(p,{subset:!0});case 20:return c=e.sent,"https://qvamarkets.com/gql_api/getStatic?fileName=ggSans-Italic.ttf",e.next=24,fetch("https://qvamarkets.com/gql_api/getStatic?fileName=ggSans-Italic.ttf").then((function(e){return e.arrayBuffer()}));case 24:return b=e.sent,e.next=27,h.embedFont(b,{subset:!0});case 27:return u=e.sent,"https://qvamarkets.com/gql_api/getStatic?fileName=ggSans-Medium.ttf",e.next=31,fetch("https://qvamarkets.com/gql_api/getStatic?fileName=ggSans-Medium.ttf").then((function(e){return e.arrayBuffer()}));case 31:return g=e.sent,e.next=34,h.embedFont(g,{subset:!0});case 34:e.sent;case 35:return y=m(d,null===t||void 0===t?void 0:t.result,f),F=y.totalGP,z=y.listArr,R=v(n,null===t||void 0===t?void 0:t.general,a,F),x(h,z),x(h,R),e.next=41,h.save();case 41:T=e.sent,w=s(T),window.open(w);case 44:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var g=function(e){var t,n,o,a,l=[],r=10,s=0,d=0;e&&e.map((function(e,t){var n=(e.saldo,1*e.saldo);if(n){var o={};if(e.sub_cuenta){var a=u.widthOfTextAtSize((null===n||void 0===n?void 0:n.toFixed(2))+"",r);o={yInc:13,code:{value:e.sub_cuenta,x:45,size:r,font:"timesRomanFont"},name:{value:"- "+e.nombre_sub_cuenta,x:70,size:r,font:"timesRomanFont"},amount:{value:null===n||void 0===n?void 0:n.toFixed(2),x:460-a,size:r,font:"timesRomanFont"}}}else{var i=c.widthOfTextAtSize((null===n||void 0===n?void 0:n.toFixed(2))+"",r);"debit"===e.type?s+=n:d+=n,o={yInc:13,code:{value:e.cuenta,x:30,size:r,font:"TimesRomanBold"},name:{value:e.nombre,x:65,size:r,font:"TimesRomanBold"},amount:{value:null===n||void 0===n?void 0:n.toFixed(2),x:("debit"===e.type?520:580)-i,size:r,font:"TimesRomanBold"}}}l.push(o)}}));var m=c.widthOfTextAtSize((null===(t=s)||void 0===t?void 0:t.toFixed(2))+"",r),v=c.widthOfTextAtSize((null===(n=d)||void 0===n?void 0:n.toFixed(2))+"",r),f={yInc:21,line:{x:517-m,y:10,width:583-(517-m),height:.5,borderColor:(0,i.rgb)(0,0,0)},name:{value:null===(o=s)||void 0===o?void 0:o.toFixed(2),x:520-m,size:r,font:"TimesRomanBold"},amount:{value:null===(a=d)||void 0===a?void 0:a.toFixed(2),x:580-v,size:r,font:"TimesRomanBold"}};return l.push(f),l},y=function(){var e=(0,a.Z)((0,o.Z)().mark((function e(t){var n,a,m,v,f,x,h,p,b,y,F;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.PDFDocument.create();case 2:return(n=e.sent).registerFontkit(r.Z),e.next=6,n.embedFont(i.StandardFonts.TimesRoman);case 6:return u=e.sent,e.next=9,n.embedFont(i.StandardFonts.TimesRomanBold);case 9:return c=e.sent,e.next=12,n.embedFont(i.StandardFonts.TimesRomanBold);case 12:if(e.sent,!(0,l.bh)("modernFontReport")){e.next=35;break}return"https://qvamarkets.com/gql_api/getStatic?fileName=Roboto-Bold.ttf",e.next=17,fetch("https://qvamarkets.com/gql_api/getStatic?fileName=Roboto-Bold.ttf").then((function(e){return e.arrayBuffer()}));case 17:return a=e.sent,e.next=20,n.embedFont(a);case 20:return c=e.sent,"https://qvamarkets.com/gql_api/getStatic?fileName=ggSans-Italic.ttf",e.next=24,fetch("https://qvamarkets.com/gql_api/getStatic?fileName=ggSans-Italic.ttf").then((function(e){return e.arrayBuffer()}));case 24:return m=e.sent,e.next=27,n.embedFont(m);case 27:return u=e.sent,"https://qvamarkets.com/gql_api/getStatic?fileName=ggSans-Medium.ttf",e.next=31,fetch("https://qvamarkets.com/gql_api/getStatic?fileName=ggSans-Medium.ttf").then((function(e){return e.arrayBuffer()}));case 31:return v=e.sent,e.next=34,n.embedFont(v);case 34:e.sent;case 35:return f=n.addPage(),x=f.getSize(),x.width,h=x.height,d=h-40,55,f.drawText("Balance de Comprobacion",{x:110,y:d,size:16,font:c,color:(0,i.rgb)(0,0,0)}),f.drawText("Fecha: "+(0,l.Gv)(Date.now()),{x:500,y:d,size:11,font:u,color:(0,i.rgb)(0,0,0)}),d-=15,p=g(t),b=Math.ceil(p.length/55),Array.from(Array(b).keys()).map((function(e){e>0&&(f=n.addPage(),d=h-40);var t=p.slice(55*e,55*(e+1));t&&t.map((function(e,t){d-=e.yInc,e.line&&f.drawRectangle({x:e.line.x,y:d+e.line.y,width:e.line.width,height:e.line.height,borderColor:(0,i.rgb)(0,0,0)}),e.code&&f.drawText(e.code.value,{x:e.code.x,y:d,size:e.code.size,font:"TimesRomanBold"===e.code.font?c:u,color:(0,i.rgb)(0,0,0)}),e.name&&f.drawText(e.name.value,{x:e.name.x,y:d,size:e.name.size,font:"TimesRomanBold"===e.name.font?c:u,color:(0,i.rgb)(0,0,0)}),e.amount&&f.drawText(e.amount.value,{x:e.amount.x,y:d,size:e.amount.size,font:"TimesRomanBold"===e.amount.font?c:u,color:(0,i.rgb)(0,0,0)})}))})),e.next=47,n.save();case 47:y=e.sent,F=s(y),window.open(F);case 50:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},1636:function(){}}]);
//# sourceMappingURL=3753.3d58d77c.chunk.js.map