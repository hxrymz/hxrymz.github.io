"use strict";(self.webpackChunkhrmfinance=self.webpackChunkhrmfinance||[]).push([[3753],{810:function(n,t,e){var r=e(9439),o=e(2791),i=e(2350),a=e(2647),u=(e(1636),e(4050)),c=e(184),s=(0,a.kp)();t.Z=function(n){var t,e=n.handleClick,a=(0,o.useState)(!1),l=(0,r.Z)(a,2),v=l[0],f=l[1],b=(0,o.useState)(0),p=(0,r.Z)(b,2),x=(p[0],p[1]),h=(0,o.useState)(!1),w=(0,r.Z)(h,2),m=w[0],y=w[1],g=(0,o.useState)([]),_=(0,r.Z)(g,2),z=_[0],Z=_[1],T=(0,o.useRef)();(0,o.useEffect)((function(){v||(f(!0),(0,u.ZX)(I))}));var I=function(n){x((0,i.M5)())},O=function(n){e(n),T.current.clearTx()};return(0,c.jsx)("div",{children:(0,c.jsx)(s,{placeholder:"associar una cuenta",width:420,fetchData:function(n){Z((0,i.MA)((0,i.bh)("account_list"),n)),m&&y(!1)},loading:m,change:function(n){!m&&y(!0)},callempty:function(n){Z([]),m&&y(!1)},ref:T,children:(0,c.jsx)("div",{className:"",children:z&&(null===(t=(0,i._2)(z))||void 0===t?void 0:t.map((function(n){return(0,c.jsx)(d,{data:z[n],elmId:n,selectItem:O},n)})))})})})};var d=function(n){var t=n.data,e=n.selectItem;return(0,c.jsx)("div",{className:"item_acc",children:(0,c.jsx)("div",{className:"_dsplFlx account_item_box account_header",children:(0,c.jsxs)("div",{className:"_dsplFlx",onClick:function(){return e(null===t||void 0===t?void 0:t.accountId,null)},children:[(0,c.jsx)("div",{className:"code",children:null===t||void 0===t?void 0:t.code}),(0,c.jsx)("div",{className:"name",children:null===t||void 0===t?void 0:t.name})]})})})}},3266:function(n,t,e){e.d(t,{$:function(){return p}});var r=e(4165),o=e(5861),i=e(6963),a=e(2350);function u(n){var t=new Blob([n],{type:"application/pdf"});return(window.URL||window.webkitURL).createObjectURL(t)}var c=0,s=13,d=null,l=null;function v(n,t,e,r){var o,u,v=n.addPage(),f=v.getSize(),p=(f.width,f.height);c=p-30;var x=0;v.drawText("Balance de Resultado",{x:110,y:c,size:14,font:d,color:(0,i.rgb)(0,0,0)}),v.drawText("Fecha: "+(0,a.Gv)(Date.now()),{x:420,y:c,size:14,font:d,color:(0,i.rgb)(0,0,0)}),t&&(0,a._2)(t).map((function(n,o){var u,f;c-=20;var p=0;v.drawText(n+"",{x:50,y:c,size:13,font:l,color:(0,i.rgb)(0,0,0)}),Array.isArray(t[n])?t[n].map((function(n,t){c-=s,p=b(v,n,e,r,p,d)})):(0,a._2)(t[n]).map((function(o,u){c-=16,v.drawText(o+"",{x:60,y:c,size:11,font:l,color:(0,i.rgb)(0,0,0)}),(0,a._2)(t[n][o]).map((function(i,a){var u=t[n][o][i];c-=s,p=b(v,u,e,r,p,d)}))})),c-=s,v.drawRectangle({x:520,y:c+10,width:70,height:.5,borderColor:(0,i.rgb)(0,0,0)}),v.drawText("Total "+n,{x:50,y:c,size:11,font:l,color:(0,i.rgb)(0,0,0)});var h=l.widthOfTextAtSize((null===(u=p)||void 0===u?void 0:u.toFixed(2))+"",11);x+="Ingresos"===n?p:-1*p,v.drawText((null===(f=p)||void 0===f?void 0:f.toFixed(2))+"",{x:580-h,y:c,size:11,font:l,color:(0,i.rgb)(0,0,0)})})),c-=32,v.drawRectangle({x:520,y:c+10,width:70,height:.5,borderColor:(0,i.rgb)(0,0,0)}),v.drawText("Ganancia o perdida  (Ingresos - gastos)",{x:50,y:c,size:11,font:l,color:(0,i.rgb)(0,0,0)});var h=l.widthOfTextAtSize((null===(o=x)||void 0===o?void 0:o.toFixed(2))+"",11);return v.drawText((null===(u=x)||void 0===u?void 0:u.toFixed(2))+"",{x:580-h,y:c,size:11,font:l,color:(0,i.rgb)(0,0,0)}),x}function f(n,t,e,r,o){var u,v,f=n.addPage(),p=f.getSize(),x=(p.width,p.height),h=0;c=x-30,f.drawText("Balance de Situacion",{x:110,y:c,size:14,font:d,color:(0,i.rgb)(0,0,0)}),f.drawText("Fecha: "+(0,a.Gv)(Date.now()),{x:420,y:c,size:14,font:d,color:(0,i.rgb)(0,0,0)}),t&&(0,a._2)(t).map((function(n,u){var v,p;c-=20;var x=0;f.drawText(n+"",{x:50,y:c,size:13,font:l,color:(0,i.rgb)(0,0,0)}),Array.isArray(t[n])?t[n].map((function(n,t){c-=s,x=b(f,n,e,r,x,d,o)})):(0,a._2)(t[n]).map((function(u,v){c-=16,f.drawText(u+"",{x:60,y:c,size:11,font:l,color:(0,i.rgb)(0,0,0)}),(0,a._2)(t[n][u]).map((function(i,a){var l=t[n][u][i];c-=s,x=b(f,l,e,r,x,d,o)}))})),h+="Pasivos"===n?-1*x:x,c-=s,f.drawRectangle({x:520,y:c+10,width:70,height:.5,borderColor:(0,i.rgb)(0,0,0)}),f.drawText("Total "+n,{x:50,y:c,size:11,font:l,color:(0,i.rgb)(0,0,0)});var w=l.widthOfTextAtSize((null===(v=x)||void 0===v?void 0:v.toFixed(2))+"",11);f.drawText((null===(p=x)||void 0===p?void 0:p.toFixed(2))+"",{x:580-w,y:c,size:11,font:l,color:(0,i.rgb)(0,0,0)})})),c-=32,f.drawRectangle({x:520,y:c+10,width:70,height:.5,borderColor:(0,i.rgb)(0,0,0)}),f.drawText("TOTAL ACTIVO + PATRIMONIO - PASIVOS",{x:50,y:c,size:11,font:l,color:(0,i.rgb)(0,0,0)});var w=l.widthOfTextAtSize((null===(u=h)||void 0===u?void 0:u.toFixed(2))+"",11);f.drawText((null===(v=h)||void 0===v?void 0:v.toFixed(2))+"",{x:580-w,y:c,size:11,font:l,color:(0,i.rgb)(0,0,0)})}var b=function(n,t,e,r,o,u,v){var f=10;n.drawText(t.key+"",{x:70,y:c,size:f,font:d,color:(0,i.rgb)(0,0,0)});var b=e[t.key];if(1===(0,a._2)(b).length){var p,x,h=b[r[t.key]];o+=h=h<0?-1*h:h;var w=u.widthOfTextAtSize((null===(p=h)||void 0===p?void 0:p.toFixed(2))+"",f);n.drawText((null===(x=h)||void 0===x?void 0:x.toFixed(2))+"",{x:580-w,y:c,size:f,font:d,color:(0,i.rgb)(0,0,0)})}else if((0,a._2)(b).length>1){var m,y;(0,a._2)(b).map((function(t){var r=t.split("_")[1];if(r){var o,l,v;c-=s;var p=e&&(null===(o=(0,a.bh)("sub_account_ids"))||void 0===o?void 0:o[r]),x=b[t];x=x<0?-1*x:x,n.drawText((null===p||void 0===p?void 0:p.subAccountName)+"",{x:90,y:c,size:f,font:d,color:(0,i.rgb)(0,0,0)});var h=u.widthOfTextAtSize((null===(l=x)||void 0===l?void 0:l.toFixed(2))+"",f);n.drawText((null===(v=x)||void 0===v?void 0:v.toFixed(2))+"",{x:520-h,y:c,size:f,font:d,color:(0,i.rgb)(0,0,0)})}})),c-=s;var g=(0,a._2)(b)[0];n.drawText("Total "+t.key,{x:70,y:c,size:f,font:l,color:(0,i.rgb)(0,0,0)});var _=b[g];o+=_=_<0?-1*_:_;var z=u.widthOfTextAtSize((null===(m=_)||void 0===m?void 0:m.toFixed(2))+"",f);n.drawText((null===(y=_)||void 0===y?void 0:y.toFixed(2))+"",{x:580-z,y:c,size:f,font:d,color:(0,i.rgb)(0,0,0)})}else{var Z,T,I=0;"Resultado (ganancia o perdida)"===t.key&&v&&0!==v&&(o+=I=v);var O=u.widthOfTextAtSize((null===(Z=I)||void 0===Z?void 0:Z.toFixed(2))+"",f);n.drawText((null===(T=I)||void 0===T?void 0:T.toFixed(2))+"",{x:580-O,y:c,size:f,font:d,color:(0,i.rgb)(0,0,0)})}return o};function p(n,t,e,r,o){return x.apply(this,arguments)}function x(){return(x=(0,o.Z)((0,r.Z)().mark((function n(t,e,o,a,c){var s,b,p,x;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,i.PDFDocument.create();case 2:return s=n.sent,n.next=5,s.embedFont(i.StandardFonts.TimesRoman);case 5:return d=n.sent,n.next=8,s.embedFont(i.StandardFonts.TimesRomanBold);case 8:return l=n.sent,b=v(s,a,null===t||void 0===t?void 0:t.result,c),f(s,e,null===t||void 0===t?void 0:t.general,o,b),n.next=13,s.save();case 13:p=n.sent,x=u(p),window.open(x);case 16:case"end":return n.stop()}}),n)})))).apply(this,arguments)}},4050:function(n,t,e){e.d(t,{Ht:function(){return w},Je:function(){return x},Jy:function(){return d},Mp:function(){return m},T7:function(){return p},TP:function(){return h},Y1:function(){return b},ZX:function(){return c},_0:function(){return u},rs:function(){return l}});var r=e(4165),o=e(1413),i=e(5861),a=e(2350),u=function(){var n=(0,i.Z)((0,r.Z)().mark((function n(t){var e,i,u,c,s;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return(u=(0,o.Z)({},null===(e=(0,a.bh)((0,a.hQ)()))||void 0===e?void 0:e.all_accounts)).params={businessId:null===(i=(0,a.bh)("profileUser"))||void 0===i?void 0:i.businessId},c=(0,a.I7)(u),n.next=5,c;case 5:(s=n.sent)&&((0,a.Rz)("account_list",f(s,"code")),(0,a.Rz)("account_ids",(0,a.ME)(s,"accountId")),t&&t());case 7:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}(),c=function(){var n=(0,i.Z)((0,r.Z)().mark((function n(t){var e,i,c,d,l;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return(c=(0,o.Z)({},null===(e=(0,a.bh)((0,a.hQ)()))||void 0===e?void 0:e.all_sub_account)).params={businessId:null===(i=(0,a.bh)("profileUser"))||void 0===i?void 0:i.businessId},d=(0,a.I7)(c),n.next=5,d;case 5:(l=n.sent)&&((0,a.Rz)("sub_account_list",b(l,"subAccount")),(0,a.Rz)("sub_account_group",s(l,"accountId")),(0,a.Rz)("sub_account_ids",(0,a.ME)(l,"sub_accountId")),u(),t&&t());case 7:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}();function s(n,t){t=t||"id";var e={};return n.length>0?n.map((function(n){n.subAccount&&(e[n[t]]||(e[n[t]]=[]),e[n[t]].push(n))})):e=null,e}var d=function(){var n=(0,i.Z)((0,r.Z)().mark((function n(t){var e,i,u,c,s;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return(u=(0,o.Z)({},null===(e=(0,a.bh)((0,a.hQ)()))||void 0===e?void 0:e.search_account)).params={businessId:null===(i=(0,a.bh)("profileUser"))||void 0===i?void 0:i.businessId,":search":(0,a.bh)("searchQry")},c=(0,a.I7)(u),n.next=5,c;case 5:(s=n.sent)&&((0,a.Rz)("account_list",f((0,a.jQ)(s),"code")),t&&t());case 7:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}(),l=function(){var n=(0,i.Z)((0,r.Z)().mark((function n(t,e){var i,u,c,s,d;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return(c=(0,o.Z)({},null===(i=(0,a.bh)((0,a.hQ)()))||void 0===i?void 0:i.find_acc)).params={businessId:null===(u=(0,a.bh)("profileUser"))||void 0===u?void 0:u.businessId,":account":null===t||void 0===t?void 0:t.account},null!==t&&void 0!==t&&t.subAccount&&(c.params[":sub_account"]=null===t||void 0===t?void 0:t.subAccount,c.queryString+=" AND subAccount contain :sub_account"),s=(0,a.I7)(c),n.next=6,s;case 6:(d=n.sent)&&!d.error&&((0,a.Rz)("submayor_list",d),(0,a.Rz)("submayor_group",v(d))),e&&e();case 9:case"end":return n.stop()}}),n)})));return function(t,e){return n.apply(this,arguments)}}();function v(n,t){var e={operations:[]},r=n&&(0,a._2)(n);return r.length>0?r.map((function(t){var r=n[t];r.type&&e.operations.push(function(n){var t,e,r={};r.account=null===(t=(0,a.bh)("account_ids"))||void 0===t?void 0:t[n.account],r.sub_account=null===(e=(0,a.bh)("sub_account_ids"))||void 0===e?void 0:e[n.subAccount],r.comprobanteId=n.comprobanteId,r.document=n.document,r.date=n.date,"credit"===n.type?(r.debit=0,r.credit=n.amount):"debit"===n.type&&(r.credit=0,r.debit=n.amount);return r}(r))})):e=null,e}var f=function(n,t){return(0,a.MV)("sortAccounts",[n,t],(function(){return n&&n.sort((function(n,e){var r=1*n[t],o=1*e[t];return r<o?-1:r>o?1:0}))}))},b=function(n,t){return(0,a.MV)("sortSubAccounts",[n],(function(){return n&&n.sort((function(n,e){var r=1*n[t],o=1*e[t];return r<o?-1:r>o?1:0}))}))},p=function(n,t,e){return(0,a.MV)("calcSubmayor",[n,t,e],(function(){var t="date",e=n.sort((function(n,e){var r=n[t],o=e[t];return r<o?-1:r>o?1:0})),r=0;return e.map((function(n){return function(n){var t,e=(0,o.Z)({},n);return"credit"===(null===n||void 0===n||null===(t=n.account)||void 0===t?void 0:t.type)?e.saldo=r+1*e.credit-1*e.debit:e.saldo=r+1*e.debit-1*e.credit,r=e.saldo,e}(n)}))}))};function x(){return f((0,a.bh)("sub_account_list").map((function(n){var t,e=null===(t=(0,a.bh)("account_ids"))||void 0===t?void 0:t[n.accountId];return{cuenta:e.code+"",nombre:e.name,sub_cuenta:n.subAccount+"",nombre_sub_cuenta:n.subAccountName}})),"cuenta")}var h=function(){var n=(0,i.Z)((0,r.Z)().mark((function n(t){var e,i,u,c,s,d;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=(0,o.Z)({},null===(e=(0,a.bh)((0,a.hQ)()))||void 0===e?void 0:e.get_balance_general_param),u=(0,a.I7)(i),n.next=4,u;case 4:(c=n.sent)&&!c.error&&(s=null===c||void 0===c?void 0:c.general,d=null===c||void 0===c?void 0:c.result,(0,a.Rz)("balance_general_param",s),(0,a.Rz)("result_sheet_params",d)),t&&t();case 7:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}(),w=function(){var n=(0,i.Z)((0,r.Z)().mark((function n(t,e,i){var u,c,s,d,l,v,f;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return(s=(0,o.Z)({},null===(u=(0,a.bh)((0,a.hQ)()))||void 0===u?void 0:u.find_balances)).params={businessId:null===(c=(0,a.bh)("profileUser"))||void 0===c?void 0:c.businessId,":type":t},d=(0,a.I7)(s),n.next=5,d;case 5:(l=n.sent)&&!l.error&&(v=(0,a._2)(l)[0],f=l[v],(0,a.Rz)(e,f),(0,a.Rz)(e+"_bck",(0,o.Z)({},f))),i&&i();case 8:case"end":return n.stop()}}),n)})));return function(t,e,r){return n.apply(this,arguments)}}(),m=function(){var n=(0,i.Z)((0,r.Z)().mark((function n(t,e,i){var u,c,s,d,l;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return(s=(0,o.Z)({},null===(u=(0,a.bh)((0,a.hQ)()))||void 0===u?void 0:u.calc_balance_general)).params={businessId:null===(c=(0,a.bh)("profileUser"))||void 0===c?void 0:c.businessId,balanceId:t,resultId:e},d=(0,a.I7)(s),n.next=5,d;case 5:(l=n.sent)&&!l.error?i&&i(l):i&&i();case 7:case"end":return n.stop()}}),n)})));return function(t,e,r){return n.apply(this,arguments)}}()},1636:function(){},4942:function(n,t,e){e.d(t,{Z:function(){return o}});var r=e(9142);function o(n,t,e){return(t=(0,r.Z)(t))in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}},1413:function(n,t,e){e.d(t,{Z:function(){return i}});var r=e(4942);function o(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),e.push.apply(e,r)}return e}function i(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?o(Object(e),!0).forEach((function(t){(0,r.Z)(n,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):o(Object(e)).forEach((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))}))}return n}}}]);
//# sourceMappingURL=3753.d932c7c4.chunk.js.map