/*! For license information please see 3866.f3d839a8.chunk.js.LICENSE.txt */
(self.webpackChunkhrmfinance=self.webpackChunkhrmfinance||[]).push([[3866],{1694:function(t,e){var i;!function(){"use strict";var r={}.hasOwnProperty;function n(){for(var t=[],e=0;e<arguments.length;e++){var i=arguments[e];if(i){var o=typeof i;if("string"===o||"number"===o)t.push(i);else if(Array.isArray(i)){if(i.length){var a=n.apply(null,i);a&&t.push(a)}}else if("object"===o){if(i.toString!==Object.prototype.toString&&!i.toString.toString().includes("[native code]")){t.push(i.toString());continue}for(var s in i)r.call(i,s)&&i[s]&&t.push(s)}}}return t.join(" ")}t.exports?(n.default=n,t.exports=n):void 0===(i=function(){return n}.apply(e,[]))||(t.exports=i)}()},9138:function(t,e,i){"use strict";i.d(e,{fle:function(){return ai}});var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},r(t,e)};function n(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var o=function(){return o=Object.assign||function(t){for(var e,i=1,r=arguments.length;i<r;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},o.apply(this,arguments)};function a(t,e){var i={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(i[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(t);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(t,r[n])&&(i[r[n]]=t[r[n]])}return i}function s(t,e,i,r){return new(i||(i=Promise))((function(n,o){function a(t){try{c(r.next(t))}catch(e){o(e)}}function s(t){try{c(r.throw(t))}catch(e){o(e)}}function c(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(a,s)}c((r=r.apply(t,e||[])).next())}))}function c(t,e){var i,r,n,o,a={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(c){return function(s){if(i)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(i=1,r&&(n=2&s[0]?r.return:s[0]?r.throw||((n=r.return)&&n.call(r),0):r.next)&&!(n=n.call(r,s[1])).done)return n;switch(r=0,n&&(s=[2&s[0],n.value]),s[0]){case 0:case 1:n=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(n=(n=a.trys).length>0&&n[n.length-1])&&(6===s[0]||2===s[0])){a=0;continue}if(3===s[0]&&(!n||s[1]>n[0]&&s[1]<n[3])){a.label=s[1];break}if(6===s[0]&&a.label<n[1]){a.label=n[1],n=s;break}if(n&&a.label<n[2]){a.label=n[2],a.ops.push(s);break}n[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(c){s=[6,c],r=0}finally{i=n=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}}Object.create;function l(t,e){var i="function"===typeof Symbol&&t[Symbol.iterator];if(!i)return t;var r,n,o=i.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(s){n={error:s}}finally{try{r&&!r.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}return a}function h(t,e,i){if(i||2===arguments.length)for(var r,n=0,o=e.length;n<o;n++)!r&&n in e||(r||(r=Array.prototype.slice.call(e,0,n)),r[n]=e[n]);return t.concat(r||Array.prototype.slice.call(e))}Object.create;var u=i(2791),d=i(1694),f=i.n(d);function v(t,e){var i,r;return t&&e?(i=""+t+e[0].toUpperCase()+e.slice(1),r=t+"-"+e):(i=t||e,r=t||e),{camelCase:i,snakeCase:r}}function m(t){return/^blob:/.test(t)}function p(t){return m(t)||function(t){return/^data:/.test(t)}(t)}function g(t){if(p(t))return!1;var e=window.location,i=/(\w+:)?(?:\/\/)([\w.-]+)?(?::(\d+))?\/?/.exec(t)||[],r={protocol:i[1]||"",host:i[2]||"",port:i[3]||""},n=function(t){return t.port||("http"===(t.protocol||e.protocol)?80:433)};return!(!r.protocol&&!r.host&&!r.port||Boolean(r.protocol&&r.protocol==e.protocol&&r.host&&r.host==e.host&&r.host&&n(r)==n(e)))}function w(t){return"function"===typeof t}function b(t){return void 0===t}var A=function(t){return null!==t&&"object"===typeof t};function y(t,e,i){void 0===i&&(i={});var r={};return A(t)?(Object.keys(e).forEach((function(n){b(t[n])?r[n]=e[n]:A(e[n])?A(t[n])?r[n]=y(t[n],e[n],i[n]):r[n]=t[n]?e[n]:i[n]:!0===e[n]||!1===e[n]?r[n]=Boolean(t[n]):r[n]=t[n]})),r):t?e:i}function E(t){var e=Number(t);return Number.isNaN(e)?t:e}function x(t){return!0===t||!1===t}function C(t){return"number"===typeof t}function M(t){return t!==t}function S(t){return C(t)&&!M(t)||function(t){return"string"===typeof t}(t)&&!Number.isNaN(parseFloat(t))&&isFinite(parseFloat(t))}function R(t,e){return Math.sqrt(Math.pow(t.left-e.left,2)+Math.pow(t.top-e.top,2))}function z(t,e,i){return void 0===i&&(i=.001),Math.abs(e-t)<i}function P(t,e,i){return!z(t,e,i)&&t>e}function I(t,e,i){return!z(t,e,i)&&t<e}function N(t){return new Promise((function(e){setTimeout((function(){e()}),t)}))}function H(t){if(!A(t))return t;var e={};return Array.isArray(t)?e=t.map((function(t){return H(t)})):Object.keys(t).forEach((function(i){return e[i]=H(t[i])})),e}function U(t,e,i){if(void 0===i&&(i=.001),C(t)&&C(e)&&z(t,e,i))return!0;if(t===e)return!0;if(t&&e&&"object"==typeof t&&"object"==typeof e){if(t.constructor!==e.constructor)return!1;var r,n=void 0;if(Array.isArray(t)){if((r=t.length)!=e.length)return!1;for(n=r;0!==n--;)if(!U(t[n],e[n],i))return!1;return!0}if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===e.toString();var o=Object.keys(t);if((r=o.length)!==Object.keys(e).length)return!1;for(n=r;0!==n--;)if(!Object.prototype.hasOwnProperty.call(e,o[n]))return!1;for(n=r;0!==n--;){var a=o[n];if(!U(t[a],e[a],i))return!1}return!0}return t!==t&&e!==e}function _(t){return"west"===t||"south"===t||"north"===t||"east"===t}function B(t,e){var i,r;function n(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];var s=Date.now()-i,c=w(e)?e():e||0;s<c&&s>=0?r=setTimeout((function(){return n.apply(void 0,o)}),c-s):t.apply(void 0,o)}function o(){for(var t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];i=Date.now(),r=setTimeout((function(){return n.apply(void 0,t)}),w(e)?e():e||0)}return o.clear=function(){clearTimeout(r)},o}var F,W,T,O=["left","right","top","bottom"],L=["left","right"],D=["top","bottom"];function Q(t,e){return{left:t.left-e.left,top:t.top-e.top}}function k(t){return{left:t.left+t.width/2,top:t.top+t.height/2}}function j(t,e){return Math.pow(t.width-e.width,2)+Math.pow(t.height-e.height,2)}function X(t,e){return{left:t.left-e.left,top:t.top-e.top,width:t.width+e.left+e.right,height:t.height+e.top+e.bottom}}function Y(t){return{left:-t.left,top:-t.top}}function Z(t,e){return o(o({},t),{left:t.left+e.left,top:t.top+e.top})}function V(t){return{left:t.left,top:t.top,right:t.left+t.width,bottom:t.top+t.height}}function q(t,e,i,r){if(1!==e){if("left"in t||"top"in t){if(i){var n=k(t);return{width:t.width*e,height:t.height*e,left:t.left+t.width*(1-e)/2+(i.left-n.left)*(r||1-e),top:t.top+t.height*(1-e)/2+(i.top-n.top)*(r||1-e)}}return{width:t.width*e,height:t.height*e,left:t.left+t.width*(1-e)/2,top:t.top+t.height*(1-e)/2}}return{width:t.width*e,height:t.height*e}}return t}function G(t){return t.width/t.height}function K(t,e){return Math.min(e.maxWidth?e.maxWidth/t.width:1/0,e.maxHeight?e.maxHeight/t.height:1/0)}function $(t,e){var i;return e.minimum&&I(t,e.minimum)?i=e.minimum:e.maximum&&P(t,e.maximum)&&(i=e.maximum),i}function J(t,e){var i=G(t),r=1;return e.minWidth>0&&e.minHeight>0?i>e.minWidth/e.minHeight?t.height<e.minHeight&&(r=e.minHeight/t.height):t.width<e.minWidth&&(r=e.minWidth/t.width):e.minWidth>0?t.width<e.minWidth&&(r=e.minWidth/t.width):e.minHeight>0&&t.height<e.minHeight&&(r=e.minHeight/t.height),e.maxWidth<1/0&&e.maxHeight<1/0?i>e.maxWidth/e.maxHeight?t.width>e.maxWidth&&(r=e.maxWidth/t.width):t.height>e.maxHeight&&(r=e.maxHeight/t.height):e.maxWidth<1/0?t.width>e.maxWidth&&(r=e.maxWidth/t.width):e.maxHeight<1/0&&t.height>e.maxHeight&&(r=e.maxHeight/t.height),r}function tt(t,e){var i={left:0,top:0,right:0,bottom:0};return O.forEach((function(r){var n=e[r],o=V(t)[r];i[r]=void 0!==n&&void 0!==o?"left"===r||"top"===r?Math.max(0,n-o):Math.max(0,o-n):0})),i}function et(t,e){return q(t,J(t,e))}function it(t,e){var i=e*Math.PI/180;return{width:Math.abs(t.width*Math.cos(i))+Math.abs(t.height*Math.sin(i)),height:Math.abs(t.width*Math.sin(i))+Math.abs(t.height*Math.cos(i))}}function rt(t,e,i){var r=e*Math.PI/180;return i?{left:(t.left-i.left)*Math.cos(r)-(t.top-i.top)*Math.sin(r)+i.left,top:(t.left-i.left)*Math.sin(r)+(t.top-i.top)*Math.cos(r)+i.top}:{left:t.left*Math.cos(r)-t.top*Math.sin(r),top:t.left*Math.sin(r)+t.top*Math.cos(r)}}function nt(t){return{minWidth:0,minHeight:0,maxWidth:void 0!==t.right&&void 0!==t.left?t.right-t.left:1/0,maxHeight:void 0!==t.bottom&&void 0!==t.top?t.bottom-t.top:1/0}}function ot(t,e){var i={};return O.forEach((function(r){var n=t[r],o=e[r];void 0!==n&&void 0!==o?i[r]="left"===r||"top"===r?Math.max(n,o):Math.min(n,o):void 0!==o?i[r]=o:void 0!==n&&(i[r]=n)})),i}function at(t,e){var i={left:0,top:0},r=tt(t,e);return r.left&&r.left>0?i.left=r.left:r.right&&r.right>0&&(i.left=-r.right),r.top&&r.top>0?i.top=r.top:r.bottom&&r.bottom>0&&(i.top=-r.bottom),i}function st(t,e){return Z(t,at(t,e))}function ct(t){return void 0===t&&(t={}),C(t)?{minimum:t,maximum:t}:{minimum:S(t.minimum)?t.minimum:0,maximum:S(t.maximum)?t.maximum:1/0}}function lt(t,e){return(b(e.maxWidth)||!P(t.width,e.maxWidth))&&(b(e.maxHeight)||!P(t.height,e.maxHeight))&&(b(e.minHeight)||!I(t.height,e.minHeight))&&(b(e.minWidth)||!I(t.width,e.minWidth))}function ht(t,e){return(b(e.left)||!I(t.left,e.left))&&(b(e.top)||!I(t.top,e.top))&&(b(e.right)||!P(t.left+t.width,e.right))&&(b(e.bottom)||!P(t.top+t.height,e.bottom))}function ut(t){return Boolean(t&&t.visibleArea&&t.coordinates)}function dt(t,e){return function(t,e){var i=w(e.areaSizeRestrictions)?e.areaSizeRestrictions(t,e):e.areaSizeRestrictions;i.maxWidth<1/0&&i.maxHeight<1/0&&(G(t.boundary)>i.maxWidth/i.maxHeight?i.maxHeight=i.maxWidth/G(t.boundary):i.maxWidth=i.maxHeight*G(t.boundary));return xt(i)}(t,e)}function ft(t,e){return w(e.areaPositionRestrictions)?e.areaPositionRestrictions(t,e):e.areaPositionRestrictions}function vt(t,e){return function(t,e){var i=w(e.sizeRestrictions)?e.sizeRestrictions(t,e):e.sizeRestrictions,r=mt(t,e),n={minWidth:S(i.minWidth)?E(i.minWidth):0,minHeight:S(i.minHeight)?E(i.minHeight):0,maxWidth:S(i.maxWidth)?E(i.maxWidth):1/0,maxHeight:S(i.maxHeight)?E(i.maxHeight):1/0};void 0!==r.left&&void 0!==r.right&&(n.maxWidth=Math.min(n.maxWidth,r.right-r.left));void 0!==r.bottom&&void 0!==r.top&&(n.maxHeight=Math.min(n.maxHeight,r.bottom-r.top));return xt(n)}(t,e)}function mt(t,e){return w(e.positionRestrictions)?e.positionRestrictions(t,e):e.positionRestrictions}function pt(t){return t.visibleArea?t.visibleArea.width/t.boundary.width:0}function gt(t){if(ut(t)){var e=t.coordinates,i=e.width,r=e.height,n=e.left,o=e.top,a=pt(t);return{width:i/a,height:r/a,left:(n-t.visibleArea.left)/a,top:(o-t.visibleArea.top)/a}}return{left:0,top:0,width:0,height:0}}function wt(t,e){return ct(w(e.aspectRatio)?e.aspectRatio(t,e):e.aspectRatio)}function bt(t,e){return w(e.defaultCoordinates)?e.defaultCoordinates(t,e):e.defaultCoordinates}function At(t,e){return w(e.defaultVisibleArea)?e.defaultVisibleArea(t,e):e.defaultVisibleArea}function yt(t){return t.imageSize&&t.imageSize.width&&t.imageSize.height?it(t.imageSize,t.transforms.rotate):{width:0,height:0}}function Et(t,e){return!ut(t)||!$(G(t.coordinates),wt(t,e))&&lt(t.visibleArea,dt(t,e))&&lt(t.coordinates,vt(t,e))&&ht(t.visibleArea,ft(t,e))&&ht(t.coordinates,mt(t,e))}function xt(t){var e=o({},t);return e.minWidth>e.maxWidth&&(e.minWidth=e.maxWidth),e.minHeight>e.maxHeight&&(e.minHeight=e.maxHeight),e}function Ct(t,e){var i=t,r=o({minWidth:0,minHeight:0,maxWidth:1/0,maxHeight:1/0},e);return xt({maxHeight:Math.min(i.maxHeight,r.maxHeight),minHeight:Math.max(i.minHeight,r.minHeight),maxWidth:Math.min(i.maxWidth,r.maxWidth),minWidth:Math.max(i.minWidth,r.minWidth)})}function Mt(t){return H(t)}function St(t){var e=t.width,i=t.height,r=t.sizeRestrictions||{minWidth:0,minHeight:0,maxWidth:1/0,maxHeight:1/0},n=ct(t.aspectRatio),o={width:Math.max(r.minWidth,Math.min(r.maxWidth,e)),height:Math.max(r.minHeight,Math.min(r.maxHeight,i))},a=[o];return n&&[n.minimum,n.maximum].forEach((function(t){t&&a.push({width:o.width,height:o.width/t},{width:o.height*t,height:o.height})})),function(t,e,i,r){var n=function(n){return t.reduce((function(t,o){var a=w(i)?i(o):i,s=a.maxHeight,c=a.maxWidth,l=a.minWidth,h=a.minHeight,u=ct(w(r)?r(o):r);return lt(o,n?{maxWidth:c,maxHeight:s}:{maxWidth:c,maxHeight:s,minWidth:l,minHeight:h})&&!$(G(o),u)&&o.width&&o.height&&(!t||I(j(o,e),j(t,e)))?o:t}),null)};return n()||n(!0)}(a=a.map((function(t){return et(t,r)})),{width:e,height:i},r,n)}function Rt(t,e){var i=Mt(t);if(t.visibleArea){var r=dt(t,e);i.visibleArea=o(o({},t.visibleArea),St({width:t.visibleArea.width,height:t.visibleArea.height,aspectRatio:{minimum:G(i.boundary),maximum:G(i.boundary)},sizeRestrictions:r})),i.visibleArea=Z(i.visibleArea,Q(k(t.visibleArea),k(i.visibleArea))),i.visibleArea=st(i.visibleArea,ft(i,e))}return i}function zt(t,e,i){var r=Z(t,e);return i?st(r,i):r}function Pt(t,e,i,r){void 0===r&&(r=!0);var n=!1===r?T.unsafe:!0===r?T.zoom:r,a=wt(t,e),s=vt(t,e);t.visibleArea&&n===T.limit&&(s=o(o({},s),{minWidth:Math.min(t.visibleArea.width,s.minWidth),minHeight:Math.min(t.visibleArea.height,s.minHeight),maxWidth:Math.min(t.visibleArea.width,s.maxWidth),maxHeight:Math.min(t.visibleArea.height,s.maxHeight)}));var c=mt(t,e);t.visibleArea&&n===T.limit&&(c=ot(c,V(t.visibleArea)));var l=function(t,e){return zt(t,{left:e.left-(t.left||0),top:e.top-(t.top||0)},c)},h=t.coordinates?o({},t.coordinates):{left:0,top:0,width:0,height:0};(Array.isArray(i)?i:[i]).forEach((function(i){var r;(r="function"===typeof i?i(o(o({},t),{coordinates:h}),e):i)&&(b(r.width)&&b(r.height)||(h=function(t,e){var i=o(o(o({},t),St({width:e.width,height:e.height,sizeRestrictions:s,aspectRatio:a})),{left:0,top:0});return l(i,{left:t.left||0,top:t.top||0})}(h,o(o({},h),r))),b(r.left)&&b(r.top)||(h=l(h,o(o({},h),r))))}));var u=o(o({},Mt(t)),{coordinates:h});if(u.visibleArea&&n===T.zoom){var d=Math.max(0,u.coordinates.width-u.visibleArea.width),f=Math.max(0,u.coordinates.height-u.visibleArea.height),v=dt(t,e),m=d>f?u.coordinates.width/u.visibleArea.width:u.coordinates.height/u.visibleArea.height;return m>1&&(u.visibleArea=q(u.visibleArea,Math.min(m,K(u.visibleArea,v)))),u.visibleArea=Z(u.visibleArea,Y(at(u.coordinates,V(u.visibleArea)))),Rt(u,e)}return u}function It(t,e){if(t.coordinates){var i=Mt(t),r=wt(t,e),n=vt(t,e);return i.coordinates=o(o({},t.coordinates),St({width:t.coordinates.width,height:t.coordinates.height,aspectRatio:r,sizeRestrictions:t.visibleArea?{maxWidth:Math.min(t.visibleArea.width,n.maxWidth),maxHeight:Math.min(t.visibleArea.height,n.maxHeight),minHeight:Math.min(t.visibleArea.height,n.minHeight),minWidth:Math.min(t.visibleArea.width,n.minWidth)}:n})),i.coordinates=Z(i.coordinates,Q(k(t.coordinates),k(i.coordinates))),i.coordinates=st(i.coordinates,t.visibleArea?ot(V(t.visibleArea),mt(i,e)):mt(i,e)),i}return t}function Nt(t,e,i,r){void 0===r&&(r=!0);var n=o(o({},Mt(t)),{visibleArea:i});return n=Rt(n,e),r&&(n=It(n,e)),n}function Ht(t,e){var i,r,n,a,s,c=t.boundary,l=t.image,h={boundary:{width:c.width,height:c.height},imageSize:{width:l.width,height:l.height},transforms:{rotate:(null===(i=l.transforms)||void 0===i?void 0:i.rotate)||0,flip:{horizontal:(null===(n=null===(r=l.transforms)||void 0===r?void 0:r.flip)||void 0===n?void 0:n.horizontal)||!1,vertical:(null===(s=null===(a=l.transforms)||void 0===a?void 0:a.flip)||void 0===s?void 0:s.vertical)||!1}},visibleArea:null,coordinates:null};return e.defaultTransforms&&(h.transforms=function(t,e){var i=o(o({},t.transforms),{flip:o({},t.transforms.flip)});if(e.defaultTransforms){var r=w(e.defaultTransforms)?e.defaultTransforms(t,e):e.defaultTransforms;C(r.rotate)&&(i.rotate=r.rotate),r.flip&&(x(r.flip.horizontal)&&(i.flip.horizontal=r.flip.horizontal),x(r.flip.vertical)&&(i.flip.vertical=r.flip.vertical))}return i}(h,e)),h=e.priority===W.visibleArea?Pt(h=Nt(h,e,At(h,e),!1),e,bt(h,e),T.limit):Nt(h=Pt(h,e,bt(h,e),T.unsafe),e,At(h,e),!0)}function Ut(t,e,i){if(ut(t)){var r=Mt(t);return r.coordinates=Z(r.coordinates,i),r.coordinates=st(r.coordinates,ot(V(r.visibleArea),mt(r,e))),r}return t}function _t(t){var e=t.coordinates,i=t.directions,r=t.positionRestrictions,n=t.sizeRestrictions,a=t.preserveRatio,s=t.allowedDirections,c=t.compensate,l=void 0===c||c,h=o({},i),u=X(e,h).width,d=X(e,h).height;u<0&&(h.left<0&&h.right<0?(h.left=-(e.width-n.minWidth)/(h.left/h.right),h.right=-(e.width-n.minWidth)/(h.right/h.left)):h.left<0?h.left=-(e.width-n.minWidth):h.right<0&&(h.right=-(e.width-n.minWidth))),d<0&&(h.top<0&&h.bottom<0?(h.top=-(e.height-n.minHeight)/(h.top/h.bottom),h.bottom=-(e.height-n.minHeight)/(h.bottom/h.top)):h.top<0?h.top=-(e.height-n.minHeight):h.bottom<0&&(h.bottom=-(e.height-n.minHeight)));var f=tt(X(e,h),r),v=O.every((function(t){return!P(f[(e=t,{left:"right",top:"bottom",right:"left",bottom:"top"}[e])],0)||s[t];var e}));l&&v&&(f.left&&f.left>0&&0===f.right?(h.right+=f.left,h.left-=f.left):f.right&&f.right>0&&0===f.left&&(h.left+=f.right,h.right-=f.right),f.top&&f.top>0&&0===f.bottom?(h.bottom+=f.top,h.top-=f.top):f.bottom&&f.bottom>0&&0===f.top&&(h.top+=f.bottom,h.bottom-=f.bottom),f=tt(X(e,h),r));var m={width:1/0,height:1/0,left:1/0,right:1/0,top:1/0,bottom:1/0};if(O.forEach((function(t){var e=f[t];e&&h[t]&&(m[t]=Math.max(0,1-e/h[t]))})),a){var p=Math.min.apply(Math,O.map((function(t){return m[t]})));p!==1/0&&O.forEach((function(t){h[t]*=p}))}else O.forEach((function(t){m[t]!==1/0&&(h[t]*=m[t])}));if(u=X(e,h).width,d=X(e,h).height,h.right+h.left&&(u>n.maxWidth?m.width=(n.maxWidth-e.width)/(h.right+h.left):u<n.minWidth&&(m.width=(n.minWidth-e.width)/(h.right+h.left))),h.bottom+h.top&&(d>n.maxHeight?m.height=(n.maxHeight-e.height)/(h.bottom+h.top):d<n.minHeight&&(m.height=(n.minHeight-e.height)/(h.bottom+h.top))),a){var g=Math.min(m.width,m.height);g!==1/0&&O.forEach((function(t){h[t]*=g}))}else m.width!==1/0&&L.forEach((function(t){h[t]*=m.width})),m.height!==1/0&&D.forEach((function(t){h[t]*=m.height}));return h}function Bt(t,e,i){return z(e+i,0)?t/2:z(e,0)?0:z(i,0)?t:t*Math.abs(e/(e+i))}function Ft(t,e){var i=e.toLowerCase();return{left:t.left+t.width*(-1!==i.indexOf("west")?1:-1!==i.indexOf("east")?0:.5),top:t.top+t.height*(-1!==i.indexOf("north")?1:-1!==i.indexOf("south")?0:.5)}}function Wt(t){var e=t.toLowerCase();return{left:-1===e.indexOf("east"),top:-1===e.indexOf("south"),right:-1===e.indexOf("west"),bottom:-1===e.indexOf("north")}}function Tt(t,e,i,r,n){var a=r.reference,s=function(t,e){var i=t.toLowerCase(),r={left:-1===i.indexOf("west")?e.left:-e.left,top:-e.top,right:e.left,bottom:e.top};["north","south","center"].every((function(t){return-1===i.indexOf(t)}))&&(r.top=0,r.bottom=0),["west","east","center"].every((function(t){return-1===i.indexOf(t)}))&&(r.left=0,r.right=0);var n=Wt(t);return O.forEach((function(t){n[t]||(r[t]=0)})),r}(e,i),c=Wt(e),l=function(t,e,i,r){var n=r.aspectRatio,a=r.positionRestrictions,s=r.sizeRestrictions,c=o({},t);e=o({},e);var l=i.allowedDirections||{left:!0,right:!0,bottom:!0,top:!0};t.width<s.minWidth&&(e.left=0,e.right=0),t.height<s.minHeight&&(e.top=0,e.bottom=0),O.forEach((function(t){l[t]||(e[t]=0)}));var h=X(c,e=_t({coordinates:c,directions:e,sizeRestrictions:s,positionRestrictions:a,allowedDirections:l})).width,u=X(c,e).height,d=i.preserveAspectRatio?G(c):$(h/u,n);if(d){var f=i.respectDirection;if("width"!==f&&"height"!==f&&(f=c.width>=c.height||1===d?"width":"height"),"width"===f){var v=h/d-c.height;if(l.top&&l.bottom){var m=e.top,p=e.bottom;e.bottom=Bt(v,p,m),e.top=Bt(v,m,p)}else l.bottom?e.bottom=v:l.top?e.top=v:l.right?e.right=0:l.left&&(e.left=0)}else if("height"===f){var g=c.width-u*d;if(l.left&&l.right){var w=e.left,b=e.right;e.left=-Bt(g,w,b),e.right=-Bt(g,b,w)}else l.left?e.left=-g:l.right?e.right=-g:l.top?e.top=0:l.bottom&&(e.bottom=0)}e=_t({directions:e,coordinates:c,sizeRestrictions:s,positionRestrictions:a,preserveRatio:!0,compensate:i.compensate,allowedDirections:l})}return h=X(c,e).width,u=X(c,e).height,(d=i.preserveAspectRatio?G(c):$(h/u,n))&&P(Math.abs(d-h/u),0)&&O.forEach((function(t){e[t]=0})),zt({width:t.width+e.right+e.left,height:t.height+e.top+e.bottom,left:t.left,top:t.top},{left:-e.left,top:-e.top},a)}(t,s,o(o({},r),{allowedDirections:c}),n);return a&&(l=Z(l,Q(Ft(a,e),Ft(l,e)))),st(l,n.positionRestrictions)}function Ot(t,e,i,r,n){var a=function(t){return t.coordinates?Math.min(t.coordinates.width,t.coordinates.height,20*pt(t)):1}(t),s=vt(t,e);return ut(t)?o(o({},Mt(t)),{coordinates:Tt(t.coordinates,i,r,n,{positionRestrictions:ot(mt(t,e),V(t.visibleArea)),sizeRestrictions:{maxWidth:Math.min(s.maxWidth,t.visibleArea.width),maxHeight:Math.min(s.maxHeight,t.visibleArea.height),minWidth:Math.max(Math.min(s.minWidth,t.visibleArea.width),a),minHeight:Math.max(Math.min(s.minHeight,t.visibleArea.height),a)},aspectRatio:wt(t,e)})}):t}function Lt(t,e,i){var r=o(o({},Mt(t)),{boundary:i});if(r.visibleArea&&r.coordinates&&t.visibleArea){r.visibleArea.height=r.visibleArea.width/G(i),r.visibleArea.top+=(t.visibleArea.height-r.visibleArea.height)/2;var n=vt(r,e);(Math.max(n.minHeight,r.coordinates.height)-r.visibleArea.height>0||Math.max(n.minWidth,r.coordinates.width)-r.visibleArea.width>0)&&(r.visibleArea=q(r.visibleArea,Math.max(Math.max(n.minHeight,r.coordinates.height)/r.visibleArea.height,Math.max(n.minWidth,r.coordinates.width)/r.visibleArea.width))),r.visibleArea=et(r.visibleArea,dt(r,e));var a=Y(at(r.coordinates,V(r.visibleArea)));r.visibleArea.width<r.coordinates.width&&(a.left=0),r.visibleArea.height<r.coordinates.height&&(a.top=0),r.visibleArea=Z(r.visibleArea,a),r.visibleArea=st(r.visibleArea,ft(r,e)),r=It(r,e)}return r}function Dt(t,e,i){return i.rotate&&(t=function(t,e,i){if(ut(t)){var r=Mt(t),n=C(i)?i:i.angle,a=rt(k(o({left:0,top:0},yt(t))),n);r.transforms.rotate+=n,r.coordinates=o(o({},St({sizeRestrictions:vt(r,e),aspectRatio:wt(r,e),width:r.coordinates.width,height:r.coordinates.height})),rt(k(r.coordinates),n));var s=!C(i)&&i.center?i.center:k(t.coordinates),c=Q(k(t.coordinates),rt(k(t.coordinates),n,s)),l=yt(r);return r.coordinates.left-=a.left-l.width/2+r.coordinates.width/2-c.left,r.coordinates.top-=a.top-l.height/2+r.coordinates.height/2-c.top,r.visibleArea=et(r.visibleArea,Ct(dt(r,e),{minWidth:r.coordinates.width,minHeight:r.coordinates.height})),r.coordinates=st(r.coordinates,mt(r,e)),r.visibleArea=Z(r.visibleArea,Q(k(r.coordinates),k(t.coordinates))),r.visibleArea=st(r.visibleArea,ft(r,e)),r}return t}(t,e,i.rotate)),i.flip&&(t=function(t,e,i,r){if(ut(t)){var n=Mt(t),o=t.transforms.rotate,a=yt(t),s={horizontal:i,vertical:r};if(s.horizontal||s.vertical){var c=rt({left:a.width/2,top:a.height/2},-o),l=rt(k(n.coordinates),-o),h=rt({left:s.horizontal?c.left-(l.left-c.left):l.left,top:s.vertical?c.top-(l.top-c.top):l.top},o);n.coordinates=Z(n.coordinates,Q(h,k(n.coordinates))),l=rt(k(n.visibleArea),-o),h=rt({left:s.horizontal?c.left-(l.left-c.left):l.left,top:s.vertical?c.top-(l.top-c.top):l.top},o),n.visibleArea=Z(n.visibleArea,Q(h,k(n.visibleArea))),n.visibleArea=st(n.visibleArea,ft(n,e))}return s.horizontal&&(n.transforms.flip.horizontal=!t.transforms.flip.horizontal),s.vertical&&(n.transforms.flip.vertical=!t.transforms.flip.vertical),n}return t}(t,e,i.flip.horizontal,i.flip.vertical)),(i.move||i.scale)&&(t=function(t,e,i){var r,n,o,a=i.scale,s=void 0===a?1:a,c=i.move,l=void 0===c?{}:c;if(ut(t)){var h=Mt(t),u=1/(C(s)?s:s.factor),d=C(s)?void 0:s.center,f=!z(u,1),v=1,m=1;h.visibleArea=Z(h.visibleArea,{left:l.left||0,top:l.top||0});var p=vt(h,e),g=mt(h,e),w=dt(h,e),b={stencil:{minimum:Math.max(p.minWidth?p.minWidth/h.coordinates.width:0,p.minHeight?p.minHeight/h.coordinates.height:0),maximum:Math.min(p.maxWidth?p.maxWidth/h.coordinates.width:1/0,p.maxHeight?p.maxHeight/h.coordinates.height:1/0,K(h.coordinates,nt(g)))},area:{maximum:K(h.visibleArea,w),minimum:(n=h.visibleArea,o=w,Math.max(o.minWidth?o.minWidth/n.width:0,o.minHeight?o.minHeight/n.height:0))}};u&&f&&(u<1?(m=Math.max(u,Math.max(b.area.minimum,b.stencil.minimum)))>1&&(m=1):u>1&&(m=Math.min(u,Math.min(b.area.maximum,b.stencil.maximum)))<1&&(m=1)),m&&(h.visibleArea=q(h.visibleArea,m,d));var A={left:t.coordinates.left-t.visibleArea.left,right:t.visibleArea.width+t.visibleArea.left-(t.coordinates.width+t.coordinates.left),top:t.coordinates.top-t.visibleArea.top,bottom:t.visibleArea.height+t.visibleArea.top-(t.coordinates.height+t.coordinates.top)};return h.visibleArea=st(h.visibleArea,{left:void 0!==g.left?g.left-A.left*m:void 0,top:void 0!==g.top?g.top-A.top*m:void 0,bottom:void 0!==g.bottom?g.bottom+A.bottom*m:void 0,right:void 0!==g.right?g.right+A.right*m:void 0}),h.visibleArea=st(h.visibleArea,ft(h,e)),h.coordinates.width=h.coordinates.width*m,h.coordinates.height=h.coordinates.height*m,h.coordinates.left=h.visibleArea.left+A.left*m,h.coordinates.top=h.visibleArea.top+A.top*m,h.coordinates=st(h.coordinates,ot(V(h.visibleArea),g)),f&&u&&(null===(r=e.transformImage)||void 0===r?void 0:r.adjustStencil)&&(u>1?v=Math.min(b.area.maximum,u)/m:u<1&&(v=Math.max(h.coordinates.height/h.visibleArea.height,h.coordinates.width/h.visibleArea.width,u/m)),1!==v&&(h.visibleArea=q(h.visibleArea,v,u>1?d:k(h.coordinates)),h.visibleArea=st(h.visibleArea,ft(h,e)),h.visibleArea=Z(h.visibleArea,Y(at(h.coordinates,V(h.visibleArea)))))),h}return t}(t,e,i)),t}function Qt(t,e){if(ut(t)){var i=Mt(t),r=wt(t,e),n=vt(t,e),a=dt(t,e),s=$(G(t.coordinates),r),c=s?{height:t.coordinates.height,width:t.coordinates.height*s}:t.coordinates;i.coordinates=o(o({},i.coordinates),St({width:c.width,height:c.height,aspectRatio:r,sizeRestrictions:Ct(a,n)})),i.coordinates=Z(i.coordinates,Q(k(t.coordinates),k(i.coordinates)));var l=Math.max(i.coordinates.width/i.visibleArea.width,i.coordinates.height/i.visibleArea.height,1);return i.visibleArea=o(o({},t.visibleArea),St({width:t.visibleArea.width*l,height:t.visibleArea.height*l,aspectRatio:{minimum:G(i.boundary),maximum:G(i.boundary)},sizeRestrictions:a})),i.visibleArea=Z(i.visibleArea,Q(k(t.visibleArea),k(i.visibleArea))),i.visibleArea=st(i.visibleArea,ft(i,e)),i.coordinates=st(i.coordinates,ot(V(i.visibleArea),mt(i,e))),i}return t}function kt(t,e){var i=pt(t);return t.visibleArea?{left:e.left*i+t.visibleArea.left,top:e.top*i+t.visibleArea.top}:e}function jt(t,e){if(t){var i=Math.abs(t.transforms.rotate%180);return i<=45||i>=135?e:{horizontal:e.vertical,vertical:e.horizontal}}return e}function Xt(t,e){var i=pt(t);return{left:C(e.left)?e.left*i:0,top:C(e.top)?e.top*i:0}}function Yt(t,e){var i=e.getBoundingClientRect(),r=i.left,n=i.top,o={left:0,top:0},a=0;return t.forEach((function(e){o.left+=(e.clientX-r)/t.length,o.top+=(e.clientY-n)/t.length})),t.forEach((function(t){a+=R({left:o.left,top:o.top},{left:t.clientX-r,top:t.clientY-n})})),{centerMass:o,spread:a,count:t.length}}function Zt(t,e,i){void 0===i&&(i=.1);var r=e.getBoundingClientRect(),n=r.left,o=r.top;return{scale:{factor:1-i*function(t){var e=+t;return 0===e||M(e)?e:e>0?1:-1}(t.deltaY||t.detail||t.wheelDelta),center:{left:t.clientX-n,top:t.clientY-o}}}}function Vt(t){return t.moveCoordinates||t.resizeCoordinates||t.transformImage.move||t.transformImage.rotate||t.transformImage.flip||t.transformImage.scale}function qt(t,e){var i=yt(t),r={};return e.imageRestriction&&"none"!==e.imageRestriction&&(r={left:0,top:0,right:i.width,bottom:i.height}),r}function Gt(t,e){var i,r=t.imageSize,n=t.visibleArea,a=vt(t,e),s=wt(t,e);if(n)i=n;else{var c=nt(mt(t,e));i={width:Math.max(c.minWidth,Math.min(c.maxWidth,r.width)),height:Math.max(c.minHeight,Math.min(c.maxHeight,r.height))}}var l=Math.min(s.maximum||1/0,Math.max(s.minimum||0,G(i))),h=i.width<i.height?{width:.8*i.width,height:.8*i.width/l}:{height:.8*i.height,width:.8*i.height*l};return St(o(o({},h),{aspectRatio:s,sizeRestrictions:a}))}function Kt(t,e){return function(t){return{minWidth:S(t.minWidth)?E(t.minWidth):0,minHeight:S(t.minHeight)?E(t.minHeight):0,maxWidth:S(t.maxWidth)?E(t.maxWidth):1/0,maxHeight:S(t.maxHeight)?E(t.maxHeight):1/0}}(e)}function $t(t){var e=t.visibleArea,i=t.coordinates,r=e||yt(t);return{left:(e?e.left:0)+r.width/2-(i?i.width/2:0),top:(e?e.top:0)+r.height/2-(i?i.height/2:0)}}function Jt(t,e){var i=t.visibleArea,r=t.boundary,n=e.imageRestriction,o=yt(t),a={};return n===F.fillArea?a={left:0,top:0,right:o.width,bottom:o.height}:n===F.fitArea&&(G(r)>G(o)?(a={top:0,bottom:o.height},i&&(i.width>o.width?(a.left=-(i.width-o.width)/2,a.right=o.width-a.left):(a.left=0,a.right=o.width))):(a={left:0,right:o.width},i&&(i.height>o.height?(a.top=-(i.height-o.height)/2,a.bottom=o.height-a.top):(a.top=0,a.bottom=o.height)))),a}function te(t,e){var i=t.boundary,r=e.imageRestriction,n=yt(t),o={minWidth:0,minHeight:0,maxWidth:1/0,maxHeight:1/0};return r===F.fillArea?(o.maxWidth=n.width,o.maxHeight=n.height):r===F.fitArea&&(G(i)>G(n)?(o.maxHeight=n.height,o.maxWidth=n.height*G(i)):(o.maxWidth=n.width,o.maxHeight=n.width/G(i))),o}function ee(t){var e=t.getBoundingClientRect();return{width:e.width,height:e.height}}function ie(t,e){return t.aspectRatio?{}:{aspectRatio:ct(w(e.aspectRatio)?e.aspectRatio():e.aspectRatio)}}function re(t){return function(e,i){var r=w(t)?t(e,i):t;return Ct(Kt(0,i),r)}}function ne(t){return o(o({},t),{sizeRestrictions:function(e,i){return t.sizeRestrictions?w(t.sizeRestrictions)?t.sizeRestrictions(e,i):t.sizeRestrictions:Kt(0,i)},areaPositionRestrictions:function(e,i){return t.areaPositionRestrictions?w(t.areaPositionRestrictions)?t.areaPositionRestrictions(e,i):t.areaPositionRestrictions:Jt(e,i)},areaSizeRestrictions:function(e,i){return t.areaSizeRestrictions?w(t.areaSizeRestrictions)?t.areaSizeRestrictions(e,i):t.areaSizeRestrictions:te(e,i)},positionRestrictions:function(e,i){return t.positionRestrictions?w(t.positionRestrictions)?t.positionRestrictions(e,i):t.positionRestrictions:qt(e,i)},defaultCoordinates:function(e,i){if(t.defaultCoordinates)return w(t.defaultCoordinates)?t.defaultCoordinates(e,i):t.defaultCoordinates;var r=t.defaultSize;r||(r=Gt);var n=w(r)?r(e,i):r,a=t.defaultPosition||$t;return[n,function(t){return o({},w(a)?a(t,i):a)}]},defaultVisibleArea:function(e,i){return t.defaultVisibleArea?w(t.defaultVisibleArea)?t.defaultVisibleArea(e,i):t.defaultVisibleArea:function(t,e){var i=t.coordinates,r=t.boundary,n=yt(t),a=G(r);if(i){var s={height:Math.max(i.height,n.height),width:Math.max(i.width,n.width)},c={left:0,top:0,width:G(s)>a?s.width:s.height*a,height:G(s)>a?s.width/a:s.height};(c=et(c,dt(t,e))).left=i.left+i.width/2-c.width/2,c.top=i.top+i.height/2-c.height/2;var l=tt(i,V(o({left:0,top:0},n))),h={};return!l.left&&!l.right&&c.width<=n.width&&(h.left=0,h.right=n.width),!l.top&&!l.bottom&&c.height<=n.height&&(h.top=0,h.bottom=n.height),st(c,h)}var u=G(n),d={height:u<a?n.height:n.width/a,width:u<a?n.height*a:n.width};return{left:n.width/2-d.width/2,top:n.height/2-d.height/2,width:d.width,height:d.height}}(e,i)},aspectRatio:function(e,i){return ct(w(t.aspectRatio)?t.aspectRatio(e,i):t.aspectRatio)}})}function oe(t,e){if(t&&e){var i=e();i&&t(i)}}function ae(t,e){t.forEach((function(t){oe(t,e)}))}!function(t){t.fillArea="fillArea",t.fitArea="fitArea",t.stencil="stencil",t.none="none"}(F||(F={})),function(t){t.coordinates="coordinates",t.visibleArea="visibleArea"}(W||(W={})),function(t){t.limit="limit",t.zoom="zoom",t.unsafe="unsafe"}(T||(T={}));var se=function(){var t=this;this.getTransitions=function(){var e=t.getData(),i=t.getProps().transitions;return o(o({},y(i,{timingFunction:"ease-in-out",duration:350})),{active:e.transitions})},this.getInteractions=function(){return H(t.getData().interactions)},this.hasInteractions=function(){return Vt(t.getData().interactions)},this.startTransitions=function(){var e=t.getProps(),i=e.onTransitionsStart,r=e.onUpdate,n=e.getInstance,s=t.getData(),c=s.transitions,l=a(s,["transitions"]);t.setData(o(o({},l),{transitions:!0})),c||ae([i,r],n),t.endTransitions()},this.endTransitions=B((function(){var e=t.getProps(),i=e.onTransitionsEnd,r=e.onUpdate,n=e.getInstance;t.setData(o(o({},t.getData()),{transitions:!1})),ae([i,r],n)}),(function(){return t.getTransitions().duration})),this.applyPostProcess=function(e,i){var r,n=t.getProps(),o=n.settings,a=n.postProcess,s=e.name,c=e.interaction,l=void 0!==c&&c,h=e.transitions,u=void 0!==h&&h,d=e.immediately,f={name:s,interaction:l,transitions:u,immediately:void 0!==d&&d};return r=a,Array.isArray(r)?a.reduce((function(t,e){return e(t,o,f)}),i):w(a)?a(i,o,f):i},this.updateState=function(e,i,r){void 0===i&&(i={}),void 0===r&&(r=[]);var n=i.transitions,a=void 0!==n&&n,s=t.getProps(),c=s.onTransitionsStart,l=s.getInstance,h=s.onChange,u=s.onUpdate,d=s.settings,f=t.getData(),v=w(e)?e(f.state,d):e,m=v?.001*pt(v):.001,p=!U(f.state,v,m),g=["coordinates","boundary","visibleArea","imageSize","transforms"].some((function(t){var e;return!U(null===(e=f.state)||void 0===e?void 0:e[t],null===v||void 0===v?void 0:v[t],m)})),b=f;p&&(a&&g&&t.endTransitions(),b=o(o({},b),{state:Mt(v),transitions:a&&g}),t.setData(b),oe(h,l)),b.transitions&&!f.transitions&&oe(c,l),ae(function(){for(var t=0,e=0,i=arguments.length;e<i;e++)t+=arguments[e].length;var r=Array(t),n=0;for(e=0;e<i;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,n++)r[n]=o[a];return r}(r,[u]),l)},this.setInteractions=function(e){var i=t.getProps(),r=i.onInteractionStart,n=i.onInteractionEnd,a=i.getInstance,s=t.getInteractions(),c=o(o({},s),e);if(U(s,c)||t.setData(o(o({},t.getData()),{interactions:c})),Vt(s)!==Vt(c))if(Vt(s)){var l=t.getData().state;t.updateState((function(){return l&&t.applyPostProcess({name:"interactionEnd",immediately:!0,transitions:!0},l)}),{transitions:!0},[n])}else oe(r,a)},this.resetState=function(e,i){t.updateState(t.createDefaultState(e,i))},this.clear=function(){t.updateState(null)},this.reconcileState=function(e){void 0===e&&(e={});var i=t.getProps(),r=i.reconcileStateAlgorithm,n=i.settings,o=t.getData().state,a=e.transitions,s=void 0!==a&&a;if(o&&!Et(o,n)){var c=(r||Qt)(o,n);c=t.applyPostProcess({name:"reconcileState",immediately:!0,transitions:s},c),t.updateState(c,{transitions:s})}},this.transformImage=function(e,i){void 0===i&&(i={});var r=i.transitions,n=void 0===r||r,o=i.interaction,a=void 0===o||o,s=i.immediately,c=void 0!==s&&s,l=i.normalize,h=void 0===l||l,u=t.getProps(),d=u.transformImageAlgorithm,f=u.onTransformImage,v=u.onTransformImageEnd,m=u.settings,p=t.getData().state,g=[];if(p){h&&(e=function(t,e){return e.scale&&(e.scale={factor:C(e.scale)?e.scale:e.scale.factor,center:!C(e.scale)&&e.scale.center?kt(t,e.scale.center):void 0}),e.rotate&&(e.rotate={angle:C(e.rotate)?e.rotate:e.rotate.angle,center:!C(e.rotate)&&e.rotate.center?kt(t,e.rotate.center):void 0}),e.move&&(e.move=Xt(t,e.move)),e}(p,e));var w=t.applyPostProcess({name:"transformImage",transitions:n,immediately:c},(d||Dt)(p,m,e));g.push(f),a?t.setInteractions({transformImage:{rotate:!b(e.rotate),flip:!b(e.flip),scale:!b(e.scale),move:!b(e.move)}}):(w=t.applyPostProcess({name:"transformImageEnd",transitions:n,immediately:!0},w),g.push(v)),t.updateState(w,{transitions:c&&n},g)}},this.transformImageEnd=function(e){void 0===e&&(e={});var i=e.immediately,r=void 0===i||i,n=e.transitions,o=void 0===n||n,a=t.getData().state,s=t.getProps().onTransformImageEnd;t.updateState((function(){return a&&t.applyPostProcess({name:"transformImageEnd",immediately:r,transitions:o},a)}),{transitions:o},[s]),t.setInteractions({transformImage:{rotate:!1,flip:!1,scale:!1,move:!1}})},this.zoomImage=function(e,i){void 0===i&&(i={});var r=i.interaction,n=void 0!==r&&r,o=i.immediately,a=void 0===o||o,s=i.transitions,c=void 0===s||s,l=i.normalize,h=void 0!==l&&l;t.transformImage({scale:e},{interaction:n,immediately:a,transitions:c,normalize:h})},this.moveImage=function(e,i,r){void 0===r&&(r={});var n=r.interaction,o=void 0!==n&&n,a=r.immediately,s=void 0===a||a,c=r.transitions,l=void 0===c||c,h=r.normalize,u=void 0!==h&&h;t.transformImage({move:{left:e,top:i}},{interaction:o,immediately:s,transitions:l,normalize:u})},this.flipImage=function(e,i,r){void 0===r&&(r={});var n=r.interaction,o=void 0!==n&&n,a=r.immediately,s=void 0===a||a,c=r.transitions,l=void 0===c||c,h=r.normalize,u=void 0===h||h,d=t.getState(),f={horizontal:e,vertical:i};t.transformImage({flip:d&&u?jt(d,f):f},{interaction:o,immediately:s,transitions:l})},this.rotateImage=function(e,i){void 0===i&&(i={});var r=i.interaction,n=void 0!==r&&r,o=i.immediately,a=void 0===o||o,s=i.transitions,c=void 0===s||s,l=i.normalize,h=void 0!==l&&l;t.transformImage({rotate:e},{interaction:n,immediately:a,transitions:c,normalize:h})},this.reset=function(e,i){t.resetState(e,i)},this.setState=function(e,i){void 0===i&&(i={});var r=t.getSettings(),n=t.getData().state,a=i.transitions,s=void 0===a||a,c=i.immediately,l=void 0!==c&&c,h=i.interaction,u=void 0!==h&&h,d=i.postprocess,f=void 0!==d&&d,v=e&&(w(e)?e(n,r):o(o({},n),e));t.updateState((function(){return f?v&&t.applyPostProcess({name:"setState",immediately:l,transitions:s,interaction:u},v):v}),{transitions:s})},this.setCoordinates=function(e,i){void 0===i&&(i={});var r=t.getData().state,n=t.getProps(),o=n.setCoordinatesAlgorithm,a=n.settings,s=i.transitions,c=void 0===s||s,l=i.immediately,h=void 0===l||l;t.updateState((function(){return r&&t.applyPostProcess({name:"setCoordinates",immediately:h,transitions:c},(o||Pt)(r,a,e,T.zoom))}),{transitions:c})},this.setVisibleArea=function(e,i){void 0===i&&(i={});var r=i.transitions,n=void 0===r||r,o=i.immediately,a=void 0===o||o,s=t.getData().state,c=t.getProps(),l=c.setVisibleAreaAlgorithm,h=c.settings;t.updateState((function(){return s&&t.applyPostProcess({name:"setVisibleArea",immediately:a,transitions:n},(l||Nt)(s,h,e))}),{transitions:n})},this.setBoundary=function(e,i){void 0===i&&(i={});var r=t.getData().state,n=t.getProps(),o=n.setBoundaryAlgorithm,a=n.settings,s=i.transitions,c=void 0!==s&&s,l=i.immediately,h=void 0===l||l;e?t.updateState((function(){return r&&t.applyPostProcess({name:"setBoundary",immediately:h,transitions:c},(o||Lt)(r,a,e))})):t.updateState(null)},this.moveCoordinates=function(e,i){void 0===i&&(i={});var r=t.getData(),n=t.getProps(),o=n.moveCoordinatesAlgorithm,a=n.onMove,s=n.onMoveEnd,c=n.settings,l=i.interaction,h=void 0===l||l,u=i.transitions,d=void 0!==u&&u,f=i.immediately,v=void 0!==f&&f,m=i.normalize,p=void 0===m||m,g=[];if(!r.transitions&&r.state){var w=p?Xt(r.state,e):function(t){return{left:C(t.left)?t.left:0,top:C(t.top)?t.top:0}}(e),b=t.applyPostProcess({name:"moveCoordinates",interaction:h,immediately:v,transitions:d},(o||Ut)(r.state,c,w));g.push(a),h?t.setInteractions({moveCoordinates:!0}):(b=t.applyPostProcess({name:"moveCoordinatesEnd",interaction:h,immediately:v,transitions:d},b),g.push(s)),t.updateState(b,{transitions:v&&d},g)}},this.moveCoordinatesEnd=function(e){void 0===e&&(e={});var i=t.getData().state,r=t.getProps().onMoveEnd,n=e.transitions,o=void 0===n||n,a=e.immediately,s=void 0!==a&&a;t.updateState((function(){return i&&t.applyPostProcess({name:"moveCoordinatesEnd",transitions:o,immediately:s},i)}),{transitions:o},[r]),t.setInteractions({moveCoordinates:!1})},this.resizeCoordinates=function(e,i,r,n){void 0===n&&(n={});var o=t.getData().state,a=t.getProps(),s=a.resizeCoordinatesAlgorithm,c=a.onResize,l=a.onResizeEnd,h=a.settings,u=n.interaction,d=void 0===u||u,f=n.transitions,v=void 0!==f&&f,m=n.immediately,p=void 0!==m&&m,g=n.normalize,w=void 0===g||g;if(!t.getTransitions().active&&o){var b=[],y=w?function(t,e){var i=pt(t);return{left:C(e.left)?e.left*i:0,top:C(e.top)?e.top*i:0,right:C(e.right)?e.right*i:0,bottom:C(e.bottom)?e.bottom*i:0}}(o,i):function(t){return{left:C(t.left)?t.left:0,top:C(t.top)?t.top:0,right:C(t.right)?t.right:0,bottom:C(t.bottom)?t.bottom:0}}(i),E=t.applyPostProcess({name:"resizeCoordinates",interaction:d,immediately:p,transitions:v},(s||Ot)(o,h,e,y,A(r)?r:{}));b.push(c),d?t.setInteractions({resizeCoordinates:!0}):(E=t.applyPostProcess({name:"resizeCoordinatesEnd",interaction:d,immediately:p,transitions:v},E),b.push(l)),t.updateState(E,{transitions:p&&v},b)}},this.resizeCoordinatesEnd=function(e){void 0===e&&(e={});var i=t.getProps().onResizeEnd,r=t.getData().state,n=e.transitions,o=void 0===n||n,a=e.immediately,s=void 0!==a&&a;t.updateState((function(){return r&&t.applyPostProcess({name:"resizeCoordinatesEnd",transitions:o,immediately:s},r)}),{transitions:o},[i]),t.setInteractions({resizeCoordinates:!1})},this.getStencilCoordinates=function(){return gt(t.getData().state)},this.getCoordinates=function(e){void 0===e&&(e={});var i=t.getData().state,r=t.getProps().settings;if(i&&i.coordinates){var n=e.round;return void 0===n||n?function(t,e){if(ut(t)){var i=vt(t,e),r=mt(t,e),n={width:Math.round(t.coordinates.width),height:Math.round(t.coordinates.height),left:Math.round(t.coordinates.left),top:Math.round(t.coordinates.top)};return n.width>i.maxWidth?n.width=Math.floor(t.coordinates.width):n.width<i.minWidth&&(n.width=Math.ceil(t.coordinates.width)),n.height>i.maxHeight?n.height=Math.floor(t.coordinates.height):n.height<i.minHeight&&(n.height=Math.ceil(t.coordinates.height)),st(n,r)}return null}(i,r):o({},i.coordinates)}return null},this.getVisibleArea=function(){var e=t.getData().state;return(null===e||void 0===e?void 0:e.visibleArea)?o({},e.visibleArea):null},this.getSettings=function(){var e=t.getProps().settings;return o({},e)},this.getState=function(){return Mt(t.getData().state)},this.getTransforms=function(){var e=t.getData().state;return e?H(e.transforms):{rotate:0,flip:{horizontal:!1,vertical:!1}}},this.createDefaultState=function(e,i){var r=t.getProps(),n=r.createStateAlgorithm,o=r.settings;return t.applyPostProcess({name:"createState",immediately:!0,transitions:!1},(n||Ht)({image:i,boundary:e},o))},this.isConsistent=function(){var e=t.getData().state,i=t.getProps().settings;return!e||Et(e,i)}},ce={linear:function(t){return t},"ease-in":function(t){return Math.pow(t,1.675)},"ease-out":function(t){return 1-Math.pow(1-t,1.675)},"ease-in-out":function(t){return.5*(Math.sin((t-.5)*Math.PI)+1)}},le=function(){function t(){this.active=!1}return t.prototype.start=function(t){var e;this.onStart=t.onStart,this.onProgress=t.onProgress,this.onStop=t.onStop,this.active||null===(e=this.onStart)||void 0===e||e.call(this),this.id&&window.cancelAnimationFrame(this.id),this.startTime=performance.now(),this.timingFunction=t.timingFunction,this.endTime=this.startTime+t.duration,this.active=!0,this.animate()},t.prototype.animate=function(){var t=this;if(this.startTime&&this.endTime){var e=ce[this.timingFunction];e||(e=ce["ease-out"]);var i=1-(this.endTime-performance.now())/(this.endTime-this.startTime),r=Math.min(1,e(i));this.onProgress&&this.onProgress(r),i<1?this.id=window.requestAnimationFrame((function(){return t.animate()})):this.stop()}else this.stop()},t.prototype.stop=function(){this.active=!1,this.id&&window.cancelAnimationFrame(this.id),this.onStop&&this.onStop()},t}();function he(t,e,i,r,n){if(ut(t)){var a=t.transforms,s=t.coordinates,c=0!==a.rotate||a.flip.horizontal||a.flip.vertical?function(t,e,i){var r=i.rotate,n=i.flip,a={width:"naturalWidth"in e?e.naturalWidth:e.width,height:"naturalHeight"in e?e.naturalHeight:e.height},s=it(a,r),c=t.getContext("2d");if(t.height=s.height,t.width=s.width,c){c.save();var l=rt(k(o({left:0,top:0},a)),r);c.translate(-(l.left-s.width/2),-(l.top-s.height/2)),c.rotate(r*Math.PI/180),c.translate(n.horizontal?a.width:0,n.vertical?a.height:0),c.scale(n.horizontal?-1:1,n.vertical?-1:1),c.drawImage(e,0,0,a.width,a.height),c.restore()}return t}(r,e,a):e,l=o({minWidth:0,minHeight:0,maxWidth:1/0,maxHeight:1/0,maxArea:1/0,imageSmoothingEnabled:!0,imageSmoothingQuality:"high",fillColor:"transparent"},n),h=function(t){return t.find((function(t){return S(t)}))},u=St({sizeRestrictions:{minWidth:h([l.width,l.minWidth])||0,minHeight:h([l.height,l.minHeight])||0,maxWidth:h([l.width,l.maxWidth])||1/0,maxHeight:h([l.height,l.maxHeight])||1/0},width:s.width,height:s.height,aspectRatio:{minimum:s.width/s.height,maximum:s.width/s.height}});if(l.maxArea&&u.width*u.height>l.maxArea){var d=Math.sqrt(l.maxArea/(u.width*u.height));u={width:Math.round(d*u.width),height:Math.round(d*u.height)}}return function(t,e,i,r,n){t.width=r?r.width:i.width,t.height=r?r.height:i.height;var o=t.getContext("2d");if(o){o.clearRect(0,0,t.width,t.height),n&&(n.imageSmoothingEnabled&&(o.imageSmoothingEnabled=n.imageSmoothingEnabled),n.imageSmoothingQuality&&(o.imageSmoothingQuality=n.imageSmoothingQuality),n.fillColor&&(o.fillStyle=n.fillColor,o.fillRect(0,0,t.width,t.height),o.save()));var a=i.left<0?-i.left:0,s=i.top<0?-i.top:0;o.drawImage(e,i.left+a,i.top+s,i.width,i.height,a,s,t.width,t.height)}return t}(i,c,s,u,l)}return null}function ue(t,e,i){e.style.width="0px",e.style.height="0px",e.style.width=Math.max(t.clientWidth,i.width)+"px";var r=i.width/i.height;e.style.height=Math.max(t.clientHeight,e.clientWidth/r)+"px",e.style.width=e.clientHeight*r+"px"}function de(t,e,i){e.style.width="0px",e.style.height="0px",e.style.width=Math.max(t.getBoundingClientRect().width,i.width)+"px";var r=i.width/i.height;e.style.height=Math.max(t.getBoundingClientRect().height,e.getBoundingClientRect().width/r)+"px",e.style.width=e.getBoundingClientRect().height*r+"px",e.clientWidth/e.clientHeight>t.clientWidth/t.clientHeight?e.clientWidth>t.clientWidth&&(e.style.width=t.clientWidth+"px",e.style.height=t.clientWidth/r+"px"):e.clientHeight>t.clientHeight&&(e.style.height=t.clientHeight+"px",e.style.width=t.clientHeight*r+"px")}function fe(t){return new Promise((function(e,i){try{if(t)if(/^data:/i.test(t))e(function(t){t=t.replace(/^data:([^;]+);base64,/gim,"");for(var e=atob(t),i=e.length,r=new ArrayBuffer(i),n=new Uint8Array(r),o=0;o<i;o++)n[o]=e.charCodeAt(o);return r}(t));else if(/^blob:/i.test(t)){var r=new FileReader;r.onload=function(t){var i;e(null===(i=t.target)||void 0===i?void 0:i.result)},function(t,e){var i=new XMLHttpRequest;i.open("GET",t,!0),i.responseType="blob",i.onload=function(){200!=this.status&&0!==this.status||e(this.response)},i.send()}(t,(function(t){r.readAsArrayBuffer(t)}))}else{var n=new XMLHttpRequest;n.onreadystatechange=function(){4===n.readyState&&(200===n.status||0===n.status?e(n.response):i("Warning: could not load an image to parse its orientation"))},n.onprogress=function(){"image/jpeg"!==n.getResponseHeader("content-type")&&n.abort()},n.withCredentials=!1,n.open("GET",t,!0),n.responseType="arraybuffer",n.send(null)}else i("Error: the image is empty")}catch(o){i(o)}}))}function ve(t){var e=t.rotate,i=void 0===e?0:e,r=t.flip,n=void 0===r?{horizontal:!1,vertical:!1}:r,o=t.scale,a=void 0===o?1:o;return" rotate("+i+"deg) scaleX("+a*(n.horizontal?-1:1)+") scaleY("+a*(n.vertical?-1:1)+")"}function me(t){try{var e,i=new DataView(t),r=void 0,n=void 0,o=void 0,a=void 0;if(255===i.getUint8(0)&&216===i.getUint8(1))for(var s=i.byteLength,c=2;c+1<s;){if(255===i.getUint8(c)&&225===i.getUint8(c+1)){o=c;break}c++}if(o&&(r=o+10,"Exif"===function(t,e,i){var r,n="";for(r=e,i+=e;r<i;r++)n+=String.fromCharCode(t.getUint8(r));return n}(i,o+4,4))){var l=i.getUint16(r);if(((n=18761===l)||19789===l)&&42===i.getUint16(r+2,n)){var h=i.getUint32(r+4,n);h>=8&&(a=r+h)}}if(a)for(var u=i.getUint16(a,n),d=0;d<u;d++){c=a+12*d+2;if(274===i.getUint16(c,n)){c+=8,e=i.getUint16(c,n),i.setUint16(c,1,n);break}}return e}catch(f){return null}}function pe(t){var e=t.src,i=t.arrayBuffer,r=void 0===i?null:i,n=t.orientation,o=void 0===n?null:n,a={src:e,arrayBuffer:r,revoke:!1,transforms:{flip:{horizontal:!1,vertical:!1},rotate:0}};return r&&o&&o>1?m(e)||!p(e)?(a.src=URL.createObjectURL(new Blob([r])),a.revoke=!0):a.src=function(t){for(var e=[],i=new Uint8Array(t);i.length>0;){var r=i.subarray(0,8192);e.push(String.fromCharCode.apply(null,Array.from?Array.from(r):r.slice())),i=i.subarray(8192)}return"data:image/jpeg;base64,"+btoa(e.join(""))}(r):a.src=e,o&&(a.transforms=function(t){var e={flip:{horizontal:!1,vertical:!1},rotate:0};if(t)switch(t){case 2:e.flip.horizontal=!0;break;case 3:e.rotate=-180;break;case 4:e.flip.vertical=!0;break;case 5:e.rotate=90,e.flip.vertical=!0;break;case 6:e.rotate=90;break;case 7:e.rotate=90,e.flip.horizontal=!0;break;case 8:e.rotate=-90}return e}(o)),a}function ge(t,e){return void 0===e&&(e={}),function(t,e){void 0===e&&(e={});var i=e.checkOrientation,r=e.parse;return new Promise((function(e){i||r?fe(t).then((function(i){var r=me(i);e(pe(i?{src:t,arrayBuffer:i,orientation:r}:{src:t,arrayBuffer:null,orientation:null}))})).catch((function(i){console.warn(i),e(pe({src:t}))})):e(pe({src:t}))}))}(t,o(o({},e),{crossOrigin:g(t)&&e.crossOrigin})).then((function(t){return new Promise((function(i,r){(function(t,e){return void 0===e&&(e={}),new Promise((function(i,r){var n=document.createElement("img");e.crossOrigin&&(n.crossOrigin=!0!==e.crossOrigin?e.crossOrigin:"anonymous"),n.src=t,n.style.visibility="hidden",n.style.position="fixed",document.body.appendChild(n),n.complete?(i(n),document.body.removeChild(n)):(n.addEventListener("load",(function(){i(n),document.body.removeChild(n)})),n.addEventListener("error",(function(){r(null),document.body.removeChild(n)})))}))})(t.src,e).then((function(e){i(o(o({},t),{width:e.naturalWidth,height:e.naturalHeight}))})).catch((function(){r(null)}))}))}))}function we(t,e,i,r,n){void 0===n&&(n=null);var a=t.width>t.height?{width:Math.min(512,t.width),height:Math.min(512,t.width)/(t.width/t.height)}:{height:Math.min(512,t.height),width:Math.min(512,t.height)*(t.width/t.height)},s=yt(e),c={rotate:e.transforms.rotate,flip:{horizontal:e.transforms.flip.horizontal,vertical:e.transforms.flip.vertical},translateX:i.left/r,translateY:i.top/r,scale:1/r},l={left:(a.width-s.width)/(2*r),top:(a.height-s.height)/(2*r)},h={left:(1-1/r)*a.width/2,top:(1-1/r)*a.height/2},u=o(o({},c),{scale:c.scale*(t.width/a.width)}),d={width:a.width+"px",height:a.height+"px",left:"0px",top:"0px",transition:"none",transform:"translate3d("+(-l.left-h.left-c.translateX)+"px, "+(-l.top-h.top-c.translateY)+"px, 0px)"+ve(u),willChange:"none"};return n&&n.active&&(d.willChange="transform",d.transition=n.duration+"ms "+n.timingFunction),d}function be(t,e,i){return i.immediately?function(t,e){if(ut(t)){var i=Mt(t),r={width:0,height:0};G(i.boundary)>G(i.coordinates)?(r.height=.8*i.boundary.height,r.width=r.height*G(i.coordinates)):(r.width=.8*i.boundary.width,r.height=r.width*G(i.coordinates)),i.visibleArea=q(i.visibleArea,i.coordinates.width*i.boundary.width/(i.visibleArea.width*r.width));var n=J(i.visibleArea,dt(i,e));return i.visibleArea=q(i.visibleArea,n),1!==n&&(r.height/=n,r.width/=n),i.visibleArea=Z(i.visibleArea,Q(k(i.coordinates),k(i.visibleArea))),i.visibleArea=st(i.visibleArea,ft(i,e)),i.coordinates=st(i.coordinates,ot(V(i.visibleArea),mt(i,e))),i}return t}(t,e):t}function Ae(){var t=(0,u.useRef)([]);return function(e){-1===t.current.indexOf(e)&&t.current.push(e)}}var ye=function(t,e){var i=function(){var t=(0,u.useRef)(!0);return t.current?(t.current=!1,!0):t.current}();(0,u.useEffect)((function(){if(!i)return t()}),e)};var Ee=function(t){function e(e,i){var r=t.call(this)||this;return r.props=e,r.notify=i,r.data={state:null,transitions:!1,interactions:{moveCoordinates:!1,resizeCoordinates:!1,transformImage:{rotate:!1,move:!1,scale:!1,flip:!1}}},r}return n(e,t),e.prototype.getProps=function(){return this.props()},e.prototype.setData=function(t){this.data=t,this.notify()},e.prototype.getData=function(){return this.data},e}(se);function xe(){var t=l((0,u.useState)({}),2);t[0];var e=t[1];return function(){e({})}}function Ce(t){var e=xe(),i=function(t){var e=(0,u.useRef)(t);return e.current=t,function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return e.current.apply(e,h([],l(t),!1))}}((function(){var e=t(),i=e.settings,r=a(e,["settings"]),n=o({imageRestriction:F.fitArea,transformImage:{adjustStencil:!0}},i),s=o({transitions:!0},r);return o({settings:o(o({},n),ne(n))},s)}));return(0,u.useRef)(new Ee(i,e)).current}var Me=function(t){var e=(0,u.useRef)(t),i=function(){e.current&&e.current()};(0,u.useEffect)((function(){e.current=t}),[t]),(0,u.useEffect)((function(){return window.addEventListener("resize",i),window.addEventListener("orientationchange",i),function(){window.removeEventListener("resize",i),window.removeEventListener("orientationchange",i)}}),[])};function Se(t){var e=this,i=t(),r=i.src,n=i.onReady,a=i.onError,h=i.onUpdate,d=i.canvas,f=void 0===d||d,v=i.unloadTime,m=void 0===v?500:v,p=i.crossOrigin,g=void 0===p||p,w=i.checkOrientation,A=void 0===w||w,y=i.autoReconcileState,E=void 0===y||y,x=(0,u.useRef)(null),C=(0,u.useRef)(null),M=(0,u.useRef)(null),S=(0,u.useRef)(null),R=l(function(t){var e=l((0,u.useState)(t),2),i=e[0],r=e[1],n=l((0,u.useState)(null),2),o=n[0],a=n[1],s=(0,u.useRef)(t);return ye((function(){o&&o(i,s.current)}),[o]),[i,function(t,e){s.current=i,r(t),a((function(){return e}))}]}(null),2),z=R[0],P=R[1],I=Ce((function(){return o(o({},t()),{getInstance:function(){return S.current}})})),H=function(t){var e=t.src,i=t.onLoadingStart,r=t.onLoadingEnd,n=t.onError,o=t.onLoad,a=t.crossOrigin,s=t.checkOrientation,c=t.canvas,h=t.unloadTime,d=l((0,u.useState)(!1),2),f=d[0],v=d[1],m=l((0,u.useState)(!1),2),p=m[0],g=m[1],w=l((0,u.useState)(null),2),A=w[0],y=w[1],E=(0,u.useRef)(null);return(0,u.useEffect)((function(){if(E.current!==e)if(E.current=e||null,g(!1),e){v(!0),null===i||void 0===i||i();var t=[ge(e,{crossOrigin:b(a)?c:a,checkOrientation:s})];p&&h&&t.push(N(h)),Promise.all(t).then((function(t){var i=l(t,1)[0];E.current===e&&(y(i),null===o||void 0===o||o(i))})).catch((function(){E.current===e&&(null===n||void 0===n||n())})).finally((function(){E.current===e&&(null===r||void 0===r||r(),v(!1))}))}else h?N(h).then((function(){y(null)})):y(null)}),[e]),(0,u.useEffect)((function(){A&&g(!0)}),[A]),{isLoading:function(){return f},isLoaded:function(){return p},getImage:function(){return A},setImage:y}}({src:r,crossOrigin:g,checkOrientation:A,unloadTime:m,canvas:f,onLoad:function(){S.current&&(null===n||void 0===n||n(S.current))},onError:function(){S.current&&(null===a||void 0===a||a(S.current))}}),U=function(t,e){void 0===e&&(e=!0);var i=l((0,u.useState)(e),2),r=i[0],n=i[1];return(0,u.useLayoutEffect)((function(){r&&!t.hasInteractions()&&t.reconcileState()})),{pause:function(){n(!1)},resume:function(){n(!0)}}}(I,E),_=function(){return s(e,void 0,void 0,(function(){var t,e,i;return c(this,(function(r){switch(r.label){case 0:return C.current?(U.pause(),t=H.getImage(),[4,null===(i=C.current)||void 0===i?void 0:i.stretchTo(t)]):[3,2];case 1:e=r.sent(),P(t,(function(){e&&t?I.reset(e,t):I.clear()})),U.resume(),r.label=2;case 2:return[2]}}))}))},B=function(){return s(e,void 0,void 0,(function(){var t,e,i,r;return c(this,(function(n){switch(n.label){case 0:return C.current?(U.pause(),t=H.getImage(),[4,null===(r=C.current)||void 0===r?void 0:r.stretchTo(t)]):[3,2];case 1:(e=n.sent())&&t?(i=I.getState())?e.width===i.boundary.width&&e.height===i.boundary.height||(I.setBoundary(e),I.reconcileState()):I.reset(e,t):I.clear(),U.resume(),n.label=2;case 2:return[2]}}))}))},F={reset:function(){return _()},refresh:function(){return B()},setImage:function(t){return P(t)},reconcileState:I.reconcileState,moveCoordinates:I.moveCoordinates,moveCoordinatesEnd:I.moveCoordinatesEnd,resizeCoordinates:I.resizeCoordinates,clear:I.clear,resizeCoordinatesEnd:I.resizeCoordinatesEnd,moveImage:I.moveImage,flipImage:I.flipImage,zoomImage:I.zoomImage,rotateImage:I.rotateImage,transformImage:I.transformImage,transformImageEnd:I.transformImageEnd,setCoordinates:I.setCoordinates,setVisibleArea:I.setVisibleArea,startTransitions:I.startTransitions,setState:I.setState,hasInteractions:I.hasInteractions,getStencilCoordinates:I.getStencilCoordinates,getCoordinates:I.getCoordinates,getVisibleArea:I.getVisibleArea,getTransforms:I.getTransforms,getTransitions:I.getTransitions,getInteractions:I.getInteractions,getSettings:I.getSettings,getState:I.getState,getDefaultState:function(){var t=I.getState(),e=H.getImage();return t&&e?I.createDefaultState(t.boundary,e):null},getCanvas:function(t){var e=I.getState();return x.current&&M.current&&e?M.current.draw(e,x.current,t):null},getImage:function(){return z?o({},z):null},isLoading:H.isLoading,isLoaded:H.isLoaded};return Me((function(){B()})),ye((function(){_()}),[H.getImage()]),ye((function(){S.current&&(null===h||void 0===h||h(S.current))}),[H.isLoaded(),H.isLoading()]),(0,u.useImperativeHandle)(S,(function(){return F})),{cropper:F,refs:{image:x,boundary:C,canvas:M},image:z}}var Re=(0,u.forwardRef)((function(t,e){var i=t.className,r=t.style,n=t.stretcherClassName,o=t.contentClassName,a=t.stretchAlgorithm,s=void 0===a?ue:a,c=t.sizeAlgorithm,l=void 0===c?ee:c,h=t.children,d=(0,u.useRef)(null),v=(0,u.useRef)(null);return(0,u.useImperativeHandle)(e,(function(){return{reset:function(){var t=d.current;t&&(t.style.height="",t.style.width="")},stretchTo:function(t){var e=d.current,i=v.current;if((null===t||void 0===t?void 0:t.width)&&(null===t||void 0===t?void 0:t.height)&&e&&i){s(i,e,t);var r=l(i,t);return Promise.resolve(r.width&&r.height?r:null)}return e&&(e.style.height="",e.style.width=""),Promise.resolve(null)}}})),u.createElement("div",{ref:v,style:r,className:f()("advanced-cropper-boundary",i)},u.createElement("div",{ref:d,className:f()(["advanced-cropper-boundary__stretcher",n])}),u.createElement("div",{className:f()(["advanced-cropper-boundary__content",o])},h))}));Re.displayName="StretchableBoundary";var ze=function(t){var e=t.visible,i=t.className,r=t.style,n=t.children;return u.createElement("div",{style:r,className:f()(i,"advanced-cropper-fade",Boolean(e)&&"advanced-cropper-fade--visible")},n)},Pe=function(t){var e=t.cropper,i=t.children,r=t.className,n=t.style,o=e?e.getState():null,a=!!e&&e.isLoaded();return u.createElement("div",{className:f()(r,"advanced-cropper-wrapper"),style:n},u.createElement(ze,{visible:o&&a,className:"advanced-cropper-wrapper__fade"},i))};function Ie(t){t.preventDefault()}var Ne=(0,u.forwardRef)((function(t,e){var i=t.className,r=t.cropper,n=t.crossOrigin,o=void 0===n||n,a=r.getState(),s=r.getTransitions(),c=r.getImage(),l=c&&a?function(t,e,i){return void 0===i&&(i=null),t&&e&&e.visibleArea?we(t,e,e.visibleArea,pt(e),i):{}}(c,a,s):{},h=c?c.src:void 0;return h?u.createElement("img",{key:h,ref:e,className:f()("advanced-cropper-background-image",i),src:h,crossOrigin:!0===o?"anonymous":o||void 0,style:l,onMouseDown:Ie}):null}));Ne.displayName="CropperBackgroundImage";var He=(0,u.forwardRef)((function(t,e){var i=(0,u.useRef)(null),r=(0,u.useRef)(null);return(0,u.useImperativeHandle)(e,(function(){return{draw:function(t,e,n){return void 0===n&&(n={}),e&&i.current&&r.current?he(t,e,i.current,r.current,n):null}}})),u.createElement(u.Fragment,null,u.createElement("canvas",{className:"advanced-cropper-canvas",ref:i}),u.createElement("canvas",{className:"advanced-cropper-canvas",ref:r}))}));He.displayName="CropperCanvas";var Ue=function(t){function e(e){var i=t.call(this,e)||this;return i.processMove=function(t,e){var r,n=i.container.current;if(n&&i.touches.length){var o=n.getBoundingClientRect(),a=o.left,s=o.top;if(1===i.touches.length&&1===e.length&&i.props.onMove){var c={left:Math.abs(e[0].clientX-i.anchor.left-a)<Math.abs(i.touches[0].clientX-i.anchor.left-a),top:Math.abs(e[0].clientY-i.anchor.top-s)<Math.abs(i.touches[0].clientY-i.anchor.top-s)},u={left:0,top:0};i.props.useAnchor&&c.left||(u.left=e[0].clientX-i.touches[0].clientX),i.props.useAnchor&&c.top||(u.top=e[0].clientY-i.touches[0].clientY),null===(r=i.props)||void 0===r||r.onMove(u,t),i.touches=h([],l(e),!1)}}},i.processEnd=function(){var t=i.props,e=t.onMoveEnd,r=t.onLeave;!i.props.disabled&&i.touches.length&&(null===e||void 0===e||e()),i.hovered&&(null===r||void 0===r||r(),i.hovered=!1),i.touches=[]},i.initAnchor=function(t){var e=i.container.current;if(e){var r=e.getBoundingClientRect(),n=r.left,o=r.top;i.anchor={left:t.clientX-n,top:t.clientY-o}}},i.onMouseOver=function(){var t=i.props,e=t.onEnter,r=t.disabled;i.hovered||r||(i.hovered=!0,null===e||void 0===e||e())},i.onMouseLeave=function(){var t=i.props.onLeave;i.hovered&&!i.touches.length&&(i.hovered=!1,null===t||void 0===t||t())},i.onTouchStart=function(t){var e=i.props,r=e.onEnter,n=e.onMoveStart,o=e.disabled;if(t.cancelable){i.touches=Array.from(t.touches);var a=!o&&1===t.touches.length;a&&(i.touches=Array.from(t.touches),null===n||void 0===n||n()),i.hovered||o||(i.hovered=!0,null===r||void 0===r||r()),(i.started||a)&&(t.preventDefault(),t.stopPropagation())}},i.onTouchEnd=function(){i.started=!1,i.processEnd()},i.onTouchMove=function(t){i.touches.length>=1&&(i.started?(i.processMove(t,Array.from(t.touches)),t.preventDefault(),t.stopPropagation()):R({left:i.touches[0].clientX,top:i.touches[0].clientY},{left:t.touches[0].clientX,top:t.touches[0].clientY})>(i.props.activationDistance||0)&&(i.initAnchor({clientX:t.touches[0].clientX,clientY:t.touches[0].clientY}),i.started=!0))},i.onMouseDown=function(t){var e=i.props,r=e.onMoveStart;if(!e.disabled&&0===t.button){var n={clientX:t.clientX,clientY:t.clientY};i.touches=[n],i.initAnchor(n),t.stopPropagation(),null===r||void 0===r||r()}},i.onMouseMove=function(t){!i.props.disabled&&i.touches.length&&(i.processMove(t,[{clientX:t.clientX,clientY:t.clientY}]),t.preventDefault&&t.cancelable&&t.preventDefault(),t.stopPropagation())},i.onMouseUp=function(){i.processEnd()},i.touches=[],i.hovered=!1,i.started=!1,i.anchor={left:0,top:0},i.container=(0,u.createRef)(),i}return n(e,t),e.prototype.componentWillUnmount=function(){window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("touchend",this.onTouchEnd);var t=this.container.current;t&&(t.removeEventListener("touchstart",this.onTouchStart),t.removeEventListener("mousedown",this.onMouseDown))},e.prototype.componentDidMount=function(){window.addEventListener("mouseup",this.onMouseUp,{passive:!1}),window.addEventListener("mousemove",this.onMouseMove,{passive:!1}),window.addEventListener("touchmove",this.onTouchMove,{passive:!1}),window.addEventListener("touchend",this.onTouchEnd,{passive:!1});var t=this.container.current;t&&(t.addEventListener("touchstart",this.onTouchStart,{passive:!1}),t.addEventListener("mousedown",this.onMouseDown,{passive:!1}))},e.prototype.componentDidUpdate=function(t){this.props.disabled&&!t.disabled&&(this.touches=[])},e.prototype.render=function(){var t=this.props,e=t.children,i=t.className;return u.createElement("div",{className:f()("advanced-cropper-draggable-element",i),ref:this.container,onMouseOver:this.onMouseOver,onMouseLeave:this.onMouseLeave},e)},e.defaultProps={disabled:!1,activationDistance:30,useAnchor:!0,rerender:!0},e}(u.Component),_e=function(t){var e=t.position,i=t.className,r=t.disabled,n=t.onDrag,o=t.onDragEnd,a=t.onLeave,s=t.onEnter,c=t.children;return u.createElement(Ue,{className:f()(["advanced-cropper-line-wrapper",e&&"advanced-cropper-line-wrapper--".concat(e),i]),disabled:r,onMove:n,onMoveEnd:o,onLeave:a,onEnter:s,activationDistance:0},u.createElement("div",{className:f()(["advanced-cropper-line-wrapper__content",e&&"advanced-cropper-line-wrapper__content--".concat(e)])},c))},Be=function(t){var e,i,r=t.position,n=t.hoverClassName,o=t.wrapperClassName,a=t.defaultClassName,s=t.disabled,c=t.onMove,h=t.onMoveEnd,d=l((0,u.useState)(!1),2),v=d[0],m=d[1];return u.createElement(_e,{className:f()("advanced-cropper-simple-line-wrapper",o,(e={},e["advanced-cropper-simple-line-wrapper--".concat(r)]=!!r,e)),position:r,disabled:s,onDrag:c,onDragEnd:h,onLeave:function(){m(!1)},onEnter:function(){m(!0)}},u.createElement("div",{className:f()("advanced-cropper-simple-line",v&&"advanced-cropper-simple-line--hover",a,v&&n,(i={},i["advanced-cropper-simple-line--".concat(r)]=!!r,i))}))},Fe=function(t){var e=t.horizontalPosition,i=t.verticalPosition,r=t.className,n=t.disabled,o=t.onDrag,a=t.onDragEnd,s=t.onLeave,c=t.onEnter,l=t.children,h=t.style,d=e||i?v(e,i).snakeCase:null;return u.createElement("div",{style:h,className:f()(r,"advanced-cropper-handler-wrapper",d&&"advanced-cropper-handler-wrapper--".concat(d),n&&"advanced-cropper-handler-wrapper--disabled")},u.createElement(Ue,{className:"advanced-cropper-handler-wrapper__draggable",disabled:n,onMove:o,onMoveEnd:a,onLeave:s,onEnter:c,activationDistance:0},l))},We=function(t){var e,i=t.verticalPosition,r=t.horizontalPosition,n=t.hoverClassName,o=t.wrapperClassName,a=t.defaultClassName,s=t.wrapperStyle,c=t.disabled,h=t.onMove,d=t.onMoveEnd,v=l((0,u.useState)(!1),2),m=v[0],p=v[1];return u.createElement(Fe,{style:s,className:f()("advanced-cropper-simple-handler-wrapper",o,i&&"advanced-cropper-simple-handler-wrapper--".concat(i),r&&"advanced-cropper-simple-handler-wrapper--".concat(r),r&&i&&"advanced-cropper-simple-handler-wrapper--".concat(r,"-").concat(i),m&&"advanced-cropper-simple-handler-wrapper--hover"),verticalPosition:i,horizontalPosition:r,disabled:c,onDrag:h,onDragEnd:d,onLeave:function(){p(!1)},onEnter:function(){p(!0)}},u.createElement("div",{className:f()("advanced-cropper-simple-handler",m&&"advanced-cropper-simple-handler--hover",a,m&&n,(e={},e["advanced-cropper-simple-handler--".concat(i)]=!!i,e["advanced-cropper-simple-handler--".concat(r)]=!!r,e["advanced-cropper-simple-handler--".concat(r,"-").concat(i)]=r&&i,e))}))},Te=["east","west",null],Oe=["south","north",null],Le=function(t){var e=t.style,i=t.className,r=t.children,n=t.onResize,o=t.onResizeEnd,a=t.handlerComponent,s=void 0===a?We:a,c=t.handlers,h=void 0===c?{eastNorth:!0,north:!0,westNorth:!0,west:!0,westSouth:!0,south:!0,eastSouth:!0,east:!0}:c,d=t.handlerClassNames,m=void 0===d?{}:d,p=t.handlerWrapperClassNames,g=void 0===p?{}:p,w=t.lines,b=void 0===w?{west:!0,north:!0,east:!0,south:!0}:w,y=t.lineComponent,E=void 0===y?Be:y,x=t.lineClassNames,C=void 0===x?{}:x,M=t.lineWrapperClassNames,S=void 0===M?{}:M,R=t.disabled,z=void 0!==R&&R,P=t.reference,I=void 0===P?null:P,N=l((0,u.useState)(null),2),H=N[0],U=N[1],B=(0,u.useMemo)((function(){var t=[];return Te.forEach((function(e){Oe.forEach((function(i){if(e!==i){var r=v(e,i),n=r.snakeCase,o=r.camelCase;n&&o&&t.push({name:o,className:n,verticalPosition:i,horizontalPosition:e})}}))})),t}),[]),F=(0,u.useMemo)((function(){var t=[];return B.forEach((function(e){_(e.name)&&(A(b)?b[e.name]:b)&&t.push({name:e.name,component:E,className:f()(C.default,C[e.name],z&&C.disabled),wrapperClassName:f()("advanced-cropper-bounding-box__line","advanced-cropper-bounding-box__line--".concat(e.name),S.default,S[e.name],z&&S.disabled),hoverClassName:C.hover,verticalPosition:e.verticalPosition,horizontalPosition:e.horizontalPosition,disabled:z})})),t}),[B,b,E,C,S,z]),W=(0,u.useMemo)((function(){var t=[];return B.forEach((function(e){(A(h)?h[e.name]:h)&&t.push({name:e.name,component:s,className:f()(m.default,m[e.name]),containerClassName:f()("advanced-cropper-bounding-box__handler-wrapper","advanced-cropper-bounding-box__handler-wrapper--".concat(e.className)),wrapperClassName:f()("advanced-cropper-bounding-box__handler","advanced-cropper-bounding-box__handler--".concat(e.className),g.default,g[e.name]),hoverClassName:m.hover,verticalPosition:e.verticalPosition,horizontalPosition:e.horizontalPosition,disabled:z})})),t}),[B,h,s,m,g,z]),T=function(t,e){return function(i,r){var o,a={left:i.left,top:i.top};if(!e&&t?o="width":e&&!t&&(o="height"),!z){if(n){var s=v(t,e).camelCase;s&&n(s,a,{reference:H||I,preserveAspectRatio:r&&r.shiftKey,respectDirection:o,compensate:!0})}H||U(I)}}},O=function(){null===o||void 0===o||o(),U(null)};return u.createElement("div",{className:f()("advanced-cropper-bounding-box",i),style:e},r,u.createElement("div",null,F.map((function(t){return u.createElement(t.component,{key:t.name,defaultClassName:t.className,hoverClassName:t.hoverClassName,wrapperClassName:t.wrapperClassName,position:t.name,disabled:t.disabled,onMove:T(t.horizontalPosition,t.verticalPosition),onMoveEnd:O})}))),u.createElement("div",null,W.map((function(t){var e=u.createElement(t.component,{defaultClassName:t.className,hoverClassName:t.hoverClassName,wrapperClassName:t.wrapperClassName,horizontalPosition:t.horizontalPosition,verticalPosition:t.verticalPosition,disabled:t.disabled,onMove:T(t.horizontalPosition,t.verticalPosition),onMoveEnd:O});return u.createElement("div",{key:t.name,className:t.containerClassName},e)}))))},De=function(t){var e=t.className,i=t.children;return u.createElement("div",{className:f()("advanced-cropper-stencil-overlay",e)},i)};var Qe=function(t){var e=t.className,i=t.transitions,r=t.children,n=a(t,["className","transitions","children"]),s=(0,u.useRef)(null),c=(0,u.useRef)(n),h=l((0,u.useState)(n),2),d=h[0],v=h[1],m=l(function(t){void 0===t&&(t=null);var e=(0,u.useRef)(new le),i=l((0,u.useState)(!1),2),r=i[0],n=i[1];return[function(i){t&&t.active?e.current.start(o(o({},t),{onStart:function(){n(!0)},onProgress:function(t){i(t)},onStop:function(){n(!1)}})):e.current.active||i(1)},r]}(i),2),p=m[0],g=m[1];(0,u.useLayoutEffect)((function(){if(!U(d,n)){v(n);var t=g?o({},c.current):d;p((function(e){["left","top","height","width"].forEach((function(i){var r=n[i],o=t[i];c.current[i]=C(o)&&C(r)?o+(r-o)*e:r})),s.current&&(s.current.style.width="".concat(c.current.width,"px"),s.current.style.height="".concat(c.current.height,"px"),s.current.style.transform="translate3d(".concat(c.current.left,"px, ").concat(c.current.top,"px, 0px)"))}))}}),[d,g,n.width,n.height,n.top,n.left]);var w=g?c.current:n,b={left:0,top:0,width:"".concat(w.width,"px"),height:"".concat(w.height,"px"),transform:"translate3d(".concat(w.left,"px, ").concat(w.top,"px, 0px)")};return u.createElement("div",{ref:s,className:f()("advanced-cropper-artificial-transition",e),style:b},r)},ke=function(t){var e=t.className,i=t.transitions,r=t.width,n=t.height,o=t.left,a=t.top,s=t.children;return u.createElement(Qe,{className:f()("advanced-cropper-stencil-wrapper",e),transitions:i,width:r,height:n,top:a,left:o},s)},je=function(t){var e=t.columns,i=void 0===e?3:e,r=t.rows,n=void 0===r?3:r,o=t.visible,a=void 0!==o&&o,s=t.className,c=[],h=l((0,u.useState)(i),2),d=h[0],v=h[1],m=l((0,u.useState)(n),2),p=m[0],g=m[1];ye((function(){a&&(g(n),v(i))}),[a,i,n]);for(var w=0;w<p;w++){for(var b=[],A=0;A<d;A++)b.push(u.createElement("div",{key:A,className:f()("advanced-cropper-stencil-grid__cell",0===w&&"advanced-cropper-stencil-grid__cell--top",w===p-1&&"advanced-cropper-stencil-grid__cell--bottom",0===A&&"advanced-cropper-stencil-grid__cell--left",A===d-1&&"advanced-cropper-stencil-grid__cell--right")}));c.push(u.createElement("div",{key:w,className:"advanced-cropper-stencil-grid__row"},b))}return u.createElement("div",{className:f()("advanced-cropper-stencil-grid",a&&"advanced-cropper-stencil-grid--visible",s)},c)},Xe=(0,u.forwardRef)((function(t,e){var i=t.cropper,r=t.coordinates,n=t.aspectRatio,o=t.minAspectRatio,a=t.maxAspectRatio,s=t.handlerComponent,c=void 0===s?We:s,l=t.handlers,h=void 0===l?{eastNorth:!0,north:!0,westNorth:!0,west:!0,westSouth:!0,south:!0,eastSouth:!0,east:!0}:l,d=t.handlerClassNames,v=void 0===d?{}:d,m=t.handlerWrapperClassNames,p=void 0===m?{}:m,g=t.lines,b=void 0===g?{west:!0,north:!0,east:!0,south:!0}:g,A=t.lineComponent,y=void 0===A?Be:A,E=t.lineClassNames,x=void 0===E?{}:E,C=t.lineWrapperClassNames,M=void 0===C?{}:C,S=t.resizable,R=void 0===S||S,z=t.movable,P=void 0===z||z,I=t.grid,N=t.gridClassName,H=t.className,U=t.movingClassName,_=t.resizingClassName,B=t.previewClassName,F=t.boundingBoxClassName,W=t.overlayClassName,T=t.draggableAreaClassName,O=i.getState(),L=i.getTransitions(),D=i.getInteractions();(0,u.useImperativeHandle)(e,(function(){return{aspectRatio:ct(n||{minimum:o,maximum:a})}}));var Q=r?w(r)?r(O):r:gt(O),k=Q.width,j=Q.height,X=Q.left,Y=Q.top;return O&&u.createElement(ke,{className:f()("advanced-cropper-rectangle-stencil",H,D.moveCoordinates&&U,D.resizeCoordinates&&_,{"advanced-cropper-rectangle-stencil--movable":P,"advanced-cropper-rectangle-stencil--moving":D.moveCoordinates,"advanced-cropper-rectangle-stencil--resizable":R,"advanced-cropper-rectangle-stencil--resizing":D.resizeCoordinates}),width:k,height:j,left:X,top:Y,transitions:L},u.createElement(Le,{reference:O.coordinates,className:f()(F,"advanced-cropper-rectangle-stencil__bounding-box"),handlers:h,handlerComponent:c,handlerClassNames:v,handlerWrapperClassNames:p,lines:b,lineComponent:y,lineClassNames:x,lineWrapperClassNames:M,onResize:function(t,e,r){i&&R&&i.resizeCoordinates(t,e,r)},onResizeEnd:function(){i&&i.resizeCoordinatesEnd()},disabled:!R},u.createElement(Ue,{disabled:!P,onMove:function(t){i&&P&&i.moveCoordinates(t)},onMoveEnd:function(){i&&i.moveCoordinatesEnd()},className:f()("advanced-cropper-rectangle-stencil__draggable-area",T)},u.createElement(De,{className:f()("advanced-cropper-rectangle-stencil__overlay",W)},I&&u.createElement(je,{visible:i.hasInteractions(),columns:D.transformImage.rotate?9:3,rows:D.transformImage.rotate?9:3,className:f()("advanced-cropper-rectangle-stencil__grid",N)}),u.createElement("div",{className:f()("advanced-cropper-rectangle-stencil__preview",B)})))))}));Xe.displayName="RectangleStencil";var Ye,Ze=function(){function t(t){var e=t.active;this.active=e,this.defaultPrevented=!1}return t.prototype.preventDefault=function(){this.defaultPrevented=!0},t}(),Ve=function(t){function e(e){var i=t.call(this,e)||this;return i.processMove=function(t){var e=i.props,r=e.onTransform,n=e.touchScale,o=e.touchMove,a=e.touchRotate,s=i.container.current;s&&r&&(r(function(t,e,i,r){var n,o,a;if(void 0===r&&(r={}),1===e.length&&1===t.length)r.move&&(n={left:e[0].clientX-t[0].clientX,top:e[0].clientY-t[0].clientY});else if(t.length>1){var s=Yt(e,i),c=Yt(t,i);if(r.rotate&&2===e.length&&2===t.length){var l={left:[t[0].clientX-t[1].clientX,e[0].clientX-e[1].clientX],top:[t[0].clientY-t[1].clientY,e[0].clientY-e[1].clientY]},h=l.left[0]*l.top[1]-l.left[1]*l.top[0],u=l.left[0]*l.left[1]+l.top[0]*l.top[1];if(!z(u,0)&&!z(h,0)){var d=-180*Math.atan2(h,u)/Math.PI;a={center:c.centerMass,angle:d}}}r.move&&(n={left:s.centerMass.left-c.centerMass.left,top:s.centerMass.top-c.centerMass.top}),r.scale&&(o={factor:c.spread/s.spread,center:c.centerMass})}return{move:n,scale:o,rotate:a}}(t,i.touches,s,{scale:n,rotate:a,move:o})),i.touches=t)},i.processEnd=function(){var t=i.props.onTransformEnd;i.transforming&&(i.transforming=!1,t&&t())},i.processStart=function(){i.transforming=!0,i.debouncedProcessEnd.clear()},i.processEvent=function(t){var e=i.props,r=e.onEvent,n=e.disabled,o=new Ze({active:i.transforming});return r?r(o,t):(t.preventDefault(),t.stopPropagation()),!n&&!o.defaultPrevented},i.onWheel=function(t){var e=i.props,r=e.onTransform,n=e.wheelScale,o=i.container.current;n&&i.processEvent(t)&&(i.processStart(),r&&o&&r(Zt(t,o,!0===n?.1:n.ratio)),i.touches.length||i.debouncedProcessEnd())},i.onTouchStart=function(t){var e=i.props,r=e.touchMove,n=e.touchScale,o=e.touchRotate;if(t.cancelable&&(r||(n||o)&&t.touches.length>1)&&i.processEvent(t)){var a=i.container.current;if(a){var s=a.getBoundingClientRect(),c=s.left,l=s.top,h=s.bottom,u=s.right;i.touches=Array.from(t.touches).filter((function(t){return t.clientX>c&&t.clientX<u&&t.clientY>l&&t.clientY<h}))}}},i.onTouchEnd=function(t){0===t.touches.length&&(i.touches=[],i.processEnd())},i.onTouchMove=function(t){if(i.touches.length){var e=h([],l(t.touches),!1).filter((function(t){return!t.identifier||i.touches.find((function(e){return e.identifier===t.identifier}))}));i.processEvent(t)&&(i.processMove(e),i.processStart())}},i.onMouseDown=function(t){if(i.props.mouseMove&&"buttons"in t&&1===t.buttons&&i.processEvent(t)){var e={clientX:t.clientX,clientY:t.clientY};i.touches=[e],i.processStart()}},i.onMouseMove=function(t){i.touches.length&&i.processEvent(t)&&i.processMove([{clientX:t.clientX,clientY:t.clientY}])},i.onMouseUp=function(){i.touches=[],i.processEnd()},i.transforming=!1,i.touches=[],i.anchor={left:0,top:0},i.container=(0,u.createRef)(),i.debouncedProcessEnd=B(i.processEnd,e.timeout),i}return n(e,t),e.prototype.shouldComponentUpdate=function(){return!0},e.prototype.componentWillUnmount=function(){window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("touchend",this.onTouchEnd);var t=this.container.current;t&&(t.removeEventListener("touchstart",this.onTouchStart),t.removeEventListener("mousedown",this.onMouseDown),t.removeEventListener("wheel",this.onWheel))},e.prototype.componentDidMount=function(){window.addEventListener("mouseup",this.onMouseUp,{passive:!1}),window.addEventListener("mousemove",this.onMouseMove,{passive:!1}),window.addEventListener("touchmove",this.onTouchMove,{passive:!1}),window.addEventListener("touchend",this.onTouchEnd,{passive:!1});var t=this.container.current;t&&(t.addEventListener("touchstart",this.onTouchStart,{passive:!1}),t.addEventListener("mousedown",this.onMouseDown,{passive:!1}),t.addEventListener("wheel",this.onWheel,{passive:!1}))},e.prototype.render=function(){var t=this.props,e=t.className,i=t.children,r=t.style;return u.createElement("div",{className:e,style:r,ref:this.container},i)},e.defaultProps={touchMove:!0,mouseMove:!0,touchScale:!0,touchRotate:!1,wheelScale:!0,timeout:500},e}(u.Component),qe=function(t){var e=t.scaleImage,i=void 0===e||e,r=t.moveImage,n=void 0===r||r,o=t.rotateImage,a=void 0!==o&&o,s=t.children,c=t.className,l=t.style,h=t.cropper,d=t.timeout,f=h.getTransitions(),v=function(t){return(0,u.useMemo)((function(){return y(t,{touch:!0},{touch:!1})}),[t])}(a),m=function(t){return(0,u.useMemo)((function(){return y(t,{touch:!0,wheel:{ratio:.1}},{touch:!1,wheel:!1})}),[t])}(i),p=function(t){return(0,u.useMemo)((function(){return y(t,{touch:!0,mouse:!0},{touch:!1,mouse:!1})}),[t])}(n);return u.createElement(Ve,{className:c,style:l,onTransform:h.transformImage,onTransformEnd:h.transformImageEnd,touchMove:p.touch,mouseMove:p.mouse,touchScale:m.touch,wheelScale:m.wheel,touchRotate:v.touch,disabled:f.active,timeout:d},s)},Ge=(Ye=function(t,e){var i=t.style,r=t.className,n=t.stencilComponent,s=void 0===n?Xe:n,c=t.stencilConstraints,l=void 0===c?ie:c,h=t.stencilProps,d=void 0===h?{}:h,v=t.wrapperComponent,m=void 0===v?Pe:v,p=t.wrapperProps,g=void 0===p?{}:p,w=t.backgroundComponent,b=void 0===w?Ne:w,A=t.backgroundProps,y=void 0===A?{}:A,E=t.backgroundClassName,x=t.backgroundWrapperComponent,C=void 0===x?qe:x,M=t.backgroundWrapperProps,S=void 0===M?{}:M,R=t.boundaryComponent,z=void 0===R?Re:R,P=t.boundaryProps,I=t.boundaryClassName,N=t.canvas,H=void 0===N||N,U=t.crossOrigin,_=void 0===U||U,B=t.settings,F=a(t,["style","className","stencilComponent","stencilConstraints","stencilProps","wrapperComponent","wrapperProps","backgroundComponent","backgroundProps","backgroundClassName","backgroundWrapperComponent","backgroundWrapperProps","boundaryComponent","boundaryProps","boundaryClassName","canvas","crossOrigin","settings"]),W=(0,u.useRef)(null),T=Se((function(){return o(o({},F),{crossOrigin:_,stencilProps:d,canvas:H,settings:o(o({},B),l(B,o(o({},d),W.current)))})})),O=T.cropper,L=T.image,D=T.refs,Q=s,k=m,j=C,X=b,Y=z;(0,u.useImperativeHandle)(e,(function(){return O}));var Z={loading:O.isLoading(),loaded:O.isLoaded()};return u.createElement(k,o({},g,{className:f()("advanced-cropper",r),cropper:O,style:i},Z),u.createElement(Y,o({},P,{ref:D.boundary,className:f()("advanced-cropper__boundary",I)}),u.createElement(j,o({},S,{cropper:O,className:"advanced-cropper__background-wrapper"}),O.getState()&&u.createElement(X,o({},y,{ref:D.image,crossOrigin:_,cropper:O,className:f()("advanced-cropper__background",E)})),u.createElement(Q,o({},d,{ref:W,cropper:O,image:L}))),H&&u.createElement(He,{ref:D.canvas})))},(0,u.forwardRef)(Ye)),Ke=["transformImage","moveCoordinates","resizeCoordinates","defaultCoordinates","defaultVisibleArea","areaPositionRestrictions","areaSizeRestrictions","sizeRestrictions","positionRestrictions","aspectRatio","minWidth","minHeight","maxWidth","maxHeight","defaultSize","defaultPosition","defaultTransforms","imageRestriction","priority"];function $e(t,e){void 0===e&&(e=Ke);var i={settings:{},props:{}};return Object.keys(t).forEach((function(r){e.some((function(t){return t===r}))?i.settings[r]=t[r]:i.props[r]=t[r]})),i}function Je(t,e){var i=ie({},e);return{stencilSize:function(e,r){var n,a,s=w(t.stencilSize)?t.stencilSize(e,r):t.stencilSize;return St(o(o({},s),{aspectRatio:(n=i.aspectRatio,a=ct(G(s)),a?n?{minimum:Math.min(n.maximum,Math.max(n.minimum,a.minimum)),maximum:Math.max(n.minimum,Math.min(n.maximum,a.maximum))}:a:n)}))}}}function ti(t,e){var i=t.boundary,r=w(e.stencilSize)?e.stencilSize(t,e):e.stencilSize;return(r.width>i.width||r.height>i.height)&&(r=St({sizeRestrictions:{maxWidth:i.width,maxHeight:i.height,minWidth:0,minHeight:0},width:r.width,height:r.height,aspectRatio:{minimum:G(r),maximum:G(r)}})),r}function ei(t,e){var i=ti(t,o(o({},e),{stencilSize:e.stencilSize})),r=dt(t,e);return{maxWidth:r.maxWidth*i.width/t.boundary.width,maxHeight:r.maxHeight*i.height/t.boundary.height,minWidth:0,minHeight:0}}function ii(t,e){var i,r,n=t.imageSize,o=t.visibleArea,a=t.boundary,s=vt(t,e),c=wt(t,e),l=w(e.stencilSize)?e.stencilSize(t,e):e.stencilSize,h=o||n;return G(h)>G(a)?r=(i=l.height*h.height/a.height)*G(l):i=(r=l.width*h.width/a.width)/G(l),St({width:r,height:i,aspectRatio:c,sizeRestrictions:s})}function ri(t,e){var i=G(ti(t,e));return{minimum:i,maximum:i}}function ni(t,e,i){return i&&i.immediately?function(t,e){if(ut(t)){var i=Mt(t),r=ti(t,e);i.visibleArea=q(i.visibleArea,i.coordinates.width*i.boundary.width/(i.visibleArea.width*r.width));var n=J(i.visibleArea,dt(i,e));return 1!==n&&(i.visibleArea=q(i.visibleArea,n),i.coordinates=q(i.coordinates,n)),i.visibleArea=Z(i.visibleArea,Q(k(i.coordinates),k(i.visibleArea))),i.visibleArea=st(i.visibleArea,ft(i,e)),i.coordinates=st(i.coordinates,ot(V(i.visibleArea),ft(i,e))),i}return t}(t,e):t}var oi=(0,u.forwardRef)((function(t,e){var i=$e(t,h(h([],l(Ke),!1),["stencilSize"],!1));return u.createElement(Ge,o({postProcess:ni,stencilConstraints:Je},i.props,{settings:o(o({defaultSize:ii,aspectRatio:ri,sizeRestrictions:re(ei)},i.settings),{transformImage:o(o({},i.settings.transformImage),{adjustStencil:!1})}),ref:e}))}));oi.displayName="FixedCropper";var ai=(0,u.forwardRef)((function(t,e){var i=$e(t),r=i.props,n=i.settings,s=n.stencilSize,c=n.autoZoom,l=a(n,["stencilSize","autoZoom"]),h=Ae();return b(c)||(r.postProcess||s?h("prop 'autoZoom' is deprecated now and will be removed, use 'postProcess' prop to pass your auto zoom function."):(h("prop 'autoZoom' is deprecated now and will be removed, use 'postProcess' prop to pass your auto zoom function. The 'postProcess' automatically set to 'hybridAutoZoom'"),r.postProcess=be)),b(s)?u.createElement(Ge,o({},r,{ref:e,settings:l})):(h("prop 'stencilSize' is deprecated for <Cropper/> component now and will be removed, use <FixedCropper/> component instead."),u.createElement(oi,o({ref:e,stencilSize:s},l,r)))}));ai.displayName="CropperComponent",(0,u.forwardRef)((function(t,e){var i=t.cropper,r=t.coordinates,n=t.handlerComponent,o=void 0===n?We:n,a=t.handlers,s=void 0===a?{eastNorth:!0,westNorth:!0,westSouth:!0,eastSouth:!0}:a,c=t.handlerClassNames,l=void 0===c?{}:c,h=t.handlerWrapperClassNames,d=void 0===h?{}:h,v=t.lines,m=void 0===v?{west:!0,north:!0,east:!0,south:!0}:v,p=t.lineComponent,g=void 0===p?Be:p,b=t.lineClassNames,A=void 0===b?{}:b,y=t.lineWrapperClassNames,E=void 0===y?{}:y,x=t.resizable,C=void 0===x||x,M=t.movable,S=void 0===M||M,R=t.grid,z=t.gridClassName,P=t.className,I=t.movingClassName,N=t.resizingClassName,H=t.previewClassName,U=t.boundingBoxClassName,_=t.overlayClassName,B=t.draggableAreaClassName,F=i.getState(),W=i.getTransitions(),T=i.getInteractions();(0,u.useImperativeHandle)(e,(function(){return{aspectRatio:1,boundingBox:"circle"}}));var O=r?w(r)?r(F):r:gt(F),L=O.width,D=O.height,Q=O.left,k=O.top;return F&&u.createElement(ke,{className:f()("advanced-cropper-circle-stencil",P,T.moveCoordinates&&I,T.resizeCoordinates&&N,{"advanced-cropper-circle-stencil--movable":S,"advanced-cropper-circle-stencil--moving":T.moveCoordinates,"advanced-cropper-circle-stencil--resizable":C,"advanced-cropper-circle-stencil--resizing":T.resizeCoordinates}),width:L,height:D,left:Q,top:k,transitions:W},u.createElement(Le,{reference:F.coordinates,className:f()(U,"advanced-cropper-circle-stencil__bounding-box"),handlers:s,handlerComponent:o,handlerClassNames:l,handlerWrapperClassNames:d,lines:m,lineComponent:g,lineClassNames:A,lineWrapperClassNames:E,onResize:function(t,e,r){i&&C&&i.resizeCoordinates(t,e,r)},onResizeEnd:function(){i&&i.resizeCoordinatesEnd()},disabled:!C},u.createElement(Ue,{disabled:!S,onMove:function(t){i&&S&&i.moveCoordinates(t)},onMoveEnd:function(){i&&i.moveCoordinatesEnd()},className:f()("advanced-cropper-circle-stencil__draggable-area",B)},u.createElement(De,{className:f()("advanced-cropper-circle-stencil__overlay",_)},R&&u.createElement(je,{visible:i.hasInteractions(),columns:T.transformImage.rotate?9:3,rows:T.transformImage.rotate?9:3,className:f()("advanced-cropper-circle-stencil__grid",z)}),u.createElement("div",{className:f()("advanced-cropper-circle-stencil__preview",H)})))))})).displayName="CircleStencil",(0,u.forwardRef)((function(t,e){var i=t.src,r=t.crossOrigin,n=void 0===r||r,s=a(t,["src","crossOrigin"]);return i?u.createElement("img",o({key:i,ref:e,src:i,className:f()("advanced-cropper-source"),crossOrigin:!0===n?"anonymous":n||void 0},s)):null})).displayName="CropperSource";var si=function(t){var e=t.children,i=t.cropper,r=t.className,n=t.style;return u.createElement("div",{className:f()(r,"cropper-preview-wrapper"),style:n},u.createElement(ze,{visible:null===i||void 0===i?void 0:i.isLoaded(),className:"cropper-preview-wrapper__fade"},e))},ci=function(t){var e=t.className,i=t.cropper,r=t.crossOrigin,n=void 0===r||r,o=t.size,a=i.getState(),s=i.getTransitions(),c=i.getImage(),l=o&&c&&(null===a||void 0===a?void 0:a.coordinates)?function(t,e,i,r){return void 0===r&&(r=null),t&&e&&e.visibleArea&&e.coordinates?we(t,e,e.coordinates,G(e.coordinates)>G(i)?e.coordinates.width/i.width:e.coordinates.height/i.height,r):{}}(c,a,o,s):{},h=c?c.src:void 0;return h?u.createElement("img",{key:h,className:f()("advanced-cropper-background-image",e),src:h,crossOrigin:!0===n?"anonymous":n||void 0,style:l,onMouseDown:Ie}):null};(0,u.forwardRef)((function(t,e){var i,r,n,a,s=t.className,c=t.contentClassName,h=t.state,d=void 0===h?null:h,v=t.image,m=void 0===v?null:v,p=t.transitions,g=void 0===p?null:p,w=t.backgroundComponent,b=void 0===w?ci:w,A=t.backgroundProps,y=t.backgroundClassName,E=t.wrapperComponent,x=void 0===E?si:E,C=t.wrapperProps,M=t.loaded,S=void 0===M||M,R=t.loading,z=void 0!==R&&R,I=t.style,N=t.cropper,H=xe(),U=(0,u.useRef)(null),_=N||{current:{getState:function(){return d},getTransitions:function(){return g},getImage:function(){return m},isLoaded:function(){return S},isLoading:function(){return z}}},B=l((0,u.useState)(null),2),F=B[0],W=B[1],T=null===(r=null===(i=_.current)||void 0===i?void 0:i.getState())||void 0===r?void 0:r.coordinates,O=null===(a=null===(n=_.current)||void 0===n?void 0:n.getImage())||void 0===a?void 0:a.src,L=F?{width:"".concat(F.width,"px"),height:"".concat(F.height,"px")}:{},D=function(){U.current&&T&&U.current.stretchTo(T).then((function(t){t&&T?P(G(T),G(t))?W({width:t.width,height:t.width/G(T)}):W({width:t.height*G(T),height:t.height}):W(null)})),H()};Me(D),(0,u.useLayoutEffect)(D,[null===T||void 0===T?void 0:T.height,null===T||void 0===T?void 0:T.width]),(0,u.useImperativeHandle)(e,(function(){return{refresh:H}}));var Q=x,k=b;return u.createElement(Q,o({},C,{className:f()(s,"advanced-cropper-preview"),cropper:_.current,style:I}),u.createElement(Re,{ref:U,className:"advanced-cropper-preview__boundary",contentClassName:"advanced-cropper-preview__boundary-content",stretchAlgorithm:de},u.createElement("div",{className:f()(c,"advanced-cropper-preview__content"),style:L},_.current&&u.createElement(k,o({},A,{cropper:_.current,size:F,className:f()(y,"advanced-cropper-preview__image",O&&"advanced-cropper-preview__image--visible")})))))}))},7984:function(t,e,i){"use strict";i.d(e,{Z:function(){return O}});var r,n=i(1413),o=i(9439),a=i(4942);function s(t,e){return new Promise((function(i,r){var n;return c(t).then((function(t){try{return n=t,i(new Blob([e.slice(0,2),n,e.slice(2)],{type:"image/jpeg"}))}catch(t){return r(t)}}),r)}))}var c=function(t){return new Promise((function(e,i){var r=new FileReader;r.addEventListener("load",(function(t){var r=t.target.result,n=new DataView(r),o=0;if(65496!==n.getUint16(o))return i("not a valid JPEG");for(o+=2;;){var a=n.getUint16(o);if(65498===a)break;var s=n.getUint16(o+2);if(65505===a&&1165519206===n.getUint32(o+4)){var c=o+10,l=void 0;switch(n.getUint16(c)){case 18761:l=!0;break;case 19789:l=!1;break;default:return i("TIFF header contains invalid endian")}if(42!==n.getUint16(c+2,l))return i("TIFF header contains invalid version");for(var h=n.getUint32(c+4,l),u=c+h+2+12*n.getUint16(c+h,l),d=c+h+2;d<u;d+=12)if(274==n.getUint16(d,l)){if(3!==n.getUint16(d+2,l))return i("Orientation data type is invalid");if(1!==n.getUint32(d+4,l))return i("Orientation data count is invalid");n.setUint16(d+8,1,l);break}return e(r.slice(o,o+2+s))}o+=2+s}return e(new Blob)})),r.readAsArrayBuffer(t)}))},l={},h={get exports(){return l},set exports(t){l=t}};!function(t){var e,i,r={};h.exports=r,r.parse=function(t,e){for(var i=r.bin.readUshort,n=r.bin.readUint,o=0,a={},s=new Uint8Array(t),c=s.length-4;101010256!=n(s,c);)c--;o=c,o+=4;var l=i(s,o+=4);i(s,o+=2);var h=n(s,o+=2),u=n(s,o+=4);o+=4,o=u;for(var d=0;d<l;d++){n(s,o),o+=4,o+=4,o+=4,n(s,o+=4),h=n(s,o+=4);var f=n(s,o+=4),v=i(s,o+=4),m=i(s,o+2),p=i(s,o+4);o+=6;var g=n(s,o+=8);o+=4,o+=v+m+p,r._readLocal(s,g,a,h,f,e)}return a},r._readLocal=function(t,e,i,n,o,a){var s=r.bin.readUshort,c=r.bin.readUint;c(t,e),s(t,e+=4),s(t,e+=2);var l=s(t,e+=2);c(t,e+=2),c(t,e+=4),e+=4;var h=s(t,e+=8),u=s(t,e+=2);e+=2;var d=r.bin.readUTF8(t,e,h);if(e+=h,e+=u,a)i[d]={size:o,csize:n};else{var f=new Uint8Array(t.buffer,e);if(0==l)i[d]=new Uint8Array(f.buffer.slice(e,e+n));else{if(8!=l)throw"unknown compression method: "+l;var v=new Uint8Array(o);r.inflateRaw(f,v),i[d]=v}}},r.inflateRaw=function(t,e){return r.F.inflate(t,e)},r.inflate=function(t,e){return t[0],t[1],r.inflateRaw(new Uint8Array(t.buffer,t.byteOffset+2,t.length-6),e)},r.deflate=function(t,e){null==e&&(e={level:6});var i=0,n=new Uint8Array(50+Math.floor(1.1*t.length));n[i]=120,n[i+1]=156,i+=2,i=r.F.deflateRaw(t,n,i,e.level);var o=r.adler(t,0,t.length);return n[i+0]=o>>>24&255,n[i+1]=o>>>16&255,n[i+2]=o>>>8&255,n[i+3]=o>>>0&255,new Uint8Array(n.buffer,0,i+4)},r.deflateRaw=function(t,e){null==e&&(e={level:6});var i=new Uint8Array(50+Math.floor(1.1*t.length)),n=r.F.deflateRaw(t,i,n,e.level);return new Uint8Array(i.buffer,0,n)},r.encode=function(t,e){null==e&&(e=!1);var i=0,n=r.bin.writeUint,o=r.bin.writeUshort,a={};for(var s in t){var c=!r._noNeed(s)&&!e,l=t[s],h=r.crc.crc(l,0,l.length);a[s]={cpr:c,usize:l.length,crc:h,file:c?r.deflateRaw(l):l}}for(var s in a)i+=a[s].file.length+30+46+2*r.bin.sizeUTF8(s);i+=22;var u=new Uint8Array(i),d=0,f=[];for(var s in a){var v=a[s];f.push(d),d=r._writeHeader(u,d,s,v,0)}var m=0,p=d;for(var s in a)v=a[s],f.push(d),d=r._writeHeader(u,d,s,v,1,f[m++]);var g=d-p;return n(u,d,101010256),d+=4,o(u,d+=4,m),o(u,d+=2,m),n(u,d+=2,g),n(u,d+=4,p),d+=4,d+=2,u.buffer},r._noNeed=function(t){var e=t.split(".").pop().toLowerCase();return-1!="png,jpg,jpeg,zip".indexOf(e)},r._writeHeader=function(t,e,i,n,o,a){var s=r.bin.writeUint,c=r.bin.writeUshort,l=n.file;return s(t,e,0==o?67324752:33639248),e+=4,1==o&&(e+=2),c(t,e,20),c(t,e+=2,0),c(t,e+=2,n.cpr?8:0),s(t,e+=2,0),s(t,e+=4,n.crc),s(t,e+=4,l.length),s(t,e+=4,n.usize),c(t,e+=4,r.bin.sizeUTF8(i)),c(t,e+=2,0),e+=2,1==o&&(e+=2,e+=2,s(t,e+=6,a),e+=4),e+=r.bin.writeUTF8(t,e,i),0==o&&(t.set(l,e),e+=l.length),e},r.crc={table:function(){for(var t=new Uint32Array(256),e=0;e<256;e++){for(var i=e,r=0;r<8;r++)1&i?i=3988292384^i>>>1:i>>>=1;t[e]=i}return t}(),update:function(t,e,i,n){for(var o=0;o<n;o++)t=r.crc.table[255&(t^e[i+o])]^t>>>8;return t},crc:function(t,e,i){return 4294967295^r.crc.update(4294967295,t,e,i)}},r.adler=function(t,e,i){for(var r=1,n=0,o=e,a=e+i;o<a;){for(var s=Math.min(o+5552,a);o<s;)n+=r+=t[o++];r%=65521,n%=65521}return n<<16|r},r.bin={readUshort:function(t,e){return t[e]|t[e+1]<<8},writeUshort:function(t,e,i){t[e]=255&i,t[e+1]=i>>8&255},readUint:function(t,e){return 16777216*t[e+3]+(t[e+2]<<16|t[e+1]<<8|t[e])},writeUint:function(t,e,i){t[e]=255&i,t[e+1]=i>>8&255,t[e+2]=i>>16&255,t[e+3]=i>>24&255},readASCII:function(t,e,i){for(var r="",n=0;n<i;n++)r+=String.fromCharCode(t[e+n]);return r},writeASCII:function(t,e,i){for(var r=0;r<i.length;r++)t[e+r]=i.charCodeAt(r)},pad:function(t){return t.length<2?"0"+t:t},readUTF8:function(t,e,i){for(var n,o="",a=0;a<i;a++)o+="%"+r.bin.pad(t[e+a].toString(16));try{n=decodeURIComponent(o)}catch(n){return r.bin.readASCII(t,e,i)}return n},writeUTF8:function(t,e,i){for(var r=i.length,n=0,o=0;o<r;o++){var a=i.charCodeAt(o);if(0==(4294967168&a))t[e+n]=a,n++;else if(0==(4294965248&a))t[e+n]=192|a>>6,t[e+n+1]=128|a>>0&63,n+=2;else if(0==(4294901760&a))t[e+n]=224|a>>12,t[e+n+1]=128|a>>6&63,t[e+n+2]=128|a>>0&63,n+=3;else{if(0!=(4292870144&a))throw"e";t[e+n]=240|a>>18,t[e+n+1]=128|a>>12&63,t[e+n+2]=128|a>>6&63,t[e+n+3]=128|a>>0&63,n+=4}}return n},sizeUTF8:function(t){for(var e=t.length,i=0,r=0;r<e;r++){var n=t.charCodeAt(r);if(0==(4294967168&n))i++;else if(0==(4294965248&n))i+=2;else if(0==(4294901760&n))i+=3;else{if(0!=(4292870144&n))throw"e";i+=4}}return i}},r.F={},r.F.deflateRaw=function(t,e,i,n){var o=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][n],a=r.F.U,s=r.F._goodIndex;r.F._hash;var c=r.F._putsE,l=0,h=i<<3,u=0,d=t.length;if(0==n){for(;l<d;)c(e,h,l+(C=Math.min(65535,d-l))==d?1:0),h=r.F._copyExact(t,l,C,e,h+8),l+=C;return h>>>3}var f=a.lits,v=a.strt,m=a.prev,p=0,g=0,w=0,b=0,A=0,y=0;for(d>2&&(v[y=r.F._hash(t,0)]=0),l=0;l<d;l++){if(A=y,l+1<d-2){y=r.F._hash(t,l+1);var E=l+1&32767;m[E]=v[y],v[y]=E}if(u<=l){(p>14e3||g>26697)&&d-l>100&&(u<l&&(f[p]=l-u,p+=2,u=l),h=r.F._writeBlock(l==d-1||u==d?1:0,f,p,b,t,w,l-w,e,h),p=g=b=0,w=l);var x=0;l<d-2&&(x=r.F._bestMatch(t,l,m,A,Math.min(o[2],d-l),o[3]));var C=x>>>16,M=65535&x;if(0!=x){M=65535&x;var S=s(C=x>>>16,a.of0);a.lhst[257+S]++;var R=s(M,a.df0);a.dhst[R]++,b+=a.exb[S]+a.dxb[R],f[p]=C<<23|l-u,f[p+1]=M<<16|S<<8|R,p+=2,u=l+C}else a.lhst[t[l]]++;g++}}for(w==l&&0!=t.length||(u<l&&(f[p]=l-u,p+=2,u=l),h=r.F._writeBlock(1,f,p,b,t,w,l-w,e,h),p=0,g=0,p=g=b=0,w=l);0!=(7&h);)h++;return h>>>3},r.F._bestMatch=function(t,e,i,n,o,a){var s=32767&e,c=i[s],l=s-c+32768&32767;if(c==s||n!=r.F._hash(t,e-l))return 0;for(var h=0,u=0,d=Math.min(32767,e);l<=d&&0!=--a&&c!=s;){if(0==h||t[e+h]==t[e+h-l]){var f=r.F._howLong(t,e,l);if(f>h){if(u=l,(h=f)>=o)break;l+2<f&&(f=l+2);for(var v=0,m=0;m<f-2;m++){var p=e-l+m+32768&32767,g=p-i[p]+32768&32767;g>v&&(v=g,c=p)}}}l+=(s=c)-(c=i[s])+32768&32767}return h<<16|u},r.F._howLong=function(t,e,i){if(t[e]!=t[e-i]||t[e+1]!=t[e+1-i]||t[e+2]!=t[e+2-i])return 0;var r=e,n=Math.min(t.length,e+258);for(e+=3;e<n&&t[e]==t[e-i];)e++;return e-r},r.F._hash=function(t,e){return(t[e]<<8|t[e+1])+(t[e+2]<<4)&65535},r.saved=0,r.F._writeBlock=function(t,e,i,n,o,a,s,c,l){var h,u,d,f,v,m,p,g,w,b=r.F.U,A=r.F._putsF,y=r.F._putsE;b.lhst[256]++,u=(h=r.F.getTrees())[0],d=h[1],f=h[2],v=h[3],m=h[4],p=h[5],g=h[6],w=h[7];var E=32+(0==(l+3&7)?0:8-(l+3&7))+(s<<3),x=n+r.F.contSize(b.fltree,b.lhst)+r.F.contSize(b.fdtree,b.dhst),C=n+r.F.contSize(b.ltree,b.lhst)+r.F.contSize(b.dtree,b.dhst);C+=14+3*p+r.F.contSize(b.itree,b.ihst)+(2*b.ihst[16]+3*b.ihst[17]+7*b.ihst[18]);for(var M=0;M<286;M++)b.lhst[M]=0;for(M=0;M<30;M++)b.dhst[M]=0;for(M=0;M<19;M++)b.ihst[M]=0;var S=E<x&&E<C?0:x<C?1:2;if(A(c,l,t),A(c,l+1,S),l+=3,0==S){for(;0!=(7&l);)l++;l=r.F._copyExact(o,a,s,c,l)}else{var R,z;if(1==S&&(R=b.fltree,z=b.fdtree),2==S){r.F.makeCodes(b.ltree,u),r.F.revCodes(b.ltree,u),r.F.makeCodes(b.dtree,d),r.F.revCodes(b.dtree,d),r.F.makeCodes(b.itree,f),r.F.revCodes(b.itree,f),R=b.ltree,z=b.dtree,y(c,l,v-257),y(c,l+=5,m-1),y(c,l+=5,p-4),l+=4;for(var P=0;P<p;P++)y(c,l+3*P,b.itree[1+(b.ordr[P]<<1)]);l+=3*p,l=r.F._codeTiny(g,b.itree,c,l),l=r.F._codeTiny(w,b.itree,c,l)}for(var I=a,N=0;N<i;N+=2){for(var H=e[N],U=H>>>23,_=I+(8388607&H);I<_;)l=r.F._writeLit(o[I++],R,c,l);if(0!=U){var B=e[N+1],F=B>>16,W=B>>8&255,T=255&B;y(c,l=r.F._writeLit(257+W,R,c,l),U-b.of0[W]),l+=b.exb[W],A(c,l=r.F._writeLit(T,z,c,l),F-b.df0[T]),l+=b.dxb[T],I+=U}}l=r.F._writeLit(256,R,c,l)}return l},r.F._copyExact=function(t,e,i,r,n){var o=n>>>3;return r[o]=i,r[o+1]=i>>>8,r[o+2]=255-r[o],r[o+3]=255-r[o+1],o+=4,r.set(new Uint8Array(t.buffer,e,i),o),n+(i+4<<3)},r.F.getTrees=function(){for(var t=r.F.U,e=r.F._hufTree(t.lhst,t.ltree,15),i=r.F._hufTree(t.dhst,t.dtree,15),n=[],o=r.F._lenCodes(t.ltree,n),a=[],s=r.F._lenCodes(t.dtree,a),c=0;c<n.length;c+=2)t.ihst[n[c]]++;for(c=0;c<a.length;c+=2)t.ihst[a[c]]++;for(var l=r.F._hufTree(t.ihst,t.itree,7),h=19;h>4&&0==t.itree[1+(t.ordr[h-1]<<1)];)h--;return[e,i,l,o,s,h,n,a]},r.F.getSecond=function(t){for(var e=[],i=0;i<t.length;i+=2)e.push(t[i+1]);return e},r.F.nonZero=function(t){for(var e="",i=0;i<t.length;i+=2)0!=t[i+1]&&(e+=(i>>1)+",");return e},r.F.contSize=function(t,e){for(var i=0,r=0;r<e.length;r++)i+=e[r]*t[1+(r<<1)];return i},r.F._codeTiny=function(t,e,i,n){for(var o=0;o<t.length;o+=2){var a=t[o],s=t[o+1];n=r.F._writeLit(a,e,i,n);var c=16==a?2:17==a?3:7;a>15&&(r.F._putsE(i,n,s,c),n+=c)}return n},r.F._lenCodes=function(t,e){for(var i=t.length;2!=i&&0==t[i-1];)i-=2;for(var r=0;r<i;r+=2){var n=t[r+1],o=r+3<i?t[r+3]:-1,a=r+5<i?t[r+5]:-1,s=0==r?-1:t[r-1];if(0==n&&o==n&&a==n){for(var c=r+5;c+2<i&&t[c+2]==n;)c+=2;(l=Math.min(c+1-r>>>1,138))<11?e.push(17,l-3):e.push(18,l-11),r+=2*l-2}else if(n==s&&o==n&&a==n){for(c=r+5;c+2<i&&t[c+2]==n;)c+=2;var l=Math.min(c+1-r>>>1,6);e.push(16,l-3),r+=2*l-2}else e.push(n,0)}return i>>>1},r.F._hufTree=function(t,e,i){var n=[],o=t.length,a=e.length,s=0;for(s=0;s<a;s+=2)e[s]=0,e[s+1]=0;for(s=0;s<o;s++)0!=t[s]&&n.push({lit:s,f:t[s]});var c=n.length,l=n.slice(0);if(0==c)return 0;if(1==c){var h=n[0].lit;return l=0==h?1:0,e[1+(h<<1)]=1,e[1+(l<<1)]=1,1}n.sort((function(t,e){return t.f-e.f}));var u=n[0],d=n[1],f=0,v=1,m=2;for(n[0]={lit:-1,f:u.f+d.f,l:u,r:d,d:0};v!=c-1;)u=f!=v&&(m==c||n[f].f<n[m].f)?n[f++]:n[m++],d=f!=v&&(m==c||n[f].f<n[m].f)?n[f++]:n[m++],n[v++]={lit:-1,f:u.f+d.f,l:u,r:d};var p=r.F.setDepth(n[v-1],0);for(p>i&&(r.F.restrictDepth(l,i,p),p=i),s=0;s<c;s++)e[1+(l[s].lit<<1)]=l[s].d;return p},r.F.setDepth=function(t,e){return-1!=t.lit?(t.d=e,e):Math.max(r.F.setDepth(t.l,e+1),r.F.setDepth(t.r,e+1))},r.F.restrictDepth=function(t,e,i){var r=0,n=1<<i-e,o=0;for(t.sort((function(t,e){return e.d==t.d?t.f-e.f:e.d-t.d})),r=0;r<t.length&&t[r].d>e;r++){var a=t[r].d;t[r].d=e,o+=n-(1<<i-a)}for(o>>>=i-e;o>0;)(a=t[r].d)<e?(t[r].d++,o-=1<<e-a-1):r++;for(;r>=0;r--)t[r].d==e&&o<0&&(t[r].d--,o++);0!=o&&console.log("debt left")},r.F._goodIndex=function(t,e){var i=0;return e[16|i]<=t&&(i|=16),e[8|i]<=t&&(i|=8),e[4|i]<=t&&(i|=4),e[2|i]<=t&&(i|=2),e[1|i]<=t&&(i|=1),i},r.F._writeLit=function(t,e,i,n){return r.F._putsF(i,n,e[t<<1]),n+e[1+(t<<1)]},r.F.inflate=function(t,e){var i=Uint8Array;if(3==t[0]&&0==t[1])return e||new i(0);var n=r.F,o=n._bitsF,a=n._bitsE,s=n._decodeTiny,c=n.makeCodes,l=n.codes2map,h=n._get17,u=n.U,d=null==e;d&&(e=new i(t.length>>>2<<3));for(var f,v,m=0,p=0,g=0,w=0,b=0,A=0,y=0,E=0,x=0;0==m;)if(m=o(t,x,1),p=o(t,x+1,2),x+=3,0!=p){if(d&&(e=r.F._check(e,E+(1<<17))),1==p&&(f=u.flmap,v=u.fdmap,A=511,y=31),2==p){g=a(t,x,5)+257,w=a(t,x+5,5)+1,b=a(t,x+10,4)+4,x+=14;for(var C=0;C<38;C+=2)u.itree[C]=0,u.itree[C+1]=0;var M=1;for(C=0;C<b;C++){var S=a(t,x+3*C,3);u.itree[1+(u.ordr[C]<<1)]=S,S>M&&(M=S)}x+=3*b,c(u.itree,M),l(u.itree,M,u.imap),f=u.lmap,v=u.dmap,x=s(u.imap,(1<<M)-1,g+w,t,x,u.ttree);var R=n._copyOut(u.ttree,0,g,u.ltree);A=(1<<R)-1;var z=n._copyOut(u.ttree,g,w,u.dtree);y=(1<<z)-1,c(u.ltree,R),l(u.ltree,R,f),c(u.dtree,z),l(u.dtree,z,v)}for(;;){var P=f[h(t,x)&A];x+=15&P;var I=P>>>4;if(I>>>8==0)e[E++]=I;else{if(256==I)break;var N=E+I-254;if(I>264){var H=u.ldef[I-257];N=E+(H>>>3)+a(t,x,7&H),x+=7&H}var U=v[h(t,x)&y];x+=15&U;var _=U>>>4,B=u.ddef[_],F=(B>>>4)+o(t,x,15&B);for(x+=15&B,d&&(e=r.F._check(e,E+(1<<17)));E<N;)e[E]=e[E++-F],e[E]=e[E++-F],e[E]=e[E++-F],e[E]=e[E++-F];E=N}}}else{0!=(7&x)&&(x+=8-(7&x));var W=4+(x>>>3),T=t[W-4]|t[W-3]<<8;d&&(e=r.F._check(e,E+T)),e.set(new i(t.buffer,t.byteOffset+W,T),E),x=W+T<<3,E+=T}return e.length==E?e:e.slice(0,E)},r.F._check=function(t,e){var i=t.length;if(e<=i)return t;var r=new Uint8Array(Math.max(i<<1,e));return r.set(t,0),r},r.F._decodeTiny=function(t,e,i,n,o,a){for(var s=r.F._bitsE,c=r.F._get17,l=0;l<i;){var h=t[c(n,o)&e];o+=15&h;var u=h>>>4;if(u<=15)a[l]=u,l++;else{var d=0,f=0;16==u?(f=3+s(n,o,2),o+=2,d=a[l-1]):17==u?(f=3+s(n,o,3),o+=3):18==u&&(f=11+s(n,o,7),o+=7);for(var v=l+f;l<v;)a[l]=d,l++}}return o},r.F._copyOut=function(t,e,i,r){for(var n=0,o=0,a=r.length>>>1;o<i;){var s=t[o+e];r[o<<1]=0,r[1+(o<<1)]=s,s>n&&(n=s),o++}for(;o<a;)r[o<<1]=0,r[1+(o<<1)]=0,o++;return n},r.F.makeCodes=function(t,e){for(var i,n,o,a,s=r.F.U,c=t.length,l=s.bl_count,h=0;h<=e;h++)l[h]=0;for(h=1;h<c;h+=2)l[t[h]]++;var u=s.next_code;for(i=0,l[0]=0,n=1;n<=e;n++)i=i+l[n-1]<<1,u[n]=i;for(o=0;o<c;o+=2)0!=(a=t[o+1])&&(t[o]=u[a],u[a]++)},r.F.codes2map=function(t,e,i){for(var n=t.length,o=r.F.U.rev15,a=0;a<n;a+=2)if(0!=t[a+1])for(var s=a>>1,c=t[a+1],l=s<<4|c,h=e-c,u=t[a]<<h,d=u+(1<<h);u!=d;)i[o[u]>>>15-e]=l,u++},r.F.revCodes=function(t,e){for(var i=r.F.U.rev15,n=15-e,o=0;o<t.length;o+=2){var a=t[o]<<e-t[o+1];t[o]=i[a]>>>n}},r.F._putsE=function(t,e,i){i<<=7&e;var r=e>>>3;t[r]|=i,t[r+1]|=i>>>8},r.F._putsF=function(t,e,i){i<<=7&e;var r=e>>>3;t[r]|=i,t[r+1]|=i>>>8,t[r+2]|=i>>>16},r.F._bitsE=function(t,e,i){return(t[e>>>3]|t[1+(e>>>3)]<<8)>>>(7&e)&(1<<i)-1},r.F._bitsF=function(t,e,i){return(t[e>>>3]|t[1+(e>>>3)]<<8|t[2+(e>>>3)]<<16)>>>(7&e)&(1<<i)-1},r.F._get17=function(t,e){return(t[e>>>3]|t[1+(e>>>3)]<<8|t[2+(e>>>3)]<<16)>>>(7&e)},r.F._get25=function(t,e){return(t[e>>>3]|t[1+(e>>>3)]<<8|t[2+(e>>>3)]<<16|t[3+(e>>>3)]<<24)>>>(7&e)},r.F.U=(e=Uint16Array,i=Uint32Array,{next_code:new e(16),bl_count:new e(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new e(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new i(32),flmap:new e(512),fltree:[],fdmap:new e(32),fdtree:[],lmap:new e(32768),ltree:[],ttree:[],dmap:new e(32768),dtree:[],imap:new e(512),itree:[],rev15:new e(32768),lhst:new i(286),dhst:new i(30),ihst:new i(19),lits:new i(15e3),strt:new e(65536),prev:new e(32768)}),function(){for(var t=r.F.U,e=0;e<32768;e++){var i=e;i=(4278255360&(i=(4042322160&(i=(3435973836&(i=(2863311530&i)>>>1|(1431655765&i)<<1))>>>2|(858993459&i)<<2))>>>4|(252645135&i)<<4))>>>8|(16711935&i)<<8,t.rev15[e]=(i>>>16|i<<16)>>>17}function n(t,e,i){for(;0!=e--;)t.push(0,i)}for(e=0;e<32;e++)t.ldef[e]=t.of0[e]<<3|t.exb[e],t.ddef[e]=t.df0[e]<<4|t.dxb[e];n(t.fltree,144,8),n(t.fltree,112,9),n(t.fltree,24,7),n(t.fltree,8,8),r.F.makeCodes(t.fltree,9),r.F.codes2map(t.fltree,9,t.flmap),r.F.revCodes(t.fltree,9),n(t.fdtree,32,5),r.F.makeCodes(t.fdtree,5),r.F.codes2map(t.fdtree,5,t.fdmap),r.F.revCodes(t.fdtree,5),n(t.itree,19,0),n(t.ltree,286,0),n(t.dtree,30,0),n(t.ttree,320,0)}()}();var u=function(t,e){return e.forEach((function(e){e&&"string"!=typeof e&&!Array.isArray(e)&&Object.keys(e).forEach((function(i){if("default"!==i&&!(i in t)){var r=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(t,i,r.get?r:{enumerable:!0,get:function(){return e[i]}})}}))})),Object.freeze(t)}({__proto__:null,default:l},[l]),d=function(){var t={nextZero:function(t,e){for(;0!=t[e];)e++;return e},readUshort:function(t,e){return t[e]<<8|t[e+1]},writeUshort:function(t,e,i){t[e]=i>>8&255,t[e+1]=255&i},readUint:function(t,e){return 16777216*t[e]+(t[e+1]<<16|t[e+2]<<8|t[e+3])},writeUint:function(t,e,i){t[e]=i>>24&255,t[e+1]=i>>16&255,t[e+2]=i>>8&255,t[e+3]=255&i},readASCII:function(t,e,i){for(var r="",n=0;n<i;n++)r+=String.fromCharCode(t[e+n]);return r},writeASCII:function(t,e,i){for(var r=0;r<i.length;r++)t[e+r]=i.charCodeAt(r)},readBytes:function(t,e,i){for(var r=[],n=0;n<i;n++)r.push(t[e+n]);return r},pad:function(t){return t.length<2?"0".concat(t):t},readUTF8:function(e,i,r){for(var n,o="",a=0;a<r;a++)o+="%".concat(t.pad(e[i+a].toString(16)));try{n=decodeURIComponent(o)}catch(n){return t.readASCII(e,i,r)}return n}};function e(e,i,r,n){var a=i*r,s=o(n),c=Math.ceil(i*s/8),l=new Uint8Array(4*a),h=new Uint32Array(l.buffer),u=n.ctype,d=n.depth,f=t.readUshort;if(6==u){var v=a<<2;if(8==d)for(var m=0;m<v;m+=4)l[m]=e[m],l[m+1]=e[m+1],l[m+2]=e[m+2],l[m+3]=e[m+3];if(16==d)for(m=0;m<v;m++)l[m]=e[m<<1]}else if(2==u){var p=n.tabs.tRNS;if(null==p){if(8==d)for(m=0;m<a;m++){var g=3*m;h[m]=255<<24|e[g+2]<<16|e[g+1]<<8|e[g]}if(16==d)for(m=0;m<a;m++)g=6*m,h[m]=255<<24|e[g+4]<<16|e[g+2]<<8|e[g]}else{var w=p[0],b=p[1],A=p[2];if(8==d)for(m=0;m<a;m++){var y=m<<2;g=3*m,h[m]=255<<24|e[g+2]<<16|e[g+1]<<8|e[g],e[g]==w&&e[g+1]==b&&e[g+2]==A&&(l[y+3]=0)}if(16==d)for(m=0;m<a;m++)y=m<<2,g=6*m,h[m]=255<<24|e[g+4]<<16|e[g+2]<<8|e[g],f(e,g)==w&&f(e,g+2)==b&&f(e,g+4)==A&&(l[y+3]=0)}}else if(3==u){var E=n.tabs.PLTE,x=n.tabs.tRNS,C=x?x.length:0;if(1==d)for(var M=0;M<r;M++){var S=M*c,R=M*i;for(m=0;m<i;m++){y=R+m<<2;var z=3*(P=e[S+(m>>3)]>>7-((7&m)<<0)&1);l[y]=E[z],l[y+1]=E[z+1],l[y+2]=E[z+2],l[y+3]=P<C?x[P]:255}}if(2==d)for(M=0;M<r;M++)for(S=M*c,R=M*i,m=0;m<i;m++)y=R+m<<2,z=3*(P=e[S+(m>>2)]>>6-((3&m)<<1)&3),l[y]=E[z],l[y+1]=E[z+1],l[y+2]=E[z+2],l[y+3]=P<C?x[P]:255;if(4==d)for(M=0;M<r;M++)for(S=M*c,R=M*i,m=0;m<i;m++)y=R+m<<2,z=3*(P=e[S+(m>>1)]>>4-((1&m)<<2)&15),l[y]=E[z],l[y+1]=E[z+1],l[y+2]=E[z+2],l[y+3]=P<C?x[P]:255;if(8==d)for(m=0;m<a;m++){var P;y=m<<2,z=3*(P=e[m]),l[y]=E[z],l[y+1]=E[z+1],l[y+2]=E[z+2],l[y+3]=P<C?x[P]:255}}else if(4==u){if(8==d)for(m=0;m<a;m++){y=m<<2;var I=e[N=m<<1];l[y]=I,l[y+1]=I,l[y+2]=I,l[y+3]=e[N+1]}if(16==d)for(m=0;m<a;m++){var N;y=m<<2,I=e[N=m<<2],l[y]=I,l[y+1]=I,l[y+2]=I,l[y+3]=e[N+2]}}else if(0==u)for(w=n.tabs.tRNS?n.tabs.tRNS:-1,M=0;M<r;M++){var H=M*c,U=M*i;if(1==d)for(var _=0;_<i;_++){var B=(I=255*(e[H+(_>>>3)]>>>7-(7&_)&1))==255*w?0:255;h[U+_]=B<<24|I<<16|I<<8|I}else if(2==d)for(_=0;_<i;_++)B=(I=85*(e[H+(_>>>2)]>>>6-((3&_)<<1)&3))==85*w?0:255,h[U+_]=B<<24|I<<16|I<<8|I;else if(4==d)for(_=0;_<i;_++)B=(I=17*(e[H+(_>>>1)]>>>4-((1&_)<<2)&15))==17*w?0:255,h[U+_]=B<<24|I<<16|I<<8|I;else if(8==d)for(_=0;_<i;_++)B=(I=e[H+_])==w?0:255,h[U+_]=B<<24|I<<16|I<<8|I;else if(16==d)for(_=0;_<i;_++)I=e[H+(_<<1)],B=f(e,H+(_<<1))==w?0:255,h[U+_]=B<<24|I<<16|I<<8|I}return l}function i(t,e,i,s){var c=o(t),l=Math.ceil(i*c/8),h=new Uint8Array((l+1+t.interlace)*s);return e=t.tabs.CgBI?n(e,h):r(e,h),0==t.interlace?e=a(e,t,0,i,s):1==t.interlace&&(e=function(t,e){for(var i=e.width,r=e.height,n=o(e),s=n>>3,c=Math.ceil(i*n/8),l=new Uint8Array(r*c),h=0,u=[0,0,4,0,2,0,1],d=[0,4,0,2,0,1,0],f=[8,8,8,4,4,2,2],v=[8,8,4,4,2,2,1],m=0;m<7;){for(var p=f[m],g=v[m],w=0,b=0,A=u[m];A<r;)A+=p,b++;for(var y=d[m];y<i;)y+=g,w++;var E=Math.ceil(w*n/8);a(t,e,h,w,b);for(var x=0,C=u[m];C<r;){for(var M=d[m],S=h+x*E<<3;M<i;){var R;if(1==n&&(R=(R=t[S>>3])>>7-(7&S)&1,l[C*c+(M>>3)]|=R<<7-((7&M)<<0)),2==n&&(R=(R=t[S>>3])>>6-(7&S)&3,l[C*c+(M>>2)]|=R<<6-((3&M)<<1)),4==n&&(R=(R=t[S>>3])>>4-(7&S)&15,l[C*c+(M>>1)]|=R<<4-((1&M)<<2)),n>=8)for(var z=C*c+M*s,P=0;P<s;P++)l[z+P]=t[(S>>3)+P];S+=n,M+=g}x++,C+=p}w*b!=0&&(h+=b*(1+E)),m+=1}return l}(e,t)),e}function r(t,e){return n(new Uint8Array(t.buffer,2,t.length-6),e)}var n=function(){var t={H:{}};return t.H.N=function(e,i){var r,n,o=Uint8Array,a=0,s=0,c=0,l=0,h=0,u=0,d=0,f=0,v=0;if(3==e[0]&&0==e[1])return i||new o(0);var m=t.H,p=m.b,g=m.e,w=m.R,b=m.n,A=m.A,y=m.Z,E=m.m,x=null==i;for(x&&(i=new o(e.length>>>2<<5));0==a;)if(a=p(e,v,1),s=p(e,v+1,2),v+=3,0!=s){if(x&&(i=t.H.W(i,f+(1<<17))),1==s&&(r=E.J,n=E.h,u=511,d=31),2==s){c=g(e,v,5)+257,l=g(e,v+5,5)+1,h=g(e,v+10,4)+4,v+=14;for(var C=1,M=0;M<38;M+=2)E.Q[M]=0,E.Q[M+1]=0;for(M=0;M<h;M++){var S=g(e,v+3*M,3);E.Q[1+(E.X[M]<<1)]=S,S>C&&(C=S)}v+=3*h,b(E.Q,C),A(E.Q,C,E.u),r=E.w,n=E.d,v=w(E.u,(1<<C)-1,c+l,e,v,E.v);var R=m.V(E.v,0,c,E.C);u=(1<<R)-1;var z=m.V(E.v,c,l,E.D);d=(1<<z)-1,b(E.C,R),A(E.C,R,r),b(E.D,z),A(E.D,z,n)}for(;;){var P=r[y(e,v)&u];v+=15&P;var I=P>>>4;if(I>>>8==0)i[f++]=I;else{if(256==I)break;var N=f+I-254;if(I>264){var H=E.q[I-257];N=f+(H>>>3)+g(e,v,7&H),v+=7&H}var U=n[y(e,v)&d];v+=15&U;var _=U>>>4,B=E.c[_],F=(B>>>4)+p(e,v,15&B);for(v+=15&B;f<N;)i[f]=i[f++-F],i[f]=i[f++-F],i[f]=i[f++-F],i[f]=i[f++-F];f=N}}}else{0!=(7&v)&&(v+=8-(7&v));var W=4+(v>>>3),T=e[W-4]|e[W-3]<<8;x&&(i=t.H.W(i,f+T)),i.set(new o(e.buffer,e.byteOffset+W,T),f),v=W+T<<3,f+=T}return i.length==f?i:i.slice(0,f)},t.H.W=function(t,e){var i=t.length;if(e<=i)return t;var r=new Uint8Array(i<<1);return r.set(t,0),r},t.H.R=function(e,i,r,n,o,a){for(var s=t.H.e,c=t.H.Z,l=0;l<r;){var h=e[c(n,o)&i];o+=15&h;var u=h>>>4;if(u<=15)a[l]=u,l++;else{var d=0,f=0;16==u?(f=3+s(n,o,2),o+=2,d=a[l-1]):17==u?(f=3+s(n,o,3),o+=3):18==u&&(f=11+s(n,o,7),o+=7);for(var v=l+f;l<v;)a[l]=d,l++}}return o},t.H.V=function(t,e,i,r){for(var n=0,o=0,a=r.length>>>1;o<i;){var s=t[o+e];r[o<<1]=0,r[1+(o<<1)]=s,s>n&&(n=s),o++}for(;o<a;)r[o<<1]=0,r[1+(o<<1)]=0,o++;return n},t.H.n=function(e,i){for(var r,n,o,a,s=t.H.m,c=e.length,l=s.j,h=0;h<=i;h++)l[h]=0;for(h=1;h<c;h+=2)l[e[h]]++;var u=s.K;for(r=0,l[0]=0,n=1;n<=i;n++)r=r+l[n-1]<<1,u[n]=r;for(o=0;o<c;o+=2)0!=(a=e[o+1])&&(e[o]=u[a],u[a]++)},t.H.A=function(e,i,r){for(var n=e.length,o=t.H.m.r,a=0;a<n;a+=2)if(0!=e[a+1])for(var s=a>>1,c=e[a+1],l=s<<4|c,h=i-c,u=e[a]<<h,d=u+(1<<h);u!=d;)r[o[u]>>>15-i]=l,u++},t.H.l=function(e,i){for(var r=t.H.m.r,n=15-i,o=0;o<e.length;o+=2){var a=e[o]<<i-e[o+1];e[o]=r[a]>>>n}},t.H.M=function(t,e,i){i<<=7&e;var r=e>>>3;t[r]|=i,t[r+1]|=i>>>8},t.H.I=function(t,e,i){i<<=7&e;var r=e>>>3;t[r]|=i,t[r+1]|=i>>>8,t[r+2]|=i>>>16},t.H.e=function(t,e,i){return(t[e>>>3]|t[1+(e>>>3)]<<8)>>>(7&e)&(1<<i)-1},t.H.b=function(t,e,i){return(t[e>>>3]|t[1+(e>>>3)]<<8|t[2+(e>>>3)]<<16)>>>(7&e)&(1<<i)-1},t.H.Z=function(t,e){return(t[e>>>3]|t[1+(e>>>3)]<<8|t[2+(e>>>3)]<<16)>>>(7&e)},t.H.i=function(t,e){return(t[e>>>3]|t[1+(e>>>3)]<<8|t[2+(e>>>3)]<<16|t[3+(e>>>3)]<<24)>>>(7&e)},t.H.m=function(){var t=Uint16Array,e=Uint32Array;return{K:new t(16),j:new t(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new t(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new e(32),J:new t(512),_:[],h:new t(32),$:[],w:new t(32768),C:[],v:[],d:new t(32768),D:[],u:new t(512),Q:[],r:new t(32768),s:new e(286),Y:new e(30),a:new e(19),t:new e(15e3),k:new t(65536),g:new t(32768)}}(),function(){for(var e=t.H.m,i=0;i<32768;i++){var r=i;r=(4278255360&(r=(4042322160&(r=(3435973836&(r=(2863311530&r)>>>1|(1431655765&r)<<1))>>>2|(858993459&r)<<2))>>>4|(252645135&r)<<4))>>>8|(16711935&r)<<8,e.r[i]=(r>>>16|r<<16)>>>17}function n(t,e,i){for(;0!=e--;)t.push(0,i)}for(i=0;i<32;i++)e.q[i]=e.S[i]<<3|e.T[i],e.c[i]=e.p[i]<<4|e.z[i];n(e._,144,8),n(e._,112,9),n(e._,24,7),n(e._,8,8),t.H.n(e._,9),t.H.A(e._,9,e.J),t.H.l(e._,9),n(e.$,32,5),t.H.n(e.$,5),t.H.A(e.$,5,e.h),t.H.l(e.$,5),n(e.Q,19,0),n(e.C,286,0),n(e.D,30,0),n(e.v,320,0)}(),t.H.N}();function o(t){return[1,null,3,1,2,null,4][t.ctype]*t.depth}function a(t,e,i,r,n){var a,c,l=o(e),h=Math.ceil(r*l/8);l=Math.ceil(l/8);var u=t[i],d=0;if(u>1&&(t[i]=[0,0,1][u-2]),3==u)for(d=l;d<h;d++)t[d+1]=t[d+1]+(t[d+1-l]>>>1)&255;for(var f=0;f<n;f++)if(d=0,0==(u=t[(c=(a=i+f*h)+f+1)-1]))for(;d<h;d++)t[a+d]=t[c+d];else if(1==u){for(;d<l;d++)t[a+d]=t[c+d];for(;d<h;d++)t[a+d]=t[c+d]+t[a+d-l]}else if(2==u)for(;d<h;d++)t[a+d]=t[c+d]+t[a+d-h];else if(3==u){for(;d<l;d++)t[a+d]=t[c+d]+(t[a+d-h]>>>1);for(;d<h;d++)t[a+d]=t[c+d]+(t[a+d-h]+t[a+d-l]>>>1)}else{for(;d<l;d++)t[a+d]=t[c+d]+s(0,t[a+d-h],0);for(;d<h;d++)t[a+d]=t[c+d]+s(t[a+d-l],t[a+d-h],t[a+d-l-h])}return t}function s(t,e,i){var r=t+e-i,n=r-t,o=r-e,a=r-i;return n*n<=o*o&&n*n<=a*a?t:o*o<=a*a?e:i}function c(e,i,r){r.width=t.readUint(e,i),i+=4,r.height=t.readUint(e,i),i+=4,r.depth=e[i],i++,r.ctype=e[i],i++,r.compress=e[i],i++,r.filter=e[i],i++,r.interlace=e[i],i++}function l(t,e,i,r,n,o,a,s,c){for(var l=Math.min(e,n),h=Math.min(i,o),u=0,d=0,f=0;f<h;f++)for(var v=0;v<l;v++)if(a>=0&&s>=0?(u=f*e+v<<2,d=(s+f)*n+a+v<<2):(u=(-s+f)*e-a+v<<2,d=f*n+v<<2),0==c)r[d]=t[u],r[d+1]=t[u+1],r[d+2]=t[u+2],r[d+3]=t[u+3];else if(1==c){var m=t[u+3]*(1/255),p=t[u]*m,g=t[u+1]*m,w=t[u+2]*m,b=r[d+3]*(1/255),A=r[d]*b,y=r[d+1]*b,E=r[d+2]*b,x=1-m,C=m+b*x,M=0==C?0:1/C;r[d+3]=255*C,r[d+0]=(p+A*x)*M,r[d+1]=(g+y*x)*M,r[d+2]=(w+E*x)*M}else if(2==c)m=t[u+3],p=t[u],g=t[u+1],w=t[u+2],b=r[d+3],A=r[d],y=r[d+1],E=r[d+2],m==b&&p==A&&g==y&&w==E?(r[d]=0,r[d+1]=0,r[d+2]=0,r[d+3]=0):(r[d]=p,r[d+1]=g,r[d+2]=w,r[d+3]=m);else if(3==c){if(m=t[u+3],p=t[u],g=t[u+1],w=t[u+2],b=r[d+3],A=r[d],y=r[d+1],E=r[d+2],m==b&&p==A&&g==y&&w==E)continue;if(m<220&&b>20)return!1}return!0}return{decode:function(e){for(var o,a,s=new Uint8Array(e),l=8,h=t,u=h.readUshort,d=h.readUint,f={tabs:{},frames:[]},v=new Uint8Array(s.length),m=0,p=0,g=[137,80,78,71,13,10,26,10],w=0;w<8;w++)if(s[w]!=g[w])throw"The input is not a PNG file!";for(;l<s.length;){var b=h.readUint(s,l);l+=4;var A=h.readASCII(s,l,4);if(l+=4,"IHDR"==A)c(s,l,f);else if("iCCP"==A){for(var y=l;0!=s[y];)y++;h.readASCII(s,l,y-l),s[y+1];var E=s.slice(y+2,l+b),x=null;try{x=r(E)}catch(t){x=n(E)}f.tabs[A]=x}else if("CgBI"==A)f.tabs[A]=s.slice(l,l+4);else if("IDAT"==A){for(w=0;w<b;w++)v[m+w]=s[l+w];m+=b}else if("acTL"==A)f.tabs[A]={num_frames:d(s,l),num_plays:d(s,l+4)},o=new Uint8Array(s.length);else if("fcTL"==A){0!=p&&((a=f.frames[f.frames.length-1]).data=i(f,o.slice(0,p),a.rect.width,a.rect.height),p=0);var C={x:d(s,l+12),y:d(s,l+16),width:d(s,l+4),height:d(s,l+8)},M=u(s,l+22);M=u(s,l+20)/(0==M?100:M);var S={rect:C,delay:Math.round(1e3*M),dispose:s[l+24],blend:s[l+25]};f.frames.push(S)}else if("fdAT"==A){for(w=0;w<b-4;w++)o[p+w]=s[l+w+4];p+=b-4}else if("pHYs"==A)f.tabs[A]=[h.readUint(s,l),h.readUint(s,l+4),s[l+8]];else if("cHRM"==A)for(f.tabs[A]=[],w=0;w<8;w++)f.tabs[A].push(h.readUint(s,l+4*w));else if("tEXt"==A||"zTXt"==A){null==f.tabs[A]&&(f.tabs[A]={});var R=h.nextZero(s,l),z=h.readASCII(s,l,R-l),P=l+b-R-1;if("tEXt"==A)N=h.readASCII(s,R+1,P);else{var I=r(s.slice(R+2,R+2+P));N=h.readUTF8(I,0,I.length)}f.tabs[A][z]=N}else if("iTXt"==A){null==f.tabs[A]&&(f.tabs[A]={}),R=0,y=l,R=h.nextZero(s,y),z=h.readASCII(s,y,R-y);var N,H=s[y=R+1];s[y+1],y+=2,R=h.nextZero(s,y),h.readASCII(s,y,R-y),y=R+1,R=h.nextZero(s,y),h.readUTF8(s,y,R-y),P=b-((y=R+1)-l),0==H?N=h.readUTF8(s,y,P):(I=r(s.slice(y,y+P)),N=h.readUTF8(I,0,I.length)),f.tabs[A][z]=N}else if("PLTE"==A)f.tabs[A]=h.readBytes(s,l,b);else if("hIST"==A){var U=f.tabs.PLTE.length/3;for(f.tabs[A]=[],w=0;w<U;w++)f.tabs[A].push(u(s,l+2*w))}else if("tRNS"==A)3==f.ctype?f.tabs[A]=h.readBytes(s,l,b):0==f.ctype?f.tabs[A]=u(s,l):2==f.ctype&&(f.tabs[A]=[u(s,l),u(s,l+2),u(s,l+4)]);else if("gAMA"==A)f.tabs[A]=h.readUint(s,l)/1e5;else if("sRGB"==A)f.tabs[A]=s[l];else if("bKGD"==A)0==f.ctype||4==f.ctype?f.tabs[A]=[u(s,l)]:2==f.ctype||6==f.ctype?f.tabs[A]=[u(s,l),u(s,l+2),u(s,l+4)]:3==f.ctype&&(f.tabs[A]=s[l]);else if("IEND"==A)break;l+=b,h.readUint(s,l),l+=4}return 0!=p&&((a=f.frames[f.frames.length-1]).data=i(f,o.slice(0,p),a.rect.width,a.rect.height)),f.data=i(f,v,f.width,f.height),delete f.compress,delete f.interlace,delete f.filter,f},toRGBA8:function(t){var i=t.width,r=t.height;if(null==t.tabs.acTL)return[e(t.data,i,r,t).buffer];var n=[];null==t.frames[0].data&&(t.frames[0].data=t.data);for(var o=i*r*4,a=new Uint8Array(o),s=new Uint8Array(o),c=new Uint8Array(o),h=0;h<t.frames.length;h++){var u=t.frames[h],d=u.rect.x,f=u.rect.y,v=u.rect.width,m=u.rect.height,p=e(u.data,v,m,t);if(0!=h)for(var g=0;g<o;g++)c[g]=a[g];if(0==u.blend?l(p,v,m,a,i,r,d,f,0):1==u.blend&&l(p,v,m,a,i,r,d,f,1),n.push(a.buffer.slice(0)),0==u.dispose);else if(1==u.dispose)l(s,v,m,a,i,r,d,f,0);else if(2==u.dispose)for(g=0;g<o;g++)a[g]=c[g]}return n},_paeth:s,_copyTile:l,_bin:t}}();!function(){var t=d._copyTile,e=d._bin,i=d._paeth,r={table:function(){for(var t=new Uint32Array(256),e=0;e<256;e++){for(var i=e,r=0;r<8;r++)1&i?i=3988292384^i>>>1:i>>>=1;t[e]=i}return t}(),update:function(t,e,i,n){for(var o=0;o<n;o++)t=r.table[255&(t^e[i+o])]^t>>>8;return t},crc:function(t,e,i){return 4294967295^r.update(4294967295,t,e,i)}};function n(t,e,i,r){e[i]+=t[0]*r>>4,e[i+1]+=t[1]*r>>4,e[i+2]+=t[2]*r>>4,e[i+3]+=t[3]*r>>4}function o(t){return Math.max(0,Math.min(255,t))}function a(t,e){var i=t[0]-e[0],r=t[1]-e[1],n=t[2]-e[2],o=t[3]-e[3];return i*i+r*r+n*n+o*o}function s(t,e,i,r,s,c,l){null==l&&(l=1);for(var h=r.length,u=[],d=0;d<h;d++){var f=r[d];u.push([f>>>0&255,f>>>8&255,f>>>16&255,f>>>24&255])}for(d=0;d<h;d++)for(var v=4294967295,m=0,p=0;p<h;p++){var g=a(u[d],u[p]);p!=d&&g<v&&(v=g,m=p)}var w=new Uint32Array(s.buffer),b=new Int16Array(e*i*4),A=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(d=0;d<A.length;d++)A[d]=255*((A[d]+.5)/16-.5);for(var y=0;y<i;y++)for(var E=0;E<e;E++){var x;d=4*(y*e+E),2!=l?x=[o(t[d]+b[d]),o(t[d+1]+b[d+1]),o(t[d+2]+b[d+2]),o(t[d+3]+b[d+3])]:(g=A[4*(3&y)+(3&E)],x=[o(t[d]+g),o(t[d+1]+g),o(t[d+2]+g),o(t[d+3]+g)]),m=0;var C=16777215;for(p=0;p<h;p++){var M=a(x,u[p]);M<C&&(C=M,m=p)}var S=u[m],R=[x[0]-S[0],x[1]-S[1],x[2]-S[2],x[3]-S[3]];1==l&&(E!=e-1&&n(R,b,d+4,7),y!=i-1&&(0!=E&&n(R,b,d+4*e-4,3),n(R,b,d+4*e,5),E!=e-1&&n(R,b,d+4*e+4,1))),c[d>>2]=m,w[d>>2]=r[m]}}function c(t,i,n,o,a){null==a&&(a={});var s,c=r.crc,l=e.writeUint,h=e.writeUshort,u=e.writeASCII,d=8,f=t.frames.length>1,v=!1,m=33+(f?20:0);if(null!=a.sRGB&&(m+=13),null!=a.pHYs&&(m+=21),null!=a.iCCP&&(m+=21+(s=pako.deflate(a.iCCP)).length+4),3==t.ctype){for(var p=t.plte.length,g=0;g<p;g++)t.plte[g]>>>24!=255&&(v=!0);m+=8+3*p+4+(v?8+1*p+4:0)}for(var w=0;w<t.frames.length;w++)f&&(m+=38),m+=(z=t.frames[w]).cimg.length+12,0!=w&&(m+=4);m+=12;var b=new Uint8Array(m),A=[137,80,78,71,13,10,26,10];for(g=0;g<8;g++)b[g]=A[g];if(l(b,d,13),u(b,d+=4,"IHDR"),l(b,d+=4,i),l(b,d+=4,n),b[d+=4]=t.depth,b[++d]=t.ctype,b[++d]=0,b[++d]=0,b[++d]=0,l(b,++d,c(b,d-17,17)),d+=4,null!=a.sRGB&&(l(b,d,1),u(b,d+=4,"sRGB"),b[d+=4]=a.sRGB,l(b,++d,c(b,d-5,5)),d+=4),null!=a.iCCP){var y=13+s.length;l(b,d,y),u(b,d+=4,"iCCP"),u(b,d+=4,"ICC profile"),d+=11,d+=2,b.set(s,d),l(b,d+=s.length,c(b,d-(y+4),y+4)),d+=4}if(null!=a.pHYs&&(l(b,d,9),u(b,d+=4,"pHYs"),l(b,d+=4,a.pHYs[0]),l(b,d+=4,a.pHYs[1]),b[d+=4]=a.pHYs[2],l(b,++d,c(b,d-13,13)),d+=4),f&&(l(b,d,8),u(b,d+=4,"acTL"),l(b,d+=4,t.frames.length),l(b,d+=4,null!=a.loop?a.loop:0),l(b,d+=4,c(b,d-12,12)),d+=4),3==t.ctype){for(l(b,d,3*(p=t.plte.length)),u(b,d+=4,"PLTE"),d+=4,g=0;g<p;g++){var E=3*g,x=t.plte[g],C=255&x,M=x>>>8&255,S=x>>>16&255;b[d+E+0]=C,b[d+E+1]=M,b[d+E+2]=S}if(l(b,d+=3*p,c(b,d-3*p-4,3*p+4)),d+=4,v){for(l(b,d,p),u(b,d+=4,"tRNS"),d+=4,g=0;g<p;g++)b[d+g]=t.plte[g]>>>24&255;l(b,d+=p,c(b,d-p-4,p+4)),d+=4}}var R=0;for(w=0;w<t.frames.length;w++){var z=t.frames[w];f&&(l(b,d,26),u(b,d+=4,"fcTL"),l(b,d+=4,R++),l(b,d+=4,z.rect.width),l(b,d+=4,z.rect.height),l(b,d+=4,z.rect.x),l(b,d+=4,z.rect.y),h(b,d+=4,o[w]),h(b,d+=2,1e3),b[d+=2]=z.dispose,b[++d]=z.blend,l(b,++d,c(b,d-30,30)),d+=4);var P=z.cimg;l(b,d,(p=P.length)+(0==w?0:4));var I=d+=4;u(b,d,0==w?"IDAT":"fdAT"),d+=4,0!=w&&(l(b,d,R++),d+=4),b.set(P,d),l(b,d+=p,c(b,I,d-I)),d+=4}return l(b,d,0),u(b,d+=4,"IEND"),l(b,d+=4,c(b,d-4,4)),d+=4,b.buffer}function l(t,e,i){for(var r=0;r<t.frames.length;r++){var n=t.frames[r];n.rect.width;var o=n.rect.height,a=new Uint8Array(o*n.bpl+o);n.cimg=m(n.img,o,n.bpp,n.bpl,a,e,i)}}function h(e,i,r,n,o){for(var a=o[0],c=o[1],l=o[2],h=o[3],u=o[4],d=o[5],m=6,p=8,w=255,b=0;b<e.length;b++)for(var A=new Uint8Array(e[b]),y=A.length,E=0;E<y;E+=4)w&=A[E+3];var x=255!=w,C=function(e,i,r,n,o,a){for(var s=[],c=0;c<e.length;c++){var l,h=new Uint8Array(e[c]),u=new Uint32Array(h.buffer),d=0,m=0,p=i,g=r,w=n?1:0;if(0!=c){for(var b=a||n||1==c||0!=s[c-2].dispose?1:2,A=0,y=1e9,E=0;E<b;E++){for(var x=new Uint8Array(e[c-1-E]),C=new Uint32Array(e[c-1-E]),M=i,S=r,R=-1,z=-1,P=0;P<r;P++)for(var I=0;I<i;I++)u[W=P*i+I]!=C[W]&&(I<M&&(M=I),I>R&&(R=I),P<S&&(S=P),P>z&&(z=P));-1==R&&(M=S=R=z=0),o&&(1==(1&M)&&M--,1==(1&S)&&S--);var N=(R-M+1)*(z-S+1);N<y&&(y=N,A=E,d=M,m=S,p=R-M+1,g=z-S+1)}x=new Uint8Array(e[c-1-A]),1==A&&(s[c-1].dispose=2),l=new Uint8Array(p*g*4),t(x,i,r,l,p,g,-d,-m,0),1==(w=t(h,i,r,l,p,g,-d,-m,3)?1:0)?v(h,i,r,l,{x:d,y:m,width:p,height:g}):t(h,i,r,l,p,g,-d,-m,0)}else l=h.slice(0);s.push({rect:{x:d,y:m,width:p,height:g},img:l,blend:w,dispose:0})}if(n)for(c=0;c<s.length;c++)if(1!=(T=s[c]).blend){var H=T.rect,U=s[c-1].rect,_=Math.min(H.x,U.x),B=Math.min(H.y,U.y),F={x:_,y:B,width:Math.max(H.x+H.width,U.x+U.width)-_,height:Math.max(H.y+H.height,U.y+U.height)-B};s[c-1].dispose=1,c-1!=0&&f(e,i,r,s,c-1,F,o),f(e,i,r,s,c,F,o)}if(1!=e.length)for(var W=0;W<s.length;W++){var T;(T=s[W]).rect.width*T.rect.height}return s}(e,i,r,a,c,l),M={},S=[],R=[];if(0!=n){var z=[];for(E=0;E<C.length;E++)z.push(C[E].img.buffer);var P=function(t){for(var e=0,i=0;i<t.length;i++)e+=t[i].byteLength;var r=new Uint8Array(e),n=0;for(i=0;i<t.length;i++){for(var o=new Uint8Array(t[i]),a=o.length,s=0;s<a;s+=4){var c=o[s],l=o[s+1],h=o[s+2],u=o[s+3];0==u&&(c=l=h=0),r[n+s]=c,r[n+s+1]=l,r[n+s+2]=h,r[n+s+3]=u}n+=a}return r.buffer}(z),I=g(P,n);for(E=0;E<I.plte.length;E++)S.push(I.plte[E].est.rgba);var N=0;for(E=0;E<C.length;E++){var H=(B=C[E]).img.length,U=new Uint8Array(I.inds.buffer,N>>2,H>>2);R.push(U);var _=new Uint8Array(I.abuf,N,H);d&&s(B.img,B.rect.width,B.rect.height,S,_,U),B.img.set(_),N+=H}}else for(b=0;b<C.length;b++){var B=C[b],F=new Uint32Array(B.img.buffer),W=B.rect.width;for(y=F.length,U=new Uint8Array(y),R.push(U),E=0;E<y;E++){var T=F[E];if(0!=E&&T==F[E-1])U[E]=U[E-1];else if(E>W&&T==F[E-W])U[E]=U[E-W];else{var O=M[T];if(null==O&&(M[T]=O=S.length,S.push(T),S.length>=300))break;U[E]=O}}}var L=S.length;for(L<=256&&0==u&&(p=L<=2?1:L<=4?2:L<=16?4:8,p=Math.max(p,h)),b=0;b<C.length;b++){(B=C[b]).rect.x,B.rect.y,W=B.rect.width;var D=B.rect.height,Q=B.img;new Uint32Array(Q.buffer);var k=4*W,j=4;if(L<=256&&0==u){k=Math.ceil(p*W/8);for(var X=new Uint8Array(k*D),Y=R[b],Z=0;Z<D;Z++){E=Z*k;var V=Z*W;if(8==p)for(var q=0;q<W;q++)X[E+q]=Y[V+q];else if(4==p)for(q=0;q<W;q++)X[E+(q>>1)]|=Y[V+q]<<4-4*(1&q);else if(2==p)for(q=0;q<W;q++)X[E+(q>>2)]|=Y[V+q]<<6-2*(3&q);else if(1==p)for(q=0;q<W;q++)X[E+(q>>3)]|=Y[V+q]<<7-1*(7&q)}Q=X,m=3,j=1}else if(0==x&&1==C.length){X=new Uint8Array(W*D*3);var G=W*D;for(E=0;E<G;E++){var K=3*E,$=4*E;X[K]=Q[$],X[K+1]=Q[$+1],X[K+2]=Q[$+2]}Q=X,m=2,j=3,k=3*W}B.img=Q,B.bpl=k,B.bpp=j}return{ctype:m,depth:p,plte:S,frames:C}}function f(e,i,r,n,o,a,s){for(var c=Uint8Array,l=Uint32Array,h=new c(e[o-1]),u=new l(e[o-1]),d=o+1<e.length?new c(e[o+1]):null,f=new c(e[o]),m=new l(f.buffer),p=i,g=r,w=-1,b=-1,A=0;A<a.height;A++)for(var y=0;y<a.width;y++){var E=a.x+y,x=a.y+A,C=x*i+E,M=m[C];0==M||0==n[o-1].dispose&&u[C]==M&&(null==d||0!=d[4*C+3])||(E<p&&(p=E),E>w&&(w=E),x<g&&(g=x),x>b&&(b=x))}-1==w&&(p=g=w=b=0),s&&(1==(1&p)&&p--,1==(1&g)&&g--),a={x:p,y:g,width:w-p+1,height:b-g+1};var S=n[o];S.rect=a,S.blend=1,S.img=new Uint8Array(a.width*a.height*4),0==n[o-1].dispose?(t(h,i,r,S.img,a.width,a.height,-a.x,-a.y,0),v(f,i,r,S.img,a)):t(f,i,r,S.img,a.width,a.height,-a.x,-a.y,0)}function v(e,i,r,n,o){t(e,i,r,n,o.width,o.height,-o.x,-o.y,2)}function m(t,e,i,r,n,o,a){var s,c=[],l=[0,1,2,3,4];-1!=o?l=[o]:(e*r>5e5||1==i)&&(l=[0]),a&&(s={level:0});for(var h=u,d=0;d<l.length;d++){for(var f=0;f<e;f++)p(n,t,f,r,i,l[d]);c.push(h.deflate(n,s))}var v,m=1e9;for(d=0;d<c.length;d++)c[d].length<m&&(v=d,m=c[d].length);return c[v]}function p(t,e,r,n,o,a){var s=r*n,c=s+r;if(t[c]=a,c++,0==a)if(n<500)for(var l=0;l<n;l++)t[c+l]=e[s+l];else t.set(new Uint8Array(e.buffer,s,n),c);else if(1==a){for(l=0;l<o;l++)t[c+l]=e[s+l];for(l=o;l<n;l++)t[c+l]=e[s+l]-e[s+l-o]+256&255}else if(0==r){for(l=0;l<o;l++)t[c+l]=e[s+l];if(2==a)for(l=o;l<n;l++)t[c+l]=e[s+l];if(3==a)for(l=o;l<n;l++)t[c+l]=e[s+l]-(e[s+l-o]>>1)+256&255;if(4==a)for(l=o;l<n;l++)t[c+l]=e[s+l]-i(e[s+l-o],0,0)+256&255}else{if(2==a)for(l=0;l<n;l++)t[c+l]=e[s+l]+256-e[s+l-n]&255;if(3==a){for(l=0;l<o;l++)t[c+l]=e[s+l]+256-(e[s+l-n]>>1)&255;for(l=o;l<n;l++)t[c+l]=e[s+l]+256-(e[s+l-n]+e[s+l-o]>>1)&255}if(4==a){for(l=0;l<o;l++)t[c+l]=e[s+l]+256-i(0,e[s+l-n],0)&255;for(l=o;l<n;l++)t[c+l]=e[s+l]+256-i(e[s+l-o],e[s+l-n],e[s+l-o-n])&255}}}function g(t,e){var i,r=new Uint8Array(t),n=r.slice(0),o=new Uint32Array(n.buffer),a=w(n,e),s=a[0],c=a[1],l=r.length,h=new Uint8Array(l>>2);if(r.length<2e7)for(var u=0;u<l;u+=4)i=b(s,d=r[u]*(1/255),f=r[u+1]*(1/255),v=r[u+2]*(1/255),m=r[u+3]*(1/255)),h[u>>2]=i.ind,o[u>>2]=i.est.rgba;else for(u=0;u<l;u+=4){var d=r[u]*(1/255),f=r[u+1]*(1/255),v=r[u+2]*(1/255),m=r[u+3]*(1/255);for(i=s;i.left;)i=A(i.est,d,f,v,m)<=0?i.left:i.right;h[u>>2]=i.ind,o[u>>2]=i.est.rgba}return{abuf:n.buffer,inds:h,plte:c}}function w(t,e,i){null==i&&(i=1e-4);var r=new Uint32Array(t.buffer),n={i0:0,i1:t.length,bst:null,est:null,tdst:0,left:null,right:null};n.bst=x(t,n.i0,n.i1),n.est=C(n.bst);for(var o=[n];o.length<e;){for(var a=0,s=0,c=0;c<o.length;c++)o[c].est.L>a&&(a=o[c].est.L,s=c);if(a<i)break;var l=o[s],h=y(t,r,l.i0,l.i1,l.est.e,l.est.eMq255);if(l.i0>=h||l.i1<=h)l.est.L=0;else{var u={i0:l.i0,i1:h,bst:null,est:null,tdst:0,left:null,right:null};u.bst=x(t,u.i0,u.i1),u.est=C(u.bst);var d={i0:h,i1:l.i1,bst:null,est:null,tdst:0,left:null,right:null};for(d.bst={R:[],m:[],N:l.bst.N-u.bst.N},c=0;c<16;c++)d.bst.R[c]=l.bst.R[c]-u.bst.R[c];for(c=0;c<4;c++)d.bst.m[c]=l.bst.m[c]-u.bst.m[c];d.est=C(d.bst),l.left=u,l.right=d,o[s]=u,o.push(d)}}for(o.sort((function(t,e){return e.bst.N-t.bst.N})),c=0;c<o.length;c++)o[c].ind=c;return[n,o]}function b(t,e,i,r,n){if(null==t.left)return t.tdst=function(t,e,i,r,n){var o=e-t[0],a=i-t[1],s=r-t[2],c=n-t[3];return o*o+a*a+s*s+c*c}(t.est.q,e,i,r,n),t;var o=A(t.est,e,i,r,n),a=t.left,s=t.right;o>0&&(a=t.right,s=t.left);var c=b(a,e,i,r,n);if(c.tdst<=o*o)return c;var l=b(s,e,i,r,n);return l.tdst<c.tdst?l:c}function A(t,e,i,r,n){var o=t.e;return o[0]*e+o[1]*i+o[2]*r+o[3]*n-t.eMq}function y(t,e,i,r,n,o){for(r-=4;i<r;){for(;E(t,i,n)<=o;)i+=4;for(;E(t,r,n)>o;)r-=4;if(i>=r)break;var a=e[i>>2];e[i>>2]=e[r>>2],e[r>>2]=a,i+=4,r-=4}for(;E(t,i,n)>o;)i-=4;return i+4}function E(t,e,i){return t[e]*i[0]+t[e+1]*i[1]+t[e+2]*i[2]+t[e+3]*i[3]}function x(t,e,i){for(var r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],n=[0,0,0,0],o=i-e>>2,a=e;a<i;a+=4){var s=t[a]*(1/255),c=t[a+1]*(1/255),l=t[a+2]*(1/255),h=t[a+3]*(1/255);n[0]+=s,n[1]+=c,n[2]+=l,n[3]+=h,r[0]+=s*s,r[1]+=s*c,r[2]+=s*l,r[3]+=s*h,r[5]+=c*c,r[6]+=c*l,r[7]+=c*h,r[10]+=l*l,r[11]+=l*h,r[15]+=h*h}return r[4]=r[1],r[8]=r[2],r[9]=r[6],r[12]=r[3],r[13]=r[7],r[14]=r[11],{R:r,m:n,N:o}}function C(t){var e=t.R,i=t.m,r=t.N,n=i[0],o=i[1],a=i[2],s=i[3],c=0==r?0:1/r,l=[e[0]-n*n*c,e[1]-n*o*c,e[2]-n*a*c,e[3]-n*s*c,e[4]-o*n*c,e[5]-o*o*c,e[6]-o*a*c,e[7]-o*s*c,e[8]-a*n*c,e[9]-a*o*c,e[10]-a*a*c,e[11]-a*s*c,e[12]-s*n*c,e[13]-s*o*c,e[14]-s*a*c,e[15]-s*s*c],h=l,u=M,d=[Math.random(),Math.random(),Math.random(),Math.random()],f=0,v=0;if(0!=r)for(var m=0;m<16&&(d=u.multVec(h,d),v=Math.sqrt(u.dot(d,d)),d=u.sml(1/v,d),!(0!=m&&Math.abs(v-f)<1e-9));m++)f=v;var p=[n*c,o*c,a*c,s*c];return{Cov:l,q:p,e:d,L:f,eMq255:u.dot(u.sml(255,p),d),eMq:u.dot(d,p),rgba:(Math.round(255*p[3])<<24|Math.round(255*p[2])<<16|Math.round(255*p[1])<<8|Math.round(255*p[0])<<0)>>>0}}var M={multVec:function(t,e){return[t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3],t[4]*e[0]+t[5]*e[1]+t[6]*e[2]+t[7]*e[3],t[8]*e[0]+t[9]*e[1]+t[10]*e[2]+t[11]*e[3],t[12]*e[0]+t[13]*e[1]+t[14]*e[2]+t[15]*e[3]]},dot:function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},sml:function(t,e){return[t*e[0],t*e[1],t*e[2],t*e[3]]}};d.encode=function(t,e,i,r,n,o,a){null==r&&(r=0),null==a&&(a=!1);var s=h(t,e,i,r,[!1,!1,!1,0,a,!1]);return l(s,-1),c(s,e,i,n,o)},d.encodeLL=function(t,e,i,r,n,o,a,s){for(var h={ctype:0+(1==r?0:2)+(0==n?0:4),depth:o,frames:[]},u=(r+n)*o,d=u*e,f=0;f<t.length;f++)h.frames.push({rect:{x:0,y:0,width:e,height:i},img:new Uint8Array(t[f]),blend:0,dispose:1,bpp:Math.ceil(u/8),bpl:Math.ceil(d/8)});return l(h,0,!0),c(h,e,i,a,s)},d.encode.compress=h,d.encode.dither=s,d.quantize=g,d.quantize.getKDtree=w,d.quantize.getNearest=b}();var f={toArrayBuffer:function(t,e){var i,r,n,o,a=t.width,s=t.height,c=a<<2,l=t.getContext("2d").getImageData(0,0,a,s),h=new Uint32Array(l.data.buffer),u=(32*a+31)/32<<2,d=u*s,v=122+d,m=new ArrayBuffer(v),p=new DataView(m),g=1<<20,w=g,b=0,A=0,y=0;function E(t){p.setUint16(A,t,!0),A+=2}function x(t){p.setUint32(A,t,!0),A+=4}function C(t){A+=t}E(19778),x(v),C(4),x(122),x(108),x(a),x(-s>>>0),E(1),E(32),x(3),x(d),x(2835),x(2835),C(8),x(16711680),x(65280),x(255),x(4278190080),x(1466527264),function t(){for(;b<s&&w>0;){for(o=122+b*u,i=0;i<c;)w--,r=h[y++],n=r>>>24,p.setUint32(o+i,r<<8|n),i+=4;b++}y<h.length?(w=g,setTimeout(t,f._dly)):e(m)}()},toBlob:function(t,e){this.toArrayBuffer(t,(function(t){e(new Blob([t],{type:"image/bmp"}))}))},_dly:9},v={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"},m=(r={},(0,a.Z)(r,v.CHROME,16384),(0,a.Z)(r,v.FIREFOX,11180),(0,a.Z)(r,v.DESKTOP_SAFARI,16384),(0,a.Z)(r,v.IE,8192),(0,a.Z)(r,v.IOS,4096),(0,a.Z)(r,v.ETC,8192),r),p="undefined"!=typeof window,g="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope,w=p&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),b=(p||g)&&(w&&w.getOriginalSymbol(window,"File")||"undefined"!=typeof File&&File),A=(p||g)&&(w&&w.getOriginalSymbol(window,"FileReader")||"undefined"!=typeof FileReader&&FileReader);function y(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Date.now();return new Promise((function(r){for(var n=t.split(","),o=n[0].match(/:(.*?);/)[1],a=globalThis.atob(n[1]),s=a.length,c=new Uint8Array(s);s--;)c[s]=a.charCodeAt(s);var l=new Blob([c],{type:o});l.name=e,l.lastModified=i,r(l)}))}function E(t){return new Promise((function(e,i){var r=new A;r.onload=function(){return e(r.result)},r.onerror=function(t){return i(t)},r.readAsDataURL(t)}))}function x(t){return new Promise((function(e,i){var r=new Image;r.onload=function(){return e(r)},r.onerror=function(t){return i(t)},r.src=t}))}function C(){if(void 0!==C.cachedResult)return C.cachedResult;var t=v.ETC,e=navigator.userAgent;return/Chrom(e|ium)/i.test(e)?t=v.CHROME:/iP(ad|od|hone)/i.test(e)&&/WebKit/i.test(e)?t=v.IOS:/Safari/i.test(e)?t=v.DESKTOP_SAFARI:/Firefox/i.test(e)?t=v.FIREFOX:(/MSIE/i.test(e)||1==!!document.documentMode)&&(t=v.IE),C.cachedResult=t,C.cachedResult}function M(t,e){for(var i=C(),r=m[i],n=t,o=e,a=n*o,s=n>o?o/n:n/o;a>r*r;){var c=(r+n)/2,l=(r+o)/2;c<l?(o=l,n=l*s):(o=c*s,n=c),a=n*o}return{width:n,height:o}}function S(t,e){var i,r;try{if(null===(r=(i=new OffscreenCanvas(t,e)).getContext("2d")))throw new Error("getContext of OffscreenCanvas returns null")}catch(t){r=(i=document.createElement("canvas")).getContext("2d")}return i.width=t,i.height=e,[i,r]}function R(t,e){var i=M(t.width,t.height),r=S(i.width,i.height),n=(0,o.Z)(r,2),a=n[0],s=n[1];return e&&/jpe?g/.test(e)&&(s.fillStyle="white",s.fillRect(0,0,a.width,a.height)),s.drawImage(t,0,0,a.width,a.height),a}function z(){return void 0!==z.cachedResult||(z.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"undefined"!=typeof document&&"ontouchend"in document),z.cachedResult}function P(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(i,r){var n,o,a=function(){try{return o=R(n,e.fileType||t.type),i([n,o])}catch(t){return r(t)}},s=function(e){try{var i=function(t){try{throw t}catch(t){return r(t)}};try{return E(t).then((function(t){try{return x(t).then((function(t){try{return n=t,function(){try{return a()}catch(t){return r(t)}}()}catch(t){return i(t)}}),i)}catch(t){return i(t)}}),i)}catch(t){i(t)}}catch(t){return r(t)}};try{if(z()||[v.DESKTOP_SAFARI,v.MOBILE_SAFARI].includes(C()))throw new Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(t).then((function(t){try{return n=t,a()}catch(t){return s()}}),s)}catch(t){s()}}))}function I(t,e,i,r){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;return new Promise((function(o,a){var s,c,l;if("image/png"===e)return c=t.getContext("2d").getImageData(0,0,t.width,t.height).data,l=d.encode([c.buffer],t.width,t.height,4096*n),(s=new Blob([l],{type:e})).name=i,s.lastModified=r,v.call(this);var h=function(){return v.call(this)};if("image/bmp"===e)return new Promise((function(e){return f.toBlob(t,e)})).then(function(t){try{return(s=t).name=i,s.lastModified=r,h.call(this)}catch(t){return a(t)}}.bind(this),a);var u=function(){return h.call(this)};return"function"==typeof OffscreenCanvas&&t instanceof OffscreenCanvas?t.convertToBlob({type:e,quality:n}).then(function(t){try{return(s=t).name=i,s.lastModified=r,u.call(this)}catch(t){return a(t)}}.bind(this),a):y(t.toDataURL(e,n),i,r).then(function(t){try{return s=t,u.call(this)}catch(t){return a(t)}}.bind(this),a);function v(){return o(s)}}))}function N(t){t.width=0,t.height=0}function H(){return new Promise((function(t,e){var i,r,n,o;return void 0!==H.cachedResult?t(H.cachedResult):("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==",y("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then((function(a){try{return P(i=a).then((function(a){try{return I(r=a[1],i.type,i.name,i.lastModified).then((function(i){try{return n=i,N(r),P(n).then((function(i){try{return o=i[0],H.cachedResult=1===o.width&&2===o.height,t(H.cachedResult)}catch(t){return e(t)}}),e)}catch(t){return e(t)}}),e)}catch(t){return e(t)}}),e)}catch(t){return e(t)}}),e))}))}function U(t){return new Promise((function(e,i){var r=new A;r.onload=function(t){var i=new DataView(t.target.result);if(65496!=i.getUint16(0,!1))return e(-2);for(var r=i.byteLength,n=2;n<r;){if(i.getUint16(n+2,!1)<=8)return e(-1);var o=i.getUint16(n,!1);if(n+=2,65505==o){if(1165519206!=i.getUint32(n+=2,!1))return e(-1);var a=18761==i.getUint16(n+=6,!1);n+=i.getUint32(n+4,a);var s=i.getUint16(n,a);n+=2;for(var c=0;c<s;c++)if(274==i.getUint16(n+12*c,a))return e(i.getUint16(n+12*c+8,a))}else{if(65280!=(65280&o))break;n+=i.getUint16(n,!1)}}return e(-1)},r.onerror=function(t){return i(t)},r.readAsArrayBuffer(t)}))}function _(t,e){var i,r,n,a=t.width,s=t.height,c=e.maxWidthOrHeight,l=t;return isFinite(c)&&(a>c||s>c)&&(i=S(a,s),l=(r=(0,o.Z)(i,2))[0],n=r[1],a>s?(l.width=c,l.height=s/a*c):(l.width=a/s*c,l.height=c),n.drawImage(t,0,0,l.width,l.height),N(t)),l}function B(t,e){var i=t.width,r=t.height,n=S(i,r),a=(0,o.Z)(n,2),s=a[0],c=a[1];switch(e>4&&e<9?(s.width=r,s.height=i):(s.width=i,s.height=r),e){case 2:c.transform(-1,0,0,1,i,0);break;case 3:c.transform(-1,0,0,-1,i,r);break;case 4:c.transform(1,0,0,-1,0,r);break;case 5:c.transform(0,1,1,0,0,0);break;case 6:c.transform(0,1,-1,0,r,0);break;case 7:c.transform(0,-1,-1,0,r,i);break;case 8:c.transform(0,-1,1,0,0,i)}return c.drawImage(t,0,0,i,r),N(t),s}function F(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return new Promise((function(r,n){var a,s,c,l,h,u,d,f,v,m,p,g,w,b,A,y,E,x,C;function M(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;if(e.signal&&e.signal.aborted)throw e.signal.reason;a+=t,e.onProgress(Math.min(a,100))}function R(t){if(e.signal&&e.signal.aborted)throw e.signal.reason;a=Math.min(Math.max(t,a),100),e.onProgress(a)}return a=i,s=e.maxIteration||10,c=1024*e.maxSizeMB*1024,M(),P(t,e).then(function(i){try{var a;return a=(0,o.Z)(i,2),l=a[1],M(),h=_(l,e),M(),new Promise((function(i,r){var n;if(!(n=e.exifOrientation))return U(t).then(function(t){try{return n=t,o.call(this)}catch(t){return r(t)}}.bind(this),r);function o(){return i(n)}return o.call(this)})).then(function(i){try{return u=i,M(),H().then(function(i){try{return d=i?h:B(h,u),M(),f=e.initialQuality||1,v=e.fileType||t.type,I(d,v,t.name,t.lastModified,f).then(function(i){try{var a,z=function e(){var i,r,a,l;return s--&&(A>c||A>w)?(i=S(a=C?.95*x.width:x.width,l=C?.95*x.height:x.height),r=(0,o.Z)(i,2),E=r[0],r[1].drawImage(x,0,0,a,l),f*="image/png"===v?.85:.95,I(E,v,t.name,t.lastModified,f).then((function(t){try{return y=t,N(x),x=E,A=y.size,R(Math.min(99,Math.floor((b-A)/(b-c)*100))),e}catch(t){return n(t)}}),n)):[1]},P=function(){return N(x),N(E),N(h),N(d),N(l),R(100),r(y)};return m=i,M(),p=m.size>c,g=m.size>t.size,p||g?(w=t.size,b=m.size,A=b,x=d,C=!e.alwaysKeepResolution&&p,(a=function(t){for(;t;){if(t.then)return void t.then(a,n);try{if(t.pop){if(t.length)return t.pop()?P.call(this):t;t=z}else t=t.call(this)}catch(t){return n(t)}}}.bind(this))(z)):(R(100),r(m))}catch(u){return n(u)}}.bind(this),n)}catch(t){return n(t)}}.bind(this),n)}catch(t){return n(t)}}.bind(this),n)}catch(t){return n(t)}}.bind(this),n)}))}var W;function T(t,e){return new Promise((function(i,r){W||(W=function(t){var e=[];return"function"==typeof t?e.push("(".concat(t,")()")):e.push(t),URL.createObjectURL(new Blob(e))}("\nlet scriptImported = false\nself.addEventListener('message', async (e) => {\n  const { file, id, imageCompressionLibUrl, options } = e.data\n  options.onProgress = (progress) => self.postMessage({ progress, id })\n  try {\n    if (!scriptImported) {\n      // console.log('[worker] importScripts', imageCompressionLibUrl)\n      self.importScripts(imageCompressionLibUrl)\n      scriptImported = true\n    }\n    // console.log('[worker] self', self)\n    const compressedFile = await imageCompression(file, options)\n    self.postMessage({ file: compressedFile, id })\n  } catch (e) {\n    // console.error('[worker] error', e)\n    self.postMessage({ error: e.message + '\\n' + e.stack, id })\n  }\n})\n"));var o=new Worker(W);o.addEventListener("message",(function(t){if(e.signal&&e.signal.aborted)o.terminate();else if(void 0===t.data.progress){if(t.data.error)return r(new Error(t.data.error)),void o.terminate();i(t.data.file),o.terminate()}else e.onProgress(t.data.progress)})),o.addEventListener("error",r),e.signal&&e.signal.addEventListener("abort",(function(){r(e.signal.reason),o.terminate()})),o.postMessage({file:t,imageCompressionLibUrl:e.libURL,options:(0,n.Z)((0,n.Z)({},e),{},{onProgress:void 0,signal:void 0})})}))}function O(t,e){return new Promise((function(i,r){var o,a,c,l,h,u;if(o=(0,n.Z)({},e),c=0,l=o.onProgress,o.maxSizeMB=o.maxSizeMB||Number.POSITIVE_INFINITY,h="boolean"!=typeof o.useWebWorker||o.useWebWorker,delete o.useWebWorker,o.onProgress=function(t){c=t,"function"==typeof l&&l(c)},!(t instanceof Blob||t instanceof b))return r(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(t.type))return r(new Error("The file given is not an image"));if(u="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope,!h||"function"!=typeof Worker||u)return F(t,o).then(function(t){try{return a=t,v.call(this)}catch(t){return r(t)}}.bind(this),r);var d=function(){try{return v.call(this)}catch(t){return r(t)}}.bind(this),f=function(e){try{return F(t,o).then((function(t){try{return a=t,d()}catch(t){return r(t)}}),r)}catch(t){return r(t)}};try{return o.libURL=o.libURL||"https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js",T(t,o).then((function(t){try{return a=t,d()}catch(t){return f()}}),f)}catch(t){f()}function v(){try{a.name=t.name,a.lastModified=t.lastModified}catch(t){}try{o.preserveExif&&"image/jpeg"===t.type&&(!o.fileType||o.fileType&&o.fileType===t.type)&&(a=s(t,a))}catch(t){}return i(a)}}))}O.getDataUrlFromFile=E,O.getFilefromDataUrl=y,O.loadImage=x,O.drawImageInCanvas=R,O.drawFileInCanvas=P,O.canvasToFile=I,O.getExifOrientation=U,O.handleMaxWidthOrHeight=_,O.followExifOrientation=B,O.cleanupCanvasMemory=N,O.isAutoOrientationInBrowser=H,O.approximateBelowMaximumCanvasSizeOfBrowser=M,O.copyExifWithoutOrientation=s,O.getBrowserName=C,O.version="2.0.2"}}]);
//# sourceMappingURL=3866.f3d839a8.chunk.js.map