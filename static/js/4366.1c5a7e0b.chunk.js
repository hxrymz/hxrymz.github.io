/*! For license information please see 4366.1c5a7e0b.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkhrmfinance=self.webpackChunkhrmfinance||[]).push([[4366,9760],{9760:(e,l,a)=>{a.r(l),a.d(l,{CloseModal:()=>c,OpenModal:()=>o,default:()=>d});var t=a(2791),s=a(5408),i=a(2350),n=a(184);const r="listDialog_mdh392",d=()=>{const e=(0,i.bh)("listDialog")||{};(0,s.Z)(r);let l=Object.keys(e);return(0,n.jsx)(n.Fragment,{children:l.map(((l,a)=>{let s=e[l];if(s&&s.visible){let e={};s.height&&(e.heigth=s.height),s.width,s.zIndex&&(e.zIndex=s.zIndex-1);let a={zIndex:s.zIndex},i=null,r=s.data;return s.content&&(i=t.cloneElement(s.content,{data:r})),(0,n.jsxs)("div",{className:"ltr-1kbnjow",style:e,children:[(0,n.jsx)("div",{className:"ltr-hoe9xz",children:(0,n.jsx)("div",{className:"ltr-1wao6ny",style:a,id:l,children:i})}),s.data.overlay?(0,n.jsx)("div",{className:"DialogHRMOverlay ".concat(s.visible?"active":""),onClick:()=>{var e;e=l,document.getElementsByTagName("html")[0].classList.remove("has-level-two"),c({id:e})}}):null]},l)}}))})},o=e=>{let l=(0,i.bh)("listDialog")||{},a=(0,i.M5)();l[a]||(l[a]={}),l[a].visible=!0;let t={};e.props?(t=e.props,t.modalID=a):t.modalID=a;let s=document.getElementsByTagName("body")[0];null!==s&&void 0!==s&&s.style&&(s.style.overflowY="hidden"),l[a].isView=e.isView,l[a].observeResize=e.observeResize,l[a].observeResize&&(l[a].observeInterval=setInterval((()=>{let e=document.querySelector("[dialog-key-id='".concat(a,"']")),t=e&&e.getBoundingClientRect();t&&(t.width===l[a].width&&t.height===l[a].height||(l[a].height=t.height+10,l[a].width=t.width,(0,i.Rz)("listDialog",l),(0,i.wt)(r)))}),200)),l[a].display=!0,e.zIndex&&(l[a].zIndex=e.zIndex),e.height&&(l[a].height=e.height),e.width&&(l[a].width=e.width),e.content&&(l[a].content=e.content),l[a].data=t,(0,i.Rz)("listDialog",l),(0,i.wt)(r),setTimeout((()=>{document.getElementsByTagName("html")[0].classList.add("has-level-two"),(0,i.Rz)("modalOpen",a),(0,i.wt)(r)}),125)},c=e=>{let l=(0,i.bh)("listDialog")||{},a=e.id;if(l[a]){var t,s,n;l[a].observeResize&&l[a].observeInterval&&clearInterval(l[a].observeInterval),l[a].display=!1,null===(t=l[a])||void 0===t||null===(s=t.data)||void 0===s||null===(n=s.closeEvent)||void 0===n||n.call(s),(0,i.Rz)("listDialog",l),delete l[a],document.getElementsByTagName("body")[0].style.overflowY=null,(0,i.wt)(r),setTimeout((()=>{delete l[a],document.getElementsByTagName("html")[0].classList.remove("has-level-two"),(0,i.Rz)("modalOpen",null)}),750)}}},5281:(e,l,a)=>{a.d(l,{Z:()=>n});var t=a(2791),s=a(184);class i extends t.Component{constructor(){super(),this.state={scrollPosition:null},this.handleInterval=this.handleInterval.bind(this),this.handleRequestAnimationFrame=this.handleRequestAnimationFrame.bind(this)}componentWillMount(){this.intervalID=setInterval(this.handleInterval,50)}componentWillUnmount(){clearInterval(this.intervalID),cancelAnimationFrame(this.requestID),this.requestID=null,this.intervalID=null}getWindowScrollTop(){return window.pageYOffset||document.documentElement.scrollTop}handleInterval(){cancelAnimationFrame(this.requestID),this.requestID=requestAnimationFrame(this.handleRequestAnimationFrame)}handleRequestAnimationFrame(){const{scrollPosition:e}=this.state,l=this.getWindowScrollTop();l!==e&&("function"===typeof this.props.scrollhandler&&this.props.scrollhandler(l),this.setState({scrollPosition:l}))}render(){return(0,s.jsx)(s.Fragment,{})}}const n=i},4366:(e,l,a)=>{a.r(l),a.d(l,{default:()=>y});var t=a(2791),s=a(2350),i=a(2647),n=(a(5027),a(5868),a(1475)),r=a(5288),d=a(4050),o=a(7689),c=a(5281),v=a(9760),m=a(1087),h=a(184);const u=(0,i.LA)(),p=(0,i.A5)(),_=(0,i.Vg)(),b=(0,r.cn)(),g=(0,i.PU)(),x=(0,i.tW)(),f="feedfMbls_2list",y=e=>{var l,a,i,r,c;let{data:y,elmId:w,updObs:D}=e;const[z,R]=(0,t.useState)(!1),[M,k]=(0,t.useState)(0),[F,S]=(0,t.useState)(128),[T,A]=(0,t.useState)(!1),[C,E]=(0,t.useState)(!1),[q,U]=(0,t.useState)(!1),[B,O]=(0,t.useState)(!1);let L=(0,o.TH)();(0,o.s0)();(0,t.useEffect)((()=>{setTimeout((()=>{(0,d.Ht)("global_accounts","global_account_params",G)}),350)}),[L]),(0,t.useEffect)((()=>{z||(R(!0),k((0,s.M5)()),(0,d._0)(G),(0,d.ZX)(W))}));const Q=e=>{S((e=>128)),(0,n.lG)(V)},V=()=>{let e={...(0,s.bh)("feedfMbls_list")};(0,s.Rz)(f,e),(0,s.bh)("has_filter_review")&&T?(0,s.Rz)(f,j(e)):(0,s.bh)("has_filter_comp_error")&&C&&(0,s.Rz)(f,N(e)),G()},W=e=>{(0,n.bM)(G),V(),(0,s.Rz)("feedfMbls_list",null),U(!1)},G=async(e,l)=>{k((0,s.M5)()),U(!1),O(!1)},P=e=>{if(O(!0),null!==e&&void 0!==e&&e.initDate&&null!==e&&void 0!==e&&e.lastDate){let l={...e};l.initDate=l.initDate-100,l.lastDate=l.lastDate+8638e4,(0,s.Rz)("date_range_comps",l)}(0,n.lG)(V)};let H=(null===(l=(0,s.bh)("date_range_comps"))||void 0===l?void 0:l.initDate)&&(0,s.sJ)(null===(a=(0,s.bh)("date_range_comps"))||void 0===a?void 0:a.initDate)+" - "+(0,s.sJ)(null===(i=(0,s.bh)("date_range_comps"))||void 0===i?void 0:i.lastDate);return(0,h.jsxs)("div",{className:"",children:[(0,h.jsxs)("div",{className:"accounts_header",children:[(0,h.jsx)("h2",{children:"Movimientos de Ingresos y gastos desde la Applicacion mobile"}),(0,h.jsxs)("div",{className:"_dsplFlx ",children:[(0,h.jsx)(m.OL,{to:"/categories-mobile",children:(0,h.jsx)("p",{className:"group_title addBtn purple",children:"Categorias"})}),(0,h.jsx)("p",{className:"group_title addBtn purple",onClick:n.p8,children:"parseComp"})]}),(0,h.jsxs)("div",{className:"_dsplFlx ",style:{marginTop:14},children:[(0,h.jsx)(_,{placeholder:"Buscar ....",width:360,obs:k,fetchData:Q,loading:q,change:e=>{!B&&O(!0)},callempty:W,keyFlds:"search_acc_record"}),(0,h.jsx)("div",{className:"flexSpace"}),(0,h.jsxs)("div",{className:"_dsplFlx ",children:[(0,h.jsx)("div",{className:"total_comprobante_title",children:"No de Movimientos:"}),(0,h.jsx)("div",{className:"total_comprobante gray",children:(0,h.jsx)("span",{children:null===(r=(0,s._2)((0,s.bh)(f)))||void 0===r?void 0:r.length})})]})]})]}),(0,h.jsxs)("div",{className:"_dsplFlx ",style:{marginBottom:14,maxWidth:500},children:[(0,h.jsxs)("div",{className:"filter_date_btn _dsplFlx",onClick:()=>{var e,l;let a={zIndex:950,height:"80vh",props:{minHeight:"1vh",overlay:!0}};a.content=(0,h.jsx)(u,{onConfirm:P,init:null===(e=(0,s.bh)("date_range_comps"))||void 0===e?void 0:e.initDate,last:null===(l=(0,s.bh)("date_range_comps"))||void 0===l?void 0:l.lastDate,isRange:!0,colors:{"--calendar-primary-color":"var(--hrm_palette-blue-purple)","--calendar-primary-backcolor":"var(--primary-light)","--calendar-light-backcolor":"var(--hrm_palette-general-background-b)","--calendar-primary-hover-backcolor":"var(--hrm_palette-blue-purple_100)","--calendar-light-300":"var(--disabled)","--calendar-light-200":"var(--dark-800)","--calendar-light-100":"var(--dark-900)","--calendar-dark-800":"var(--hrm_palette-blue-purple_100)","--calendar-white-100":"var(--light-100)","--calendar-white":"var(--dark-700)","--calendar-selected_lbl_color":"var(--light-400)","--calendar-selected_lbl_color":"var(--primary-blue--color-30)"}}),(0,v.OpenModal)(a)},children:[(0,h.jsx)("div",{className:"lbl date",children:H||"Fecha"}),(0,h.jsx)(g,{name:"calendar",color:"#66666"})]}),(0,s.bh)("has_filter_review")?(0,h.jsxs)("div",{className:"filter_cmp_btn _dsplFlx",style:{"--filter_cmp_btn_color":T?"var(--hrm_palette-color-orange-800)":"var(--hrm_palette-success-fg)","--filter_cmp_btn_bck-color":T?"var(--hrm_palette-color-orange-100)":"var(--hrm_palette-success-100)"},onClick:()=>{let e={...(0,s.bh)("feedfMbls_list")};(0,s.Rz)(f,e),(0,s.bh)("has_filter_review")&&!T&&(0,s.Rz)(f,j(e)),A(!T)},children:[(0,h.jsx)("div",{className:"lbl",children:T?"En Revision":"Todos"}),(0,h.jsx)(g,{name:T?"alert":"success",color:"#66666"})]}):null,(0,s.bh)("has_filter_comp_error")?(0,h.jsxs)("div",{className:"filter_cmp_btn _dsplFlx",style:{"--filter_cmp_btn_color":C?"var( --hrm_palette-selected-nav-text)":"var(--hrm_palette-success-fg)","--filter_cmp_btn_bck-color":C?"var( --hrm_palette-selected-nav-text-100)":"var(--hrm_palette-success-100)",marginLeft:12},onClick:()=>{let e={...(0,s.bh)("feedfMbls_list")};(0,s.Rz)(f,e),(0,s.bh)("has_filter_comp_error")&&!C&&(0,s.Rz)(f,N(e)),E(!C)},children:[(0,h.jsx)("div",{className:"lbl",children:C?"Contiene errors":"OK"}),(0,h.jsx)(g,{name:C?"alert":"success",color:"#66666"})]}):null,(0,h.jsx)("div",{className:"flexSpace"}),(0,h.jsxs)("div",{className:"_dsplFlx ",children:[(0,h.jsx)("div",{className:"flexSpace"}),(0,h.jsx)("div",{children:(0,h.jsx)(p,{init:(0,s.bh)("date_current_year"),lbl_empty:"Year",list:[{label:"2023",id:2023},{label:"2022",id:2022},{label:"2021",id:2021},{label:"2020",id:2020}],onSelect:e=>(e=>{if(O(!0),e){let l=new Date("01/01/"+e).getTime(),a=new Date("01/01/"+e+1).getTime()-10;(0,s.Rz)("date_current_year",e),(0,s.Rz)("date_range_comps",{initDate:l,lastDate:a}),(0,s.Rz)("date_range_submayor",{initDate:l,lastDate:a})}(0,s.wt)("isLogged_987"),k((0,s.M5)()),(0,n.lG)(V)})(e)})}),(0,h.jsx)("div",{className:"flexSpace"})]})]}),(0,h.jsxs)("div",{className:"accounts_container ",children:[(0,h.jsx)("div",{style:{height:55},children:(0,h.jsx)(I,{})}),B?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("div",{className:"load_animation"}),(0,h.jsxs)("div",{className:"_dsplFlx ",style:{marginTop:32},children:[(0,h.jsx)("div",{className:"flexSpace"}),(0,h.jsxs)("div",{className:"icon_compr _dsplFlx",children:[(0,h.jsx)("div",{className:"lbl_saving",children:"Loading ..."}),(0,h.jsx)(x,{stroke:"#646cff",size:24,strokeW:8})]}),(0,h.jsx)("div",{className:"flexSpace"})]})]}):(0,h.jsxs)("div",{children:[(0,s.bh)(f)&&(null===(c=(0,n.tS)((0,s.bh)(f),F))||void 0===c?void 0:c.map((e=>(0,h.jsx)(b,{data:(0,s.bh)(f)[e],elmId:e,handleRefreshAll:Q},e)))),(0,s.bh)(f)&&(0,s._2)((0,s.bh)(f),F).length>F?(0,h.jsxs)("div",{className:"_dsplFlx ",style:{margin:"15px 0 35px"},children:[(0,h.jsx)("div",{className:"flexSpace"}),(0,h.jsx)("p",{className:"group_title addBtn purple",onClick:()=>{S((e=>e+128))},children:"Cargar Mas"}),(0,h.jsx)("div",{className:"flexSpace"})]}):null]})]})]})},I=e=>{let{}=e;const[l,a]=(0,t.useState)(!1);return(0,h.jsxs)("div",{className:"header_tbl ".concat(l?"_floating":""),children:[(0,h.jsxs)("div",{className:"_dsplFlx hdr_bar purple",children:[(0,h.jsx)("div",{className:"icon tr_bar_5"}),(0,h.jsx)("div",{className:" tr_bar_15",children:"Comprobante"}),(0,h.jsxs)("div",{className:"_dsplFlx tr_bar_70",children:[(0,h.jsx)("div",{className:" tr_bar_15",children:"Fecha"}),(0,h.jsx)("div",{className:" tr_bar_25",children:"Titulo"}),(0,h.jsx)("div",{className:" tr_bar_45",children:"Descripcion"}),(0,h.jsx)("div",{className:" tr_bar_15",children:"Importe"})]}),(0,h.jsx)("div",{className:"flexSpace"}),(0,h.jsx)("div",{className:"icon tr_bar_5"}),(0,h.jsx)("div",{className:"icon tr_bar_5"})]}),(0,h.jsx)(c.Z,{scrollhandler:e=>{e>295?!l&&a(!0):l&&a(!1)}})]})};function j(e){var l=[];return(0,s._2)(e).map((a=>{var t,i;let n=e[a];null!==(t=(0,s.bh)("comp_under_review"))&&void 0!==t&&null!==(i=t.inReview)&&void 0!==i&&i[null===n||void 0===n?void 0:n.comprobanteId]&&l.push(n)})),l}function N(e){var l=[];return(0,s._2)(e).map((a=>{var t,i;let n=e[a];null!==(t=(0,s.bh)("comp_under_review"))&&void 0!==t&&null!==(i=t.hasError)&&void 0!==i&&i[null===n||void 0===n?void 0:n.comprobanteId]&&l.push(n)})),l}},1475:(e,l,a)=>{a.d(l,{Je:()=>n,MX:()=>s,M_:()=>h,Qq:()=>i,bM:()=>v,lG:()=>d,p8:()=>o,sV:()=>r,tS:()=>u,vC:()=>c});var t=a(2350);const s=async e=>{e&&e()},i=async(e,l)=>{var a;let s={query:"getSignedUrl",params:{userId:null===(a=(0,t.bh)("profileUser"))||void 0===a?void 0:a.businessId,fileName:e}};const i=(0,t.I7)(s),n=await i;null!==n&&void 0!==n&&n.url?(0,t.Ey)(l)&&l(null===n||void 0===n?void 0:n.url):(0,t.Ey)(l)&&l(null)},n=async(e,l,a)=>{var s;let i={query:"ProccessImage",params:{userId:null===(s=(0,t.bh)("profileUser"))||void 0===s?void 0:s.businessId,fileName:l,url:e}};const n=(0,t.I7)(i),r=await n;null!==r&&void 0!==r&&r.url?(0,t.Ey)(a)&&a(null===r||void 0===r?void 0:r.url):(0,t.Ey)(a)&&a(null)},r=async(e,l)=>{let a={query:"detectLandMark",params:{url:e}};const s=(0,t.I7)(a),i=await s;l(e,i||null)},d=async e=>{var l,a,s,i;let n={...null===(l=(0,t.bh)((0,t.hQ)()))||void 0===l?void 0:l.search_incms_expns};n.params={businessId:null===(a=(0,t.bh)("profileUser"))||void 0===a?void 0:a.businessId,year:(0,t.bh)("date_current_year"),":date1":null===(s=(0,t.bh)("date_range_comps"))||void 0===s?void 0:s.initDate,":date2":null===(i=(0,t.bh)("date_range_comps"))||void 0===i?void 0:i.lastDate},(0,t.bh)("search_acc_record").split(" ").map(((e,l)=>{e&&(n.params[":search"+l]=e.trim())}));const r=(0,t.I7)(n),d=await r;d&&((0,t.Rz)("feedfMbls_ids",d),(0,t.Rz)("feedfMbls_list",m((0,t.jQ)(d),"date")),e&&e())},o=async()=>{let e=[];(0,t.bh)("feedfMbls_list").map((async(l,a)=>{var s,i,n,r,d,o;if(l.comprobanteId)return;let c={...l},v={...l},m="debit",h="credit";"expense"===(null===v||void 0===v?void 0:v.movementType)&&(m="credit",h="debit");let u=(null===v||void 0===v?void 0:v.title)+"; "+(null===v||void 0===v?void 0:v.description),p=null===(s=(0,t.bh)("categories_ids"))||void 0===s?void 0:s[null===v||void 0===v?void 0:v.categoryId],_={};_.amount=null===v||void 0===v?void 0:v.amount,_.movementId=null===v||void 0===v?void 0:v.movementId,_.description=u,_.date=null===v||void 0===v?void 0:v.date;let b={..._};_.account=null===(i=(0,t.bh)("global_account_params"))||void 0===i?void 0:i.cash_bank.account,_.type=m,b.account=null===p||void 0===p?void 0:p.account,null!==p&&void 0!==p&&p.subAccount&&(b.subAccount=null===p||void 0===p?void 0:p.subAccount),b.type=h;let g=[b,_];c.date?c.date=new Date(c.date).getTime():c.date=(new Date).getTime()+800;let x=await(0,t.V_)(c.date,1*a+4);c.comprobanteId=x,c.document=null===(n=c.document)||void 0===n?void 0:n.trim(),g&&(null===(r=(0,t._2)(g))||void 0===r||r.map((async(a,s)=>{let i=g[a];if(!isNaN(1*i.amount)&&1*i.amount>0){var n,r;let a={...c};a.account=i.account,i.subAccount&&(a.subAccount=i.subAccount),a.movementRef=l.movementId,a.type=i.type,a.amount=1*i.amount,a.operationId=(0,t.M5)(),a.document=(0,t.LO)()+"_"+(0,t.UG)(c.date);let s={...null===(n=(0,t.bh)((0,t.hQ)()))||void 0===n?void 0:n.add_opera};s.params={businessId:null===(r=(0,t.bh)("profileUser"))||void 0===r?void 0:r.businessId,year:(0,t.bh)("date_current_year")},s.form=a,e.push(s)}})));let f={...null===(d=(0,t.bh)((0,t.hQ)()))||void 0===d?void 0:d.upd__incms_expns};f.params={businessId:null===(o=(0,t.bh)("profileUser"))||void 0===o?void 0:o.businessId,movementId:l.movementId,year:(0,t.bh)("date_current_year")},f.data2update={comprobanteId:x},e.push(f)})),setTimeout((()=>{}),4e3)},c=async e=>{var l,a;let s={...null===(l=(0,t.bh)((0,t.hQ)()))||void 0===l?void 0:l.search_categapp};s.params={businessId:null===(a=(0,t.bh)("profileUser"))||void 0===a?void 0:a.businessId},(0,t.bh)("search_categories").split(" ").map(((e,l)=>{e&&(s.params[":search"+l]=e.trim())}));const i=(0,t.I7)(s),n=await i;n&&((0,t.Rz)("categories_ids",n),(0,t.Rz)("categories_list",m((0,t.jQ)(n),"name")),e&&e())},v=async e=>{var l,a;let s={...null===(l=(0,t.bh)((0,t.hQ)()))||void 0===l?void 0:l.all_categapp};s.params={businessId:null===(a=(0,t.bh)("profileUser"))||void 0===a?void 0:a.businessId};const i=(0,t.I7)(s),n=await i;n&&(!function(e){const l=e=>({label:e.name,id:e.categoryId});(0,t.Rz)("categories_pick_data",e.map(l))}(n),(0,t.Rz)("categories_list",m(n,"name")),(0,t.Rz)("categories_ids",(0,t.ME)(n,"categoryId"))),e&&e()};const m=(e,l)=>(0,t.MV)("sort_feedfMbl",[e],(()=>e&&e.sort(((e,a)=>{let t=1*e[l],s=1*a[l];return t<s?-1:t>s?1:0})))),h=async(e,l)=>{var a,s;let i={...null===(a=(0,t.bh)((0,t.hQ)()))||void 0===a?void 0:a.delete__incms_expns};i.params={businessId:null===(s=(0,t.bh)("profileUser"))||void 0===s?void 0:s.businessId,movementId:e};const n=(0,t.I7)(i);await n&&l&&l()},u=(e,l)=>(0,t.MV)("rangeArr",[e,l],(()=>e?(0,t._2)(e).slice(0,l):[]))},5027:()=>{},5868:()=>{}}]);
//# sourceMappingURL=4366.1c5a7e0b.chunk.js.map