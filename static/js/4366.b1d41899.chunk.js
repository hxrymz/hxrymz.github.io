/*! For license information please see 4366.b1d41899.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkhrmfinance=self.webpackChunkhrmfinance||[]).push([[4366],{5281:(e,a,l)=>{l.d(a,{Z:()=>r});var s=l(2791),t=l(184);class i extends s.Component{constructor(){super(),this.state={scrollPosition:null},this.handleInterval=this.handleInterval.bind(this),this.handleRequestAnimationFrame=this.handleRequestAnimationFrame.bind(this)}componentWillMount(){this.intervalID=setInterval(this.handleInterval,50)}componentWillUnmount(){clearInterval(this.intervalID),cancelAnimationFrame(this.requestID),this.requestID=null,this.intervalID=null}getWindowScrollTop(){return window.pageYOffset||document.documentElement.scrollTop}handleInterval(){cancelAnimationFrame(this.requestID),this.requestID=requestAnimationFrame(this.handleRequestAnimationFrame)}handleRequestAnimationFrame(){const{scrollPosition:e}=this.state,a=this.getWindowScrollTop();a!==e&&("function"===typeof this.props.scrollhandler&&this.props.scrollhandler(a),this.setState({scrollPosition:a}))}render(){return(0,t.jsx)(t.Fragment,{})}}const r=i},4366:(e,a,l)=>{l.r(a),l.d(a,{default:()=>j});var s=l(2791),t=l(2350),i=l(2647),r=(l(5027),l(5868),l(1475)),n=l(5288),d=l(4050),o=l(7689),c=l(5281),m=l(9760),v=l(1087),u=l(184);const h=(0,i.LA)(),p=(0,i.A5)(),_=(0,i.Vg)(),b=(0,n.cn)(),x=(0,i.PU)(),f=(0,i.tW)(),g="feedfMbls_2list",j=e=>{var a,l,i,n,c;let{data:j,elmId:D,updObs:w}=e;const[R,F]=(0,s.useState)(!1),[M,k]=(0,s.useState)(0),[S,z]=(0,s.useState)(128),[A,C]=(0,s.useState)(!1),[T,q]=(0,s.useState)(!1),[U,E]=(0,s.useState)(!1),[Q,L]=(0,s.useState)(!1);let W=(0,o.TH)();(0,o.s0)();(0,s.useEffect)((()=>{setTimeout((()=>{(0,d.Ht)("global_accounts","global_account_params",P)}),350)}),[W]),(0,s.useEffect)((()=>{R||(F(!0),k((0,t.M5)()),(0,d._0)(P),(0,d.ZX)(G))}));const O=e=>{z((e=>128)),(0,r.lG)(B)},B=()=>{let e={...(0,t.bh)("feedfMbls_list")};(0,t.Rz)(g,e),(0,t.bh)("has_filter_review")&&A?(0,t.Rz)(g,y(e)):(0,t.bh)("has_filter_comp_error")&&T&&(0,t.Rz)(g,N(e)),P()},G=e=>{(0,r.bM)(P),B(),(0,t.Rz)("feedfMbls_list",null),E(!1)},P=async(e,a)=>{k((0,t.M5)()),E(!1),L(!1)},V=e=>{if(L(!0),null!==e&&void 0!==e&&e.initDate&&null!==e&&void 0!==e&&e.lastDate){let a={...e};a.initDate=a.initDate-100,a.lastDate=a.lastDate+8638e4,(0,t.Rz)("date_range_comps",a)}(0,r.lG)(B)};let H=(null===(a=(0,t.bh)("date_range_comps"))||void 0===a?void 0:a.initDate)&&(0,t.sJ)(null===(l=(0,t.bh)("date_range_comps"))||void 0===l?void 0:l.initDate)+" - "+(0,t.sJ)(null===(i=(0,t.bh)("date_range_comps"))||void 0===i?void 0:i.lastDate);return(0,u.jsxs)("div",{className:"",children:[(0,u.jsxs)("div",{className:"accounts_header",children:[(0,u.jsx)("h2",{children:"Movimientos de Ingresos y gastos desde la Applicacion mobile"}),(0,u.jsxs)("div",{className:"_dsplFlx ",children:[(0,u.jsx)(v.OL,{to:"/categories-mobile",children:(0,u.jsx)("p",{className:"group_title addBtn purple",children:"Categorias"})}),(0,u.jsx)("p",{className:"group_title addBtn purple",onClick:r.p8,children:"parseComp"})]}),(0,u.jsxs)("div",{className:"_dsplFlx ",style:{marginTop:14},children:[(0,u.jsx)(_,{placeholder:"Buscar ....",width:360,obs:k,fetchData:O,loading:U,change:e=>{!Q&&L(!0)},callempty:G,keyFlds:"search_acc_record"}),(0,u.jsx)("div",{className:"flexSpace"}),(0,u.jsxs)("div",{className:"_dsplFlx ",children:[(0,u.jsx)("div",{className:"total_comprobante_title",children:"No de Movimientos:"}),(0,u.jsx)("div",{className:"total_comprobante gray",children:(0,u.jsx)("span",{children:null===(n=(0,t._2)((0,t.bh)(g)))||void 0===n?void 0:n.length})})]})]})]}),(0,u.jsxs)("div",{className:"_dsplFlx ",style:{marginBottom:14,maxWidth:500},children:[(0,u.jsxs)("div",{className:"filter_date_btn _dsplFlx",onClick:()=>{var e,a;let l={zIndex:950,height:"80vh",props:{minHeight:"1vh",overlay:!0}};l.content=(0,u.jsx)(h,{onConfirm:V,init:null===(e=(0,t.bh)("date_range_comps"))||void 0===e?void 0:e.initDate,last:null===(a=(0,t.bh)("date_range_comps"))||void 0===a?void 0:a.lastDate,isRange:!0,colors:{"--calendar-primary-color":"var(--hrm_palette-blue-purple)","--calendar-primary-backcolor":"var(--primary-light)","--calendar-light-backcolor":"var(--hrm_palette-general-background-b)","--calendar-primary-hover-backcolor":"var(--hrm_palette-blue-purple_100)","--calendar-light-300":"var(--disabled)","--calendar-light-200":"var(--dark-800)","--calendar-light-100":"var(--dark-900)","--calendar-dark-800":"var(--hrm_palette-blue-purple_100)","--calendar-white-100":"var(--light-100)","--calendar-white":"var(--dark-700)","--calendar-selected_lbl_color":"var(--light-400)","--calendar-selected_lbl_color":"var(--primary-blue--color-30)"}}),(0,m.OpenModal)(l)},children:[(0,u.jsx)("div",{className:"lbl date",children:H||"Fecha"}),(0,u.jsx)(x,{name:"calendar",color:"#66666"})]}),(0,t.bh)("has_filter_review")?(0,u.jsxs)("div",{className:"filter_cmp_btn _dsplFlx",style:{"--filter_cmp_btn_color":A?"var(--hrm_palette-color-orange-800)":"var(--hrm_palette-success-fg)","--filter_cmp_btn_bck-color":A?"var(--hrm_palette-color-orange-100)":"var(--hrm_palette-success-100)"},onClick:()=>{let e={...(0,t.bh)("feedfMbls_list")};(0,t.Rz)(g,e),(0,t.bh)("has_filter_review")&&!A&&(0,t.Rz)(g,y(e)),C(!A)},children:[(0,u.jsx)("div",{className:"lbl",children:A?"En Revision":"Todos"}),(0,u.jsx)(x,{name:A?"alert":"success",color:"#66666"})]}):null,(0,t.bh)("has_filter_comp_error")?(0,u.jsxs)("div",{className:"filter_cmp_btn _dsplFlx",style:{"--filter_cmp_btn_color":T?"var( --hrm_palette-selected-nav-text)":"var(--hrm_palette-success-fg)","--filter_cmp_btn_bck-color":T?"var( --hrm_palette-selected-nav-text-100)":"var(--hrm_palette-success-100)",marginLeft:12},onClick:()=>{let e={...(0,t.bh)("feedfMbls_list")};(0,t.Rz)(g,e),(0,t.bh)("has_filter_comp_error")&&!T&&(0,t.Rz)(g,N(e)),q(!T)},children:[(0,u.jsx)("div",{className:"lbl",children:T?"Contiene errors":"OK"}),(0,u.jsx)(x,{name:T?"alert":"success",color:"#66666"})]}):null,(0,u.jsx)("div",{className:"flexSpace"}),(0,u.jsxs)("div",{className:"_dsplFlx ",children:[(0,u.jsx)("div",{className:"flexSpace"}),(0,u.jsx)("div",{children:(0,u.jsx)(p,{init:(0,t.bh)("date_current_year"),lbl_empty:"Year",list:[{label:"2023",id:2023},{label:"2022",id:2022},{label:"2021",id:2021},{label:"2020",id:2020}],onSelect:e=>(e=>{if(L(!0),e){let a=new Date("01/01/"+e).getTime(),l=new Date("01/01/"+e+1).getTime()-10;(0,t.Rz)("date_current_year",e),(0,t.Rz)("date_range_comps",{initDate:a,lastDate:l}),(0,t.Rz)("date_range_submayor",{initDate:a,lastDate:l})}(0,t.wt)("isLogged_987"),k((0,t.M5)()),(0,r.lG)(B)})(e)})}),(0,u.jsx)("div",{className:"flexSpace"})]})]}),(0,u.jsxs)("div",{className:"accounts_container ",children:[(0,u.jsx)("div",{style:{height:55},children:(0,u.jsx)(I,{})}),Q?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{className:"load_animation"}),(0,u.jsxs)("div",{className:"_dsplFlx ",style:{marginTop:32},children:[(0,u.jsx)("div",{className:"flexSpace"}),(0,u.jsxs)("div",{className:"icon_compr _dsplFlx",children:[(0,u.jsx)("div",{className:"lbl_saving",children:"Loading ..."}),(0,u.jsx)(f,{stroke:"#646cff",size:24,strokeW:8})]}),(0,u.jsx)("div",{className:"flexSpace"})]})]}):(0,u.jsxs)("div",{children:[(0,t.bh)(g)&&(null===(c=(0,r.tS)((0,t.bh)(g),S))||void 0===c?void 0:c.map((e=>(0,u.jsx)(b,{data:(0,t.bh)(g)[e],elmId:e,handleRefreshAll:O},e)))),(0,t.bh)(g)&&(0,t._2)((0,t.bh)(g),S).length>S?(0,u.jsxs)("div",{className:"_dsplFlx ",style:{margin:"15px 0 35px"},children:[(0,u.jsx)("div",{className:"flexSpace"}),(0,u.jsx)("p",{className:"group_title addBtn purple",onClick:()=>{z((e=>e+128))},children:"Cargar Mas"}),(0,u.jsx)("div",{className:"flexSpace"})]}):null]})]})]})},I=e=>{let{}=e;const[a,l]=(0,s.useState)(!1);return(0,u.jsxs)("div",{className:"header_tbl ".concat(a?"_floating":""),children:[(0,u.jsxs)("div",{className:"_dsplFlx hdr_bar purple",children:[(0,u.jsx)("div",{className:"icon tr_bar_5"}),(0,u.jsx)("div",{className:" tr_bar_15",children:"Comprobante"}),(0,u.jsxs)("div",{className:"_dsplFlx tr_bar_70",children:[(0,u.jsx)("div",{className:" tr_bar_15",children:"Fecha"}),(0,u.jsx)("div",{className:" tr_bar_25",children:"Titulo"}),(0,u.jsx)("div",{className:" tr_bar_45",children:"Descripcion"}),(0,u.jsx)("div",{className:" tr_bar_15",children:"Importe"})]}),(0,u.jsx)("div",{className:"flexSpace"}),(0,u.jsx)("div",{className:"icon tr_bar_5"}),(0,u.jsx)("div",{className:"icon tr_bar_5"})]}),(0,u.jsx)(c.Z,{scrollhandler:e=>{e>295?!a&&l(!0):a&&l(!1)}})]})};function y(e){var a=[];return(0,t._2)(e).map((l=>{var s,i;let r=e[l];null!==(s=(0,t.bh)("comp_under_review"))&&void 0!==s&&null!==(i=s.inReview)&&void 0!==i&&i[null===r||void 0===r?void 0:r.comprobanteId]&&a.push(r)})),a}function N(e){var a=[];return(0,t._2)(e).map((l=>{var s,i;let r=e[l];null!==(s=(0,t.bh)("comp_under_review"))&&void 0!==s&&null!==(i=s.hasError)&&void 0!==i&&i[null===r||void 0===r?void 0:r.comprobanteId]&&a.push(r)})),a}},1475:(e,a,l)=>{l.d(a,{Je:()=>r,MX:()=>t,M_:()=>u,Qq:()=>i,bM:()=>m,lG:()=>d,p8:()=>o,sV:()=>n,tS:()=>h,vC:()=>c});var s=l(2350);const t=async e=>{e&&e()},i=async(e,a)=>{var l;let t={query:"getSignedUrl",params:{userId:null===(l=(0,s.bh)("profileUser"))||void 0===l?void 0:l.businessId,fileName:e}};const i=(0,s.I7)(t),r=await i;null!==r&&void 0!==r&&r.url?(0,s.Ey)(a)&&a(null===r||void 0===r?void 0:r.url):(0,s.Ey)(a)&&a(null)},r=async(e,a,l)=>{var t;let i={query:"ProccessImage",params:{userId:null===(t=(0,s.bh)("profileUser"))||void 0===t?void 0:t.businessId,fileName:a,url:e}};const r=(0,s.I7)(i),n=await r;null!==n&&void 0!==n&&n.url?(0,s.Ey)(l)&&l(null===n||void 0===n?void 0:n.url):(0,s.Ey)(l)&&l(null)},n=async(e,a)=>{let l={query:"detectLandMark",params:{url:e}};const t=(0,s.I7)(l),i=await t;a(e,i||null)},d=async e=>{var a,l,t,i;let r={...null===(a=(0,s.bh)((0,s.hQ)()))||void 0===a?void 0:a.search_incms_expns};r.params={businessId:null===(l=(0,s.bh)("profileUser"))||void 0===l?void 0:l.businessId,year:(0,s.bh)("date_current_year"),":date1":null===(t=(0,s.bh)("date_range_comps"))||void 0===t?void 0:t.initDate,":date2":null===(i=(0,s.bh)("date_range_comps"))||void 0===i?void 0:i.lastDate},(0,s.bh)("search_acc_record").split(" ").map(((e,a)=>{e&&(r.params[":search"+a]=e.trim())}));const n=(0,s.I7)(r),d=await n;d&&((0,s.Rz)("feedfMbls_ids",d),(0,s.Rz)("feedfMbls_list",v((0,s.jQ)(d),"date")),e&&e())},o=async()=>{let e=[];(0,s.bh)("feedfMbls_list").map((async(a,l)=>{var t,i,r,n,d,o;if(a.comprobanteId)return;let c={...a},m={...a},v="debit",u="credit";"expense"===(null===m||void 0===m?void 0:m.movementType)&&(v="credit",u="debit");let h=(null===m||void 0===m?void 0:m.title)+"; "+(null===m||void 0===m?void 0:m.description),p=null===(t=(0,s.bh)("categories_ids"))||void 0===t?void 0:t[null===m||void 0===m?void 0:m.categoryId],_={};_.amount=null===m||void 0===m?void 0:m.amount,_.movementId=null===m||void 0===m?void 0:m.movementId,_.description=h,_.date=null===m||void 0===m?void 0:m.date;let b={..._};_.account=null===(i=(0,s.bh)("global_account_params"))||void 0===i?void 0:i.cash_bank.account,_.type=v,b.account=null===p||void 0===p?void 0:p.account,null!==p&&void 0!==p&&p.subAccount&&(b.subAccount=null===p||void 0===p?void 0:p.subAccount),b.type=u;let x=[b,_];c.date?c.date=new Date(c.date).getTime():c.date=(new Date).getTime()+800;let f=await(0,s.V_)(c.date,1*l+4);c.comprobanteId=f,c.document=null===(r=c.document)||void 0===r?void 0:r.trim(),x&&(null===(n=(0,s._2)(x))||void 0===n||n.map((async(l,t)=>{let i=x[l];if(!isNaN(1*i.amount)&&1*i.amount>0){var r,n;let l={...c};l.account=i.account,i.subAccount&&(l.subAccount=i.subAccount),l.movementRef=a.movementId,l.type=i.type,l.amount=1*i.amount,l.operationId=(0,s.M5)(),l.document=(0,s.LO)()+"_"+(0,s.UG)(c.date);let t={...null===(r=(0,s.bh)((0,s.hQ)()))||void 0===r?void 0:r.add_opera};t.params={businessId:null===(n=(0,s.bh)("profileUser"))||void 0===n?void 0:n.businessId,year:new Date(c.date).getFullYear()},t.form=l,e.push(t)}})));let g={...null===(d=(0,s.bh)((0,s.hQ)()))||void 0===d?void 0:d.upd__incms_expns};g.params={businessId:null===(o=(0,s.bh)("profileUser"))||void 0===o?void 0:o.businessId,movementId:a.movementId,year:(0,s.bh)("date_current_year")},g.data2update={comprobanteId:f},e.push(g)})),setTimeout((()=>{}),4e3)},c=async e=>{var a,l;let t={...null===(a=(0,s.bh)((0,s.hQ)()))||void 0===a?void 0:a.search_categapp};t.params={businessId:null===(l=(0,s.bh)("profileUser"))||void 0===l?void 0:l.businessId},(0,s.bh)("search_categories").split(" ").map(((e,a)=>{e&&(t.params[":search"+a]=e.trim())}));const i=(0,s.I7)(t),r=await i;r&&((0,s.Rz)("categories_ids",r),(0,s.Rz)("categories_list",v((0,s.jQ)(r),"name")),e&&e())},m=async e=>{var a,l;let t={...null===(a=(0,s.bh)((0,s.hQ)()))||void 0===a?void 0:a.all_categapp};t.params={businessId:null===(l=(0,s.bh)("profileUser"))||void 0===l?void 0:l.businessId};const i=(0,s.I7)(t),r=await i;r&&(!function(e){const a=e=>({label:e.name,id:e.categoryId});(0,s.Rz)("categories_pick_data",e.map(a))}(r),(0,s.Rz)("categories_list",v(r,"name")),(0,s.Rz)("categories_ids",(0,s.ME)(r,"categoryId"))),e&&e()};const v=(e,a)=>(0,s.MV)("sort_feedfMbl",[e],(()=>e&&e.sort(((e,l)=>{let s=1*e[a],t=1*l[a];return s<t?-1:s>t?1:0})))),u=async(e,a)=>{var l,t;let i={...null===(l=(0,s.bh)((0,s.hQ)()))||void 0===l?void 0:l.delete__incms_expns};i.params={businessId:null===(t=(0,s.bh)("profileUser"))||void 0===t?void 0:t.businessId,movementId:e};const r=(0,s.I7)(i);await r&&a&&a()},h=(e,a)=>(0,s.MV)("rangeArr",[e,a],(()=>e?(0,s._2)(e).slice(0,a):[]))},5027:()=>{},5868:()=>{}}]);
//# sourceMappingURL=4366.b1d41899.chunk.js.map