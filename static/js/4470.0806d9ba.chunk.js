"use strict";(self.webpackChunkhrmfinance=self.webpackChunkhrmfinance||[]).push([[4470],{2064:(e,t,a)=>{a.r(t),a.d(t,{default:()=>f});var o=a(2791),l=a(2350),d=(a(1e3),a(2647)),i=a(3588),s=a(6963),n=a(4e3);let r=0,c=null,b=null;const m=async e=>{const t=await s.PDFDocument.create();if(t.registerFontkit(n.Z),c=await t.embedFont(s.StandardFonts.TimesRoman,{subset:!0}),b=await t.embedFont(s.StandardFonts.TimesRomanBold,{subset:!0}),(0,l.bh)("modernFontReport")){let e=(0,l.bh)("Roboto-Bold.ttf"),a=(0,l.bh)("ggSans-Italic.ttf"),o=(0,l.bh)("ggSans-Medium.ttf");const d=await fetch(e).then((e=>e.arrayBuffer()));b=await t.embedFont(d,{subset:!0});await fetch(a).then((e=>e.arrayBuffer()));const i=await fetch(o).then((e=>e.arrayBuffer()));c=await t.embedFont(i,{subset:!0})}let a=t.addPage();const{width:o,height:d}=a.getSize(),i=10;r=d-40,a.drawText(e.entryName||"Comprobante Manual",{x:50,y:r,size:14,font:b,color:(0,s.rgb)(0,0,0)});const m=b.widthOfTextAtSize(e.comprobanteId,14),u=c.widthOfTextAtSize("Comprobante:  ",13);a.drawText("Comprobante:  ",{x:580-u-m,y:r,size:13,font:c,color:(0,s.rgb)(0,0,0)}),a.drawText(e.comprobanteId+"",{x:580-m,y:r,size:14,font:b,color:(0,s.rgb)(0,0,0)}),r-=25;const v=c.widthOfTextAtSize("Fecha:  ",13),p=b.widthOfTextAtSize((0,l.Gv)(e.date)+"",14);a.drawText("Fecha:  ",{x:580-v-p,y:r,size:13,font:c,color:(0,s.rgb)(0,0,0)}),a.drawText((0,l.Gv)(e.date)+"",{x:580-p,y:r,size:14,font:b,color:(0,s.rgb)(0,0,0)}),r-=15;let x=(null===e||void 0===e?void 0:e.operations)||[];r-=18,a.drawText("Cuenta",{x:20,y:r,size:13,font:b,color:(0,s.rgb)(0,0,0)}),a.drawText("Sub Cuenta",{x:205,y:r,size:13,font:b,color:(0,s.rgb)(0,0,0)}),a.drawText("Documento",{x:360,y:r,size:13,font:b,color:(0,s.rgb)(0,0,0)});const h=b.widthOfTextAtSize("Debito",13);a.drawText("Debito",{x:500-h,y:r,size:13,font:b,color:(0,s.rgb)(0,0,0)});const y=b.widthOfTextAtSize("Credito",13);a.drawText("Credito",{x:580-y,y:r,size:13,font:b,color:(0,s.rgb)(0,0,0)}),r-=8,a.drawRectangle({x:15,y:r+1,width:570,height:.95,color:(0,s.rgb)(0,0,0),borderColor:(0,s.rgb)(0,0,0)}),Array.isArray(x)&&x.map(((e,t)=>{var o,l,d,n,b,m;(r-=16,null!==e&&void 0!==e&&null!==(o=e.account)&&void 0!==o&&o.name)&&a.drawText((null===e||void 0===e||null===(b=e.account)||void 0===b?void 0:b.name)+"",{x:20,y:r,size:i,font:c,color:(0,s.rgb)(0,0,0)});null!==e&&void 0!==e&&null!==(l=e.sub_account)&&void 0!==l&&l.subAccountName&&a.drawText((null===e||void 0===e||null===(m=e.sub_account)||void 0===m?void 0:m.subAccountName)+"",{x:205,y:r,size:i,font:c,color:(0,s.rgb)(0,0,0)});a.drawText((null===e||void 0===e?void 0:e.document)+"",{x:360,y:r,size:i,font:c,color:(0,s.rgb)(0,0,0)});let u=null!==e&&void 0!==e&&e.debit?null===(d=1*(null===e||void 0===e?void 0:e.debit))||void 0===d?void 0:d.toFixed(2):"0.00";const v=c.widthOfTextAtSize(u+"",i);a.drawText(u+"",{x:500-v,y:r,size:i,font:c,color:(0,s.rgb)(0,0,0)});let p=null!==e&&void 0!==e&&e.credit?null===(n=1*(null===e||void 0===e?void 0:e.credit))||void 0===n?void 0:n.toFixed(2):"0.00";const x=c.widthOfTextAtSize(p+"",i);a.drawText(p+"",{x:580-x,y:r,size:i,font:c,color:(0,s.rgb)(0,0,0)})})),r-=28,a.drawRectangle({x:15,y:r+1,width:570,height:.85,color:(0,s.rgb)(0,0,0),borderColor:(0,s.rgb)(0,0,0)}),r-=18,a.drawText("Detalles: ",{x:50,y:r,size:12,font:c,color:(0,s.rgb)(0,0,0)}),r-=18,a.drawText(e.description?e.description:"",{x:70,y:r,size:11,font:c,color:(0,s.rgb)(0,0,0)});let _=function(e){let t=new Blob([e],{type:"application/pdf"});return(window.URL||window.webkitURL).createObjectURL(t)}(await t.save());window.open(_)};var u=a(9760),v=a(2692),p=a(2502),x=a(184);const h=(0,d.JC)(),y=(0,v.dz)(),_=(0,d.PU)(),f=e=>{var t,a,d;let{data:s,item:n}=e;const[r,c]=(0,o.useState)(!1),[b,u]=(0,o.useState)(0);(0,o.useEffect)((()=>{if(!r){var e;if(c(!0),null!==n&&void 0!==n&&n.employeeId)null!==(e=(0,l.bh)("employees_ids"))&&void 0!==e&&e[null===n||void 0===n?void 0:n.employeeId]||(0,p.Dy)(v);u((0,l.M5)())}}));const v=()=>{u((0,l.M5)())};let h=null===(t=(0,l.bh)("employees_ids"))||void 0===t||null===(a=t[null===n||void 0===n?void 0:n.employeeId])||void 0===a?void 0:a.name;return(0,x.jsxs)("div",{style:{maxHeight:"96vh",minHeight:"90vh",width:"960px",overflow:"auto",background:"var(--hrm_palette-general-background-b)",borderRadius:13,padding:"10px 19px"},children:[(0,x.jsx)("div",{className:"_dsplFlx ",children:(0,x.jsx)("div",{className:"flexSpace"})}),(0,x.jsxs)("div",{className:"_dsplFlx ",children:[(0,x.jsxs)("div",{className:"_dsplFlx",style:{marginTop:20},children:[(0,x.jsx)("div",{className:"desc_lbl",children:"Comprobante:"}),(0,x.jsx)("div",{className:"name comprobante_id",style:0!==n.balance?{color:"var(--hrm_palette-selected-nav-text)"}:{},children:null===n||void 0===n?void 0:n.comprobanteId})]}),0!==n.balance?(0,x.jsx)("div",{className:"msg_alert",children:(0,x.jsx)("div",{className:"msg_alert_title",children:"El comprobante no esta cuadrado"})}):null,(0,x.jsx)("div",{className:"flexSpace"}),(0,x.jsx)("div",{className:"icon",onClick:()=>{m(n)},children:(0,x.jsx)(_,{name:"printer",color:"#282828"})})]}),(0,x.jsxs)("div",{className:"_dsplFlx cmp_dtls",children:[(0,x.jsx)("div",{className:"flexSpace"}),(0,x.jsxs)("div",{className:"_dsplFlx",children:[(0,x.jsx)("div",{className:"desc_lbl"}),(0,x.jsx)("div",{className:"name",children:(0,l.sG)(null===n||void 0===n?void 0:n.date)})]})]}),(0,x.jsxs)("div",{className:"_dsplFlx hdr_bar purple",children:[(0,x.jsx)("div",{className:"tr_bar_15",children:"Cuenta"}),(0,x.jsx)("div",{className:"tr_bar_15",children:"Sub Cuenta"}),(0,x.jsx)("div",{className:"tr_bar_40",children:"Documento"}),(0,x.jsx)("div",{className:"tr_bar_15",children:"Debito"}),(0,x.jsx)("div",{className:"tr_bar_15",children:"Credito"})]}),null===(d=(0,i.Eb)(null===n||void 0===n?void 0:n.operations))||void 0===d?void 0:d.map(((e,t)=>(0,x.jsx)(w,{element:e,in2D:t},t))),(0,x.jsxs)("div",{className:"cmp_desc",children:[(0,x.jsx)("div",{className:"desc_lbl",children:"Detalles:"}),(0,x.jsxs)("div",{className:"description",children:[null===n||void 0===n?void 0:n.description," ",h]})]}),(0,x.jsxs)("div",{className:"_dsplFlx cmp_dtls",children:[(0,x.jsx)("div",{className:"flexSpace"}),(0,x.jsx)("span",{className:"entryType",children:n.entryName||"Comprobante Manual"})]})]})},w=e=>{var t,a;let{element:o,in2D:d}=e;return(0,x.jsxs)("div",{className:"_dsplFlx hdr_bar",children:[(0,x.jsx)("div",{className:"tr_bar_15",children:(0,x.jsx)(h,{data:o.account,labelField:"code",infoField:"name"})}),(0,x.jsx)("div",{className:"tr_bar_15",children:(0,x.jsx)(h,{data:o.sub_account,labelField:"subAccount",infoField:"subAccountName"})}),(0,x.jsx)("div",{className:"tr_bar_40",onClick:()=>{if((0,l.ML)()){let e=(0,l.bh)("lastTimeCallModal")||0;if(Date.now()>e){let e=["document","amount","type","description","account","subAccount","comprobanteId"],t=(0,l.Ld)({...(0,l.bh)("comprobante_list")[o.operationId]},e);(0,l.Rz)("upd_comprobantebyId",t),(0,l.Rz)("upd_comprobantebyId_bck",JSON.parse(JSON.stringify(t))),(0,l.Rz)("lastTimeCallModal",Date.now()+320);let a={zIndex:450,height:"40vh",props:{minHeight:"1vh",overlay:!0,closeEvent:()=>{}}};a.content=(0,x.jsx)(y,{confirm:()=>{},item:o}),(0,u.OpenModal)(a)}}},children:o.document}),(0,x.jsx)("div",{className:"tr_bar_15",children:null===(t=1*o.debit)||void 0===t?void 0:t.toFixed(2)}),(0,x.jsx)("div",{className:"tr_bar_15",children:null===(a=1*o.credit)||void 0===a?void 0:a.toFixed(2)})]},d)}},2502:(e,t,a)=>{a.d(t,{Dy:()=>l,G:()=>n,aU:()=>s,kQ:()=>d,lG:()=>i});var o=a(2350);const l=async e=>{var t,a;let l={...null===(t=(0,o.bh)((0,o.hQ)()))||void 0===t?void 0:t.all_employee};l.params={businessId:null===(a=(0,o.bh)("profileUser"))||void 0===a?void 0:a.businessId};const d=(0,o.I7)(l),i=await d;i&&((0,o.Rz)("employees_list",s((0,o.jQ)(i),"code")),(0,o.Rz)("employees_ids",(0,o.ME)((0,o.jQ)(i),"employeeId")),e&&e())},d=async e=>{var t,a;let l={...null===(t=(0,o.bh)((0,o.hQ)()))||void 0===t?void 0:t.search_employee};l.params={businessId:null===(a=(0,o.bh)("profileUser"))||void 0===a?void 0:a.businessId,":search":(0,o.bh)("searchQry")};const d=(0,o.I7)(l),i=await d;i&&((0,o.Rz)("employees_list",s((0,o.jQ)(i),"code")),e&&e())},i=async(e,t)=>{var a,l,d,i;let s={...null===(a=(0,o.bh)((0,o.hQ)()))||void 0===a?void 0:a.filter_search_opera};s.params={businessId:null===(l=(0,o.bh)("profileUser"))||void 0===l?void 0:l.businessId,year:(0,o.bh)("date_current_year"),":date1":(null===(d=(0,o.bh)("date_range_comps"))||void 0===d?void 0:d.initDate)-10,":date2":null===(i=(0,o.bh)("date_range_comps"))||void 0===i?void 0:i.lastDate,":search0":e};const n=(0,o.I7)(s),r=await n;r&&!r.error&&((0,o.Rz)("paystub_submayor_list",r),(0,o.Rz)("paystub_submayor_group",function(e){var t={};e.length>0?e.map((e=>{let a=e.date+"_"+e.comprobanteId;if(!t[a]){t[a]={},["date","description","entryName","comprobanteId","employeeId","document"].forEach((o=>{t[a][o]=e[o]})),t[a].amount=0,t[a].balance=0,t[a].operations=[]}e.type&&(t[a].balance=1*(0,o.Zv)(t[a].balance,2)+("debit"===e.type?1*(0,o.Zv)(e.amount,2):0),t[a].operations.push(function(e){var t;let a={};a.employeeId=null===(t=(0,o.bh)("employees_ids"))||void 0===t?void 0:t[e.employeeId],a.comprobanteId=e.comprobanteId,a.document=e.document,a.date=e.date,"credit"===e.type?(a.debit=0,a.credit=e.amount):"debit"===e.type&&(a.credit=0,a.debit=e.amount);return a}(e)))})):t=null;return t}((0,o.jQ)(r)))),t&&t()};const s=(e,t)=>(0,o.MV)("sortEmployees",[e],(()=>e&&e.sort(((e,a)=>{let o=1*e[t],l=1*a[t];return o<l?-1:o>l?1:0})))),n=async(e,t)=>{var a;let l={query:"deleteEmployeesHRG",params:{businessId:null===(a=(0,o.bh)("profileUser"))||void 0===a?void 0:a.businessId,employeeId:e}};const d=(0,o.I7)(l);await d&&t&&t()}}}]);
//# sourceMappingURL=4470.0806d9ba.chunk.js.map