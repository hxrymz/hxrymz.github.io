"use strict";(self.webpackChunkhrmfinance=self.webpackChunkhrmfinance||[]).push([[481],{481:(e,i,l)=>{l.r(i),l.d(i,{default:()=>b});var s=l(2791),d=l(2350),n=(l(3971),l(9760)),a=l(6496),o=l(2647),c=(l(261),l(184));const t=e=>{let{data:i,confirm:l,handleClick:s,close:d}=e;const{modalID:a}=i,o=e=>{(0,n.CloseModal)({id:a})};return(0,c.jsxs)("div",{style:{maxHeight:"40vh",minHeight:"28vh",overflow:"auto",background:"var(--hrm_palette-general-background-b)",borderRadius:13,padding:"10px 19px"},children:[(0,c.jsxs)("div",{className:"_dsplFlx ",children:[(0,c.jsx)("p",{className:"form_title",children:"Eliminar Invoice"}),(0,c.jsx)("div",{className:"flexSpace"})]}),(0,c.jsx)("div",{className:"_dsplFlx ",children:(0,c.jsx)("span",{children:"Una vez eliminado no podra ser recuperado"})}),(0,c.jsxs)("div",{className:"_dsplFlx ",style:{padding:"15px 10px"},children:[(0,c.jsx)("div",{className:"flexSpace"}),(0,c.jsx)("p",{className:"group_title addBtn",onClick:o,children:"Cancelar"}),(0,c.jsx)("p",{className:"group_title addBtn red",onClick:()=>{l(),o()},children:"Eliminar"})]})]})},r=e=>{let{data:i,confirm:l,handleClick:s,close:d}=e;const{modalID:a}=i;return(0,c.jsxs)("div",{style:{maxHeight:"40vh",minHeight:"18vh",overflow:"auto",background:"#fff",borderRadius:13,padding:"10px 19px"},children:[(0,c.jsxs)("div",{className:"_dsplFlx ",children:[(0,c.jsx)("p",{className:"form_title",style:{color:"var(--hrm_palette-static-brand-red"},children:"Lo sentimos"}),(0,c.jsx)("div",{className:"flexSpace"})]}),(0,c.jsx)("div",{className:"_dsplFlx ",children:(0,c.jsx)("span",{children:"no tiene acceso a esta operacion"})}),(0,c.jsxs)("div",{className:"_dsplFlx ",style:{padding:"5px 10px"},children:[(0,c.jsx)("div",{className:"flexSpace"}),(0,c.jsx)("p",{className:"group_title addBtn blue",onClick:()=>{(0,n.CloseModal)({id:a})},children:"OK"})]})]})};var v=l(5986),m=l(24),p=l(713);const h=e=>{let{data:i,invoice:l}=e;const{modalID:s}=i;return(0,c.jsxs)("div",{style:{maxHeight:"40vh",minHeight:"18vh",width:"520px",overflow:"auto",background:"#fff",borderRadius:13,padding:"10px 19px"},children:[(0,c.jsxs)("div",{className:"_dsplFlx ",children:[(0,c.jsx)("p",{className:"form_title",style:{color:"var(--hrm_palette-static-brand-red"},children:"Lo sentimos"}),(0,c.jsx)("div",{className:"flexSpace"})]}),(0,c.jsxs)("div",{className:"_dsplFlx invoice_id_voucher",children:[(0,c.jsx)("h5",{children:"ya existe un Voucher associado con el invoice"}),(0,c.jsx)("h4",{children:l})]}),(0,c.jsxs)("div",{className:"_dsplFlx ",style:{padding:"5px 10px"},children:[(0,c.jsx)("div",{className:"flexSpace"}),(0,c.jsx)("p",{className:"group_title addBtn blue",onClick:()=>{(0,n.CloseModal)({id:s})},children:"OK"})]})]})},u=(0,o.PU)(),x=(0,v.DY)(),_=(0,m.AA)(),b=e=>{var i,l,o;let{data:v,index:m,handleRefreshAll:b,show:j}=e;const[f,I]=(0,s.useState)(!1),[g,N]=(0,s.useState)(0);if((0,s.useEffect)((()=>{f||(I(!0),N((0,d.M5)()))})),!j)return null;const y=()=>{N((0,d.M5)())},C=()=>{(0,a.p9)(y)},k=()=>{(0,a.jB)(null===v||void 0===v?void 0:v.invoiceId,b)},w=e=>{let i={zIndex:450,height:"80vh",props:{minHeight:"1vh",overlay:!0,closeEvent:()=>{}}};if(e)i.content=(0,c.jsx)(h,{invoice:null===v||void 0===v?void 0:v.document.trim()});else{let e=null===v||void 0===v?void 0:v.description.split("Sale to ")[1];(0,d.Rz)("new_voucher",{invoice:null===v||void 0===v?void 0:v.document.trim(),invoiceId:null===v||void 0===v?void 0:v.invoiceId.trim(),clientName:e.trim()}),i.content=(0,c.jsx)(_,{})}(0,n.OpenModal)(i)};(0,a.Hy)(null===(i=(0,d.bh)("sub_invoice_group"))||void 0===i?void 0:i[v.invoiceId],"subInvoice");return(0,c.jsx)("div",{className:"item_acc ".concat(m),children:(0,c.jsxs)("div",{className:"_dsplFlx item_box invoice_header",children:[(0,c.jsx)("div",{className:"name",children:(0,d.sJ)(null===v||void 0===v?void 0:v.date)}),(0,c.jsx)("div",{className:"code",style:{marginLeft:15},children:null===v||void 0===v?void 0:v.document}),(0,c.jsx)("div",{className:"description",style:{marginLeft:15},children:null===v||void 0===v?void 0:v.description}),(0,c.jsx)("div",{className:"flexSpace"}),(0,c.jsx)("div",{className:"flexSpace"}),(0,c.jsxs)("div",{className:"_dsplFlx ",children:[null!==(l=(0,d.Ch)()[(0,d.bh)("date_current_year")])&&void 0!==l&&l.isClosed?null:(0,c.jsx)("div",{className:" addSbAcc purple",onClick:()=>{(0,p.fK)(null===v||void 0===v?void 0:v.document.trim(),w)},children:"add Voucher"}),(0,c.jsx)("div",{className:" addSbAcc purple",onClick:()=>(e=>{let i={zIndex:450,height:"80vh",props:{minHeight:"1vh",overlay:!0}};i.content=(0,c.jsx)(x,{confirm:C,item:v}),(0,n.OpenModal)(i)})(),children:"See Details"})]}),(0,c.jsxs)("div",{className:"name hideOnHover",children:["$",(1*(null===v||void 0===v?void 0:v.amount)).toFixed(2)]}),(0,d.I0)()?null!==(o=(0,d.Ch)()[(0,d.bh)("date_current_year")])&&void 0!==o&&o.isClosed?null:(0,c.jsx)("div",{className:"icon",style:{marginLeft:19,zIndex:10},onClick:()=>{let e=(0,d.bh)("lastTimeCallModal")||0;if((0,d.I0)()){if(Date.now()>e){(0,d.Rz)("lastTimeCallModal",Date.now()+320);let e={zIndex:450,height:"40vh",props:{minHeight:"1vh",overlay:!0,closeEvent:()=>{}}};e.content=(0,c.jsx)(t,{confirm:k,item:v}),(0,n.OpenModal)(e)}}else{let e={zIndex:450,height:"40vh",props:{minHeight:"1vh",overlay:!0,closeEvent:()=>{}}};e.content=(0,c.jsx)(r,{}),(0,n.OpenModal)(e)}},children:(0,c.jsx)(u,{name:"outline_delete",color:"#c62828"})}):null]})})}},6496:(e,i,l)=>{l.d(i,{Hy:()=>a,S$:()=>c,_3:()=>n,jB:()=>o,p9:()=>d});var s=l(2350);const d=async e=>{let i=(0,s.bh)("getall_invoice_last")||0;if(Date.now()>i){var l,d;(0,s.Rz)("getall_invoice_last",Date.now()+190);let i={...null===(l=(0,s.bh)((0,s.hQ)()))||void 0===l?void 0:l.all_invoices};i.params={businessId:null===(d=(0,s.bh)("profileUser"))||void 0===d?void 0:d.businessId};const n=(0,s.I7)(i),o=await n;o&&((0,s.Rz)("invoices_list",a(o,"date")),(0,s.Rz)("invoices_ids",(0,s.ME)((0,s.jQ)(o),"invoiceId")),e&&e())}},n=async e=>{var i,l;let d={...null===(i=(0,s.bh)((0,s.hQ)()))||void 0===i?void 0:i.search_invoice};d.params={businessId:null===(l=(0,s.bh)("profileUser"))||void 0===l?void 0:l.businessId,":search":(0,s.bh)("searchQry")};const n=(0,s.I7)(d),o=await n;o&&((0,s.Rz)("invoices_list",a((0,s.jQ)(o),"date")),e&&e())},a=(e,i)=>(0,s.MV)("sortInvoices",[e],(()=>e&&e.sort(((e,l)=>{let s=e[i],d=l[i];return s<d?-1:s>d?1:0})))),o=async(e,i)=>{var l,d;let n={...null===(l=(0,s.bh)((0,s.hQ)()))||void 0===l?void 0:l.delete_invoice};n.params={businessId:null===(d=(0,s.bh)("profileUser"))||void 0===d?void 0:d.businessId,invoiceId:e};const a=(0,s.I7)(n);await a&&i&&i()},c=async e=>{var i,l;let d={...null===(i=(0,s.bh)((0,s.hQ)()))||void 0===i?void 0:i.all_invoices};d.params={businessId:null===(l=(0,s.bh)("profileUser"))||void 0===l?void 0:l.businessId};const n=(0,s.I7)(d),a=await n;a&&((0,s.Rz)("invoiceCmp",a),t("SSJsgB2uUqcuoagD",(()=>{t("v5MkYLwPAbgci3wW",(()=>{let i=r();(0,s.Rz)("invoiceCmpDocs",i),e&&e()}))})))},t=async(e,i)=>{var l,d;let n={...null===(l=(0,s.bh)((0,s.hQ)()))||void 0===l?void 0:l.filter_search_opera};n.params={businessId:null===(d=(0,s.bh)("profileUser"))||void 0===d?void 0:d.businessId,year:(0,s.bh)("date_current_year"),":account":e};const a=(0,s.I7)(n),o=await a;o&&!o.error?((0,s.Rz)("invoiceCmp"+e,o),i&&i()):i&&i()},r=()=>{let e=(0,s.bh)("invoiceCmp"),i=(0,s.bh)("invoiceCmpSSJsgB2uUqcuoagD"),l=(0,s.bh)("invoiceCmpv5MkYLwPAbgci3wW"),d={};return(0,s._2)(e).map((i=>{let l=e[i].document.trim();var s,n;d[l]||(d[l]={document:l,invoiceId:null===(s=e[i])||void 0===s?void 0:s.invoiceId,invoiceLinkConfirmed:null===(n=e[i])||void 0===n?void 0:n.invoiceLinkConfirmed,amount:0,saldo:0,hasAnticipo:0,cc_c:0,cc_d:0,comprobanteIds:{}});d[l].amount+=e[i].amount,d[l].saldo+=1*e[i].amount,d[l].date=e[i].date})),(0,s._2)(i).map((e=>{var l,s,n;let a=i[e].document.trim();d[a]||(d[a]={document:a,amount:0,saldo:0,hasAnticipo:0,cc_c:0,cc_d:0,comprobanteIds:{}}),d[a].cc_d+="debit"===(null===(l=i[e])||void 0===l?void 0:l.type)?1*i[e].amount:0,d[a].cc_c+="credit"===(null===(s=i[e])||void 0===s?void 0:s.type)?1*i[e].amount:0,d[a].saldo+="credit"===(null===(n=i[e])||void 0===n?void 0:n.type)?-1*i[e].amount:0,d[a].comprobanteIds[i[e].comprobanteId]={date:i[e].date,description:i[e].description}})),(0,s._2)(l).map((e=>{var i,s;let n=l[e].document.trim();n.indexOf("A-")>=0&&(n=n.split("A-")[1]),d[n]||(d[n]={document:n,amount:0,hasAnticipo:0,cc_c:0,cc_d:0,saldo:0,comprobanteIds:{}}),d[n].hasAnticipo+="credit"===(null===(i=l[e])||void 0===i?void 0:i.type)?1*l[e].amount:-1*l[e].amount,d[n].saldo+=-1*("credit"===(null===(s=l[e])||void 0===s?void 0:s.type)?1*l[e].amount:-1*l[e].amount),d[n].comprobanteIds[l[e].comprobanteId]={date:l[e].date,description:l[e].description}})),d}},3971:()=>{},261:()=>{}}]);
//# sourceMappingURL=481.d8a2ccdd.chunk.js.map