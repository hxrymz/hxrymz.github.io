"use strict";(self.webpackChunkhrmfinance=self.webpackChunkhrmfinance||[]).push([[481,9760],{9760:(e,i,l)=>{l.r(i),l.d(i,{CloseModal:()=>r,OpenModal:()=>c,default:()=>o});var s=l(2791),a=l(5408),t=l(2350),d=l(184);const n="listDialog_mdh392",o=()=>{const e=(0,t.bh)("listDialog")||{};(0,a.Z)(n);let i=Object.keys(e);return(0,d.jsx)(d.Fragment,{children:i.map(((i,l)=>{let a=e[i];if(a&&a.visible){let e={};a.height&&(e.heigth=a.height),a.width,a.zIndex&&(e.zIndex=a.zIndex-1);let l={zIndex:a.zIndex},t=null,n=a.data;return a.content&&(t=s.cloneElement(a.content,{data:n})),(0,d.jsxs)("div",{className:"ltr-1kbnjow",style:e,children:[(0,d.jsx)("div",{className:"ltr-hoe9xz",children:(0,d.jsx)("div",{className:"ltr-1wao6ny",style:l,id:i,children:t})}),a.data.overlay?(0,d.jsx)("div",{className:"DialogHRMOverlay ".concat(a.visible?"active":""),onClick:()=>{var e;e=i,document.getElementsByTagName("html")[0].classList.remove("has-level-two"),r({id:e})}}):null]},i)}}))})},c=e=>{let i=(0,t.bh)("listDialog")||{},l=(0,t.M5)();i[l]||(i[l]={}),i[l].visible=!0;let s={};e.props?(s=e.props,s.modalID=l):s.modalID=l;let a=document.getElementsByTagName("body")[0];null!==a&&void 0!==a&&a.style&&(a.style.overflowY="hidden"),i[l].isView=e.isView,i[l].observeResize=e.observeResize,i[l].observeResize&&(i[l].observeInterval=setInterval((()=>{let e=document.querySelector("[dialog-key-id='".concat(l,"']")),s=e&&e.getBoundingClientRect();s&&(s.width===i[l].width&&s.height===i[l].height||(i[l].height=s.height+10,i[l].width=s.width,(0,t.Rz)("listDialog",i),(0,t.wt)(n)))}),200)),i[l].display=!0,e.zIndex&&(i[l].zIndex=e.zIndex),e.height&&(i[l].height=e.height),e.width&&(i[l].width=e.width),e.content&&(i[l].content=e.content),i[l].data=s,(0,t.Rz)("listDialog",i),(0,t.wt)(n),setTimeout((()=>{document.getElementsByTagName("html")[0].classList.add("has-level-two"),(0,t.Rz)("modalOpen",l),(0,t.wt)(n)}),125)},r=e=>{let i=(0,t.bh)("listDialog")||{},l=e.id;if(i[l]){var s,a,d;i[l].observeResize&&i[l].observeInterval&&clearInterval(i[l].observeInterval),i[l].display=!1,null===(s=i[l])||void 0===s||null===(a=s.data)||void 0===a||null===(d=a.closeEvent)||void 0===d||d.call(a),(0,t.Rz)("listDialog",i),delete i[l],document.getElementsByTagName("body")[0].style.overflowY=null,(0,t.wt)(n),setTimeout((()=>{delete i[l],document.getElementsByTagName("html")[0].classList.remove("has-level-two"),(0,t.Rz)("modalOpen",null)}),750)}}},481:(e,i,l)=>{l.r(i),l.d(i,{default:()=>g});var s=l(2791),a=l(2350),t=(l(3971),l(9760)),d=l(6496),n=l(2647),o=(l(261),l(184));const c=e=>{let{data:i,confirm:l,handleClick:s,close:a}=e;const{modalID:d}=i,n=e=>{(0,t.CloseModal)({id:d})};return(0,o.jsxs)("div",{style:{maxHeight:"40vh",minHeight:"28vh",overflow:"auto",background:"var(--hrm_palette-general-background-b)",borderRadius:13,padding:"10px 19px"},children:[(0,o.jsxs)("div",{className:"_dsplFlx ",children:[(0,o.jsx)("p",{className:"form_title",children:"Eliminar Invoice"}),(0,o.jsx)("div",{className:"flexSpace"})]}),(0,o.jsx)("div",{className:"_dsplFlx ",children:(0,o.jsx)("span",{children:"Una vez eliminado no podra ser recuperado"})}),(0,o.jsxs)("div",{className:"_dsplFlx ",style:{padding:"15px 10px"},children:[(0,o.jsx)("div",{className:"flexSpace"}),(0,o.jsx)("p",{className:"group_title addBtn",onClick:n,children:"Cancelar"}),(0,o.jsx)("p",{className:"group_title addBtn red",onClick:()=>{l(),n()},children:"Eliminar"})]})]})},r=e=>{let{data:i,confirm:l,handleClick:s,close:a}=e;const{modalID:d}=i;return(0,o.jsxs)("div",{style:{maxHeight:"40vh",minHeight:"18vh",overflow:"auto",background:"#fff",borderRadius:13,padding:"10px 19px"},children:[(0,o.jsxs)("div",{className:"_dsplFlx ",children:[(0,o.jsx)("p",{className:"form_title",style:{color:"var(--hrm_palette-static-brand-red"},children:"Lo sentimos"}),(0,o.jsx)("div",{className:"flexSpace"})]}),(0,o.jsx)("div",{className:"_dsplFlx ",children:(0,o.jsx)("span",{children:"no tiene acceso a esta operacion"})}),(0,o.jsxs)("div",{className:"_dsplFlx ",style:{padding:"5px 10px"},children:[(0,o.jsx)("div",{className:"flexSpace"}),(0,o.jsx)("p",{className:"group_title addBtn blue",onClick:()=>{(0,t.CloseModal)({id:d})},children:"OK"})]})]})};var v=l(5986),h=l(24),m=l(713);const u=e=>{let{data:i,invoice:l}=e;const{modalID:s}=i;return(0,o.jsxs)("div",{style:{maxHeight:"40vh",minHeight:"18vh",width:"520px",overflow:"auto",background:"#fff",borderRadius:13,padding:"10px 19px"},children:[(0,o.jsxs)("div",{className:"_dsplFlx ",children:[(0,o.jsx)("p",{className:"form_title",style:{color:"var(--hrm_palette-static-brand-red"},children:"Lo sentimos"}),(0,o.jsx)("div",{className:"flexSpace"})]}),(0,o.jsxs)("div",{className:"_dsplFlx invoice_id_voucher",children:[(0,o.jsx)("h5",{children:"ya existe un Voucher associado con el invoice"}),(0,o.jsx)("h4",{children:l})]}),(0,o.jsxs)("div",{className:"_dsplFlx ",style:{padding:"5px 10px"},children:[(0,o.jsx)("div",{className:"flexSpace"}),(0,o.jsx)("p",{className:"group_title addBtn blue",onClick:()=>{(0,t.CloseModal)({id:s})},children:"OK"})]})]})},p=(0,n.PU)(),x=(0,v.DY)(),b=(0,h.AA)(),g=e=>{var i,l,n;let{data:v,elmId:h,handleRefreshAll:g}=e;const[_,y]=(0,s.useState)(!1),[j,I]=(0,s.useState)(0);(0,s.useEffect)((()=>{_||(y(!0),I((0,a.M5)()))}));const f=()=>{I((0,a.M5)())},N=()=>{(0,d.p9)(f)},w=()=>{(0,d.jB)(null===v||void 0===v?void 0:v.invoiceId,g)},z=e=>{let i={zIndex:450,height:"80vh",props:{minHeight:"1vh",overlay:!0,closeEvent:()=>{}}};if(e)i.content=(0,o.jsx)(u,{invoice:null===v||void 0===v?void 0:v.document.trim()});else{let e=null===v||void 0===v?void 0:v.description.split("Sale to ")[1];(0,a.Rz)("new_voucher",{invoice:null===v||void 0===v?void 0:v.document.trim(),invoiceId:null===v||void 0===v?void 0:v.invoiceId.trim(),clientName:e.trim()}),i.content=(0,o.jsx)(b,{})}(0,t.OpenModal)(i)};(0,d.Hy)(null===(i=(0,a.bh)("sub_invoice_group"))||void 0===i?void 0:i[v.invoiceId],"subInvoice");return(0,o.jsx)("div",{className:"item_acc",children:(0,o.jsxs)("div",{className:"_dsplFlx item_box invoice_header",children:[(0,o.jsx)("div",{className:"name",children:(0,a.sJ)(null===v||void 0===v?void 0:v.date)}),(0,o.jsx)("div",{className:"code",style:{marginLeft:15},children:null===v||void 0===v?void 0:v.document}),(0,o.jsx)("div",{className:"description",style:{marginLeft:15},children:null===v||void 0===v?void 0:v.description}),(0,o.jsx)("div",{className:"flexSpace"}),(0,o.jsx)("div",{className:"flexSpace"}),(0,o.jsxs)("div",{className:"_dsplFlx ",children:[null!==(l=(0,a.Ch)()[(0,a.bh)("date_current_year")])&&void 0!==l&&l.isClosed?null:(0,o.jsx)("div",{className:" addSbAcc purple",onClick:()=>{(0,m.fK)(null===v||void 0===v?void 0:v.document.trim(),z)},children:"add Voucher"}),(0,o.jsx)("div",{className:" addSbAcc purple",onClick:()=>(e=>{let i={zIndex:450,height:"80vh",props:{minHeight:"1vh",overlay:!0}};i.content=(0,o.jsx)(x,{confirm:N,item:v}),(0,t.OpenModal)(i)})(),children:"See Details"})]}),(0,o.jsxs)("div",{className:"name hideOnHover",children:["$",(1*(null===v||void 0===v?void 0:v.amount)).toFixed(2)]}),(0,a.I0)()?null!==(n=(0,a.Ch)()[(0,a.bh)("date_current_year")])&&void 0!==n&&n.isClosed?null:(0,o.jsx)("div",{className:"icon",style:{marginLeft:19,zIndex:10},onClick:()=>{let e=(0,a.bh)("lastTimeCallModal")||0;if((0,a.I0)()){if(Date.now()>e){(0,a.Rz)("lastTimeCallModal",Date.now()+320);let e={zIndex:450,height:"40vh",props:{minHeight:"1vh",overlay:!0,closeEvent:()=>{}}};e.content=(0,o.jsx)(c,{confirm:w,item:v}),(0,t.OpenModal)(e)}}else{let e={zIndex:450,height:"40vh",props:{minHeight:"1vh",overlay:!0,closeEvent:()=>{}}};e.content=(0,o.jsx)(r,{}),(0,t.OpenModal)(e)}},children:(0,o.jsx)(p,{name:"outline_delete",color:"#c62828"})}):null]})})}},6496:(e,i,l)=>{l.d(i,{Hy:()=>d,S$:()=>o,_3:()=>t,jB:()=>n,p9:()=>a});var s=l(2350);const a=async e=>{let i=(0,s.bh)("getall_invoice_last")||0;if(Date.now()>i){var l,a;(0,s.Rz)("getall_invoice_last",Date.now()+190);let i={...null===(l=(0,s.bh)((0,s.hQ)()))||void 0===l?void 0:l.all_invoices};i.params={businessId:null===(a=(0,s.bh)("profileUser"))||void 0===a?void 0:a.businessId,year:(0,s.bh)("date_current_year")};const t=(0,s.I7)(i),n=await t;n&&((0,s.Rz)("invoices_list",d(n,"date")),(0,s.Rz)("invoices_ids",(0,s.ME)((0,s.jQ)(n),"invoiceId")),e&&e())}},t=async e=>{var i,l;let a={...null===(i=(0,s.bh)((0,s.hQ)()))||void 0===i?void 0:i.search_invoice};a.params={businessId:null===(l=(0,s.bh)("profileUser"))||void 0===l?void 0:l.businessId,year:(0,s.bh)("date_current_year"),":search":(0,s.bh)("searchQry")};const t=(0,s.I7)(a),n=await t;n&&((0,s.Rz)("invoices_list",d((0,s.jQ)(n),"date")),e&&e())},d=(e,i)=>(0,s.MV)("sortInvoices",[e],(()=>e&&e.sort(((e,l)=>{let s=e[i],a=l[i];return s<a?-1:s>a?1:0})))),n=async(e,i)=>{var l,a;let t={...null===(l=(0,s.bh)((0,s.hQ)()))||void 0===l?void 0:l.delete_invoice};t.params={businessId:null===(a=(0,s.bh)("profileUser"))||void 0===a?void 0:a.businessId,invoiceId:e};const d=(0,s.I7)(t);await d&&i&&i()},o=async e=>{var i,l;let a={...null===(i=(0,s.bh)((0,s.hQ)()))||void 0===i?void 0:i.all_invoices};a.params={businessId:null===(l=(0,s.bh)("profileUser"))||void 0===l?void 0:l.businessId,year:(0,s.bh)("date_current_year")};const t=(0,s.I7)(a),d=await t;d&&((0,s.Rz)("invoiceCmp",d),c("SSJsgB2uUqcuoagD",(()=>{c("v5MkYLwPAbgci3wW",(()=>{let i=r();(0,s.Rz)("invoiceCmpDocs",i),e&&e()}))})))},c=async(e,i)=>{var l,a;let t={...null===(l=(0,s.bh)((0,s.hQ)()))||void 0===l?void 0:l.filter_search_opera};t.params={businessId:null===(a=(0,s.bh)("profileUser"))||void 0===a?void 0:a.businessId,year:(0,s.bh)("date_current_year"),":account":e};const d=(0,s.I7)(t),n=await d;n&&!n.error?((0,s.Rz)("invoiceCmp"+e,n),i&&i()):i&&i()},r=()=>{let e=(0,s.bh)("invoiceCmp"),i=(0,s.bh)("invoiceCmpSSJsgB2uUqcuoagD"),l=(0,s.bh)("invoiceCmpv5MkYLwPAbgci3wW"),a={};return(0,s._2)(e).map((i=>{let l=e[i].document.trim();a[l]||(a[l]={document:l,amount:0,saldo:0,hasAnticipo:0,cc_c:0,cc_d:0,comprobanteIds:{}}),a[l].amount+=e[i].amount,a[l].saldo+=1*e[i].amount,a[l].date=e[i].date})),(0,s._2)(i).map((e=>{var l,s,t;let d=i[e].document.trim();a[d]||(a[d]={document:d,amount:0,saldo:0,hasAnticipo:0,cc_c:0,cc_d:0,comprobanteIds:{}}),a[d].cc_d+="debit"===(null===(l=i[e])||void 0===l?void 0:l.type)?1*i[e].amount:0,a[d].cc_c+="credit"===(null===(s=i[e])||void 0===s?void 0:s.type)?1*i[e].amount:0,a[d].saldo+="credit"===(null===(t=i[e])||void 0===t?void 0:t.type)?-1*i[e].amount:0,a[d].comprobanteIds[i[e].comprobanteId]={date:i[e].date,description:i[e].description}})),(0,s._2)(l).map((e=>{var i,s;let t=l[e].document.trim();t.indexOf("A-")>=0&&(t=t.split("A-")[1]),a[t]||(a[t]={document:t,amount:0,hasAnticipo:0,cc_c:0,cc_d:0,saldo:0,comprobanteIds:{}}),a[t].hasAnticipo+="credit"===(null===(i=l[e])||void 0===i?void 0:i.type)?1*l[e].amount:-1*l[e].amount,a[t].saldo+=-1*("credit"===(null===(s=l[e])||void 0===s?void 0:s.type)?1*l[e].amount:-1*l[e].amount),a[t].comprobanteIds[l[e].comprobanteId]={date:l[e].date,description:l[e].description}})),a}},3971:()=>{},261:()=>{}}]);
//# sourceMappingURL=481.fe3af2e5.chunk.js.map