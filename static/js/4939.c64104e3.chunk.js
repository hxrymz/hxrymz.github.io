"use strict";(self.webpackChunkhrmfinance=self.webpackChunkhrmfinance||[]).push([[4939],{1372:(e,l,n)=>{n.r(l),n.d(l,{default:()=>b});var o=n(2791),a=n(2350),i=(n(1e3),n(9760)),d=n(3588),r=n(2692),c=n(7689),s=n(2647),t=n(4557),v=n(1087),u=n(184);const m=(0,r.t8)(),p=(0,s.PU)(),h=e=>{var l,n,r,s,h,_,b;let{data:x,handleRefreshAll:f,updRvw:I,show:w,range2Scroll:g,inx:j,updRange:R}=e;const N=(0,o.useRef)(!1),[,C]=(0,o.useState)(0);let k=(0,c.TH)();const M=(0,c.s0)(),y=(0,o.useRef)(null),E=(0,o.useRef)(0),z=(0,o.useRef)(!1),T=(0,o.useRef)(null),S=null===(l=k.search)||void 0===l||null===(n=l.split("?"))||void 0===n?void 0:n[1],B=(0,a.mB)(S);if((0,o.useEffect)((()=>{N.current||(N.current=!0,setTimeout((()=>{null!==B&&void 0!==B&&B.cId&&(null===B||void 0===B?void 0:B.cId)===x.comprobanteId&&(O(),window.scrollTo(0,0))}),350))}),[B.cId]),(0,o.useEffect)((()=>(g&&(T.current=setInterval((()=>{let e=window.pageYOffset||document.documentElement.scrollTop;if(!z.current&&E.current!==e){E.current=e;let l=(0,a.cv)(y.current);l.top+l.height-E.current<0&&(0,a.Ey)(R)&&(z.current=!0,R())}}),250)),()=>{T.current&&clearInterval(T.current)})),[g]),!w)return null;const D=()=>{C((0,a.M5)())},F=()=>{(0,d.ly)(D)},H=()=>{f(),M({search:""})},O=()=>{let e=(0,a.bh)("lastTimeCallModal")||0;if(Date.now()>e){var l,n;(0,a.Rz)("lastTimeCallModal",Date.now()+320);const e=null===(l=k.search)||void 0===l||null===(n=l.split("?"))||void 0===n?void 0:n[1],o=(0,a.mB)(e);null!==o&&void 0!==o&&o.cId&&(null===o||void 0===o?void 0:o.cId)===x.comprobanteId||M({search:"?cId=".concat(x.comprobanteId)}),(0,a.Rz)("show_comprobante",x);let d={zIndex:450,height:"80vh"};d.props={minHeight:"1vh",overlay:!0,closeEvent:H},d.content=(0,u.jsx)(m,{confirm:F,item:x}),(0,i.OpenModal)(d)}},U=()=>{(0,d.WB)(null===x||void 0===x?void 0:x.operations,f)};let L=null===(r=(0,a.bh)("comp_under_review"))||void 0===r||null===(s=r.inReview)||void 0===s?void 0:s[null===x||void 0===x?void 0:x.comprobanteId],Q=(null===(h=(0,a.bh)("comp_under_review"))||void 0===h||null===(_=h.hasError)||void 0===_?void 0:_[null===x||void 0===x?void 0:x.comprobanteId])||(null===(b=(0,a.bh)("comprobante_w_erros"))||void 0===b?void 0:b[null===x||void 0===x?void 0:x.comprobanteId]);return(0,u.jsx)("div",{className:"item_acc",ref:y,"item-index":"".concat(j),...g?{"watching-scroll":"true"}:"",children:(0,u.jsxs)("div",{className:"_dsplFlx operation_item_box",children:[(0,u.jsx)("div",{className:"icon_revision",onClick:async()=>{var e;if(null!==(e=(0,a.bh)("comp_under_review"))&&void 0!==e&&e.balanceId){var l,n,o;let e={...(0,a.bh)("comp_under_review")},i={...e.inReview},d={...null===(l=(0,a.bh)((0,a.hQ)()))||void 0===l?void 0:l.upd_balances};d.params={businessId:null===(n=(0,a.bh)("profileUser"))||void 0===n?void 0:n.businessId,balanceId:null===(o=(0,a.bh)("comp_under_review"))||void 0===o?void 0:o.balanceId},i[null===x||void 0===x?void 0:x.comprobanteId]?delete i[null===x||void 0===x?void 0:x.comprobanteId]:i[null===x||void 0===x?void 0:x.comprobanteId]=!0,d.data2update={inReview:i};const r=(0,a.I7)(d);await r&&(e.inReview=i,(0,a.Rz)("comp_under_review",e),C((0,a.M5)()))}else{var i,r;let e={...(0,a.bh)("comp_under_review")};e.balanceId=(0,a.M5)(),e.type="comp_under_review",e.inReview={},e.inReview[null===x||void 0===x?void 0:x.comprobanteId]=!0;let l={...null===(i=(0,a.bh)((0,a.hQ)()))||void 0===i?void 0:i.add_balances};l.params={businessId:null===(r=(0,a.bh)("profileUser"))||void 0===r?void 0:r.businessId},l.form=e;const n=(0,a.I7)(l);await n&&((0,a.Rz)("comp_under_review",e),C((0,a.M5)()))}(0,d.Gg)((0,a.bh)("comprobante_by_doc")),I((0,a.M5)())},children:(0,u.jsx)(p,{name:Q||L?"alert":"check_circle",color:Q?"var(--hrm_palette-selected-nav-text)":L?"var(--hrm_palette-color-orange-800)":"var(--hrm_palette-success-fg)"})}),(0,u.jsxs)("div",{className:"_dsplFlx tr_bar_90",onClick:O,children:[(0,u.jsx)("div",{className:" tr_bar_15",children:(0,a.sJ)(null===x||void 0===x?void 0:x.date)}),(0,u.jsx)("div",{className:" tr_bar_25",style:Q?{color:"var(--hrm_palette-selected-nav-text)"}:{},children:(0,u.jsx)(v.OL,{to:{pathname:"/accounting-ledger",search:"?cId=".concat(x.comprobanteId)},children:null===x||void 0===x?void 0:x.comprobanteId})}),(0,u.jsx)("div",{className:" tr_bar_55",style:{marginLeft:9},children:Q?(0,u.jsx)("div",{className:"msg_alert_title",children:"El comprobante contiene errores"}):(0,u.jsx)("span",{children:null===x||void 0===x?void 0:x.description})})]}),(0,u.jsx)("div",{className:"flexSpace"}),(0,u.jsx)("div",{className:"icon tr_bar_5",onClick:()=>{let e=(0,a.bh)("lastTimeCallModal")||0;if(Date.now()>e){(0,a.Rz)("lastTimeCallModal",Date.now()+320);let e={zIndex:450,height:"40vh",props:{minHeight:"1vh",overlay:!0,closeEvent:()=>{}}};e.content=(0,u.jsx)(t.default,{confirm:U,item:x}),(0,i.OpenModal)(e)}},children:(0,u.jsx)(p,{name:"outline_delete",color:"#c62828"})})]})})},_=(e,l)=>l.elmId===e.elmId&&l.show===e.show&&l.range2Scroll===e.range2Scroll,b=(0,o.memo)(h,_)},4557:(e,l,n)=>{n.r(l),n.d(l,{default:()=>i});n(2791),n(1e3);var o=n(9760),a=n(184);const i=e=>{let{data:l,confirm:n,handleClick:i,close:d}=e;const{modalID:r}=l,c=e=>{(0,o.CloseModal)({id:r})};return(0,a.jsxs)("div",{style:{maxHeight:"40vh",minHeight:"28vh",overflow:"auto",background:"var(--hrm_palette-general-background-b)",borderRadius:13,padding:"10px 19px"},children:[(0,a.jsxs)("div",{className:"_dsplFlx ",children:[(0,a.jsx)("p",{className:"form_title",children:"Eliminar Comprobante"}),(0,a.jsx)("div",{className:"flexSpace"})]}),(0,a.jsx)("div",{className:"_dsplFlx ",children:(0,a.jsx)("span",{children:"Una vez eliminado no podra ser recuperado"})}),(0,a.jsxs)("div",{className:"_dsplFlx ",style:{padding:"15px 10px"},children:[(0,a.jsx)("div",{className:"flexSpace"}),(0,a.jsx)("p",{className:"group_title addBtn",onClick:c,children:"Cancelar"}),(0,a.jsx)("p",{className:"group_title addBtn red",onClick:()=>{n(),c()},children:"Eliminar"})]})]})}},1e3:()=>{}}]);
//# sourceMappingURL=4939.c64104e3.chunk.js.map