"use strict";(self.webpackChunkhrmfinance=self.webpackChunkhrmfinance||[]).push([[5064,9760],{9760:(e,l,i)=>{i.r(l),i.d(l,{CloseModal:()=>c,OpenModal:()=>r,default:()=>n});var t=i(2791),d=i(5408),a=i(2350),o=i(184);const s="listDialog_mdh392",n=()=>{const e=(0,a.bh)("listDialog")||{};(0,d.Z)(s);let l=Object.keys(e);return(0,o.jsx)(o.Fragment,{children:l.map(((l,i)=>{let d=e[l];if(d&&d.visible){let e={};d.height&&(e.heigth=d.height),d.width,d.zIndex&&(e.zIndex=d.zIndex-1);let i={zIndex:d.zIndex},a=null,s=d.data;return d.content&&(a=t.cloneElement(d.content,{data:s})),(0,o.jsxs)("div",{className:"ltr-1kbnjow",style:e,children:[(0,o.jsx)("div",{className:"ltr-hoe9xz",children:(0,o.jsx)("div",{className:"ltr-1wao6ny",style:i,id:l,children:a})}),d.data.overlay?(0,o.jsx)("div",{className:"DialogHRMOverlay ".concat(d.visible?"active":""),onClick:()=>{var e;e=l,document.getElementsByTagName("html")[0].classList.remove("has-level-two"),c({id:e})}}):null]},l)}}))})},r=e=>{let l=(0,a.bh)("listDialog")||{},i=(0,a.M5)();l[i]||(l[i]={}),l[i].visible=!0;let t={};e.props?(t=e.props,t.modalID=i):t.modalID=i;let d=document.getElementsByTagName("body")[0];null!==d&&void 0!==d&&d.style&&(d.style.overflowY="hidden"),l[i].isView=e.isView,l[i].observeResize=e.observeResize,l[i].observeResize&&(l[i].observeInterval=setInterval((()=>{let e=document.querySelector("[dialog-key-id='".concat(i,"']")),t=e&&e.getBoundingClientRect();t&&(t.width===l[i].width&&t.height===l[i].height||(l[i].height=t.height+10,l[i].width=t.width,(0,a.Rz)("listDialog",l),(0,a.wt)(s)))}),200)),l[i].display=!0,e.zIndex&&(l[i].zIndex=e.zIndex),e.height&&(l[i].height=e.height),e.width&&(l[i].width=e.width),e.content&&(l[i].content=e.content),l[i].data=t,(0,a.Rz)("listDialog",l),(0,a.wt)(s),setTimeout((()=>{document.getElementsByTagName("html")[0].classList.add("has-level-two"),(0,a.Rz)("modalOpen",i),(0,a.wt)(s)}),125)},c=e=>{let l=(0,a.bh)("listDialog")||{},i=e.id;if(l[i]){var t,d,o;l[i].observeResize&&l[i].observeInterval&&clearInterval(l[i].observeInterval),l[i].display=!1,null===(t=l[i])||void 0===t||null===(d=t.data)||void 0===d||null===(o=d.closeEvent)||void 0===o||o.call(d),(0,a.Rz)("listDialog",l),delete l[i],document.getElementsByTagName("body")[0].style.overflowY=null,(0,a.wt)(s),setTimeout((()=>{delete l[i],document.getElementsByTagName("html")[0].classList.remove("has-level-two"),(0,a.Rz)("modalOpen",null)}),750)}}},5064:(e,l,i)=>{i.r(l),i.d(l,{default:()=>_});var t=i(2791),d=i(2350),a=i(2647),o=(i(4719),i(9661)),s=i(9760),n=i(24),r=(i(3728),i(7689)),c=i(184);const u=(0,a.Np)(),v=(0,a.JC)(),m=(0,o.Uk)(),h=(0,o.LZ)(),p=(0,o.FC)(),b=(0,n.f_)(),x="entry_operation_comprobante",_=e=>{var l,i,a,o,n,v,_,N,f,w,C,z,F,R,k;let{data:D,confirm:T,item:A}=e;const[O,M]=(0,t.useState)(!1),[E,S]=(0,t.useState)(0),B=(0,r.s0)();(0,t.useEffect)((()=>{if(!O){M(!0),(0,d.Rz)("accountPicker",{}),U("description",A.name),U("customerId",null),U("providerId",null);let e=A.accountsToParameterize;(0,d.Rz)("multi_params",e),S((0,d.M5)())}}));const U=(e,l,i)=>{let t=(0,d.bh)(x)||{};i?(t[i]||(t[i]={}),t[i][e]=l):t[e]=l,(0,d.Rz)(x,t),S((0,d.M5)())},Q=async()=>{var e,l,i,t;let a={...(0,d.bh)(x)};a.date?a.date=new Date(a.date).getTime():a.date=(new Date).getTime()+800;let o=await(0,d.fN)(a.date);a.comprobanteId=o,a.document=null===(e=a.document)||void 0===e?void 0:e.trim();let n=[];if((0,d.bh)("multi_params")&&(null===(l=(0,d._2)((0,d.bh)("multi_params")))||void 0===l||l.map((async(e,l)=>{let i=(0,d.bh)("multi_params")[e];if(!isNaN(1*i.amount)&&1*i.amount>0){var t,o,s;let e={...a};"recurrent"===(null===A||void 0===A?void 0:A.extra)&&(e.document=i.document),e.account=i.account,e.subAccount=i.subAccount,e.type=i.type,e.amount=1*i.amount,e.operationId=(0,d.M5)(),delete e.providerId;let l=null===(t=(0,d.bh)("account_ids"))||void 0===t?void 0:t[i.account];l.payOrCollect&&(e.payOrCollect=l.payOrCollect);let r={...null===(o=(0,d.bh)((0,d.hQ)()))||void 0===o?void 0:o.add_opera};r.params={businessId:null===(s=(0,d.bh)("profileUser"))||void 0===s?void 0:s.businessId},r.form=e,n.push(r)}}))),"provider"===(null===A||void 0===A?void 0:A.extra)&&null!==(i=(0,d.bh)(x))&&void 0!==i&&i.providerId){var r,c,u;let e={...a};e.type="credit";let l=(0,d.bh)("providers_ids")[(0,d.bh)(x).providerId];e.account=l.account,e.subAccount=l.subAccount,e.amount=g((0,d.bh)("multi_params")),e.operationId=(0,d.M5)();let i=null===(r=(0,d.bh)("account_ids"))||void 0===r?void 0:r[l.account];i.payOrCollect&&(e.payOrCollect=i.payOrCollect);let t={...null===(c=(0,d.bh)((0,d.hQ)()))||void 0===c?void 0:c.add_opera};t.params={businessId:null===(u=(0,d.bh)("profileUser"))||void 0===u?void 0:u.businessId},t.form=e,n.push(t)}if("customer"===(null===A||void 0===A?void 0:A.extra)&&null!==(t=(0,d.bh)(x))&&void 0!==t&&t.customerId){var v,m,h;let e={...a};e.type="debit";let l=(0,d.bh)("providers_ids")[(0,d.bh)(x).customerId];e.account=l.account,e.subAccount=l.subAccount,e.amount=-1*g((0,d.bh)("multi_params")),e.operationId=(0,d.M5)();let i=null===(v=(0,d.bh)("account_ids"))||void 0===v?void 0:v[l.account];i.payOrCollect&&(e.payOrCollect=i.payOrCollect);let t={...null===(m=(0,d.bh)((0,d.hQ)()))||void 0===m?void 0:m.add_opera};t.params={businessId:null===(h=(0,d.bh)("profileUser"))||void 0===h?void 0:h.businessId},t.form=e,n.push(t)}const p=n.map((async e=>{const l=(0,d.I7)(e);await l}));await Promise.all(p),setTimeout((()=>{(0,d.Rz)("multi_params",null),(0,d.Rz)(x,null),(null===D||void 0===D?void 0:D.modalID)&&(0,s.CloseModal)({id:null===D||void 0===D?void 0:D.modalID}),B({pathname:"/accounting-ledger",search:"?cId=".concat(o)})}),400)};let q=("provider"===(null===A||void 0===A?void 0:A.extra)&&(null===(l=(0,d.bh)(x))||void 0===l?void 0:l.providerId)||"customer"===(null===A||void 0===A?void 0:A.extra)&&(null===(i=(0,d.bh)(x))||void 0===i?void 0:i.customerId))&&0!==g((0,d.bh)("multi_params")),K="recurrent"===(null===A||void 0===A?void 0:A.extra)||(null===(a=(0,d.bh)(x))||void 0===a?void 0:a.document);return(0,c.jsxs)("div",{style:{maxHeight:"90vh",minHeight:"88vh",width:"960px",overflow:"auto",background:"var(--hrm_palette-general-background-b)",borderRadius:13,padding:"10px 19px"},children:[(0,c.jsxs)("div",{className:"_dsplFlx ",children:[(0,c.jsx)("p",{className:"form_title",children:"Asiento Manual"}),(0,c.jsx)("div",{className:"flexSpace"})]}),(0,c.jsxs)("div",{className:"_dsplFlx ",children:[(0,c.jsx)(b,{init:null===(o=(0,d.bh)(x))||void 0===o?void 0:o.date,updDate:e=>U("date",e)}),(0,c.jsx)("div",{className:"flexSpace"}),"recurrent"===(null===A||void 0===A?void 0:A.extra)?null:(0,c.jsx)(u,{init:null===(n=(0,d.bh)(x))||void 0===n?void 0:n.document,label:"Documento",width:120,updChanges:e=>U("document",e)})]}),(0,c.jsx)(u,{init:null===(v=(0,d.bh)(x))||void 0===v?void 0:v.description,label:"Descripcion",width:520,updChanges:e=>U("description",e)}),"employee"===(null===A||void 0===A?void 0:A.extra)?(0,c.jsx)("div",{className:"extra_container",children:null!==(_=(0,d.bh)(x))&&void 0!==_&&_.employeeId?(0,c.jsxs)("div",{className:"_dsplFlx",children:[(0,c.jsx)("div",{className:"employee_title",style:{color:"#646cff",cursor:"pointer"},onClick:()=>U("employeeId",null),children:"Empleado:"}),(0,c.jsx)("div",{className:"employee_name",children:null===(N=(0,d.bh)("employees_ids")[(0,d.bh)(x).employeeId])||void 0===N?void 0:N.name})]}):(0,c.jsx)(m,{width:420,handleClick:e=>U("employeeId",e)})}):null,"provider"===(null===A||void 0===A?void 0:A.extra)?(0,c.jsx)("div",{className:"extra_container",children:null!==(f=(0,d.bh)(x))&&void 0!==f&&f.providerId?(0,c.jsxs)("div",{className:"_dsplFlx",children:[(0,c.jsx)("div",{className:"employee_title",style:{color:"#646cff",cursor:"pointer"},onClick:()=>U("providerId",null),children:"Provedor:"}),(0,c.jsx)("div",{className:"employee_name",children:null===(w=(0,d.bh)("providers_ids")[(0,d.bh)(x).providerId])||void 0===w?void 0:w.name})]}):(0,c.jsx)(h,{width:420,handleClick:e=>U("providerId",null===e||void 0===e?void 0:e.providerId)})}):null,"customer"===(null===A||void 0===A?void 0:A.extra)?(0,c.jsx)("div",{className:"extra_container",children:null!==(C=(0,d.bh)(x))&&void 0!==C&&C.customerId?(0,c.jsxs)("div",{className:"_dsplFlx",children:[(0,c.jsx)("div",{className:"employee_title",style:{color:"#646cff",cursor:"pointer"},onClick:()=>U("customerId",null),children:"Cliente:"}),(0,c.jsx)("div",{className:"employee_name",children:null===(z=(0,d.bh)("providers_ids")[(0,d.bh)(x).customerId])||void 0===z?void 0:z.name})]}):(0,c.jsx)(p,{width:420,handleClick:e=>U("customerId",null===e||void 0===e?void 0:e.providerId)})}):null,(0,c.jsxs)("div",{className:"boxAddAcc",style:{margin:"18px 0"},children:[(0,c.jsxs)("div",{className:"_dsplFlx hdr_bar purple",style:{margin:"18px 0"},children:[(0,c.jsx)("div",{className:"tr_bar_25",children:"Cuenta"}),(0,c.jsx)("div",{className:"tr_bar_25",children:"Sub Cuenta"}),(0,c.jsx)("div",{className:"tr_bar_25",children:"recurrent"===(null===A||void 0===A?void 0:A.extra)?"Documento":""}),(0,c.jsx)("div",{className:"tr_bar_25",children:"Importe"})]}),null!==(F=(0,d.bh)(x))&&void 0!==F&&F.customerId?(0,c.jsx)(I,{idKey:(0,d.bh)(x).customerId,data:(0,d.bh)("providers_ids")[(0,d.bh)(x).customerId],total:g((0,d.bh)("multi_params")),type:"debit"}):null,(0,d.bh)("multi_params")&&(null===(R=(0,d._2)((0,d.bh)("multi_params")))||void 0===R?void 0:R.map(((e,l)=>(0,c.jsx)(y,{idKey:e,data:(0,d.bh)("multi_params")[e],updObs:S,isRecurrent:"recurrent"===(null===A||void 0===A?void 0:A.extra)},e)))),null!==(k=(0,d.bh)(x))&&void 0!==k&&k.providerId?(0,c.jsx)(I,{idKey:(0,d.bh)(x).providerId,data:(0,d.bh)("providers_ids")[(0,d.bh)(x).providerId],total:g((0,d.bh)("multi_params")),type:"credit"}):null]}),(0,c.jsxs)("div",{className:"_dsplFlx ",children:[(0,c.jsx)("div",{className:"flexSpace"}),K&&(q||j((0,d.bh)("multi_params")))?(0,c.jsx)("div",{className:"card",children:(0,c.jsx)("button",{className:"group_title addBtn purple",onClick:Q,children:"Guardar"})}):null]})]})},y=e=>{var l,i;let{data:a,updObs:o,idKey:s,isRecurrent:n}=e;const[r,m]=(0,t.useState)(0),h=(e,l,i)=>{let t=(0,d.bh)("multi_params")||{};i?(t[i]||(t[i]={}),t[i][e]=l):t[e]=l,(0,d.Rz)("multi_params",t)};let p=null===(l=(0,d.bh)("account_ids"))||void 0===l?void 0:l[null===a||void 0===a?void 0:a.account],b=null===(i=(0,d.bh)("sub_account_ids"))||void 0===i?void 0:i[null===a||void 0===a?void 0:a.subAccount];return(0,c.jsxs)("div",{className:"_dsplFlx hdr_bar",children:[(0,c.jsx)("div",{className:"tr_bar_25",style:{marginTop:10,fontWeight:600,color:"debit"===a.type?"#009688":"#c62828"},children:(0,c.jsx)(v,{data:p,color:"debit"===a.type?"#009688":"#c62828",labelField:"code",infoField:"name"})}),(0,c.jsx)("div",{className:"tr_bar_25",style:{marginTop:10},children:(0,c.jsx)(v,{data:b,color:"debit"===a.type?"#009688":"#c62828",labelField:"subAccount",infoField:"subAccountName"})}),(0,c.jsx)("div",{className:"tr_bar_25",style:{marginTop:10},children:n?(0,c.jsx)(u,{width:120,init:null===a||void 0===a?void 0:a.document,updChanges:e=>{h("document",e,s),o((0,d.M5)())}}):null}),(0,c.jsx)("div",{className:"tr_bar_25",children:(0,c.jsx)(u,{init:r,type:"number",width:80,init:null===a||void 0===a?void 0:a.amount,updChanges:e=>{h("amount",e,s),o((0,d.M5)())}})})]})},I=e=>{var l,i;let{data:a,idKey:o,total:s,type:n}=e;const[r,u]=(0,t.useState)(0);let m=null===(l=(0,d.bh)("account_ids"))||void 0===l?void 0:l[null===a||void 0===a?void 0:a.account],h=null===(i=(0,d.bh)("sub_account_ids"))||void 0===i?void 0:i[null===a||void 0===a?void 0:a.subAccount];return(0,c.jsxs)("div",{className:"_dsplFlx hdr_bar",children:[(0,c.jsx)("div",{className:"tr_bar_25",style:{marginTop:10,fontWeight:600,color:"debit"===n?"#009688":"#c62828"},children:(0,c.jsx)(v,{data:m,color:"debit"===n?"#009688":"#c62828",labelField:"code",infoField:"name"})}),(0,c.jsx)("div",{className:"tr_bar_25",style:{marginTop:10},children:(0,c.jsx)(v,{data:h,color:"debit"===n?"#009688":"#c62828",labelField:"subAccount",infoField:"subAccountName"})}),(0,c.jsx)("div",{className:"tr_bar_25",style:{marginTop:10}}),(0,c.jsx)("div",{className:"tr_bar_25",style:{marginTop:10},children:(0,c.jsx)("div",{className:"total_cntra",children:s*("debit"===n?-1:1).toFixed(2)})})]})},g=e=>{let l=0,i=e&&(0,d._2)(e);return i&&(null===i||void 0===i||i.map(((i,t)=>{let d=e[i],a=l.toFixed(2),o=null!==d&&void 0!==d&&d.amount?"debit"===(null===d||void 0===d?void 0:d.type)?parseFloat(d.amount):-1*parseFloat(d.amount):0;l=o+parseFloat(a)}))),l},j=e=>{let l=0,i=e&&(0,d._2)(e);return i&&(null===i||void 0===i||i.map(((i,t)=>{let d=e[i],a=l.toFixed(2),o=null!==d&&void 0!==d&&d.amount?"debit"===(null===d||void 0===d?void 0:d.type)?parseFloat(d.amount):-1*parseFloat(d.amount):0;l=o+parseFloat(a)}))),i&&(null===i||void 0===i?void 0:i.length)>0&&0===l}},3728:(e,l,i)=>{i.d(l,{NA:()=>s,g5:()=>o,ph:()=>d,yq:()=>a});var t=i(2350);const d=async e=>{var l,i;let d=null===(l=(0,t.bh)((0,t.hQ)()))||void 0===l?void 0:l.all_entries;d.params={businessId:null===(i=(0,t.bh)("profileUser"))||void 0===i?void 0:i.businessId};const a=(0,t.I7)(d),o=await a;o&&((0,t.Rz)("entries_list",o),(0,t.Rz)("entries_ids",(0,t.ME)(o,"accountingEntryId")),e&&e())},a=async e=>{var l,i;let d=null===(l=(0,t.bh)((0,t.hQ)()))||void 0===l?void 0:l.search_entries;d.params={businessId:null===(i=(0,t.bh)("profileUser"))||void 0===i?void 0:i.businessId,":search":(0,t.bh)("search_entry_qry")};const a=(0,t.I7)(d),o=await a;o&&((0,t.Rz)("entries_list",o),e&&e())},o=async(e,l)=>{var i,d;let a=null===(i=(0,t.bh)((0,t.hQ)()))||void 0===i?void 0:i.delete_entries;a.params={businessId:null===(d=(0,t.bh)("profileUser"))||void 0===d?void 0:d.businessId,accountingEntryId:e};const o=(0,t.I7)(a);await o&&l&&l()},s=async e=>{const l=(0,t.I7)({query:"getLastSequence"}),i=await l;if(i)return i}},4719:()=>{}}]);
//# sourceMappingURL=5064.6c32e1f2.chunk.js.map