"use strict";(self.webpackChunkhrmfinance=self.webpackChunkhrmfinance||[]).push([[5064,9760],{9760:function(e,t,i){i.r(t),i.d(t,{CloseModal:function(){return s},OpenModal:function(){return d},default:function(){return r}});var l=i(2791),n=i(5408),o=i(2350),a=i(184),r=function(){var e=(0,o.bh)("listDialog")||{},t=((0,n.Z)("listDialog_h392"),Object.keys(e));return(0,a.jsx)(a.Fragment,{children:t.map((function(t,i){var n=e[t];if(n&&n.visible){var o={};n.height&&(o.heigth=n.height),n.width,n.zIndex&&(o.zIndex=n.zIndex-1);var r={zIndex:n.zIndex},d=null,c=n.data;return n.content&&(d=l.cloneElement(n.content,{data:c})),(0,a.jsxs)("div",{className:"ltr-1kbnjow",style:o,children:[(0,a.jsx)("div",{className:"ltr-hoe9xz",children:(0,a.jsx)("div",{className:"ltr-1wao6ny",style:r,id:t,children:d})}),n.data.overlay?(0,a.jsx)("div",{className:"DialogHRMOverlay ".concat(n.visible?"active":""),onClick:function(){var e;e=t,document.getElementsByTagName("html")[0].classList.remove("has-level-two"),s({id:e})}}):null]},t)}}))})},d=function(e){var t=(0,o.bh)("listDialog")||{},i=(0,o.M5)();t[i]||(t[i]={}),t[i].visible=!0;var l={};e.props?(l=e.props).modalID=i:l.modalID=i;var n=document.getElementsByTagName("body")[0];null!==n&&void 0!==n&&n.style&&(n.style.overflowY="hidden"),t[i].isView=e.isView,t[i].observeResize=e.observeResize,t[i].observeResize&&(t[i].observeInterval=setInterval((function(){var e=document.querySelector("[dialog-key-id='".concat(i,"']")),l=e&&e.getBoundingClientRect();l&&(l.width===t[i].width&&l.height===t[i].height||(t[i].height=l.height+10,t[i].width=l.width,(0,o.Rz)("listDialog",t),(0,o.wt)("listDialog_h392")))}),200)),t[i].display=!0,e.zIndex&&(t[i].zIndex=e.zIndex),e.height&&(t[i].height=e.height),e.width&&(t[i].width=e.width),e.content&&(t[i].content=e.content),t[i].data=l,(0,o.Rz)("listDialog",t),(0,o.wt)("listDialog_h392"),setTimeout((function(){document.getElementsByTagName("html")[0].classList.add("has-level-two"),(0,o.Rz)("modalOpen",i),(0,o.wt)("listDialog_h392")}),125)},s=function(e){var t,i,l,n=(0,o.bh)("listDialog")||{},a=e.id;n[a]&&(n[a].observeResize&&n[a].observeInterval&&clearInterval(n[a].observeInterval),n[a].display=!1,null===(t=n[a])||void 0===t||null===(i=t.data)||void 0===i||null===(l=i.closeEvent)||void 0===l||l.call(i),(0,o.Rz)("listDialog",n),delete n[a],document.getElementsByTagName("body")[0].style.overflowY=null,(0,o.wt)("listDialog_h392"),setTimeout((function(){delete n[a],document.getElementsByTagName("html")[0].classList.remove("has-level-two"),(0,o.Rz)("modalOpen",null)}),750))}},5064:function(e,t,i){i.r(t);var l=i(4942),n=i(4165),o=i(1413),a=i(5861),r=i(9439),d=i(2791),s=i(2350),c=i(2647),u=(i(4719),i(9661)),v=i(9760),m=i(24),p=i(184),h=(0,c.Np)(),b=(0,c.JC)(),f=(0,u.Uk)(),x=(0,u.LZ)(),_=(0,u.FC)(),y=(0,m.f_)(),j="entry_operation_comprobante";t.default=function(e){var t,i,l,c,u,m,b,O,C,F,Z,D,z,k,R,T=e.data,A=e.confirm,M=e.item,P=(0,d.useState)(!1),E=(0,r.Z)(P,2),S=E[0],B=E[1],K=(0,d.useState)(0),L=(0,r.Z)(K,2),U=(L[0],L[1]);(0,d.useEffect)((function(){if(!S){B(!0),(0,s.Rz)("accountPicker",{}),H("description",M.name),H("customerId",null),H("providerId",null);var e=M.accountsToParameterize;(0,s.Rz)("multi_params",e),U((0,s.M5)())}}));var H=function(e,t,i){var l=(0,s.bh)(j)||{};i?(l[i]||(l[i]={}),l[i][e]=t):l[e]=t,(0,s.Rz)(j,l),U((0,s.M5)())},Q=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(){var t,i,l,r,d,c,u,m,p,h,b,f,x,_,y,g,I,w,O,C,F,Z;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(d=(0,o.Z)({},(0,s.bh)(j))).date?d.date=new Date(d.date).getTime():d.date=Date.now(),c=new Date,d.comprobanteId=c.getFullYear()+""+(c.getMonth()+1)+"-"+(0,s.KX)(),d.document=null===(t=d.document)||void 0===t?void 0:t.trim(),u=[],(0,s.bh)("multi_params")&&(null===(i=(0,s._2)((0,s.bh)("multi_params")))||void 0===i||i.map(function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t,i){var l,a,r,c,v,m,p;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l=(0,s.bh)("multi_params")[t],!isNaN(1*l.amount)&&1*l.amount>0&&((v=(0,o.Z)({},d)).account=l.account,v.subAccount=l.subAccount,v.type=l.type,v.amount=1*l.amount,v.operationId=(0,s.M5)(),delete v.providerId,(m=null===(a=(0,s.bh)("account_ids"))||void 0===a?void 0:a[l.account]).payOrCollect&&(v.payOrCollect=m.payOrCollect),(p=(0,o.Z)({},null===(r=(0,s.bh)((0,s.hQ)()))||void 0===r?void 0:r.add_opera)).params={businessId:null===(c=(0,s.bh)("profileUser"))||void 0===c?void 0:c.businessId},p.form=v,u.push(p));case 2:case"end":return e.stop()}}),e)})));return function(t,i){return e.apply(this,arguments)}}())),"provider"===(null===M||void 0===M?void 0:M.extra)&&null!==(l=(0,s.bh)(j))&&void 0!==l&&l.providerId&&((b=(0,o.Z)({},d)).type="credit",f=(0,s.bh)("providers_ids")[(0,s.bh)(j).providerId],b.account=f.account,b.subAccount=f.subAccount,b.amount=N((0,s.bh)("multi_params")),b.operationId=(0,s.M5)(),(x=null===(m=(0,s.bh)("account_ids"))||void 0===m?void 0:m[f.account]).payOrCollect&&(b.payOrCollect=x.payOrCollect),(_=(0,o.Z)({},null===(p=(0,s.bh)((0,s.hQ)()))||void 0===p?void 0:p.add_opera)).params={businessId:null===(h=(0,s.bh)("profileUser"))||void 0===h?void 0:h.businessId},_.form=b,u.push(_)),"customer"===(null===M||void 0===M?void 0:M.extra)&&null!==(r=(0,s.bh)(j))&&void 0!==r&&r.customerId&&((w=(0,o.Z)({},d)).type="debit",O=(0,s.bh)("providers_ids")[(0,s.bh)(j).customerId],w.account=O.account,w.subAccount=O.subAccount,w.amount=-1*N((0,s.bh)("multi_params")),w.operationId=(0,s.M5)(),(C=null===(y=(0,s.bh)("account_ids"))||void 0===y?void 0:y[O.account]).payOrCollect&&(w.payOrCollect=C.payOrCollect),(F=(0,o.Z)({},null===(g=(0,s.bh)((0,s.hQ)()))||void 0===g?void 0:g.add_opera)).params={businessId:null===(I=(0,s.bh)("profileUser"))||void 0===I?void 0:I.businessId},F.form=w,u.push(F)),Z=u.map(function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var i;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=(0,s.I7)(t),e.next=3,i;case 3:e.sent;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=12,Promise.all(Z);case 12:(null===T||void 0===T?void 0:T.modalID)&&(0,v.CloseModal)({id:null===T||void 0===T?void 0:T.modalID}),setTimeout((function(){(0,s.Rz)("multi_params",null),(0,s.Rz)(j,null),U((0,s.M5)()),A&&A()}),400);case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Y=("provider"===(null===M||void 0===M?void 0:M.extra)&&(null===(t=(0,s.bh)(j))||void 0===t?void 0:t.providerId)||"customer"===(null===M||void 0===M?void 0:M.extra)&&(null===(i=(0,s.bh)(j))||void 0===i?void 0:i.customerId))&&0!==N((0,s.bh)("multi_params"));return(0,p.jsxs)("div",{style:{maxHeight:"90vh",minHeight:"88vh",width:"560px",overflow:"auto",background:"#fff",borderRadius:13,padding:"10px 19px"},children:[(0,p.jsxs)("div",{className:"_dsplFlx ",children:[(0,p.jsx)("p",{className:"form_title",children:"Asiento Manual"}),(0,p.jsx)("div",{className:"flexSpace"})]}),(0,p.jsxs)("div",{className:"_dsplFlx ",children:[(0,p.jsx)(y,{init:null===(l=(0,s.bh)(j))||void 0===l?void 0:l.date,updDate:function(e){return H("date",e)}}),(0,p.jsx)("div",{className:"flexSpace"}),(0,p.jsx)(h,{init:null===(c=(0,s.bh)(j))||void 0===c?void 0:c.document,label:"Documento",width:120,updChanges:function(e){return H("document",e)}})]}),(0,p.jsx)(h,{init:null===(u=(0,s.bh)(j))||void 0===u?void 0:u.description,label:"Descripcion",width:520,updChanges:function(e){return H("description",e)}}),"employee"===(null===M||void 0===M?void 0:M.extra)?(0,p.jsx)("div",{className:"extra_container",children:null!==(m=(0,s.bh)(j))&&void 0!==m&&m.employeeId?(0,p.jsxs)("div",{className:"_dsplFlx",children:[(0,p.jsx)("div",{className:"employee_title",style:{color:"#646cff",cursor:"pointer"},onClick:function(){return H("employeeId",null)},children:"Empleado:"}),(0,p.jsx)("div",{className:"employee_name",children:null===(b=(0,s.bh)("employees_ids")[(0,s.bh)(j).employeeId])||void 0===b?void 0:b.name})]}):(0,p.jsx)(f,{width:420,handleClick:function(e){return H("employeeId",e)}})}):null,"provider"===(null===M||void 0===M?void 0:M.extra)?(0,p.jsx)("div",{className:"extra_container",children:null!==(O=(0,s.bh)(j))&&void 0!==O&&O.providerId?(0,p.jsxs)("div",{className:"_dsplFlx",children:[(0,p.jsx)("div",{className:"employee_title",style:{color:"#646cff",cursor:"pointer"},onClick:function(){return H("providerId",null)},children:"Provedor:"}),(0,p.jsx)("div",{className:"employee_name",children:null===(C=(0,s.bh)("providers_ids")[(0,s.bh)(j).providerId])||void 0===C?void 0:C.name})]}):(0,p.jsx)(x,{width:420,handleClick:function(e){return H("providerId",null===e||void 0===e?void 0:e.providerId)}})}):null,"customer"===(null===M||void 0===M?void 0:M.extra)?(0,p.jsx)("div",{className:"extra_container",children:null!==(F=(0,s.bh)(j))&&void 0!==F&&F.customerId?(0,p.jsxs)("div",{className:"_dsplFlx",children:[(0,p.jsx)("div",{className:"employee_title",style:{color:"#646cff",cursor:"pointer"},onClick:function(){return H("customerId",null)},children:"Cliente:"}),(0,p.jsx)("div",{className:"employee_name",children:null===(Z=(0,s.bh)("providers_ids")[(0,s.bh)(j).customerId])||void 0===Z?void 0:Z.name})]}):(0,p.jsx)(_,{width:420,handleClick:function(e){return H("customerId",null===e||void 0===e?void 0:e.providerId)}})}):null,(0,p.jsxs)("div",{className:"boxAddAcc",style:{margin:"18px 0"},children:[(0,p.jsxs)("div",{className:"_dsplFlx hdr_bar purple",style:{margin:"18px 0"},children:[(0,p.jsx)("div",{className:"tr_bar_25",children:"Cuenta"}),(0,p.jsx)("div",{className:"tr_bar_25",children:"Sub Cuenta"}),(0,p.jsx)("div",{className:"tr_bar_25"}),(0,p.jsx)("div",{className:"tr_bar_25",children:"Importe"})]}),null!==(D=(0,s.bh)(j))&&void 0!==D&&D.customerId?(0,p.jsx)(I,{idKey:(0,s.bh)(j).customerId,data:(0,s.bh)("providers_ids")[(0,s.bh)(j).customerId],total:N((0,s.bh)("multi_params")),type:"debit"}):null,(0,s.bh)("multi_params")&&(null===(z=(0,s._2)((0,s.bh)("multi_params")))||void 0===z?void 0:z.map((function(e,t){return(0,p.jsx)(g,{idKey:e,data:(0,s.bh)("multi_params")[e],updObs:U},e)}))),null!==(k=(0,s.bh)(j))&&void 0!==k&&k.providerId?(0,p.jsx)(I,{idKey:(0,s.bh)(j).providerId,data:(0,s.bh)("providers_ids")[(0,s.bh)(j).providerId],total:N((0,s.bh)("multi_params")),type:"credit"}):null]}),(0,p.jsxs)("div",{className:"_dsplFlx ",children:[(0,p.jsx)("div",{className:"flexSpace"}),null!==(R=(0,s.bh)(j))&&void 0!==R&&R.document&&(Y||w((0,s.bh)("multi_params")))?(0,p.jsx)("div",{className:"card",children:(0,p.jsx)("button",{className:"group_title addBtn purple",onClick:Q,children:"Guardar"})}):null]})]})};var g=function(e){var t,i,n,o=e.data,a=e.updObs,c=e.idKey,u=(0,d.useState)(0),v=(0,r.Z)(u,2),m=v[0],f=(v[1],function(e,t,i){var l=(0,s.bh)("multi_params")||{};i?(l[i]||(l[i]={}),l[i][e]=t):l[e]=t,(0,s.Rz)("multi_params",l)}),x=null===(t=(0,s.bh)("account_ids"))||void 0===t?void 0:t[null===o||void 0===o?void 0:o.account],_=null===(i=(0,s.bh)("sub_account_ids"))||void 0===i?void 0:i[null===o||void 0===o?void 0:o.subAccount];return(0,p.jsxs)("div",{className:"_dsplFlx hdr_bar",children:[(0,p.jsx)("div",{className:"tr_bar_25",style:{marginTop:10,fontWeight:600,color:"debit"===o.type?"#009688":"#c62828"},children:(0,p.jsx)(b,{data:x,color:"debit"===o.type?"#009688":"#c62828",labelField:"code",infoField:"name"})}),(0,p.jsx)("div",{className:"tr_bar_25",style:{marginTop:10},children:(0,p.jsx)(b,{data:_,color:"debit"===o.type?"#009688":"#c62828",labelField:"subAccount",infoField:"subAccountName"})}),(0,p.jsx)("div",{className:"tr_bar_25",style:{marginTop:10}}),(0,p.jsx)("div",{className:"tr_bar_25",children:(0,p.jsx)(h,(n={init:m,type:"number",width:80},(0,l.Z)(n,"init",null===o||void 0===o?void 0:o.amount),(0,l.Z)(n,"updChanges",(function(e){f("amount",e,c),a((0,s.M5)())})),n))})]})},I=function(e){var t,i,l=e.data,n=(e.idKey,e.total),o=e.type,a=(0,d.useState)(0),c=(0,r.Z)(a,2),u=(c[0],c[1],null===(t=(0,s.bh)("account_ids"))||void 0===t?void 0:t[null===l||void 0===l?void 0:l.account]),v=null===(i=(0,s.bh)("sub_account_ids"))||void 0===i?void 0:i[null===l||void 0===l?void 0:l.subAccount];return(0,p.jsxs)("div",{className:"_dsplFlx hdr_bar",children:[(0,p.jsx)("div",{className:"tr_bar_25",style:{marginTop:10,fontWeight:600,color:"debit"===o?"#009688":"#c62828"},children:(0,p.jsx)(b,{data:u,color:"debit"===o?"#009688":"#c62828",labelField:"code",infoField:"name"})}),(0,p.jsx)("div",{className:"tr_bar_25",style:{marginTop:10},children:(0,p.jsx)(b,{data:v,color:"debit"===o?"#009688":"#c62828",labelField:"subAccount",infoField:"subAccountName"})}),(0,p.jsx)("div",{className:"tr_bar_25",style:{marginTop:10}}),(0,p.jsx)("div",{className:"tr_bar_25",style:{marginTop:10},children:(0,p.jsx)("div",{className:"total_cntra",children:n*("debit"===o?-1:1).toFixed(2)})})]})},N=function(e){var t=0,i=e&&(0,s._2)(e);return i&&(null===i||void 0===i||i.map((function(i,l){var n=e[i],o=t.toFixed(2),a=null!==n&&void 0!==n&&n.amount?"debit"===(null===n||void 0===n?void 0:n.type)?parseFloat(n.amount):-1*parseFloat(n.amount):0;t=a+parseFloat(o)}))),t},w=function(e){var t=0,i=e&&(0,s._2)(e);return i&&(null===i||void 0===i||i.map((function(i,l){var n=e[i],o=t.toFixed(2),a=null!==n&&void 0!==n&&n.amount?"debit"===(null===n||void 0===n?void 0:n.type)?parseFloat(n.amount):-1*parseFloat(n.amount):0;t=a+parseFloat(o)}))),i&&(null===i||void 0===i?void 0:i.length)>0&&0===t}},4719:function(){},4942:function(e,t,i){i.d(t,{Z:function(){return n}});var l=i(9142);function n(e,t,i){return(t=(0,l.Z)(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}},1413:function(e,t,i){i.d(t,{Z:function(){return o}});var l=i(4942);function n(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,l)}return i}function o(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?n(Object(i),!0).forEach((function(t){(0,l.Z)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):n(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}}}]);
//# sourceMappingURL=5064.81c1c740.chunk.js.map