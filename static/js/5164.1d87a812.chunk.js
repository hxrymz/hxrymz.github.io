"use strict";(self.webpackChunkhrmfinance=self.webpackChunkhrmfinance||[]).push([[5164],{5164:(e,a,l)=>{l.r(a),l.d(a,{default:()=>C});var t=l(2791),i=l(2350),s=(l(1206),l(1573)),d=l(9760),o=l(2502),n=l(2647),c=(l(6794),l(184));var u=l(24),r=l(4304),m=l(9661),v=l(7689);const p=(0,n.YZ)(),h=(0,n.Np)(),b=(0,u.f_)(),x=((0,m.a)(),(0,n.PU)()),_="paystub_employee",y="paystub_W2_manual",j=e=>{var a,l,s,o,n;let{data:u,confirm:m,item:x}=e;const[j,g]=(0,t.useState)(!1),[N,I]=(0,t.useState)(0),k=(0,v.s0)();(0,t.useEffect)((()=>{j||(g(!0),I((0,i.M5)()))}));const S=(e,a,l)=>{let t=(0,i.bh)(_)||{};l?(t[l]||(t[l]={}),t[l][e]=a):t[e]=a,(0,i.Rz)(_,t),I((0,i.M5)())};let C=(0,i.bh)(_)||{},w=(new Date).getTime()+800;if(C.date){w=new Date(C.date).getTime()}let F="Check No ".concat(C.document?C.document:""," - Salary ").concat((0,i.sJ)(w)," - ").concat(null===x||void 0===x?void 0:x.name).toUpperCase();const M=async e=>{var a,l,t,s,d;let o=(0,i.bh)(_)||{},n=(new Date).getTime()+800;if(o.date){let e=new Date(o.date).getTime();n=e||n}o.date=n,o.description||(o.description=F);let c=await(0,i.fN)(o.date),u={date:o.date,comprobanteId:c,description:o.description,businessId:null===(a=(0,i.bh)("profileUser"))||void 0===a?void 0:a.businessId,year:new Date(o.date).getFullYear()};delete o.date,o.document=null===(l=o.document)||void 0===l?void 0:l.trim(),o.employeeId=null===x||void 0===x?void 0:x.employeeId;let r=[],m={...o};m.account=null===(t=(0,i.bh)("global_account_params"))||void 0===t?void 0:t.salary.account;let v=(0,i.Zv)(o.amount,2);m.type="debit",m.operationId=(0,i.M5)(),m.amount=1*v,r.push(m);let p={...o};var h,b,y,j;(p.account=null===(s=(0,i.bh)("global_account_params"))||void 0===s?void 0:s.cash_bank.account,null!==o&&void 0!==o&&o.futureSlipCheck)&&(p.account=null===(h=(0,i.bh)("global_account_params"))||void 0===h||null===(b=h.futureSlipCheck)||void 0===b?void 0:b.account,p.subAccount=null===(y=(0,i.bh)("global_account_params"))||void 0===y||null===(j=y.futureSlipCheck)||void 0===j?void 0:j.subAccount);let f=(0,i.Zv)(o.amount,2);p.type="credit",p.operationId=(0,i.M5)(),p.amount=1*f,r.push(p);let g={...null===(d=(0,i.bh)((0,i.hQ)()))||void 0===d?void 0:d.add_multi_opera};g.params=u,g.form=r,z(g,c)},T=async e=>{var a,l,t,s,d,o;let n=(0,i.bh)(_)||{},c=(new Date).getTime()+800;if(n.date){let e=new Date(n.date).getTime();c=e||c}n.date=c;const u=n.cash_amount;delete n.cash_amount;let r=await(0,i.fN)(n.date);n.comprobanteId=r,n.document=null===(a=n.document)||void 0===a?void 0:a.trim(),n.description||(n.description=F),n.employeeId=null===x||void 0===x?void 0:x.employeeId;let m=[],v=0,p={date:n.date,comprobanteId:r,description:n.description,businessId:null===(l=(0,i.bh)("profileUser"))||void 0===l?void 0:l.businessId,year:new Date(n.date).getFullYear()};delete n.date,x.w2&&(0,i._2)(x.w2).map((e=>{var a,l,t,s;let d={...n},o={...null===(a=(0,i.bh)("global_account_params"))||void 0===a||null===(l=a.w2_params)||void 0===l||null===(t=l[e])||void 0===t?void 0:t.account};d.account=o.account,d.subAccount=o.subAccount;let c=d.amount*(null===(s=x.w2[e])||void 0===s?void 0:s.percent)/100,u=(0,i.Zv)(c,2);if(d.type="credit",d.operationId=(0,i.M5)(),(0,i.bh)(y)[e]&&(u=(0,i.bh)(y)[e]),"socialSecurity"===e){var r,p;let e={...n};e.account=null===(r=(0,i.bh)("global_account_params"))||void 0===r||null===(p=r.socialsecurity_tax_expenses)||void 0===p?void 0:p.account,e.type="debit",e.amount=1*u,e.operationId=(0,i.M5)(),v+=1*u,d.amount=2*u,m.push(e)}else if("medicareTax"===e){var h,b;let e={...n};e.account=null===(h=(0,i.bh)("global_account_params"))||void 0===h||null===(b=h.medicare_tax_expenses)||void 0===b?void 0:b.account,e.type="debit",e.amount=1*u,e.operationId=(0,i.M5)(),d.amount=2*u,v+=1*u,m.push(e)}else d.amount=1*u,v+=1*u;1*u>0&&m.push(d)}));let h={...n};h.account=null===(t=(0,i.bh)("global_account_params"))||void 0===t||null===(s=t.salary)||void 0===s?void 0:s.account;let b=n.amount,j=(0,i.Zv)(b,2);h.type="debit",h.operationId=(0,i.M5)(),h.amount=1*j,m.push(h);let f={...n};var g,N,I,k;(f.account=null===(d=(0,i.bh)("global_account_params"))||void 0===d?void 0:d.cash_bank.account,null!==n&&void 0!==n&&n.futureSlipCheck)&&(f.account=null===(g=(0,i.bh)("global_account_params"))||void 0===g||null===(N=g.futureSlipCheck)||void 0===N?void 0:N.account,f.subAccount=null===(I=(0,i.bh)("global_account_params"))||void 0===I||null===(k=I.futureSlipCheck)||void 0===k?void 0:k.subAccount);let S=n.amount-v;u&&(S-=u);let C=(0,i.Zv)(S,2);if(f.type="credit",f.operationId=(0,i.M5)(),f.amount=1*C,m.push(f),u){var w;let e={...n};e.account=null===(w=(0,i.bh)("global_account_params"))||void 0===w?void 0:w.cash_fluid.account;let a=(0,i.Zv)(u,2);e.type="credit",e.operationId=(0,i.M5)(),e.amount=1*a,m.push(e)}let M={...null===(o=(0,i.bh)((0,i.hQ)()))||void 0===o?void 0:o.add_multi_opera};M.params=p,M.form=m,z(M,r)},z=async(e,a)=>{const l=(0,i.I7)(e);await l&&setTimeout((()=>{(0,i.Rz)(_,null),(0,i.Rz)(y,null),(null===u||void 0===u?void 0:u.modalID)&&(0,d.CloseModal)({id:null===u||void 0===u?void 0:u.modalID}),k({pathname:"/accounting-ledger",search:"?cId=".concat(a)})}),400)};return(0,c.jsxs)("div",{style:{maxHeight:"96vh",width:"890px",overflow:"auto",background:"var(--hrm_palette-general-background-b)",borderRadius:13,padding:"10px 19px 25px"},children:[(0,c.jsxs)("div",{className:"_dsplFlx ",children:[(0,c.jsx)("p",{className:"form_title",children:"Registrar Pago Nomina"}),(0,c.jsx)("div",{className:"flexSpace"}),(0,c.jsx)("div",{className:"employee_name",children:null===x||void 0===x?void 0:x.name})]}),(0,c.jsxs)("div",{className:"_dsplFlx ",style:{margin:"10px 10px 10px 0"},children:[(0,c.jsx)("div",{className:"flexSpace"}),(0,c.jsx)("div",{style:{margin:"14px 10px 0px 0"},children:(0,c.jsx)(b,{init:null===(a=(0,i.bh)(_))||void 0===a?void 0:a.date,label:"Fecha",updDate:e=>S("date",e)})}),(0,c.jsx)("div",{className:"flexSpace"}),(0,c.jsx)(h,{init:null===(l=(0,i.bh)(_))||void 0===l?void 0:l.document,label:"Document",width:220,updChanges:e=>S("document",e)}),(0,c.jsx)("div",{className:"flexSpace"}),(0,c.jsx)(h,{init:null===(s=(0,i.bh)(_))||void 0===s?void 0:s.amount,label:"Salario Gross",width:120,type:"number",updChanges:e=>S("amount",e)}),(0,c.jsx)("div",{className:"flexSpace"})]}),(0,c.jsxs)("div",{className:"_dsplFlx ",style:{margin:"10px 10px 10px 0"},children:[(0,c.jsx)("div",{className:"flexSpace"}),(0,c.jsxs)("div",{className:"_dsplFlx ",style:{marginTop:48},children:[(0,c.jsx)("span",{className:"checklabel",children:"Cheque a Futuro"}),(0,c.jsx)(p,{initvalue:null===(o=(0,i.bh)(_))||void 0===o?void 0:o.futureSlipCheck,keyCode:57,updChange:e=>S("futureSlipCheck",e)})]})]}),(0,c.jsx)("div",{className:"_dsplFlx ",style:{margin:"10px 10px 10px 0"},children:F}),null!==x&&void 0!==x&&x.hasW2?(0,c.jsx)("div",{style:{marginTop:19},children:(0,c.jsx)(f,{item:null===x||void 0===x?void 0:x.w2,amount:(null===(n=(0,i.bh)(_))||void 0===n?void 0:n.amount)||0})}):null,(0,c.jsxs)("div",{className:"_dsplFlx ",children:[(0,c.jsx)("div",{className:"flexSpace"}),(0,c.jsx)("div",{style:{margin:"38px 10px 0px 0"},children:(0,c.jsx)(r.NK,{clickHandler:()=>{x.hasW2?T():M()},label:"Guardar"})})]})]})},f=e=>{let{item:a,amount:l}=e;const[s,d]=(0,t.useState)(0),[o,n]=(0,t.useState)(!1),u=()=>{d((0,i.M5)())};return(0,c.jsxs)(r.lp,{children:[(0,c.jsx)("div",{className:"iMTYiw hiKoiM",style:{width:"100%"},children:(0,c.jsxs)("div",{className:"_dsplFlx ",children:["W2 Tax deduction",(0,c.jsx)("div",{className:"flexSpace"}),"Neto: $",l?(l-I((0,i.bh)(y))).toFixed(2):"0.00",(0,c.jsx)("div",{className:"flexSpace"}),"Taxes: $",l?I((0,i.bh)(y)).toFixed(2):"0.00"]})}),(0,c.jsx)("div",{className:"_dsplFlx w_100prc",style:{marginTop:19}}),(0,c.jsx)(g,{label:"Federal Tax",keyFld:"federalTax",item:a,amount:l,updObs:u}),(0,c.jsx)(g,{label:"Social Security",keyFld:"socialSecurity",item:a,amount:l}),(0,c.jsx)(g,{label:"Medicare",keyFld:"medicareTax",item:a,amount:l}),(0,c.jsx)(g,{label:"Estate",keyFld:"stateTax",item:a,amount:l,updObs:u}),(0,c.jsx)(g,{label:"City",keyFld:"cityTax",item:a,amount:l,updObs:u}),(0,c.jsx)(N,{label:"Cash",keyFld:"cash_fluid",item:a,amount:l,updObs:u})]})},g=e=>{var a,l,s,d,o;let{label:n,item:u,keyFld:r,percentDefault:m,amount:v,manual:p,updObs:b}=e,_=(null===u||void 0===u||null===(a=u[r])||void 0===a?void 0:a.percent)||m,j={...null===(l=(0,i.bh)("global_account_params"))||void 0===l||null===(s=l.w2_params)||void 0===s||null===(d=s[r])||void 0===d?void 0:d.account},f=!(null!==j&&void 0!==j&&j.account);(0,t.useEffect)((()=>{let e=1*(_/100*v).toFixed(2);g(r,e)}),[p,r,_,v]);const g=(e,a,l)=>{let t=(0,i.bh)(y)||{};l?(t[l]||(t[l]={}),t[l][e]=a):t[e]=a,(0,i.Rz)(y,t),b&&b()};return(0,c.jsxs)("div",{className:"_dsplFlx w_100prc",children:[(0,c.jsx)("div",{className:"icon_revision",children:(0,c.jsx)(x,{name:f?"alert":"check_circle",color:f?"var(--hrm_palette-selected-nav-text)":"var(--hrm_palette-success-fg)"})}),(0,c.jsx)("div",{className:"igLyC jyoObE pddBtm-12",children:(0,c.jsx)("div",{className:"txfnt_lfal",children:n})}),(0,c.jsx)("div",{className:"igLyC jyoObE",children:_+"%"}),(0,c.jsx)("div",{className:"igLyC jyoObE",children:(0,c.jsx)(h,{init:null===(o=(0,i.bh)(y))||void 0===o?void 0:o[r],width:120,updChanges:e=>g(r,e),type:"number"})})]})},N=e=>{var a,l,t;let{label:s,item:d,keyFld:o,percentDefault:n,amount:u}=e,r=!{...null===(a=(0,i.bh)("global_account_params"))||void 0===a||null===(l=a[o])||void 0===l?void 0:l.account};return(0,c.jsxs)("div",{className:"_dsplFlx w_100prc",children:[(0,c.jsx)("div",{className:"icon_revision",children:(0,c.jsx)(x,{name:r?"alert":"check_circle",color:r?"var(--hrm_palette-selected-nav-text)":"var(--hrm_palette-success-fg)"})}),(0,c.jsx)("div",{className:"igLyC jyoObE pddBtm-12",children:(0,c.jsx)("div",{className:"txfnt_lfal",children:s})}),(0,c.jsx)("div",{className:"igLyC jyoObE"}),(0,c.jsx)("div",{className:"igLyC jyoObE",children:(0,c.jsx)(h,{init:null===(t=(0,i.bh)(_))||void 0===t?void 0:t.cash_amount,width:120,updChanges:e=>((e,a,l)=>{let t=(0,i.bh)(_)||{};l?(t[l]||(t[l]={}),t[l][e]=a):t[e]=a,(0,i.Rz)(_,t)})("cash_amount",e)})})]})},I=e=>{var a;let l=0;return e&&(null===(a=(0,i._2)(e))||void 0===a||a.map(((a,t)=>{let s=e[a],d=(0,i.Zv)(s,2);l=1*(0,i.Zv)(l,2)+1*(0,i.Zv)(d,2)}))),l},k=((0,n.PU)(),(0,s.MZ)()),S=(0,s.P3)(),C=e=>{var a;let{data:l,elmId:s,handleRefreshAll:n}=e;const[u,r]=(0,t.useState)(!1),[m,v]=(0,t.useState)(0);(0,t.useEffect)((()=>{u||(r(!0),v((0,i.M5)()))}));const p=()=>{v((0,i.M5)())},h=()=>{(0,o.Dy)(p)},b=e=>{(0,i.Rz)("employee_sub_mayor",l);let a={zIndex:450,height:"80vh",props:{minHeight:"1vh",overlay:!0}};a.content=(0,c.jsx)(S,{confirm:h,item:l}),(0,d.OpenModal)(a)};return(0,c.jsx)("div",{className:"item_acc",children:(0,c.jsxs)("div",{className:"_dsplFlx item_box employee_header",children:[(0,c.jsxs)("div",{className:"_dsplFlx",onClick:async()=>{(0,i.Rz)("upd_employee",l),(0,i.Rz)("upd_employee_bck",JSON.parse(JSON.stringify(l)));let e={zIndex:450,height:"80vh",props:{minHeight:"1vh",overlay:!0}};e.content=(0,c.jsx)(k,{confirm:h}),(0,d.OpenModal)(e)},children:[(0,c.jsx)("div",{className:"code"}),(0,c.jsx)("div",{className:"name",children:null===l||void 0===l?void 0:l.name}),(0,c.jsx)("div",{className:"unit",children:null===l||void 0===l?void 0:l.unit})]}),(0,c.jsx)("div",{className:"flexSpace"}),null!==(a=(0,i.Ch)()[(0,i.bh)("date_current_year")])&&void 0!==a&&a.isClosed?null:(0,c.jsx)("div",{className:" addSbAcc purple",onClick:e=>{(0,i.Rz)("employee_sub_mayor",l);let a={zIndex:450,height:"80vh",props:{minHeight:"1vh",overlay:!0}};a.content=(0,c.jsx)(j,{item:l}),(0,d.OpenModal)(a)},children:"Make a Payment"}),(0,c.jsx)("div",{className:" addSbAcc purple",onClick:()=>{(0,o.lG)(null===l||void 0===l?void 0:l.employeeId,b)},children:"Paychecks"})]})})}},4304:(e,a,l)=>{l.d(a,{lp:()=>d,NK:()=>s});l(2791);var t=l(1087),i=l(184);const s=e=>{let{clickHandler:a,label:l,navTo:s}=e;return(0,i.jsx)("button",{className:"gHAsFI dqnOfN jUrKkb",onClick:a,children:(0,i.jsx)(t.OL,{className:" jaqJnq",to:s,children:l})})},d=e=>{let{children:a}=e;return(0,i.jsx)("div",{className:"jRutKh",children:(0,i.jsx)("div",{className:"jSvsvz",children:(0,i.jsx)("div",{className:"jzcvbH",children:(0,i.jsx)("div",{className:" kfqEsq",children:a})})})})}},2502:(e,a,l)=>{l.d(a,{Dy:()=>i,kQ:()=>s,lG:()=>d});var t=l(2350);const i=async e=>{var a,l;let i={...null===(a=(0,t.bh)((0,t.hQ)()))||void 0===a?void 0:a.all_employee};i.params={businessId:null===(l=(0,t.bh)("profileUser"))||void 0===l?void 0:l.businessId};const s=(0,t.I7)(i),d=await s;d&&((0,t.Rz)("employees_list",o((0,t.jQ)(d),"code")),(0,t.Rz)("employees_ids",(0,t.ME)((0,t.jQ)(d),"employeeId")),e&&e())},s=async e=>{var a,l;let i={...null===(a=(0,t.bh)((0,t.hQ)()))||void 0===a?void 0:a.search_employee};i.params={businessId:null===(l=(0,t.bh)("profileUser"))||void 0===l?void 0:l.businessId,":search":(0,t.bh)("searchQry")};const s=(0,t.I7)(i),d=await s;d&&((0,t.Rz)("employees_list",o((0,t.jQ)(d),"code")),e&&e())},d=async(e,a)=>{var l,i,s,d;let o={...null===(l=(0,t.bh)((0,t.hQ)()))||void 0===l?void 0:l.filter_search_opera};o.params={businessId:null===(i=(0,t.bh)("profileUser"))||void 0===i?void 0:i.businessId,year:(0,t.bh)("date_current_year"),":date1":(null===(s=(0,t.bh)("date_range_comps"))||void 0===s?void 0:s.initDate)-10,":date2":null===(d=(0,t.bh)("date_range_comps"))||void 0===d?void 0:d.lastDate,":search0":e};const n=(0,t.I7)(o),c=await n;c&&!c.error&&((0,t.Rz)("paystub_submayor_list",c),(0,t.Rz)("paystub_submayor_group",function(e){var a={};e.length>0?e.map((e=>{let l=e.date+"_"+e.comprobanteId;if(!a[l]){a[l]={},["date","description","entryName","comprobanteId","employeeId","document"].forEach((t=>{a[l][t]=e[t]})),a[l].amount=0,a[l].balance=0,a[l].operations=[]}e.type&&(a[l].balance=1*(0,t.Zv)(a[l].balance,2)+("debit"===e.type?1*(0,t.Zv)(e.amount,2):0),a[l].operations.push(function(e){var a;let l={};l.employeeId=null===(a=(0,t.bh)("employees_ids"))||void 0===a?void 0:a[e.employeeId],l.comprobanteId=e.comprobanteId,l.operationId=e.operationId,l.document=e.document,l.date=e.date,"credit"===e.type?(l.debit=0,l.credit=e.amount):"debit"===e.type&&(l.credit=0,l.debit=e.amount);return l}(e)))})):a=null;return a}((0,t.jQ)(c)))),a&&a()};const o=(e,a)=>(0,t.MV)("sortEmployees",[e],(()=>e&&e.sort(((e,l)=>{let t=1*e[a],i=1*l[a];return t<i?-1:t>i?1:0}))))},1206:()=>{},6794:()=>{}}]);
//# sourceMappingURL=5164.1d87a812.chunk.js.map