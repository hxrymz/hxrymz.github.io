/*! For license information please see 54.bc6d81a2.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkhrmfinance=self.webpackChunkhrmfinance||[]).push([[54,9760],{9760:(e,l,t)=>{t.r(l),t.d(l,{CloseModal:()=>r,OpenModal:()=>c,default:()=>d});var s=t(2791),a=t(5408),o=t(2350),i=t(184);const n="listDialog_mdh392",d=()=>{const e=(0,o.bh)("listDialog")||{};(0,a.Z)(n);let l=Object.keys(e);return(0,i.jsx)(i.Fragment,{children:l.map(((l,t)=>{let a=e[l];if(a&&a.visible){let e={};a.height&&(e.heigth=a.height),a.width,a.zIndex&&(e.zIndex=a.zIndex-1);let t={zIndex:a.zIndex},o=null,n=a.data;return a.content&&(o=s.cloneElement(a.content,{data:n})),(0,i.jsxs)("div",{className:"ltr-1kbnjow",style:e,children:[(0,i.jsx)("div",{className:"ltr-hoe9xz",children:(0,i.jsx)("div",{className:"ltr-1wao6ny",style:t,id:l,children:o})}),a.data.overlay?(0,i.jsx)("div",{className:"DialogHRMOverlay ".concat(a.visible?"active":""),onClick:()=>{var e;e=l,document.getElementsByTagName("html")[0].classList.remove("has-level-two"),r({id:e})}}):null]},l)}}))})},c=e=>{let l=(0,o.bh)("listDialog")||{},t=(0,o.M5)();l[t]||(l[t]={}),l[t].visible=!0;let s={};e.props?(s=e.props,s.modalID=t):s.modalID=t;let a=document.getElementsByTagName("body")[0];null!==a&&void 0!==a&&a.style&&(a.style.overflowY="hidden"),l[t].isView=e.isView,l[t].observeResize=e.observeResize,l[t].observeResize&&(l[t].observeInterval=setInterval((()=>{let e=document.querySelector("[dialog-key-id='".concat(t,"']")),s=e&&e.getBoundingClientRect();s&&(s.width===l[t].width&&s.height===l[t].height||(l[t].height=s.height+10,l[t].width=s.width,(0,o.Rz)("listDialog",l),(0,o.wt)(n)))}),200)),l[t].display=!0,e.zIndex&&(l[t].zIndex=e.zIndex),e.height&&(l[t].height=e.height),e.width&&(l[t].width=e.width),e.content&&(l[t].content=e.content),l[t].data=s,(0,o.Rz)("listDialog",l),(0,o.wt)(n),setTimeout((()=>{document.getElementsByTagName("html")[0].classList.add("has-level-two"),(0,o.Rz)("modalOpen",t),(0,o.wt)(n)}),125)},r=e=>{let l=(0,o.bh)("listDialog")||{},t=e.id;if(l[t]){var s,a,i;l[t].observeResize&&l[t].observeInterval&&clearInterval(l[t].observeInterval),l[t].display=!1,null===(s=l[t])||void 0===s||null===(a=s.data)||void 0===a||null===(i=a.closeEvent)||void 0===i||i.call(a),(0,o.Rz)("listDialog",l),delete l[t],document.getElementsByTagName("body")[0].style.overflowY=null,(0,o.wt)(n),setTimeout((()=>{delete l[t],document.getElementsByTagName("html")[0].classList.remove("has-level-two"),(0,o.Rz)("modalOpen",null)}),750)}}},5281:(e,l,t)=>{t.d(l,{Z:()=>i});var s=t(2791),a=t(184);class o extends s.Component{constructor(){super(),this.state={scrollPosition:null},this.handleInterval=this.handleInterval.bind(this),this.handleRequestAnimationFrame=this.handleRequestAnimationFrame.bind(this)}componentWillMount(){this.intervalID=setInterval(this.handleInterval,50)}componentWillUnmount(){clearInterval(this.intervalID),cancelAnimationFrame(this.requestID),this.requestID=null,this.intervalID=null}getWindowScrollTop(){return window.pageYOffset||document.documentElement.scrollTop}handleInterval(){cancelAnimationFrame(this.requestID),this.requestID=requestAnimationFrame(this.handleRequestAnimationFrame)}handleRequestAnimationFrame(){const{scrollPosition:e}=this.state,l=this.getWindowScrollTop();l!==e&&("function"===typeof this.props.scrollhandler&&this.props.scrollhandler(l),this.setState({scrollPosition:l}))}render(){return(0,a.jsx)(a.Fragment,{})}}const i=o},54:(e,l,t)=>{t.r(l),t.d(l,{default:()=>x});var s=t(2791),a=t(2350),o=t(2647),i=t(9760),n=(t(6021),t(1232)),d=t(9179),c=t(4050),r=t(184);const u=(0,d.t8)(),v=((0,o.Np)(),e=>{let{data:l,elmId:t,openUpdateView:o}=e;const[d,c]=(0,s.useState)(!1),[v,h]=(0,s.useState)(0);(0,s.useEffect)((()=>{d||(c(!0),h((0,a.M5)()))}));const m=()=>{h((0,a.M5)())},p=()=>{(0,n.nr)(m)};return(0,r.jsx)("div",{className:"item_acc itm_2_pay",children:(0,r.jsxs)("div",{className:"_dsplFlx operation_item_box",onClick:()=>{(0,a.Rz)("show_comprobante",l);let e={zIndex:450,height:"80vh",props:{minHeight:"1vh",overlay:!0}};e.content=(0,r.jsx)(u,{confirm:p,item:l,accountForm:"Acc2Pay"}),(0,i.OpenModal)(e)},children:[(0,r.jsx)("div",{className:"name",children:null===l||void 0===l?void 0:l.document}),(0,r.jsx)("div",{className:"entryName",children:null===l||void 0===l?void 0:l.entryName}),(0,r.jsx)("div",{className:"flexSpace"}),(0,r.jsxs)("div",{className:"code",children:["$",(1*(null===l||void 0===l?void 0:l.amount)).toFixed(2)]}),(0,r.jsx)("div",{className:"flexSpace"})]})})});var h=t(9661),m=t(5281);const p=(0,o.Vg)(),b=((0,d.i5)(),(0,h.LZ)(),(0,o.PU)()),_="Acc2Pay",y=(0,o.tL)(),x=e=>{var l,t;let{data:o,elmId:i,updObs:d}=e;const[u,h]=(0,s.useState)(!1),[m,p]=(0,s.useState)(0),[b,y]=(0,s.useState)(!1),[x,f]=(0,s.useState)(!1);(0,s.useEffect)((()=>{u||(h(!0),(0,a.Rz)("list_show_type_pay","pending"),(0,c.Ht)("global_accounts","global_account_params",N),p((0,a.M5)()),(0,c.ZX)())}));const j=()=>{},N=async(e,l)=>{p((0,a.M5)()),y(!1)};return(0,r.jsxs)("div",{className:"",children:[(0,r.jsxs)("div",{className:"accounts_header _dsplFlx",children:[(0,r.jsx)("div",{children:(0,r.jsx)("h2",{children:"Pagos"})}),(0,r.jsx)("div",{className:"flexSpace"})]}),(0,r.jsxs)("div",{className:"",style:{maxWidth:"920px",padding:16},children:[(0,r.jsx)("div",{className:"",style:{height:190},children:(0,r.jsx)(g,{handle_getall:e=>{(0,n.nr)((0,a.bh)(_),N)},data:o,cb_result:N,updObs:p,searchCllb:e=>{f(e)}})}),(0,r.jsx)("div",{className:"accounts_container ",children:(null===(l=(0,a.bh)(_))||void 0===l?void 0:l.account)&&(0,a.bh)("toPay_by_doc")&&(null===(t=(0,a._2)((0,a.bh)("toPay_by_doc")))||void 0===t?void 0:t.map((e=>{let l=1*(0,a.bh)("toPay_by_doc")[e].amount;if("done"===(0,a.bh)("list_show_type_pay")&&0===l||"pending"===(0,a.bh)("list_show_type_pay")&&0!==l){let l=(0,a.bh)("toPay_by_doc")[e].document;return!x||l.indexOf(x)>=0?(0,r.jsx)(v,{data:(0,a.bh)("toPay_by_doc")[e],elmId:e,openUpdateView:j},e):null}return null})))})]})]})},g=e=>{var l,t,o,i,n,d,c,u,v,h;let{handle_getall:x,data:g,cb_result:f,updObs:j,searchCllb:N}=e;const[w,I]=(0,s.useState)(0),[z,R]=(0,s.useState)(!1);let P=null===(l=(0,a.bh)("account_ids"))||void 0===l?void 0:l[null===(t=(0,a.bh)(_))||void 0===t?void 0:t.account],A=null===(o=(0,a.bh)("sub_account_ids"))||void 0===o?void 0:o[null===(i=(0,a.bh)(_))||void 0===i?void 0:i.subAccount];let S=(null===(n=(0,a.bh)(_))||void 0===n?void 0:n.account)+"_"+(null===(d=(0,a.bh)(_))||void 0===d?void 0:d.subAccount);return(0,r.jsxs)("div",{className:"menu_pay ".concat(z?"_floating":""),children:[(0,r.jsxs)("div",{className:"_dsplFlx ",style:{margin:"18px 0"},children:[(0,r.jsxs)("div",{className:" acc_dtls",children:[(0,r.jsxs)("div",{className:"_dsplFlx",children:[(0,r.jsx)("div",{className:"code",style:{color:"#646cff",cursor:"pointer"},children:null===P||void 0===P?void 0:P.code}),(0,r.jsx)("div",{className:"name",children:null===P||void 0===P?void 0:P.name})]}),(0,r.jsx)("div",{className:"flexSpace"}),A?(0,r.jsxs)("div",{className:"_dsplFlx",style:{margin:"10px 0 0 18px"},children:[(0,r.jsx)("div",{className:"code",children:null===A||void 0===A?void 0:A.subAccount}),(0,r.jsx)("div",{className:"name",children:null===A||void 0===A?void 0:A.subAccountName})]}):null,null!==(c=(0,a.bh)(_))&&void 0!==c&&c.account?(0,r.jsxs)("div",{className:"_dsplFlx ",style:{padding:"35px 18px 10px "},children:[(0,r.jsxs)("div",{className:"_dsplFlx ",children:[(0,r.jsx)("div",{className:"flexSpace"}),(0,r.jsx)(y,{data:[{label:"Pendientes",id:"pending"},{label:"Pagados",id:"done"}],active:(0,a.bh)("list_show_type_pay")||"pending",updSelect:e=>(e=>{(0,a.Rz)("list_show_type_pay",e),j((0,a.M5)())})(e)}),(0,r.jsx)("div",{className:"flexSpace"})]}),(0,r.jsx)("div",{style:{padding:"0px 0px 0px 8px"},className:"flexSpace"}),(0,r.jsx)(p,{placeholder:"Buscar ....",width:260,obs:I,fetchData:N,change:N,callempty:N,keyFlds:"searchQry"})]}):null]}),(0,r.jsx)("div",{className:"flexSpace"}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"_dsplFlx acc_dtls",children:[(0,r.jsx)("div",{className:"name",children:"Por Pagar:"}),(0,r.jsx)("div",{className:"code",style:{margin:"0px 0 0 7px",color:"#646cff"},children:null!==(u=(0,a.bh)("rec_by_acc"))&&void 0!==u&&u[S]&&!isNaN(-1*(null===(v=(0,a.bh)("rec_by_acc"))||void 0===v?void 0:v[S]))?"$".concat((-1*(null===(h=(0,a.bh)("rec_by_acc"))||void 0===h?void 0:h[S])).toFixed(2)):"$0.00"})]}),(0,r.jsx)("div",{children:(0,r.jsx)("div",{className:"icon autoCenter",onClick:()=>{var e,l;let t=[];(null===(e=(0,a.bh)(_))||void 0===e?void 0:e.account)&&(0,a.bh)("toPay_by_doc")&&(null===(l=(0,a._2)((0,a.bh)("toPay_by_doc")))||void 0===l||l.map((e=>{let l=1*(0,a.bh)("toPay_by_doc")[e].amount;if("done"===(0,a.bh)("list_show_type_pay")&&0===l||"pending"===(0,a.bh)("list_show_type_pay")&&0!==l){var s,o,i;let l={document:null===(s=(0,a.bh)("toPay_by_doc")[e])||void 0===s?void 0:s.document,description:null===(o=(0,a.bh)("toPay_by_doc")[e])||void 0===o?void 0:o.description,amount:1*(null===(i=(0,a.bh)("toPay_by_doc")[e])||void 0===i?void 0:i.amount)};t.push(l)}}))),(0,a.eY)("export_provider_"+(null===P||void 0===P?void 0:P.code)+"_"+(null===A||void 0===A?void 0:A.subAccount)+"_"+(0,a.M5)()+".csv",t)},children:(0,r.jsx)(b,{name:"google-spreadsheet",color:"var(--hrm_palette-float-gray_5A)"})})})]})]}),(0,r.jsx)(m.Z,{scrollhandler:e=>{R(e>140)}})]})}},1232:(e,l,t)=>{t.d(l,{GP:()=>d,N$:()=>i,hF:()=>r,i7:()=>a,nr:()=>o,pj:()=>u});var s=t(2350);const a=async(e,l)=>{var t,a;let o={...null===(t=(0,s.bh)((0,s.hQ)()))||void 0===t?void 0:t.filter_search_opera};o.params={businessId:null===(a=(0,s.bh)("profileUser"))||void 0===a?void 0:a.businessId,":account":null===e||void 0===e?void 0:e.account,":subAccount":null===e||void 0===e?void 0:e.subAccount};const i=(0,s.I7)(o),d=await i;if((0,s.wL)("getall_collects"),(0,s.wL)(o),(0,s.wL)(d),d&&!d.error){(0,s.Rz)("collect_list",d),(0,s.Rz)("collect_by_doc",n(d)),(0,s.Rz)("collect_by_docM",n(d));let l=(null===e||void 0===e?void 0:e.account)+"_"+(null===e||void 0===e?void 0:e.subAccount);c(d,l)}l&&l()},o=async(e,l)=>{var t,a;let o={...null===(t=(0,s.bh)((0,s.hQ)()))||void 0===t?void 0:t.filter_search_opera};o.params={businessId:null===(a=(0,s.bh)("profileUser"))||void 0===a?void 0:a.businessId,":account":null===e||void 0===e?void 0:e.account,":subAccount":null===e||void 0===e?void 0:e.subAccount};const i=(0,s.I7)(o),d=await i;if(d&&!d.error){(0,s.Rz)("toPay_list",d),(0,s.Rz)("toPay_by_doc",n(d,!0)),(0,s.Rz)("toPay_by_docM",n(d,!0));let l=(null===e||void 0===e?void 0:e.account)+"_"+(null===e||void 0===e?void 0:e.subAccount);c(d,l)}l&&l()},i=async e=>{var l,t;let a={...null===(l=(0,s.bh)((0,s.hQ)()))||void 0===l?void 0:l.search_opera};a.params={businessId:null===(t=(0,s.bh)("profileUser"))||void 0===t?void 0:t.businessId,":search":(0,s.bh)("search_acc_record")};const o=(0,s.I7)(a),i=await o;i&&!i.error&&((0,s.Rz)("comprobante_list",i),(0,s.Rz)("comprobante_by_doc",n(i))),e&&e()};function n(e,l){var t={};let a=e&&(0,s._2)(e);return a.length>0?a.map((a=>{var o;let i=e[a],n=null===(o=i.document)||void 0===o?void 0:o.trim();if(!t[n]){t[n]={},["date","description","document","entryName"].forEach((e=>{t[n][e]=i[e]})),t[n].amount=0,t[n].operations=[]}if(i.type){let e=(0,s.Zv)(i.amount,2),a=(0,s.Zv)(t[n].amount,2),o=0;o=l?1*a+e*("debit"===i.type?-1:1):1*a+e*("credit"===i.type?-1:1),t[n].amount=(0,s.Zv)(o,2),t[n].operations.push(function(e){var l,t;let a={};a.account=null===(l=(0,s.bh)("account_ids"))||void 0===l?void 0:l[e.account],a.sub_account=null===(t=(0,s.bh)("sub_account_ids"))||void 0===t?void 0:t[e.subAccount],a.comprobanteId=e.comprobanteId,a.date=e.date,a.description=e.description;let o=(0,s.Zv)(e.amount,2);"credit"===e.type?(a.debit=0,a.credit=o):"debit"===e.type&&(a.credit=0,a.debit=o);return a}(i))}})):t=null,t}const d=(e,l,t)=>(0,s.MV)("SumDocuments",[e,l,t],(()=>{var t;let a=0;return e&&(null===(t=(0,s._2)(e))||void 0===t||t.map(((t,s)=>{var o;a+=1*(null===(o=e[t])||void 0===o?void 0:o[l])}))),a})),c=async(e,l,t)=>{let a=(0,s.bh)("rec_by_acc")||{};a[l]=((e,l,t)=>{var a;let o=0;return e&&(null===(a=(0,s._2)(e))||void 0===a||a.map(((l,t)=>{var a;let i=(0,s.Zv)(e[l].amount,2);o+=i*("credit"===(null===(a=e[l])||void 0===a?void 0:a.type)?-1:1)}))),o})(e)||"no",(0,s.Rz)("rec_by_acc",a),t&&t()},r=async(e,l,t)=>{var a,o;let i={...null===(a=(0,s.bh)((0,s.hQ)()))||void 0===a?void 0:a.filter_search_opera};i.params={businessId:null===(o=(0,s.bh)("profileUser"))||void 0===o?void 0:o.businessId,":account":null===e||void 0===e?void 0:e.account,":subAccount":null===e||void 0===e?void 0:e.subAccount};const n=(0,s.I7)(i),d=await n;d&&!d.error&&c(d,l),t&&t()},u=async(e,l,t)=>{var a,o;let i={...null===(a=(0,s.bh)((0,s.hQ)()))||void 0===a?void 0:a.search_subacc_acc};i.params={businessId:null===(o=(0,s.bh)("profileUser"))||void 0===o?void 0:o.businessId,":account":e,":search":l};const n=(0,s.I7)(i),d=await n;if((0,s.wL)("searchSubAccbyCode"),(0,s.wL)(i),(0,s.wL)(d),d&&!d.error){var c;let e=null===(c=(0,s._2)(d))||void 0===c?void 0:c[0];t&&t(d[e])}}},6021:()=>{}}]);
//# sourceMappingURL=54.bc6d81a2.chunk.js.map