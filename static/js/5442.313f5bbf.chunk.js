"use strict";(self.webpackChunkhrmfinance=self.webpackChunkhrmfinance||[]).push([[5442],{4529:(e,a,l)=>{l.r(a),l.d(a,{default:()=>_});var s=l(2791),n=(l(1636),l(2350)),c=l(4050),t=l(7689),d=(l(9760),l(810)),i=l(2647),r=l(3266),o=l(4206),u=l(15),b=l(184);const v=(0,i.PU)(),h=(0,i.DK)(),p=(0,o.TY)(),m=(0,i.xu)(),_=e=>{var a;let{data:l,accountForm:d}=e;const[,i]=(0,s.useState)(0),[o,u]=(0,s.useState)(0);(0,s.useEffect)((()=>{(0,c.ZX)(v),o||u(1)}),[d]);const v=()=>{(0,c.Ht)("balance_sheet","balance_params",_),(0,c.K_)(g),(0,c.Ht)("result_sheet","result_params_value",g)},_=()=>{(0,c.TP)(g)},g=()=>{i((0,n.M5)())};let y=new Date(null===(a=(0,n.bh)("date_range_submayor"))||void 0===a?void 0:a.initDate).getMonth();const f=()=>{var e;let a=new Date(null===(e=(0,n.bh)("date_range_submayor"))||void 0===e?void 0:e.initDate).getMonth()+1,l=(0,n.bh)("balance_params"),s=(0,n.bh)("result_params_value"),t={general:{},result:{}};(0,n.bh)("balance_general_upd_flds").map((e=>{if(!t.general[e]){var s,d;let i=null===l||void 0===l?void 0:l[e];t.general[e]={},t.general[e][i]={},t.general[e][i].sub={},t.general[e][i].saldo=(0,c.S)(a,{account:i}),null===(s=(0,n.bh)("sub_account_group"))||void 0===s||null===(d=s[i])||void 0===d||d.map((l=>{let s=l.sub_accountId;t.general[e][i].sub[s]={},t.general[e][i].sub[s].saldo=(0,c.S)(a,{account:i,subAccount:s})}))}})),(0,n.bh)("result_sheet_upd_flds").map((e=>{if(!t.result[e]){var l,d;let i=s[e];t.result[e]={},t.result[e][i]={},t.result[e][i].sub={},t.result[e][i].saldo=(0,c.S)(a,{account:i}),null===(l=(0,n.bh)("sub_account_group"))||void 0===l||null===(d=l[i])||void 0===d||d.map((l=>{let s=l.sub_accountId;t.result[e][i].sub[s]={},t.result[e][i].sub[s].saldo=(0,c.S)(a,{account:i,subAccount:s})}))}})),(0,r.$z)(t,(0,n.bh)("balance_general_param"),(0,n.bh)("balance_params"),(0,n.bh)("result_sheet_params"),(0,n.bh)("result_params_value")),i((0,n.M5)())};(0,t.s0)();return(0,b.jsxs)("div",{style:{marginTop:25},children:[(0,b.jsxs)("div",{className:"_dsplFlx ",children:[(0,b.jsx)("p",{className:"title_collect",children:"Balances y Reportes"}),(0,b.jsx)("div",{className:"flexSpace"}),(0,b.jsx)("div",{className:"_dsplFlx",children:(0,b.jsx)("div",{style:{marginTop:6},children:(0,b.jsx)(m,{onSelect:e=>{let{initDate:a,lastDate:l}=e;(0,n.Rz)("date_range_submayor",{initDate:a,lastDate:l}),g()},initMonth:y,background:"#f9f9f9",color:"var(--hrm_palette-blue-purple)"})})}),(0,b.jsx)("p",{className:"group_title addBtn purple",onClick:()=>{f()},children:"Generar Balances"}),(0,b.jsx)("p",{className:"group_title addBtn purple",onClick:async e=>{let a=await(0,c.bs)();(0,r.f9)(a)},children:"Balance de Comprobacion"})]}),(0,b.jsx)(h,{indexTab:o,data:[{key:1,label:"General"},{key:2,label:"Resultado"}],updateIndex:u}),(0,b.jsx)(x,{viewId:1,activeView:o,children:(0,b.jsx)(j,{})}),(0,b.jsx)(x,{viewId:2,activeView:o,children:(0,b.jsx)(p,{})})]})},x=e=>{let{viewId:a,activeView:l,children:s}=e;return(0,b.jsx)("div",{className:"opacityView",style:{opacity:a===l?1:0},children:a===l?s:null})},j=e=>{let{keyId:a}=e;const[,l]=(0,s.useState)(0);let c=(0,n.bh)("balance_general_param"),t=(0,n.bh)("balance_general_upd_flds");const d=()=>{(0,u.OpenToast)({text:"Los cambios en el Balance de General fueron guardados exitosamente ",timeout:3500}),l((0,n.M5)())};return(0,b.jsxs)("div",{style:{marginTop:20,maxWidth:"90%"},children:[(0,b.jsxs)("div",{className:"_dsplFlx ",children:[(0,b.jsx)("p",{className:"title_collect",children:"Balance General"}),(0,b.jsx)("div",{className:"flexSpace"}),(0,b.jsx)("p",{className:"group_title addBtn purple",onClick:async()=>{var e;if(null!==(e=(0,n.bh)("balance_params"))&&void 0!==e&&e.balanceId){var a,l,s;let e={...(0,n.bh)("balance_params")};e.balanceId=(0,n.M5)();let c={...null===(a=(0,n.bh)((0,n.hQ)()))||void 0===a?void 0:a.upd_balances};c.params={businessId:null===(l=(0,n.bh)("profileUser"))||void 0===l?void 0:l.businessId,balanceId:null===(s=(0,n.bh)("balance_params"))||void 0===s?void 0:s.balanceId};let i=(0,n.vy)(t,(0,n.bh)("balance_params"),(0,n.bh)("balance_params_bck"));c.data2update=i.data;const r=(0,n.I7)(c);await r&&((0,n.Rz)("balance_params",e),d())}else{var c,i;let e={...(0,n.bh)("balance_params")};e.balanceId=(0,n.M5)(),e.type="balance_sheet";let a={...null===(c=(0,n.bh)((0,n.hQ)()))||void 0===c?void 0:c.add_balances};a.params={businessId:null===(i=(0,n.bh)("profileUser"))||void 0===i?void 0:i.businessId},a.form=e;const l=(0,n.I7)(a);await l&&((0,n.Rz)("balance_params",e),d())}},children:"Guardar Parametros"})]}),(0,b.jsx)("div",{className:"balance",style:{marginTop:10},children:c&&(0,n._2)(c).map((e=>(0,b.jsxs)("div",{style:{marginLeft:12},children:[(0,b.jsx)("h5",{children:e}),Array.isArray(c[e])?(0,b.jsx)("div",{children:c[e].map((e=>{var a;return(0,b.jsx)(g,{keyId:e.key,accountId:null===(a=(0,n.bh)("balance_params"))||void 0===a?void 0:a[e.key]},e.key)}))}):(0,b.jsx)("div",{children:(0,n._2)(c[e]).map((a=>(0,b.jsxs)("div",{style:{marginLeft:27},children:[(0,b.jsx)("p",{children:a}),(0,b.jsx)("div",{children:c[e][a].map((e=>{var a;return(0,b.jsx)(g,{keyId:e.key,accountId:null===(a=(0,n.bh)("balance_params"))||void 0===a?void 0:a[e.key]},e.key)}))})]},a)))})]},e)))})]})},g=e=>{var a,l,c;let{keyId:t}=e;const[i,r]=(0,s.useState)(!1),[o,u]=(0,s.useState)(!1),[,h]=(0,s.useState)(0);let p=null===(a=(0,n.bh)("balance_params"))||void 0===a?void 0:a[t],m=null===(l=(0,n.bh)("account_ids"))||void 0===l?void 0:l[p],_=m&&(null===(c=(0,n.bh)("sub_account_group"))||void 0===c?void 0:c[null===m||void 0===m?void 0:m.accountId]);return(0,b.jsxs)("div",{style:{marginLeft:27},children:[(0,b.jsxs)("div",{className:"_dsplFlx ",children:[(0,b.jsx)("div",{onClick:()=>r(!i),className:"".concat(i?"editing":""),style:{marginRight:27},children:(0,b.jsx)("span",{children:t})}),i?(0,b.jsx)("div",{children:(0,b.jsx)(d.Z,{handleClick:e=>{((e,a,l)=>{let s="balance_params",c=(0,n.bh)(s)||{};l?(c[l]||(c[l]={}),c[l][e]=a):c[e]=a,(0,n.Rz)(s,c),h((0,n.M5)())})(t,e),r(!1)}})}):(0,b.jsx)("div",{children:(0,b.jsx)("div",{className:"bg_acc_code",children:null===m||void 0===m?void 0:m.code})}),(0,b.jsx)("div",{className:"flexSpace"}),(0,b.jsxs)("div",{className:"right_box _dsplFlx",children:[(0,b.jsx)("div",{className:"bg_acc_amount",style:{marginRight:15}}),(null===_||void 0===_?void 0:_.length)>0?(0,b.jsx)("div",{className:"icon",onClick:()=>u(!o),style:{marginTop:12},children:(0,b.jsx)(v,{name:o?"key_arrow_up":"key_arrow_down",color:"#828282"})}):null]})]}),o&&(null===_||void 0===_?void 0:_.length)&&(0,b.jsx)("div",{children:null===_||void 0===_?void 0:_.map((e=>e.subAccount?(0,b.jsx)("div",{className:"_dsplFlx account_item_box",style:{marginLeft:"35px"},children:(0,b.jsxs)("div",{className:"_dsplFlx",children:[(0,b.jsx)("div",{className:"code",children:e.subAccount}),(0,b.jsx)("div",{className:"name",children:e.subAccountName})]})},e.sub_accountId):null))})]})}}}]);
//# sourceMappingURL=5442.313f5bbf.chunk.js.map