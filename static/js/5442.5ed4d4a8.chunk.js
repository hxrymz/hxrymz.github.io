"use strict";(self.webpackChunkhrmfinance=self.webpackChunkhrmfinance||[]).push([[5442,9760],{9760:(e,a,l)=>{l.r(a),l.d(a,{CloseModal:()=>o,OpenModal:()=>r,default:()=>c});var s=l(2791),t=l(5408),n=l(2350),i=l(184);const d="listDialog_mdh392",c=()=>{const e=(0,n.bh)("listDialog")||{};(0,t.Z)(d);let a=Object.keys(e);return(0,i.jsx)(i.Fragment,{children:a.map(((a,l)=>{let t=e[a];if(t&&t.visible){let e={};t.height&&(e.heigth=t.height),t.width,t.zIndex&&(e.zIndex=t.zIndex-1);let l={zIndex:t.zIndex},n=null,d=t.data;return t.content&&(n=s.cloneElement(t.content,{data:d})),(0,i.jsxs)("div",{className:"ltr-1kbnjow",style:e,children:[(0,i.jsx)("div",{className:"ltr-hoe9xz",children:(0,i.jsx)("div",{className:"ltr-1wao6ny",style:l,id:a,children:n})}),t.data.overlay?(0,i.jsx)("div",{className:"DialogHRMOverlay ".concat(t.visible?"active":""),onClick:()=>{var e;e=a,document.getElementsByTagName("html")[0].classList.remove("has-level-two"),o({id:e})}}):null]},a)}}))})},r=e=>{let a=(0,n.bh)("listDialog")||{},l=(0,n.M5)();a[l]||(a[l]={}),a[l].visible=!0;let s={};e.props?(s=e.props,s.modalID=l):s.modalID=l;let t=document.getElementsByTagName("body")[0];null!==t&&void 0!==t&&t.style&&(t.style.overflowY="hidden"),a[l].isView=e.isView,a[l].observeResize=e.observeResize,a[l].observeResize&&(a[l].observeInterval=setInterval((()=>{let e=document.querySelector("[dialog-key-id='".concat(l,"']")),s=e&&e.getBoundingClientRect();s&&(s.width===a[l].width&&s.height===a[l].height||(a[l].height=s.height+10,a[l].width=s.width,(0,n.Rz)("listDialog",a),(0,n.wt)(d)))}),200)),a[l].display=!0,e.zIndex&&(a[l].zIndex=e.zIndex),e.height&&(a[l].height=e.height),e.width&&(a[l].width=e.width),e.content&&(a[l].content=e.content),a[l].data=s,(0,n.Rz)("listDialog",a),(0,n.wt)(d),setTimeout((()=>{document.getElementsByTagName("html")[0].classList.add("has-level-two"),(0,n.Rz)("modalOpen",l),(0,n.wt)(d)}),125)},o=e=>{let a=(0,n.bh)("listDialog")||{},l=e.id;if(a[l]){var s,t,i;a[l].observeResize&&a[l].observeInterval&&clearInterval(a[l].observeInterval),a[l].display=!1,null===(s=a[l])||void 0===s||null===(t=s.data)||void 0===t||null===(i=t.closeEvent)||void 0===i||i.call(t),(0,n.Rz)("listDialog",a),delete a[l],document.getElementsByTagName("body")[0].style.overflowY=null,(0,n.wt)(d),setTimeout((()=>{delete a[l],document.getElementsByTagName("html")[0].classList.remove("has-level-two"),(0,n.Rz)("modalOpen",null)}),750)}}},4529:(e,a,l)=>{l.r(a),l.d(a,{default:()=>_});var s=l(2791),t=(l(1636),l(2350)),n=l(4050),i=l(7689),d=(l(9760),l(810)),c=l(2647),r=l(3266),o=l(4206),u=l(15),h=l(184);const v=(0,c.PU)(),m=(0,c.DK)(),b=(0,o.TY)(),p=(0,c.xu)(),_=e=>{var a;let{data:l,accountForm:d}=e;const[,c]=(0,s.useState)(0),[o,u]=(0,s.useState)(0);(0,s.useEffect)((()=>{(0,n.ZX)(v),o||u(1)}),[d]);const v=()=>{(0,n.Ht)("balance_sheet","balance_params",_),(0,n.K_)(y),(0,n.Ht)("result_sheet","result_params_value",y)},_=()=>{(0,n.TP)(y)},y=()=>{c((0,t.M5)())};let j=new Date(null===(a=(0,t.bh)("date_range_submayor"))||void 0===a?void 0:a.initDate).getMonth();const I=()=>{var e;let a=new Date(null===(e=(0,t.bh)("date_range_submayor"))||void 0===e?void 0:e.initDate).getMonth()+1,l=(0,t.bh)("balance_params"),s=(0,t.bh)("result_params_value"),i={general:{},result:{}};(0,t.bh)("balance_general_upd_flds").map((e=>{if(!i.general[e]){var s,d;let c=null===l||void 0===l?void 0:l[e];i.general[e]={},i.general[e][c]={},i.general[e][c].sub={},i.general[e][c].saldo=(0,n.S)(a,{account:c}),null===(s=(0,t.bh)("sub_account_group"))||void 0===s||null===(d=s[c])||void 0===d||d.map((l=>{let s=l.sub_accountId;i.general[e][c].sub[s]={},i.general[e][c].sub[s].saldo=(0,n.S)(a,{account:c,subAccount:s})}))}})),(0,t.bh)("result_sheet_upd_flds").map((e=>{if(!i.result[e]){var l,d;let c=s[e];i.result[e]={},i.result[e][c]={},i.result[e][c].sub={},i.result[e][c].saldo=(0,n.S)(a,{account:c}),null===(l=(0,t.bh)("sub_account_group"))||void 0===l||null===(d=l[c])||void 0===d||d.map((l=>{let s=l.sub_accountId;i.result[e][c].sub[s]={},i.result[e][c].sub[s].saldo=(0,n.S)(a,{account:c,subAccount:s})}))}})),(0,r.$z)(i,(0,t.bh)("balance_general_param"),(0,t.bh)("balance_params"),(0,t.bh)("result_sheet_params"),(0,t.bh)("result_params_value")),c((0,t.M5)())};(0,i.s0)();return(0,h.jsxs)("div",{style:{marginTop:25},children:[(0,h.jsxs)("div",{className:"_dsplFlx ",children:[(0,h.jsx)("p",{className:"title_collect",children:"Balances y Reportes"}),(0,h.jsx)("div",{className:"flexSpace"}),(0,h.jsx)("div",{className:"_dsplFlx",children:(0,h.jsx)("div",{style:{marginTop:6},children:(0,h.jsx)(p,{onSelect:e=>{let{initDate:a,lastDate:l}=e;(0,t.Rz)("date_range_submayor",{initDate:a,lastDate:l}),y()},initMonth:j})})}),(0,h.jsx)("p",{className:"group_title addBtn purple",onClick:()=>{I()},children:"Generar Balances"}),(0,h.jsx)("p",{className:"group_title addBtn purple",onClick:async e=>{let a=await(0,n.bs)();(0,r.f9)(a)},children:"Balance de Comprobacion"})]}),(0,h.jsx)(m,{indexTab:o,data:[{key:1,label:"General"},{key:2,label:"Resultado"}],updateIndex:u}),(0,h.jsx)(x,{viewId:1,activeView:o,children:(0,h.jsx)(g,{})}),(0,h.jsx)(x,{viewId:2,activeView:o,children:(0,h.jsx)(b,{})})]})},x=e=>{let{viewId:a,activeView:l,children:s}=e;return(0,h.jsx)("div",{className:"opacityView",style:{opacity:a===l?1:0},children:a===l?s:null})},g=e=>{let{keyId:a}=e;const[,l]=(0,s.useState)(0);let n=(0,t.bh)("balance_general_param"),i=(0,t.bh)("balance_general_upd_flds");const d=()=>{(0,u.OpenToast)({text:"Los cambios en el Balance de General fueron guardados exitosamente ",timeout:3500}),l((0,t.M5)())};return(0,h.jsxs)("div",{style:{marginTop:20,maxWidth:"90%"},children:[(0,h.jsxs)("div",{className:"_dsplFlx ",children:[(0,h.jsx)("p",{className:"title_collect",children:"Balance General"}),(0,h.jsx)("div",{className:"flexSpace"}),(0,h.jsx)("p",{className:"group_title addBtn purple",onClick:async()=>{var e;if(null!==(e=(0,t.bh)("balance_params"))&&void 0!==e&&e.balanceId){var a,l,s;let e={...(0,t.bh)("balance_params")};e.balanceId=(0,t.M5)();let n={...null===(a=(0,t.bh)((0,t.hQ)()))||void 0===a?void 0:a.upd_balances};n.params={businessId:null===(l=(0,t.bh)("profileUser"))||void 0===l?void 0:l.businessId,balanceId:null===(s=(0,t.bh)("balance_params"))||void 0===s?void 0:s.balanceId};let c=(0,t.vy)(i,(0,t.bh)("balance_params"),(0,t.bh)("balance_params_bck"));n.data2update=c.data;const r=(0,t.I7)(n);await r&&((0,t.Rz)("balance_params",e),d())}else{var n,c;let e={...(0,t.bh)("balance_params")};e.balanceId=(0,t.M5)(),e.type="balance_sheet";let a={...null===(n=(0,t.bh)((0,t.hQ)()))||void 0===n?void 0:n.add_balances};a.params={businessId:null===(c=(0,t.bh)("profileUser"))||void 0===c?void 0:c.businessId},a.form=e;const l=(0,t.I7)(a);await l&&((0,t.Rz)("balance_params",e),d())}},children:"Guardar Parametros"})]}),(0,h.jsx)("div",{className:"balance",style:{marginTop:10},children:n&&(0,t._2)(n).map((e=>(0,h.jsxs)("div",{style:{marginLeft:12},children:[(0,h.jsx)("h5",{children:e}),Array.isArray(n[e])?(0,h.jsx)("div",{children:n[e].map((e=>{var a;return(0,h.jsx)(y,{keyId:e.key,accountId:null===(a=(0,t.bh)("balance_params"))||void 0===a?void 0:a[e.key]},e.key)}))}):(0,h.jsx)("div",{children:(0,t._2)(n[e]).map((a=>(0,h.jsxs)("div",{style:{marginLeft:27},children:[(0,h.jsx)("p",{children:a}),(0,h.jsx)("div",{children:n[e][a].map((e=>{var a;return(0,h.jsx)(y,{keyId:e.key,accountId:null===(a=(0,t.bh)("balance_params"))||void 0===a?void 0:a[e.key]},e.key)}))})]},a)))})]},e)))})]})},y=e=>{var a,l,n;let{keyId:i}=e;const[c,r]=(0,s.useState)(!1),[o,u]=(0,s.useState)(!1),[,m]=(0,s.useState)(0);let b=null===(a=(0,t.bh)("balance_params"))||void 0===a?void 0:a[i],p=null===(l=(0,t.bh)("account_ids"))||void 0===l?void 0:l[b],_=p&&(null===(n=(0,t.bh)("sub_account_group"))||void 0===n?void 0:n[null===p||void 0===p?void 0:p.accountId]);return(0,h.jsxs)("div",{style:{marginLeft:27},children:[(0,h.jsxs)("div",{className:"_dsplFlx ",children:[(0,h.jsx)("div",{onClick:()=>r(!c),className:"".concat(c?"editing":""),style:{marginRight:27},children:(0,h.jsx)("span",{children:i})}),c?(0,h.jsx)("div",{children:(0,h.jsx)(d.Z,{handleClick:e=>{((e,a,l)=>{let s="balance_params",n=(0,t.bh)(s)||{};l?(n[l]||(n[l]={}),n[l][e]=a):n[e]=a,(0,t.Rz)(s,n),m((0,t.M5)())})(i,e),r(!1)}})}):(0,h.jsx)("div",{children:(0,h.jsx)("div",{className:"bg_acc_code",children:null===p||void 0===p?void 0:p.code})}),(0,h.jsx)("div",{className:"flexSpace"}),(0,h.jsxs)("div",{className:"right_box _dsplFlx",children:[(0,h.jsx)("div",{className:"bg_acc_amount",style:{marginRight:15}}),(null===_||void 0===_?void 0:_.length)>0?(0,h.jsx)("div",{className:"icon",onClick:()=>u(!o),style:{marginTop:12},children:(0,h.jsx)(v,{name:o?"key_arrow_up":"key_arrow_down",color:"#828282"})}):null]})]}),o&&(null===_||void 0===_?void 0:_.length)&&(0,h.jsx)("div",{children:null===_||void 0===_?void 0:_.map((e=>e.subAccount?(0,h.jsx)("div",{className:"_dsplFlx account_item_box",style:{marginLeft:"35px"},children:(0,h.jsxs)("div",{className:"_dsplFlx",children:[(0,h.jsx)("div",{className:"code",children:e.subAccount}),(0,h.jsx)("div",{className:"name",children:e.subAccountName})]})},e.sub_accountId):null))})]})}}}]);
//# sourceMappingURL=5442.5ed4d4a8.chunk.js.map