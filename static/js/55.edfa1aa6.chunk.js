(window.webpackJsonp=window.webpackJsonp||[]).push([[55],{184:function(e,t,a){"use strict";a.r(t);var n=a(31),o=a(2),c=a.n(o),r=a(15),l=a(4),i=a(156),s=a(10),b=a(22),d=(a(1),a(3),a(0));var m=function(e,t){return function(e){return"Entrega"===e||"REM_CARD_CUP"===e||"REM_CARD_MLC"===e||"REM_CASH_USD"===e||"REM_CASH_CUP"===e||"COMBO"===e}(e)?t>0?-1:1:"INVESTMENT_FOOD"===e?-1:"BTC"===e||"TRANSFER"===e||"ADJUSTMENTS"===e||"DEBT"===e||"COMISION_AGENT"===e?1:0};a(37);var O=a(5);a.d(t,"groupbyTab",function(){return S});var u=Object(l.a)(function(){return a.e(56).then(a.bind(null,181))}),p=Object(d.f)(),j=Object(b.BTNH_Cmpt)(),f=Object(b.Icon_Cmpt)(),v=Object(b.SearchInput_Cmpt)(),_=Object(b.ModalDate_Cmpt)(),g=Object(b.InputAutocomplete_Cmpt)(),E=Object(b.BtnIconTab_Cmpt)(),y=Object(b.OpacityContainer_Cmpt)(),F=Object(l.a)(function(){return a.e(2).then(a.bind(null,80))}),x=Object(l.a)(function(){return a.e(57).then(a.bind(null,182))});t.default=Object(i.a)(function(e){Object(r.c)(O.b);var t=Object(d.F)("mov_list_search")||{},a=Object(d.L)(),l=Object(d.O)("pnOrStMk"),i=Object(o.useState)(!1),b=Object(n.a)(i,2),M=b[0],w=b[1],I=Object(o.useState)(null),D=Object(n.a)(I,2),z=D[0],R=D[1],A=Object(o.useState)(!1),k=Object(n.a)(A,2),B=k[0],L=k[1],V=Object(o.useState)(1),P=Object(n.a)(V,2),q=P[0],U=P[1],W=Object(o.useState)(6),J=Object(n.a)(W,2),G=J[0],H=J[1],$=Object(o.useState)(""),Y=Object(n.a)($,2),K=Y[0],Q=Y[1],X=Object(o.useState)(""),Z=Object(n.a)(X,2),ee=Z[0],te=Z[1],ae=Object(o.useState)(0),ne=Object(n.a)(ae,2),oe=(ne[0],ne[1]),ce=Object(d.O)("outerWidth"),re=Object(d.O)("agentId2")||a;Object(o.useEffect)(function(){if(z!==ce&&R(ce),!M){if(w(!0),function(e){if(window.jsPDF)return 1;d.db("https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.4.1/jspdf.debug.js",function(){return 1})}(),Object(d.zb)(8),Object(d.yb)("actionType","expenses"),Object(d.c)()&&Object(s.LoadUA)(),Object(d.k)()){Object(s.getCategories)();var e=["createdDate","description","amount","categoryId","title"],t={query:"getScanExpenses",fields:e,params:{userId:"108686162968008261445",dateS:Object(d.O)("fromDate")+"",dateE:Object(d.O)("toDate")+""},arraySerialization:1},a={query:"getScanIncomes",fields:e,params:{userId:"108686162968008261445",dateS:Object(d.O)("fromDate")+"",dateE:Object(d.O)("toDate")+""},arraySerialization:1};Object(d.qb)("fromDate",Object(d.O)("fromDate")+""),Object(d.qb)("toDate",Object(d.O)("toDate")+""),Object(s.getExpenses)(t,"expenses"),Object(s.getExpenses)(a,"incomes")}Object(s.loadMovs)(re),setTimeout(function(){return window.scrollTo(0,0)},350),setTimeout(function(){return L(!0)},250),window.localStorage.setItem("lng","es")}});var le=Object(d.C)(),ie="Android"===le.os||"iPhone"===le.os||Object(d.O)().outerWidth<550,se=2===q?Object(d.O)("incomes_total"):Object(d.O)("expenses_total"),be=2===q?Object(d.O)("incomes"):Object(d.O)("expenses"),de={};se=ee&&ee.length>0?(de=T(be,ee))&&de.total:(de=T(be,""))&&de.total;var me=S(de&&de.list,be),Oe=function(e){e===q||(U(e),Object(d.yb)("actionType",2===e?"incomes":"expenses"),H(6),Object(d.yb)("loadingMov",!0),oe(Object(d.y)()),setTimeout(function(){Object(d.yb)("loadingMov",!1),oe(Object(d.y)())},750))},ue=function(){!function(e){var t=0,a=localStorage.getItem("pgSz")||"a4",n=new window.jsPDF({orientation:"portrait",format:a});e&&d.g(e).map(function(a,o){o>0&&n.addPage(),n.setFontSize(14);var c=d.O(),r="",l=0;e[a]&&d.g(e[a]).map(function(o,i){var s=e[a][o],b=s&&s.name;r=s&&s.store&&s.store.name;var d=s&&-1*s.qty,m=s&&s.cost_price?s.cost_price-50:0;l+=m*d;var O=s&&s.imageUrl,u=O&&c.thumbnailJsonBlob&&c.thumbnailJsonBlob[O],p=u&&u.requested,j=p&&"data:".concat(u.type,";base64,").concat(u.b64);t=26*(i+1)+17+1,n.setFontType("normal"),n.setFontSize(15),n.text(53,t,"".concat(b)),n.setFontType("bold"),n.setFontSize(17),n.text(13,t,"".concat(d)),n.setFontType("normal"),n.setFontSize(15),n.text(183,t,"".concat(m.toFixed(2))),p&&n.addImage(j,"PNG",20,t-12,24,24)});var i=1;l>9999?i=5:l>999?i=4:l>99?i=3:l>9&&(i=2);var s=190-1.4*(i+4);n.setFontSize(14),n.setFontType("normal"),n.text(s-15,29,"Total : "),n.setFontType("bold"),n.text(s,29,"$".concat(l?l.toFixed(2):0)),n.setFont("Roboto"),n.setFontType("normal"),n.setTextColor(60,60,60),n.setFontSize(21),n.text(30,13,"Ordenes Pendientes para ".concat(" ",r))}),n.save("ordenes".concat("_",(new Date).getTime(),".pdf"))}(l)},pe=function(){!function(e){var t=0,a=localStorage.getItem("pgSz")||"a4",n=d.ob(e,"date",!0),o=d.ob(e,"date",!1),c=new window.jsPDF({orientation:"portrait",format:a}),r={},l=0,i=d.F("mov_list_search")||{},s=i.search,b=i.date;n.map(function(t,a){if(e[t].IsDelivery){var n=e[t].type;if("COMBO"===n||"INVESTMENT_FOOD"===n){var o=e[t]&&e[t].prdDtls,c=e[t].amount*e[t].tasa;o&&o.total>0&&(c=o.total),"COMBO"===n?(s||b)&&(l+=-1*c):l+=-1*c}else{var i=e[t].amount*e[t].tasa,d=m(n,i);l+=d*i}r[t]=l}});var O={};o&&o.map(function(t,a){var n=Math.floor(a/36);O[n]||(O[n]=[]),e[t].IsDelivery&&O[n].push(t)}),d.O(),O&&d.g(O).map(function(a,n){n>0&&c.addPage(),c.setFont("Roboto"),c.setFontSize(14),c.setFont("Roboto"),c.setFontType("normal"),c.setFontSize(11),c.text(38,21,"Operacion"),c.setFont("Roboto"),c.setFontType("normal"),c.setFontSize(11),c.text(13,21,"Fecha"),c.setFont("Roboto"),c.setFontType("normal"),c.setFontSize(11),c.text(83,21,"Orden No"),c.setFont("Roboto"),c.setFontType("normal"),c.setFontSize(11),c.text(183,21,"Saldo"),c.setFontType("normal"),c.text(153,21,"Importe"),c.setTextColor(0,0,0),c.setDrawColor(90,90,90),c.setLineWidth(.025),c.line(10,23,200,23),O[a]&&O[a].map(function(a,n){var o=e[a],l=o&&o.orderId||o&&o.id,i=o&&d.l(o.date),s=o.amount*o.tasa;if("INVESTMENT_FOOD"===o.type){var b=o&&o.prdDtls;b&&b.total>0&&(s=-1*b.total)}else"COMBO"===o.type&&(s=0);var m=r&&r[o.id]?r[o.id].toFixed(2):0,O=o.type;"INVESTMENT_FOOD"===o.type&&(O="INVERSION"),t=7*(n+1)+21+1,c.setFont("Roboto"),c.setFontType("normal"),c.setFontSize(11),c.text(38,t,"".concat(O)),c.setFont("Roboto"),c.setFontType("normal"),c.setFontSize(11),c.text(13,t,"".concat(i)),c.setFont("Roboto"),c.setFontType("normal"),c.setFontSize(11),c.text(83,t,"".concat(l)),c.setFont("Roboto"),c.setFontType("normal"),c.setFontSize(11),c.text(183,t,"".concat(m)),c.setFontType("normal"),c.text(153,t,"".concat(s.toFixed(2)))});var o=d.O("agentsList")[d.O("agentId2")];c.setFont("Roboto"),c.setFontType("normal"),c.setTextColor(60,60,60),c.setFontSize(18),c.text(30,13," Movimientos ".concat(" - ",o&&o.name," - ").concat(o&&o.email))}),c.save("resumen_movimientos".concat("_",(new Date).getTime(),".pdf"))}(Object(d.O)().movements)},je=function(e){var t={},a=Object(d.F)("mov_list_search")||{},n=a&&a[e];t.zIndex=190,t.observeResize=!0,t.props={title:"",item:e},t.content=c.a.createElement(_,{valueUpdate:function(t){return function(e,t){var a=new Date(t),n=Object(d.F)("mov_list_search")||{};n[e]=a.getTime(),Object(d.ub)("mov_list_search",n),oe(Object(d.y)());var o=Object(d.O)().movements;Object(s.calcMov)(o)}(e,t)},initValue:n}),Object(s.OpenModal)(t)},fe=Object(d.G)(),ve={};ve=Object(d.c)()&&K&&K.length>0?h(Object(d.O)().agentsList,K):h(Object(d.O)().agentsList,"");var _e=Object(d.g)(me).sort(function(e,t){return t-e}),ge=_e.slice(0,G),Ee=_e.slice(0,G),ye=Object(d.O)().collapsedItems;console.log("range",G);return c.a.createElement(c.a.Fragment,null,c.a.createElement("style",null,"\n        .palette{\n          --base-color: rgb(21, 100, 191,1);\n          --base-color-gradient: 21, 100, 191;\n        }\n\n        "),c.a.createElement("div",{className:" palette formContainer shopping_cart  _movements ".concat(ie?"is_mobile":""),style:{opacity:B?1:0}},c.a.createElement("div",{className:"formContainer ",style:{opacity:1}},B?c.a.createElement("div",{className:"centerListCardProd "},Object(d.c)()?c.a.createElement("div",{className:"paddField address"},c.a.createElement(g,{icon:"more_vert",form:"kjsahfashflkashjaf",field:"agentId",keyCode:49,background:"#f9f9f9",color:"var(--base-color)",placeholder:Object(d.pb)(13),OnSelect:function(e){return t=e.id,Object(d.yb)("agentId2",t),void Object(s.loadMovs)(t);var t},data:ve,OnChange:function(e){return Q(e)}})):null,c.a.createElement("div",{className:"  headerTtl"},c.a.createElement("div",{className:"pym81b sendBx "},c.a.createElement("div",{className:"_dsplFlx "},c.a.createElement("div",{className:"subtotal_cart "},Object(d.pb)(50)),c.a.createElement("div",{className:"flexSpace"}),c.a.createElement("div",{className:"total_cart date_filter"},Object(d.cb)(Object(d.O)("month_filter"))&&d.eb[Object(d.O)("month_filter")]+", ","  ",Object(d.O)("year_filter"))),c.a.createElement("div",{className:"total_cart ".concat(se>0?"pos":"neg")},"$ ".concat(se?se.toFixed(2):0),c.a.createElement("div",{className:"sendBtn"})))),c.a.createElement("div",{className:"years_card "},c.a.createElement("div",{className:" _dsplFlx spaceAround  "},c.a.createElement(F,{data:N(),value:Object(d.O)("category_filter"),updValue:function(e){e!==Object(d.B)("category_filter")&&(Object(d.yb)("category_filter",e),Object(d.qb)("category_filter",e),Object(d.rb)(),Object(d.yb)("loadingMov",!0),H(4))},placeholder:"Categories",showAll:!0}),c.a.createElement(F,{data:C(),value:Object(d.O)("month_filter"),updValue:function(e){e!==Object(d.B)("month_filter")&&(Object(d.yb)("month_filter",e),Object(d.qb)("month_filter",e),Object(d.rb)(),Object(d.yb)("loadingMov",!0),H(4))},placeholder:"Month",showAll:!0}),c.a.createElement(F,{data:[{id:2022,lbl:2022},{id:2021,lbl:2021},{id:2020,lbl:2020}],value:Object(d.O)("year_filter"),updValue:function(e){e!==Object(d.B)("year_filter")&&(Object(d.yb)("year_filter",e),Object(d.qb)("year_filter",e),Object(d.rb)(),Object(d.yb)("loadingMov",!0),H(4))},placeholder:"Years"}))),l&&Object(d.g)(l).length>0?c.a.createElement("div",{className:"pym81b sendBx mov_type _dsplFlx activeBlue",onClick:function(){return ue()}},c.a.createElement("div",{className:"icon_mov"},c.a.createElement(f,{name:"printer"})),c.a.createElement("div",{className:"mov_type_title "},Object(d.pb)(51))):null,c.a.createElement("div",{className:" _filter_mv"},c.a.createElement("div",{className:" _search_MrgV  "},c.a.createElement(v,{updChanges:function(e){te(e),H(16)},placeholderCode:20})),Object(d.c)()?c.a.createElement("div",{className:"_dsplFlx spaceAround _flxWrp icon_clear"},c.a.createElement("div",{className:"fieldPadding _MrgV"},c.a.createElement("span",{onClick:function(){return je("date")}},c.a.createElement(j,{theme:"light_blue",title:t&&t.date?Object(d.gb)(t.date):Object(d.gb)(Object(d.w)())}))),c.a.createElement("div",{onClick:function(){return function(){Object(d.ub)("mov_list_search",{});var e=Object(d.O)().movements;Object(d.yb)("loadingMov",!0),Object(s.updObserveChanges)(),Object(s.calcMov)(e)}()}},c.a.createElement(f,{name:"outline_delete"})),c.a.createElement("div",{onClick:function(){return pe()}},c.a.createElement(f,{name:"printer"}))):null),c.a.createElement("div",{className:"_dsplFlx  spaceAround _flxWrp"},c.a.createElement(E,{lbl:"Expenses",icon:"arrow_up_large",classN:"activeRed",index:q,indexTag:1,changeView:Oe,isMobile:ie}),c.a.createElement(E,{lbl:"Incomes",icon:"arrow_down_large",classN:"complete",index:q,indexTag:2,changeView:Oe,isMobile:ie})),c.a.createElement("div",{className:"_dsplFlx spaceAround _flxWrp icon_clear"},c.a.createElement("div",{onClick:function(){return Object(d.yb)("collapsedItems",!ye),Object(d.yb)("collapseId",Object(d.z)()),void oe(Object(d.y)())}},c.a.createElement(f,{name:ye?"arrow_expand_vertical":"arrow_collapse_vertical"}))),c.a.createElement("style",null,"\n                        \n                        \n\n                        .progress-line-palette{\n                          --progress-line-background-color: ".concat(1===q?"#F7E8E8":"#E5F1F0"," ;\n                          --progress-line-before-background-color: ").concat(1===q?"#b22222 ":"#00897b",";\n                        }\n                        ")),c.a.createElement(x,null),Object(d.O)("loadingMov")?null:c.a.createElement("div",{className:" sendBx scroll3Wrp "},c.a.createElement(y,{lbl:52,index:q,indexTag:1,isMobile:ie},c.a.createElement("div",{className:"_dsplFlx space2Around _flxWrp op4oU"},ge&&ge.map(function(e,t){return c.a.createElement("div",{key:"".concat(fe[t],"_").concat(t,"_pend_Mov"),"data-key":"".concat(fe[t],"_").concat(t,"_pend_Mov")},c.a.createElement(u,{data:me[e],ind:t,dateClss:"",fV:e,range:G,updRange:function(e){return H(e)},ItemComponent:c.a.createElement(p,null),tag:"_pend_Mov"}))}))),c.a.createElement(y,{lbl:53,index:q,indexTag:2,isMobile:ie},c.a.createElement("div",{className:"_dsplFlx space2Around _flxWrp op4oU"},Ee&&Ee.map(function(e,t){return c.a.createElement("div",{key:"".concat(fe[t],"_").concat(t,"_cmpl_Mov")},c.a.createElement(u,{data:me[e],fV:e,ind:t,dateClss:"green",range:G,updRange:function(e){return H(e)},ItemComponent:c.a.createElement(p,null),tag:"_cmpl_Mov"}))}))))):null),c.a.createElement("div",{className:"footSpace"})))});function h(e,t){var a={};return Object(d.g)(e).map(function(n){if(e[n].isqvmAgent||e[n].isAdmin)if(t){var o=t&&t.toLowerCase(),c=e[n].name&&e[n].name.toLowerCase();o&&c&&c.indexOf(o)>=0&&(a[n]=e[n])}else a[n]=e[n]}),a}function S(e,t){var a={};return e&&e.map(function(e){if(e){var n=1*t[e].createdDate,o=Math.ceil(new Date(n).getTime()/864e5);a[o]||(a[o]=[]),a[o].push(e)}}),a}function T(e,t,a){var n={},o=0;return Object(d.g)(e).map(function(a){var c=t&&t.toLowerCase();if(c&&e[a]){var r=e[a].title&&e[a].title.toLowerCase(),l=r&&r.indexOf(c)>=0,i=e[a].amount&&e[a].amount.toString().toLowerCase(),s=i&&i.indexOf(c)>=0,b=e[a].description&&e[a].description.toLowerCase(),m=b&&b.indexOf(c)>=0,O=Object(d.O)("categories")&&Object(d.O)("categories")[e[a].categoryId]&&Object(d.O)("categories")[e[a].categoryId].name&&Object(d.O)("categories")[e[a].categoryId].name.toLowerCase(),u=O&&O.indexOf(c)>=0;(l||s||m||u)&&(n[a]=e[a],o+=e[a].amount)}else n[a]=e[a],o+=e[a].amount}),{list:Object(d.ob)(n,"date",1),total:o}}var C=function(){return d.eb.map(function(e,t){return{id:t,lbl:e}})},N=function(){var e=[],t=Object(d.O)("categories")||{};return Object(d.g)(t).map(function(a){e.push({id:t[a].categoryId,lbl:t[a].name})}),e}}}]);
//# sourceMappingURL=55.edfa1aa6.chunk.js.map