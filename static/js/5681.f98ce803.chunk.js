"use strict";(self.webpackChunkhrmfinance=self.webpackChunkhrmfinance||[]).push([[5681],{1496:function(e,n,i){i.r(n),i.d(n,{default:function(){return y}});var o=i(4165),c=i(5861),t=i(9439),r=i(2791),s=i(2350),a=i(2647),l=i(9760),d=(i(3971),i(5986)),u=i(6496),v=i(4050),p=(i(261),i(6824)),h=i(184),m=(0,a.PU)(),f=(0,a.Vg)(),_=(0,a.YZ)(),b=function(e){e.data,e.item;var n,i,o,c,a,l=(0,r.useState)(0),d=(0,t.Z)(l,2)[1],v=(0,r.useState)(""),b=(0,t.Z)(v,2),j=b[0],g=b[1],N=(0,r.useState)(!1),y=(0,t.Z)(N,2),Z=y[0],I=y[1],w=(0,r.useState)(!1),C=(0,t.Z)(w,2),k=C[0],O=C[1],S=(0,r.useState)(!1),F=(0,t.Z)(S,2),D=F[0],A=F[1],M=(0,r.useState)(!1),P=(0,t.Z)(M,2),R=P[0],z=P[1];(0,r.useEffect)((function(){Z||(I(!0),(0,u.S$)(Q))}),[Z]);var Q=function(){d((0,s.M5)()),O(!1)},U=function(e){g(e),k&&O(!1)},B=function(e){z(e===R?null:e)},H={1:{color:"var(--hrm_palette-success-fg)",icon:"success"},2:{color:"var(--hrm_palette-selected-nav-text)",icon:"problem"},3:{color:"rgb(254, 120, 23)",icon:"alert"}};return(0,h.jsxs)("div",{style:{maxHeight:"96vh",minHeight:"94vh",width:"94vw",overflow:"auto",background:"var(--hrm_palette-general-background-b)",borderRadius:13,padding:"10px 19px 30px"},children:[(0,h.jsxs)("div",{className:"_dsplFlx ",children:[(0,h.jsx)("p",{className:"title_collect",children:"Compare Invoices"}),(0,h.jsx)("div",{className:"flexSpace"}),D?(0,h.jsxs)("div",{className:"actionBx _dsplFlx",children:[(0,h.jsx)("div",{className:"filterCode",onClick:function(){return function(e){var n,i=[];(0,s.bh)("invoiceCmpDocs")&&(null===(n=(0,s._2)((0,s.bh)("invoiceCmpDocs")))||void 0===n||n.map((function(e,n){var o,c=null===(o=(0,s.bh)("invoiceCmpDocs"))||void 0===o?void 0:o[e];(j||D)&&x(c,j,D,R)&&i.push(c)}))),(0,p.cg)(i)}()},children:(0,h.jsx)(m,{name:"printer",color:"#8b949e"})}),(0,h.jsx)("div",{className:"filterCode",onClick:function(){return function(e){var n,i=[];(0,s.bh)("invoiceCmpDocs")&&(null===(n=(0,s._2)((0,s.bh)("invoiceCmpDocs")))||void 0===n||n.map((function(e,n){var o,c=null===(o=(0,s.bh)("invoiceCmpDocs"))||void 0===o?void 0:o[e];if((j||D)&&x(c,j,D,R)){var t,r,a,l,d,u={fecha:c.date?(0,s.sJ)(c.date):"",documento:c.document,importe:null===(t=1*(null===c||void 0===c?void 0:c.amount))||void 0===t?void 0:t.toFixed(2),vendido:null===(r=1*(null===c||void 0===c?void 0:c.cc_d))||void 0===r?void 0:r.toFixed(2),anticipo:null===(a=1*(null===c||void 0===c?void 0:c.hasAnticipo))||void 0===a?void 0:a.toFixed(2),cobrado:null===(l=1*(null===c||void 0===c?void 0:c.cc_c))||void 0===l?void 0:l.toFixed(2),saldo:null===(d=1*(null===c||void 0===c?void 0:c.saldo))||void 0===d?void 0:d.toFixed(2)};i.push(u)}}))),(0,s.eY)("export_invoices_"+(0,s.M5)()+".csv",i)}()},children:(0,h.jsx)(m,{name:"google-spreadsheet",color:"#8b949e"})})]}):null]}),(0,h.jsxs)("div",{className:"_dsplFlx ",style:{marginTop:14},children:[(0,h.jsx)("div",{style:{marginTop:11},children:(0,h.jsx)(f,{placeholder:"Buscar ....",width:560,obs:d,fetchData:U,loading:k,change:function(e){!k&&O(!0),g(e)},callempty:U,keyFlds:"search_cmpInvoice"})}),(0,h.jsx)("div",{className:"flexSpace"}),D?(0,h.jsxs)("div",{className:"_dsplFlx ",style:{marginTop:20,marginRight:20},children:[(0,h.jsx)("div",{className:"filterCode",onClick:function(){return B(2)},children:(0,h.jsx)(m,{name:null===(n=H[2])||void 0===n?void 0:n.icon,color:2===R?null===(i=H[2])||void 0===i?void 0:i.color:"#8b949e"})}),(0,h.jsx)("div",{className:"filterCode",onClick:function(){return B(3)},children:(0,h.jsx)(m,{name:null===(o=H[3])||void 0===o?void 0:o.icon,color:3===R?null===(c=H[3])||void 0===c?void 0:c.color:"#8b949e"})})]}):null,(0,h.jsxs)("div",{className:"_dsplFlx ",style:{marginTop:20},children:[(0,h.jsx)(_,{initvalue:D,keyCode:57,updChange:A}),(0,h.jsx)("span",{className:"checklabel",children:"Need Attention"})]})]}),(0,h.jsxs)("div",{style:{marginTop:14},children:[(0,h.jsxs)("div",{className:"_dsplFlx hdr_bar purple",children:[(0,h.jsx)("div",{className:"tr_bar_5",children:" "}),(0,h.jsx)("div",{className:"tr_bar_15",children:"Fecha"}),(0,h.jsx)("div",{className:"tr_bar_15",children:"Documento"}),(0,h.jsx)("div",{className:"tr_bar_12",children:"Importe"}),(0,h.jsx)("div",{className:"tr_bar_12",children:"Vendido"}),(0,h.jsx)("div",{className:"tr_bar_12",children:"Anticipo"}),(0,h.jsx)("div",{className:"tr_bar_12",children:"Cobrado"}),(0,h.jsx)("div",{className:"tr_bar_12",children:"Saldo"}),(0,h.jsx)("div",{className:"tr_bar_5",children:" "})]}),(0,h.jsx)("div",{className:"scollVh subMHeight",children:(0,s.bh)("invoiceCmpDocs")&&(null===(a=(0,s._2)((0,s.bh)("invoiceCmpDocs")))||void 0===a?void 0:a.map((function(e,n){var i,o,c,t,r,a,l,d,u=null===(i=(0,s.bh)("invoiceCmpDocs"))||void 0===i?void 0:i[e];if((j||D)&&!x(u,j,D,R))return null;var v=(0,s.Zv)(null===u||void 0===u?void 0:u.saldo,2),p=v<0?2:v>0?3:(null===u||void 0===u?void 0:u.cc_c)>0?1:2;return(0,h.jsxs)("div",{className:"_dsplFlx hdr_bar manual_vrfy",children:[(0,h.jsx)("div",{className:"tr_bar_5",children:(0,h.jsx)("div",{children:(0,h.jsx)(m,{name:null===(o=H[p])||void 0===o?void 0:o.icon,color:null===(c=H[p])||void 0===c?void 0:c.color})})}),(0,h.jsx)("div",{className:"tr_bar_15",children:(null===u||void 0===u?void 0:u.date)&&(0,s.sJ)(u.date)}),(0,h.jsx)("div",{className:"tr_bar_15 comprobanteId",children:e}),(0,h.jsx)("div",{className:"tr_bar_12 ",children:null===(t=1*(null===u||void 0===u?void 0:u.amount))||void 0===t?void 0:t.toFixed(2)}),(0,h.jsx)("div",{className:"tr_bar_12",children:null===(r=1*(null===u||void 0===u?void 0:u.cc_d))||void 0===r?void 0:r.toFixed(2)}),(0,h.jsx)("div",{className:"tr_bar_12",children:null===(a=1*(null===u||void 0===u?void 0:u.hasAnticipo))||void 0===a?void 0:a.toFixed(2)}),(0,h.jsx)("div",{className:"tr_bar_12",children:null===(l=1*(null===u||void 0===u?void 0:u.cc_c))||void 0===l?void 0:l.toFixed(2)}),(0,h.jsx)("div",{className:"tr_bar_12",children:null===(d=1*(null===u||void 0===u?void 0:u.saldo))||void 0===d?void 0:d.toFixed(2)}),(0,h.jsx)("div",{className:"tr_bar_5",children:" "})]},n)})))})]})]})},x=function(e,n,i,o){var c=!1;if(n){var t=n.toLowerCase();["amount","document","cc_c","cc_d","saldo"].map((function(n){if(i){var r,a,l,d,u,v,p=(0,s.Zv)(null===e||void 0===e?void 0:e.saldo,2),h=p<0?2:p>0?3:(null===e||void 0===e?void 0:e.cc_c)>0?1:2;if(o)h===o&&e[n]&&(null===(d=e[n])||void 0===d||null===(u=d.toString())||void 0===u||null===(v=u.toLowerCase())||void 0===v?void 0:v.indexOf(t))>=0&&(c=!0);else 1!==h&&e[n]&&(null===(r=e[n])||void 0===r||null===(a=r.toString())||void 0===a||null===(l=a.toLowerCase())||void 0===l?void 0:l.indexOf(t))>=0&&(c=!0)}else{var m,f,_;e[n]&&(null===(m=e[n])||void 0===m||null===(f=m.toString())||void 0===f||null===(_=f.toLowerCase())||void 0===_?void 0:_.indexOf(t))>=0&&(c=!0)}}))}else{var r=(0,s.Zv)(null===e||void 0===e?void 0:e.saldo,2),a=r<0?2:r>0?3:(null===e||void 0===e?void 0:e.cc_c)>0?1:2;o?a===o&&(c=!0):1!==a&&(c=!0)}return c},j=(0,a.Vg)(),g=(0,d.bb)(),N=(0,d.T5)(),y=function(e){e.data,e.elmId;var n,i,a=e.updObs,d=(0,r.useState)(!1),p=(0,t.Z)(d,2),m=p[0],f=p[1],_=(0,r.useState)(0),x=(0,t.Z)(_,2),y=(x[0],x[1]),Z=(0,r.useState)(!1),I=(0,t.Z)(Z,2),w=I[0],C=I[1];(0,r.useEffect)((function(){m||(f(!0),y((0,s.M5)()),(0,u.p9)(S),(0,v.Ht)("global_accounts","global_account_params",a))}));var k=function(){},O=function(e){(0,u.p9)(S)},S=function(){var e=(0,c.Z)((0,o.Z)().mark((function e(n,i){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:y((0,s.M5)()),C(!1);case 2:case"end":return e.stop()}}),e)})));return function(n,i){return e.apply(this,arguments)}}();return(0,h.jsxs)("div",{className:"",children:[(0,h.jsxs)("div",{className:"accounts_header",children:[(0,h.jsx)("h2",{children:"Invoices"}),(0,h.jsxs)("div",{className:"_dsplFlx ",children:[(0,h.jsx)("p",{className:"group_title addBtn purple",onClick:function(){var e={zIndex:450,height:"80vh",props:{minHeight:"1vh",overlay:!0}};e.content=(0,h.jsx)(N,{}),(0,l.OpenModal)(e)},children:"Add Invoice"}),(0,h.jsx)("p",{className:"group_title addBtn purple",onClick:function(){var e={zIndex:450,height:"80vh",props:{minHeight:"1vh",overlay:!0}};e.content=(0,h.jsx)(b,{}),(0,l.OpenModal)(e)},children:"Compare Invoice"})]}),(0,h.jsxs)("div",{className:"_dsplFlx ",style:{marginTop:14},children:[(0,h.jsx)(j,{placeholder:"Buscar ....",width:360,obs:y,fetchData:function(e){C(!0),(0,u._3)(S)},loading:w,change:function(e){!w&&C(!0)},callempty:O,keyFlds:"searchQry"}),(0,h.jsx)("div",{className:"flexSpace"}),(0,h.jsxs)("div",{className:"_dsplFlx ",children:[(0,h.jsx)("div",{className:"total_comprobante_title",children:"No de Invoices:"}),(0,h.jsx)("div",{className:"total_comprobante gray",children:(0,h.jsx)("span",{children:null===(n=(0,s._2)((0,s.bh)("invoices_list")))||void 0===n?void 0:n.length})})]})]})]}),(0,h.jsx)("div",{className:"invoices_container scollVh",children:(0,s.bh)("invoices_list")&&(null===(i=(0,s._2)((0,s.bh)("invoices_list")))||void 0===i?void 0:i.map((function(e){return(0,h.jsx)(g,{data:(0,s.bh)("invoices_list")[e],elmId:e,openUpdateView:k,handleRefreshAll:O},e)})))})]})}},6496:function(e,n,i){i.d(n,{Hy:function(){return l},S$:function(){return u},_3:function(){return a},jB:function(){return d},p9:function(){return s}});var o=i(4165),c=i(1413),t=i(5861),r=i(2350),s=function(){var e=(0,t.Z)((0,o.Z)().mark((function e(n){var i,t,s,a,d,u;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=(0,r.bh)("getall_invoice_last")||0,!(Date.now()>i)){e.next=10;break}return(0,r.Rz)("getall_invoice_last",Date.now()+190),(a=(0,c.Z)({},null===(t=(0,r.bh)((0,r.hQ)()))||void 0===t?void 0:t.all_invoices)).params={businessId:null===(s=(0,r.bh)("profileUser"))||void 0===s?void 0:s.businessId},d=(0,r.I7)(a),e.next=8,d;case 8:(u=e.sent)&&((0,r.Rz)("invoices_list",l(u,"date")),(0,r.Rz)("invoices_ids",(0,r.ME)((0,r.jQ)(u),"invoiceId")),n&&n());case 10:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),a=function(){var e=(0,t.Z)((0,o.Z)().mark((function e(n){var i,t,s,a,d;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(s=(0,c.Z)({},null===(i=(0,r.bh)((0,r.hQ)()))||void 0===i?void 0:i.search_invoice)).params={businessId:null===(t=(0,r.bh)("profileUser"))||void 0===t?void 0:t.businessId,":search":(0,r.bh)("searchQry")},a=(0,r.I7)(s),e.next=5,a;case 5:(d=e.sent)&&((0,r.Rz)("invoices_list",l((0,r.jQ)(d),"date")),n&&n());case 7:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),l=function(e,n){return(0,r.MV)("sortInvoices",[e],(function(){return e&&e.sort((function(e,i){var o=e[n],c=i[n];return o<c?-1:o>c?1:0}))}))},d=function(){var e=(0,t.Z)((0,o.Z)().mark((function e(n,i){var t,s,a,l;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=(0,c.Z)({},null===(t=(0,r.bh)((0,r.hQ)()))||void 0===t?void 0:t.delete_invoice)).params={businessId:null===(s=(0,r.bh)("profileUser"))||void 0===s?void 0:s.businessId,invoiceId:n},l=(0,r.I7)(a),e.next=5,l;case 5:e.sent&&i&&i();case 7:case"end":return e.stop()}}),e)})));return function(n,i){return e.apply(this,arguments)}}(),u=function(){var e=(0,t.Z)((0,o.Z)().mark((function e(n){var i,t,s,a,l;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(s=(0,c.Z)({},null===(i=(0,r.bh)((0,r.hQ)()))||void 0===i?void 0:i.all_invoices)).params={businessId:null===(t=(0,r.bh)("profileUser"))||void 0===t?void 0:t.businessId},a=(0,r.I7)(s),e.next=5,a;case 5:(l=e.sent)&&((0,r.Rz)("invoiceCmp",l),v("SSJsgB2uUqcuoagD",(function(){v("v5MkYLwPAbgci3wW",(function(){var e=p();(0,r.Rz)("invoiceCmpDocs",e),n&&n()}))})));case 7:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),v=function(){var e=(0,t.Z)((0,o.Z)().mark((function e(n,i){var t,s,a,l,d;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=(0,c.Z)({},null===(t=(0,r.bh)((0,r.hQ)()))||void 0===t?void 0:t.filter_search_opera)).params={businessId:null===(s=(0,r.bh)("profileUser"))||void 0===s?void 0:s.businessId,year:(0,r.bh)("date_current_year"),":account":n},l=(0,r.I7)(a),e.next=5,l;case 5:(d=e.sent)&&!d.error?((0,r.Rz)("invoiceCmp"+n,d),i&&i()):i&&i();case 7:case"end":return e.stop()}}),e)})));return function(n,i){return e.apply(this,arguments)}}(),p=function(){var e=(0,r.bh)("invoiceCmp"),n=(0,r.bh)("invoiceCmpSSJsgB2uUqcuoagD"),i=(0,r.bh)("invoiceCmpv5MkYLwPAbgci3wW"),o={};return(0,r._2)(e).map((function(n){var i=e[n].document.trim();o[i]||(o[i]={document:i,amount:0,saldo:0,hasAnticipo:0,cc_c:0,cc_d:0,comprobanteIds:{}}),o[i].amount+=e[n].amount,o[i].saldo+=1*e[n].amount,o[i].date=e[n].date})),(0,r._2)(n).map((function(e){var i,c,t,r=n[e].document.trim();o[r]||(o[r]={document:r,amount:0,saldo:0,hasAnticipo:0,cc_c:0,cc_d:0,comprobanteIds:{}}),o[r].cc_d+="debit"===(null===(i=n[e])||void 0===i?void 0:i.type)?1*n[e].amount:0,o[r].cc_c+="credit"===(null===(c=n[e])||void 0===c?void 0:c.type)?1*n[e].amount:0,o[r].saldo+="credit"===(null===(t=n[e])||void 0===t?void 0:t.type)?-1*n[e].amount:0,o[r].comprobanteIds[n[e].comprobanteId]={date:n[e].date,description:n[e].description}})),(0,r._2)(i).map((function(e){var n,c,t=i[e].document.trim();t.indexOf("A-")>=0&&(t=t.split("A-")[1]),o[t]||(o[t]={document:t,amount:0,hasAnticipo:0,cc_c:0,cc_d:0,saldo:0,comprobanteIds:{}}),o[t].hasAnticipo+="credit"===(null===(n=i[e])||void 0===n?void 0:n.type)?1*i[e].amount:-1*i[e].amount,o[t].saldo+=-1*("credit"===(null===(c=i[e])||void 0===c?void 0:c.type)?1*i[e].amount:-1*i[e].amount),o[t].comprobanteIds[i[e].comprobanteId]={date:i[e].date,description:i[e].description}})),o}},3971:function(){},261:function(){},1413:function(e,n,i){i.d(n,{Z:function(){return t}});var o=i(4942);function c(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),i.push.apply(i,o)}return i}function t(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?c(Object(i),!0).forEach((function(n){(0,o.Z)(e,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):c(Object(i)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))}))}return e}}}]);
//# sourceMappingURL=5681.f98ce803.chunk.js.map