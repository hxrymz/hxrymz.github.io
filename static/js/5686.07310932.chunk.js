"use strict";(self.webpackChunkhrmfinance=self.webpackChunkhrmfinance||[]).push([[5686],{1142:(e,l,a)=>{a.d(l,{Z:()=>o});var s=a(2791),t=(a(6732),a(2647)),n=a(6245),r=a(184);const i=(0,t.PU)(),o=e=>{var l;let{init:a,onSelect:t,lbl_empty:o,direction:c,background:d,color:u,width:h,func:m,extraParam:v}=e;const[p,_]=(0,s.useState)([]),[x,b]=(0,s.useState)(!1),[j,g]=(0,s.useState)(""),f=(0,s.useRef)(!1),N=(0,s.useRef)(null);let y=(0,n.Z)(j);(0,s.useEffect)((()=>(y?C(y):_([]),()=>{})),[y]);const C=async e=>{let l=await m(e,v);_(l)},k=e=>{f.current?(f.current=!1,b(!1),e&&t(e)):f.current||(b(!0),setTimeout((()=>{f.current=!0}),50))};let w=p&&(null===p||void 0===p||null===(l=p.filter((e=>e.id===a)))||void 0===l?void 0:l[0]),R=c||"left",F={"--color-pck":u||null,"--backColor-pck":d||null,"--width-pck":h||"130px"};return(0,r.jsxs)("div",{id:"drpdwn_click_outside",open:x,style:F,children:[(0,r.jsxs)("div",{className:"filter_month_btn _dsplFlx",onClick:k,children:[(0,r.jsx)("div",{className:"lbl date",children:(null===w||void 0===w?void 0:w.label)||o}),(0,r.jsx)(i,{name:"arrow_drop_down",color:"var(--color-pck)"})]}),x?(0,r.jsxs)("div",{className:"OpenBoxContainer",style:d?{backgroundColor:d}:null,direction:"".concat(R),children:[(0,r.jsxs)("div",{className:" _dsplFlx",children:[(0,r.jsx)("input",{className:"OpenBoxInput",placeholder:"search",onChange:async e=>{g(e.target.value)},ref:N}),(0,r.jsx)("div",{className:"icon_close",onClick:async e=>{N.current.value="",C(""),t(null),k()},children:(0,r.jsx)(i,{name:"cancel",color:"var(--color-pck)",size:18})})]}),(0,r.jsx)("div",{className:"separator"}),(0,r.jsx)("div",{className:" monthList",style:{},children:p.map(((e,l)=>{let a=e.label;return a?(0,r.jsx)("div",{className:"filter_month_item _dsplFlx",onClick:()=>{k(e)},children:(0,r.jsx)("div",{className:"lbl tr_bar_90 ",style:{marginLeft:5},children:a})},a+"_"+l):null}))})]}):null]})}},5281:(e,l,a)=>{a.d(l,{Z:()=>r});var s=a(2791),t=a(184);class n extends s.Component{constructor(){super(),this.state={scrollPosition:null},this.handleInterval=this.handleInterval.bind(this),this.handleRequestAnimationFrame=this.handleRequestAnimationFrame.bind(this)}componentWillMount(){this.intervalID=setInterval(this.handleInterval,50)}componentWillUnmount(){clearInterval(this.intervalID),cancelAnimationFrame(this.requestID),this.requestID=null,this.intervalID=null}getWindowScrollTop(){return window.pageYOffset||document.documentElement.scrollTop}handleInterval(){cancelAnimationFrame(this.requestID),this.requestID=requestAnimationFrame(this.handleRequestAnimationFrame)}handleRequestAnimationFrame(){const{scrollPosition:e}=this.state,l=this.getWindowScrollTop();l!==e&&("function"===typeof this.props.scrollhandler&&this.props.scrollhandler(l),this.setState({scrollPosition:l}))}render(){return(0,t.jsx)(t.Fragment,{})}}const r=n},5686:(e,l,a)=>{a.r(l),a.d(l,{default:()=>y});var s=a(2791),t=a(2350),n=a(2647),r=(a(1e3),a(3588)),i=a(2692),o=a(4050),c=a(7689),d=a(5281),u=a(9760),h=(a(15),a(8779)),m=a(1142),v=a(184);const p=(0,n.LA)(),_=(0,i.FP)(),x=(0,n.Vg)(),b=(0,i.LO)(),j=(0,n.PU)(),g=(0,n.tW)(),f=(0,n.YZ)(),N="collComprobantes2list",y=e=>{var l,a,n,i,d,y,R,F;let{}=e;const[,I]=(0,s.useState)(0),[S,A]=(0,s.useState)(64),[D,z]=(0,s.useState)(!1),[T,O]=(0,s.useState)(!1),[E,M]=(0,s.useState)(!1),B=(0,s.useRef)(!1),L=(0,s.useRef)(!1),W=(0,s.useRef)(null),Z=(0,s.useRef)(null);let q=(0,c.TH)();const H=(0,c.s0)(),P=null===(l=q.search)||void 0===l||null===(a=l.split("?"))||void 0===a?void 0:a[1],U=(0,t.mB)(P);(0,s.useEffect)((()=>{setTimeout((()=>{null!==U&&void 0!==U&&U.cId&&((0,t.Rz)("search_acc_record",null===U||void 0===U?void 0:U.cId),(0,r.N$)(J)),(0,o.Ht)("comp_under_review","comp_under_review",X)}),350)}),[null===U||void 0===U?void 0:U.cId]),(0,s.useEffect)((()=>{B.current||(B.current=!0,I((0,t.M5)()),(0,o._0)(X),(0,o.ZX)($),(0,o.Ht)("global_accounts","global_account_params",X))}));const K=e=>{var l,a;null===W||void 0===W||null===(l=W.current)||void 0===l||l.setAttribute("show",e),null===Z||void 0===Z||null===(a=Z.current)||void 0===a||a.setAttribute("loading",e)},V=()=>{},Y=e=>{(0,r.N$)(J)},J=()=>{let e={...(0,t.bh)("comprobante_by_doc")};(0,t.Rz)(N,e),(0,t.bh)("has_filter_review")&&D?(0,t.Rz)(N,k(e)):(0,t.bh)("has_filter_comp_error")&&T&&(0,t.Rz)(N,w(e)),X()},$=()=>{(0,t.Rz)("comprobante_list",null),(0,t.Rz)("comprobante_by_doc",null),J()},G=e=>{e?L.current||(L.current=e,K(e)):L.current&&(L.current=e,K(e))},X=async(e,l)=>{G(!1),64!==S?A(64):I((0,t.M5)())},Q=()=>{A((e=>e+64))},ee=e=>{if(G(!0),null!==e&&void 0!==e&&e.initDate&&null!==e&&void 0!==e&&e.lastDate){let l={...e};l.initDate=l.initDate-100,l.lastDate=l.lastDate+8638e4,(0,t.Rz)("date_range_comps",l)}(0,r.Ng)(J)};let le=(null===(n=(0,t.bh)("date_range_comps"))||void 0===n?void 0:n.initDate)&&(0,t.sJ)(null===(i=(0,t.bh)("date_range_comps"))||void 0===i?void 0:i.initDate)+" - "+(0,t.sJ)(null===(d=(0,t.bh)("date_range_comps"))||void 0===d?void 0:d.lastDate);const ae=()=>{(0,r.UK)()},se=()=>{I((0,t.M5)())},te=()=>{(0,r.ly)(se)},ne=()=>{H({search:""})},re=e=>{let l={};l.id=e,l.zIndex=490,l.height="40vh",l.props={minHeight:"1vh",overlay:!0,closeEvent:()=>{}};let a=(0,v.jsxs)("div",{children:[(0,v.jsx)("h4",{className:"",style:{padding:4,margin:0},children:"Cerrando el A\xf1o contable"}),(0,v.jsx)("h4",{className:"",style:{padding:4,margin:0},children:"Generando el asiento de apertura"})]}),s=(0,v.jsxs)("div",{className:"_dsplFlx ",children:[(0,v.jsx)("div",{className:"centerBx",style:{padding:4,marginRight:20},children:(0,v.jsx)(g,{stroke:"var(--hrm_palette-selected-nav-text)",size:24,strokeW:8})}),(0,v.jsx)("h4",{className:"",style:{padding:4,margin:0},children:"Terminando Cierre de A\xf1o !!!"})]});l.content=(0,v.jsx)(h.Z,{label:s,labelColor:"var(--hrm_palette-selected-nav-text)",body:a,btnConfirm:"OK",confirm:ae,done:e=>{e&&(0,u.CloseModal)({id:e})}}),(0,u.OpenModal)(l)},ie=e=>{let l=(0,t.bh)("lastTimeCallModal")||0;if(Date.now()>l){var a,s;(0,t.Rz)("lastTimeCallModal",Date.now()+320);const l=null===(a=q.search)||void 0===a||null===(s=a.split("?"))||void 0===s?void 0:s[1],n=(0,t.mB)(l);null!==n&&void 0!==n&&n.cId&&(null===n||void 0===n?void 0:n.cId)===e.comprobanteId||H({search:"?cId=".concat(e.comprobanteId)}),(0,t.Rz)("show_comprobante",e);let r={zIndex:450,height:"80vh"};r.props={minHeight:"1vh",overlay:!0,closeEvent:ne},r.content=(0,v.jsx)(_,{confirm:te,item:e,confirmYearClose:re}),M(!1),(0,u.OpenModal)(r)}},oe=(e,l)=>{(0,t.Rz)(e,l),Y()};return(0,v.jsxs)("div",{className:"",children:[(0,v.jsxs)("div",{className:"accounts_header",children:[(0,v.jsx)("h2",{children:"Comprobantes"}),null!==(y=(0,t.Ch)()[(0,t.bh)("date_current_year")])&&void 0!==y&&y.isClosed?null:(0,v.jsxs)("div",{className:"_dsplFlx ",children:[(0,v.jsx)("div",{children:(0,v.jsx)("p",{className:"group_title addBtn purple",onClick:e=>{H({pathname:"/entries"})},children:"Agregar Comprobantes"})}),(0,v.jsx)("div",{children:(0,v.jsx)("p",{className:"group_title addBtn purple",onClick:()=>{let e={zIndex:450,height:"40vh",props:{minHeight:"1vh",overlay:!0,closeEvent:()=>{}}},l=(0,v.jsxs)("div",{children:[(0,v.jsx)("h4",{className:"",style:{padding:4,margin:0},children:"Esta funcion consume recursos y puede tomar un tiempo"}),(0,v.jsx)("h4",{className:"",style:{padding:4,margin:0},children:"Esta seguro que desea ejecutarlo ???"})]}),a=(0,v.jsxs)("div",{className:"_dsplFlx ",children:[(0,v.jsx)("div",{className:"centerBx",children:(0,v.jsx)(j,{name:"alert",color:"var(--hrm_palette-selected-nav-text)"})}),(0,v.jsx)("h4",{className:"",style:{padding:4,margin:0},children:"Revisar comprobantes!!!"})]});e.content=(0,v.jsx)(h.Z,{label:a,labelColor:"var(--hrm_palette-selected-nav-text)",body:l,btnConfirm:"OK",confirm:ae}),(0,u.OpenModal)(e)},children:"Revisar Comprobantes"})}),(0,v.jsx)("div",{className:"",children:E?(0,v.jsxs)("div",{className:"icon_compr _dsplFlx",style:{marginTop:10,marginRight:15},children:[(0,v.jsx)("div",{className:"lbl_saving ",children:"Calculando Asiento ..."}),(0,v.jsx)(g,{stroke:"var(--hrm_palette-blue-purple)",size:24,strokeW:8})]}):(0,v.jsx)("div",{children:(0,v.jsx)("p",{className:"group_title addBtn purple",onClick:()=>{M(!0),(0,r.g5)(ie)},children:"Calcular Asiento de Apertura"})})}),(0,v.jsxs)("div",{className:"_dsplFlx ",style:{marginTop:20},children:[(0,v.jsx)(f,{initvalue:(0,t.bh)("showAllCmpbnt"),keyCode:57,updChange:e=>{return l=e,(0,t.Rz)("showAllCmpbnt",l),void I((0,t.M5)());var l}}),(0,v.jsx)("span",{className:"checklabel",children:"Mostar Todos"})]})]}),(0,v.jsxs)("div",{className:"_dsplFlx ",style:{marginTop:14},children:[(0,v.jsx)(x,{placeholder:"Buscar ....",width:360,obs:I,fetchData:Y,change:e=>{G(!0)},callempty:$,keyFlds:"search_acc_record"}),(0,v.jsx)("div",{className:"flexSpace"}),(0,v.jsxs)("div",{className:"_dsplFlx ",children:[(0,v.jsx)("div",{className:"total_comprobante_title",children:"No de Comprobantes:"}),(0,v.jsx)("div",{className:"total_comprobante gray",children:(0,v.jsx)("span",{children:null===(R=(0,t._2)((0,t.bh)(N)))||void 0===R?void 0:R.length})})]})]})]}),(0,v.jsxs)("div",{className:"_dsplFlx ",style:{marginBottom:14,maxWidth:500},children:[(0,v.jsxs)("div",{className:"filter_date_btn _dsplFlx",onClick:()=>{var e,l;let a={zIndex:950,height:"80vh",props:{minHeight:"1vh",overlay:!0}};a.content=(0,v.jsx)(p,{onConfirm:ee,init:null===(e=(0,t.bh)("date_range_comps"))||void 0===e?void 0:e.initDate,last:null===(l=(0,t.bh)("date_range_comps"))||void 0===l?void 0:l.lastDate,isRange:!0,colors:{"--calendar-primary-color":"var(--hrm_palette-blue-purple)","--calendar-primary-backcolor":"var(--primary-light)","--calendar-light-backcolor":"var(--hrm_palette-general-background-b)","--calendar-primary-hover-backcolor":"var(--hrm_palette-blue-purple_100)","--calendar-light-300":"var(--disabled)","--calendar-light-200":"var(--dark-800)","--calendar-light-100":"var(--dark-900)","--calendar-dark-800":"var(--hrm_palette-blue-purple_100)","--calendar-white-100":"var(--light-100)","--calendar-white":"var(--dark-700)","--calendar-selected_lbl_color":"var(--light-400)","--calendar-selected_lbl_color":"var(--primary-blue--color-30)"}}),(0,u.OpenModal)(a)},style:{minWidth:200},children:[(0,v.jsx)("div",{className:"lbl date",children:le||"Fecha"}),(0,v.jsx)(j,{name:"calendar",color:"#66666"})]}),(0,t.bh)("has_filter_review")?(0,v.jsxs)("div",{className:"filter_cmp_btn _dsplFlx",style:{"--filter_cmp_btn_color":D?"var(--hrm_palette-color-orange-800)":"var(--hrm_palette-success-fg)","--filter_cmp_btn_bck-color":D?"var(--hrm_palette-color-orange-100)":"var(--hrm_palette-success-100)"},onClick:()=>{let e={...(0,t.bh)("comprobante_by_doc")};(0,t.Rz)(N,e),(0,t.bh)("has_filter_review")&&!D&&(0,t.Rz)(N,k(e)),z(!D)},children:[(0,v.jsx)("div",{className:"lbl",children:D?"En Revision":"Todos"}),(0,v.jsx)(j,{name:D?"alert":"success",color:"#66666"})]}):null,(0,t.bh)("has_filter_comp_error")?(0,v.jsxs)("div",{className:"filter_cmp_btn _dsplFlx",style:{"--filter_cmp_btn_color":T?"var( --hrm_palette-selected-nav-text)":"var(--hrm_palette-success-fg)","--filter_cmp_btn_bck-color":T?"var( --hrm_palette-selected-nav-text-100)":"var(--hrm_palette-success-100)",marginLeft:12},onClick:()=>{let e={...(0,t.bh)("comprobante_by_doc")};(0,t.Rz)(N,e),(0,t.bh)("has_filter_comp_error")&&!T&&(0,t.Rz)(N,w(e)),O(!T)},children:[(0,v.jsx)("div",{className:"lbl",children:T?"Contiene errors":"OK"}),(0,v.jsx)(j,{name:T?"alert":"success",color:"#66666"})]}):null,(0,v.jsx)("div",{className:"flexSpace"}),(0,v.jsx)("div",{className:"_dsplFlx spaceAround",style:{padding:3,minWidth:"fit-content"},children:(0,v.jsx)(m.Z,{init:(0,t.bh)("account_operafilter"),lbl_empty:"Cuenta",func:e=>{let l=[];return(0,t.bh)("account_list").map((a=>{if(e){var s,t,n,r;let i=e.toLowerCase(),o=!(null===a||void 0===a||!a.code)&&(null===a||void 0===a||null===(s=a.code)||void 0===s||null===(t=s.toString().toLowerCase())||void 0===t?void 0:t.indexOf(i))>=0,c=!(null===a||void 0===a||!a.name)&&(null===a||void 0===a||null===(n=a.name)||void 0===n||null===(r=n.toString().toLowerCase())||void 0===r?void 0:r.indexOf(i))>=0;(o||c)&&l.push({id:null===a||void 0===a?void 0:a.accountId,label:"".concat(null===a||void 0===a?void 0:a.code,"-").concat(null===a||void 0===a?void 0:a.name)})}})),l},onSelect:e=>oe("account_operafilter",null===e||void 0===e?void 0:e.id),background:"#f9f9f9",color:"var(--hrm_palette-blue-purple)",direction:"left",width:"320px"})}),(0,v.jsx)("div",{className:"_dsplFlx spaceAround",style:{padding:3,minWidth:"fit-content"},children:(0,v.jsx)(m.Z,{init:(0,t.bh)("sub_account_operafilter"),lbl_empty:"Sub Cuenta",func:e=>{let l=[];return(0,t.bh)("sub_account_list").map((a=>{if(e){var s,t,n,r;let i=e.toLowerCase(),o=!(null===a||void 0===a||!a.subAccount)&&(null===a||void 0===a||null===(s=a.subAccount)||void 0===s||null===(t=s.toString().toLowerCase())||void 0===t?void 0:t.indexOf(i))>=0,c=!(null===a||void 0===a||!a.subAccountName)&&(null===a||void 0===a||null===(n=a.subAccountName)||void 0===n||null===(r=n.toString().toLowerCase())||void 0===r?void 0:r.indexOf(i))>=0;(o||c)&&l.push({id:null===a||void 0===a?void 0:a.sub_accountId,label:"".concat(null===a||void 0===a?void 0:a.subAccount,"-").concat(null===a||void 0===a?void 0:a.subAccountName)})}})),l},onSelect:e=>oe("sub_account_operafilter",null===e||void 0===e?void 0:e.id),background:"#f9f9f9",color:"var(--hrm_palette-blue-purple)",direction:"left",width:"320px"})})]}),(0,v.jsxs)("div",{className:"accounts_container ",children:[(0,v.jsx)("div",{style:{height:55},children:(0,v.jsx)(C,{})}),(0,v.jsxs)("div",{className:"loading_animation_container",style:{marginTop:2},ref:W,children:[(0,v.jsx)("div",{className:"load_animation"}),(0,v.jsxs)("div",{className:"_dsplFlx",style:{marginTop:32},children:[(0,v.jsx)("div",{className:"flexSpace"}),(0,v.jsxs)("div",{className:"icon_compr align_itm ",children:[(0,v.jsx)("div",{className:"lbl_saving",children:"Loading ..."}),(0,v.jsx)(g,{stroke:"#646cff",size:24,strokeW:8})]}),(0,v.jsx)("div",{className:"flexSpace"})]})]}),(0,v.jsx)("div",{id:"scollVhComprobantesList",className:"clients_container",ref:Z,children:(0,t.bh)(N)&&(null===(F=(0,t._2)((0,t.bh)(N)))||void 0===F?void 0:F.map(((e,l)=>(0,v.jsx)(b,{data:(0,t.bh)(N)[e],elmId:e,openUpdateView:V,handleRefreshAll:$,inReview:D,hasError:T,updRvw:I,range2Scroll:S-l===32,show:l<S,inx:l,updRange:Q},e))))})]})]})},C=e=>{let{}=e;const[l,a]=(0,s.useState)(!1);return(0,v.jsxs)("div",{className:"header_tbl ".concat(l?"_floating":""),children:[(0,v.jsxs)("div",{className:"_dsplFlx hdr_bar purple",children:[(0,v.jsxs)("div",{className:"_dsplFlx tr_bar_90",children:[(0,v.jsx)("div",{className:" tr_bar_20",children:"Fecha"}),(0,v.jsx)("div",{className:" tr_bar_25",children:"Comprobante"}),(0,v.jsx)("div",{className:" tr_bar_55",children:"Descripcion"})]}),(0,v.jsx)("div",{className:"flexSpace"}),(0,v.jsx)("div",{className:"icon tr_bar_5"})]}),(0,v.jsx)(d.Z,{scrollhandler:e=>{e>295?!l&&a(!0):l&&a(!1)}})]})};function k(e){var l=[];return(0,t._2)(e).map((a=>{var s,n;let r=e[a];null!==(s=(0,t.bh)("comp_under_review"))&&void 0!==s&&null!==(n=s.inReview)&&void 0!==n&&n[null===r||void 0===r?void 0:r.comprobanteId]&&l.push(r)})),l}function w(e){var l=[];return(0,t._2)(e).map((a=>{var s,n,r;let i=e[a];(null!==(s=(0,t.bh)("comp_under_review"))&&void 0!==s&&null!==(n=s.hasError)&&void 0!==n&&n[null===i||void 0===i?void 0:i.comprobanteId]||null!==(r=(0,t.bh)("comprobante_w_erros"))&&void 0!==r&&r[null===i||void 0===i?void 0:i.comprobanteId])&&l.push(i)})),l}},8779:(e,l,a)=>{a.d(l,{Z:()=>n});a(2791),a(1534);var s=a(9760),t=a(184);const n=e=>{let{data:l,confirm:a,label:n,labelColor:r,body:i,btnConfirm:o,theme:c}=e;const{modalID:d}=l,u=e=>{(0,s.CloseModal)({id:d})};let h=c||"red";return(0,t.jsxs)("div",{style:{maxHeight:"40vh",minHeight:"28vh",minWidth:"560px",overflow:"auto",background:"#fff",borderRadius:13,padding:"10px 19px"},children:[(0,t.jsxs)("div",{className:"_dsplFlx ",children:[(0,t.jsx)("p",{className:"form_title",style:r?{color:r}:null,children:n}),(0,t.jsx)("div",{className:"flexSpace"})]}),(0,t.jsx)("div",{className:"_dsplFlx ",style:{margin:"15px 0"},children:(0,t.jsx)("span",{children:i||"Una vez eliminado no podra ser recuperado"})}),(0,t.jsxs)("div",{className:"_dsplFlx ",style:{padding:"15px 10px"},children:[(0,t.jsx)("div",{className:"flexSpace"}),(0,t.jsx)("p",{className:"group_title addBtn",onClick:u,children:"Cancelar"}),(0,t.jsx)("p",{className:"group_title addBtn ".concat(h),onClick:()=>{a&&a(),u()},children:o||"Eliminar"})]})]})}},6245:(e,l,a)=>{a.d(l,{Z:()=>t});var s=a(2791);const t=e=>{const[l,a]=(0,s.useState)(null),[t,n]=(0,s.useState)(""),[r,i]=(0,s.useState)(null);return(0,s.useEffect)((()=>{l||n(e),l>0&&l<Date.now()||r&&clearTimeout(r);let s=setTimeout((()=>{l>0&&l<Date.now()&&e!==t&&n(e)}),250);return i(s),a(Date.now()+220),()=>{}}),[e]),t}},6732:()=>{},1e3:()=>{},1534:()=>{}}]);
//# sourceMappingURL=5686.07310932.chunk.js.map