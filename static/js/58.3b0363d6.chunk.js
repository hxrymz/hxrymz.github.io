(window.webpackJsonp=window.webpackJsonp||[]).push([[58],{185:function(e,t,a){"use strict";a.r(t);var n=a(31),o=a(2),c=a.n(o),r=a(15),l=a(4),i=a(156),s=a(10),b=a(22),m=(a(1),a(3),a(0));var d=function(e,t){return function(e){return"Entrega"===e||"REM_CARD_CUP"===e||"REM_CARD_MLC"===e||"REM_CASH_USD"===e||"REM_CASH_CUP"===e||"COMBO"===e}(e)?t>0?-1:1:"INVESTMENT_FOOD"===e?-1:"BTC"===e||"TRANSFER"===e||"ADJUSTMENTS"===e||"DEBT"===e||"COMISION_AGENT"===e?1:0};a(37);var u=a(5);a.d(t,"groupbyTab",function(){return T});var p=Object(l.a)(function(){return a.e(59).then(a.bind(null,182))}),O=Object(m.f)(),j=Object(b.BTNH_Cmpt)(),f=Object(b.Icon_Cmpt)(),v=Object(b.SearchInput_Cmpt)(),_=Object(b.ModalDate_Cmpt)(),g=Object(b.InputAutocomplete_Cmpt)(),E=Object(b.BtnIconTab_Cmpt)(),F=Object(b.OpacityContainer_Cmpt)(),x=Object(l.a)(function(){return a.e(4).then(a.bind(null,80))}),y=Object(l.a)(function(){return a.e(60).then(a.bind(null,183))});t.default=Object(i.a)(function(e){Object(r.c)(u.b);var t=Object(m.F)("mov_list_search")||{},a=(Object(m.M)(),Object(m.P)("pnOrStMk")),l=Object(o.useState)(!1),i=Object(n.a)(l,2),b=i[0],M=i[1],P=Object(o.useState)(null),w=Object(n.a)(P,2),z=w[0],I=w[1],R=Object(o.useState)(!1),D=Object(n.a)(R,2),A=D[0],k=D[1],B=Object(o.useState)(1),V=Object(n.a)(B,2),L=V[0],U=V[1],W=Object(o.useState)(6),q=Object(n.a)(W,2),J=q[0],G=q[1],H=Object(o.useState)(""),$=Object(n.a)(H,2),Y=$[0],K=$[1],Q=Object(o.useState)(""),X=Object(n.a)(Q,2),Z=X[0],ee=X[1],te=Object(o.useState)(0),ae=Object(n.a)(te,2),ne=(ae[0],ae[1]),oe=Object(m.P)("outerWidth");Object(m.P)("agentId2");Object(o.useEffect)(function(){z!==oe&&I(oe),b||(M(!0),function(e){if(window.jsPDF)return 1;m.eb("https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.4.1/jspdf.debug.js",function(){return 1})}(),Object(m.Ab)(8),Object(m.zb)("actionType","expenses"),Object(m.c)()&&Object(s.LoadUA)(),Object(m.k)()&&Object(m.sb)(),setTimeout(function(){return window.scrollTo(0,0)},350),setTimeout(function(){return k(!0)},250),window.localStorage.setItem("lng","es"))});var ce=Object(m.C)(),re="Android"===ce.os||"iPhone"===ce.os||Object(m.P)().outerWidth<550,le=2===L?Object(m.P)("incomes_total"):Object(m.P)("expenses_total"),ie=2===L?Object(m.P)("incomes"):Object(m.P)("expenses"),se={};le=Z&&Z.length>0?(se=C(ie,Z))&&se.total:(se=C(ie,""))&&se.total;var be=T(se&&se.list,ie),me=function(e){e===L||(U(e),Object(m.zb)("actionType",2===e?"incomes":"expenses"),G(6),Object(m.zb)("loadingMov",!0),ne(Object(m.y)()),setTimeout(function(){Object(m.zb)("loadingMov",!1),ne(Object(m.y)())},750))},de=function(){!function(e){var t=0,a=localStorage.getItem("pgSz")||"a4",n=new window.jsPDF({orientation:"portrait",format:a});e&&m.g(e).map(function(a,o){o>0&&n.addPage(),n.setFontSize(14);var c=m.P(),r="",l=0;e[a]&&m.g(e[a]).map(function(o,i){var s=e[a][o],b=s&&s.name;r=s&&s.store&&s.store.name;var m=s&&-1*s.qty,d=s&&s.cost_price?s.cost_price-50:0;l+=d*m;var u=s&&s.imageUrl,p=u&&c.thumbnailJsonBlob&&c.thumbnailJsonBlob[u],O=p&&p.requested,j=O&&"data:".concat(p.type,";base64,").concat(p.b64);t=26*(i+1)+17+1,n.setFontType("normal"),n.setFontSize(15),n.text(53,t,"".concat(b)),n.setFontType("bold"),n.setFontSize(17),n.text(13,t,"".concat(m)),n.setFontType("normal"),n.setFontSize(15),n.text(183,t,"".concat(d.toFixed(2))),O&&n.addImage(j,"PNG",20,t-12,24,24)});var i=1;l>9999?i=5:l>999?i=4:l>99?i=3:l>9&&(i=2);var s=190-1.4*(i+4);n.setFontSize(14),n.setFontType("normal"),n.text(s-15,29,"Total : "),n.setFontType("bold"),n.text(s,29,"$".concat(l?l.toFixed(2):0)),n.setFont("Roboto"),n.setFontType("normal"),n.setTextColor(60,60,60),n.setFontSize(21),n.text(30,13,"Ordenes Pendientes para ".concat(" ",r))}),n.save("ordenes".concat("_",(new Date).getTime(),".pdf"))}(a)},ue=function(){!function(e){var t=0,a=localStorage.getItem("pgSz")||"a4",n=m.pb(e,"date",!0),o=m.pb(e,"date",!1),c=new window.jsPDF({orientation:"portrait",format:a}),r={},l=0,i=m.F("mov_list_search")||{},s=i.search,b=i.date;n.map(function(t,a){if(e[t].IsDelivery){var n=e[t].type;if("COMBO"===n||"INVESTMENT_FOOD"===n){var o=e[t]&&e[t].prdDtls,c=e[t].amount*e[t].tasa;o&&o.total>0&&(c=o.total),"COMBO"===n?(s||b)&&(l+=-1*c):l+=-1*c}else{var i=e[t].amount*e[t].tasa,m=d(n,i);l+=m*i}r[t]=l}});var u={};o&&o.map(function(t,a){var n=Math.floor(a/36);u[n]||(u[n]=[]),e[t].IsDelivery&&u[n].push(t)}),m.P(),u&&m.g(u).map(function(a,n){n>0&&c.addPage(),c.setFont("Roboto"),c.setFontSize(14),c.setFont("Roboto"),c.setFontType("normal"),c.setFontSize(11),c.text(38,21,"Operacion"),c.setFont("Roboto"),c.setFontType("normal"),c.setFontSize(11),c.text(13,21,"Fecha"),c.setFont("Roboto"),c.setFontType("normal"),c.setFontSize(11),c.text(83,21,"Orden No"),c.setFont("Roboto"),c.setFontType("normal"),c.setFontSize(11),c.text(183,21,"Saldo"),c.setFontType("normal"),c.text(153,21,"Importe"),c.setTextColor(0,0,0),c.setDrawColor(90,90,90),c.setLineWidth(.025),c.line(10,23,200,23),u[a]&&u[a].map(function(a,n){var o=e[a],l=o&&o.orderId||o&&o.id,i=o&&m.l(o.date),s=o.amount*o.tasa;if("INVESTMENT_FOOD"===o.type){var b=o&&o.prdDtls;b&&b.total>0&&(s=-1*b.total)}else"COMBO"===o.type&&(s=0);var d=r&&r[o.id]?r[o.id].toFixed(2):0,u=o.type;"INVESTMENT_FOOD"===o.type&&(u="INVERSION"),t=7*(n+1)+21+1,c.setFont("Roboto"),c.setFontType("normal"),c.setFontSize(11),c.text(38,t,"".concat(u)),c.setFont("Roboto"),c.setFontType("normal"),c.setFontSize(11),c.text(13,t,"".concat(i)),c.setFont("Roboto"),c.setFontType("normal"),c.setFontSize(11),c.text(83,t,"".concat(l)),c.setFont("Roboto"),c.setFontType("normal"),c.setFontSize(11),c.text(183,t,"".concat(d)),c.setFontType("normal"),c.text(153,t,"".concat(s.toFixed(2)))});var o=m.P("agentsList")[m.P("agentId2")];c.setFont("Roboto"),c.setFontType("normal"),c.setTextColor(60,60,60),c.setFontSize(18),c.text(30,13," Movimientos ".concat(" - ",o&&o.name," - ").concat(o&&o.email))}),c.save("resumen_movimientos".concat("_",(new Date).getTime(),".pdf"))}(Object(m.P)().movements)},pe=function(e){var t={},a=Object(m.F)("mov_list_search")||{},n=a&&a[e];t.zIndex=190,t.observeResize=!0,t.props={title:"",item:e},t.content=c.a.createElement(_,{valueUpdate:function(t){return function(e,t){var a=new Date(t),n=Object(m.F)("mov_list_search")||{};n[e]=a.getTime(),Object(m.vb)("mov_list_search",n),ne(Object(m.y)());var o=Object(m.P)().movements;Object(s.calcMov)(o)}(e,t)},initValue:n}),Object(s.OpenModal)(t)},Oe=Object(m.G)(),je={};je=Object(m.c)()&&Y&&Y.length>0?h(Object(m.P)().agentsList,Y):h(Object(m.P)().agentsList,"");var fe=Object(m.g)(be).sort(function(e,t){return t-e}),ve=fe.slice(0,J),_e=fe.slice(0,J),ge=Object(m.P)().collapsedItems;console.log("range",J);return c.a.createElement(c.a.Fragment,null,c.a.createElement("style",null,"\n        .palette{\n          --base-color: rgb(21, 100, 191,1);\n          --base-color-gradient: 21, 100, 191;\n        }\n\n        "),c.a.createElement("div",{className:" palette formContainer shopping_cart  _movements ".concat(re?"is_mobile":""),style:{opacity:A?1:0}},c.a.createElement("div",{className:"formContainer ",style:{opacity:1}},A?c.a.createElement("div",{className:"centerListCardProd "},Object(m.c)()?c.a.createElement("div",{className:"paddField address"},c.a.createElement(g,{icon:"more_vert",form:"kjsahfashflkashjaf",field:"agentId",keyCode:49,background:"#f9f9f9",color:"var(--base-color)",placeholder:Object(m.qb)(13),OnSelect:function(e){e.id},data:je,OnChange:function(e){return K(e)}})):null,c.a.createElement("div",{className:"  headerTtl"},c.a.createElement("div",{className:"pym81b sendBx "},c.a.createElement("div",{className:"_dsplFlx "},c.a.createElement("div",{className:"subtotal_cart "},Object(m.qb)(50)),c.a.createElement("div",{className:"flexSpace"}),c.a.createElement("div",{className:"total_cart date_filter"},Object(m.db)(Object(m.P)("month_filter"))&&m.fb[Object(m.P)("month_filter")]+", ","  ",Object(m.P)("year_filter"))),c.a.createElement("div",{className:"total_cart ".concat(le>0?"pos":"neg")},"$ ".concat(le?le.toFixed(2):0),c.a.createElement("div",{className:"sendBtn"})))),c.a.createElement("div",{className:"years_card "},c.a.createElement("div",{className:" _dsplFlx spaceAround  "},c.a.createElement(x,{data:N(),value:Object(m.P)("category_filter"),updValue:function(e){e!==Object(m.B)("category_filter")&&(Object(m.zb)("category_filter",e),Object(m.rb)("category_filter",e),Object(m.sb)(),Object(m.zb)("loadingMov",!0),G(4))},placeholder:"Categories",showAll:!0}),c.a.createElement(x,{data:S(),value:Object(m.P)("month_filter"),updValue:function(e){e!==Object(m.B)("month_filter")&&(Object(m.zb)("month_filter",e),Object(m.rb)("month_filter",e),Object(m.sb)(),Object(m.zb)("loadingMov",!0),G(4))},placeholder:"Month",showAll:!0}),c.a.createElement(x,{data:[{id:2022,lbl:2022},{id:2021,lbl:2021},{id:2020,lbl:2020}],value:Object(m.P)("year_filter"),updValue:function(e){e!==Object(m.B)("year_filter")&&(Object(m.zb)("year_filter",e),Object(m.rb)("year_filter",e),Object(m.sb)(),Object(m.zb)("loadingMov",!0),G(4))},placeholder:"Years"}))),a&&Object(m.g)(a).length>0?c.a.createElement("div",{className:"pym81b sendBx mov_type _dsplFlx activeBlue",onClick:function(){return de()}},c.a.createElement("div",{className:"icon_mov"},c.a.createElement(f,{name:"printer"})),c.a.createElement("div",{className:"mov_type_title "},Object(m.qb)(51))):null,c.a.createElement("div",{className:" _filter_mv"},c.a.createElement("div",{className:" _search_MrgV  "},c.a.createElement(v,{updChanges:function(e){ee(e),G(16)},placeholderCode:20})),Object(m.c)()?c.a.createElement("div",{className:"_dsplFlx spaceAround _flxWrp icon_clear"},c.a.createElement("div",{className:"fieldPadding _MrgV"},c.a.createElement("span",{onClick:function(){return pe("date")}},c.a.createElement(j,{theme:"light_blue",title:t&&t.date?Object(m.hb)(t.date):Object(m.hb)(Object(m.w)())}))),c.a.createElement("div",{onClick:function(){return function(){Object(m.vb)("mov_list_search",{});var e=Object(m.P)().movements;Object(m.zb)("loadingMov",!0),Object(s.updObserveChanges)(),Object(s.calcMov)(e)}()}},c.a.createElement(f,{name:"outline_delete"})),c.a.createElement("div",{onClick:function(){return ue()}},c.a.createElement(f,{name:"printer"}))):null),c.a.createElement("div",{className:"_dsplFlx  spaceAround _flxWrp"},c.a.createElement(E,{lbl:"Expenses",icon:"arrow_up_large",classN:"activeRed",index:L,indexTag:1,changeView:me,isMobile:re}),c.a.createElement(E,{lbl:"Incomes",icon:"arrow_down_large",classN:"complete",index:L,indexTag:2,changeView:me,isMobile:re})),c.a.createElement("div",{className:"_dsplFlx spaceAround _flxWrp icon_clear"},c.a.createElement("div",{onClick:function(){return Object(m.zb)("collapsedItems",!ge),Object(m.zb)("collapseId",Object(m.z)()),void ne(Object(m.y)())}},c.a.createElement(f,{name:ge?"arrow_expand_vertical":"arrow_collapse_vertical"}))),c.a.createElement("style",null,"\n                        \n                        \n\n                        .progress-line-palette{\n                          --progress-line-background-color: ".concat(1===L?"#F7E8E8":"#E5F1F0"," ;\n                          --progress-line-before-background-color: ").concat(1===L?"#b22222 ":"#00897b",";\n                        }\n                        ")),c.a.createElement(y,null),Object(m.P)("loadingMov")?null:c.a.createElement("div",{className:" sendBx scroll3Wrp "},c.a.createElement(F,{lbl:52,index:L,indexTag:1,isMobile:re},c.a.createElement("div",{className:"_dsplFlx space2Around _flxWrp op4oU"},ve&&ve.map(function(e,t){return c.a.createElement("div",{key:"".concat(Oe[t],"_").concat(t,"_pend_Mov"),"data-key":"".concat(Oe[t],"_").concat(t,"_pend_Mov")},c.a.createElement(p,{data:be[e],ind:t,dateClss:"",fV:e,range:J,updRange:function(e){return G(e)},ItemComponent:c.a.createElement(O,null),tag:"_pend_Mov"}))}))),c.a.createElement(F,{lbl:53,index:L,indexTag:2,isMobile:re},c.a.createElement("div",{className:"_dsplFlx space2Around _flxWrp op4oU"},_e&&_e.map(function(e,t){return c.a.createElement("div",{key:"".concat(Oe[t],"_").concat(t,"_cmpl_Mov")},c.a.createElement(p,{data:be[e],fV:e,ind:t,dateClss:"green",range:J,updRange:function(e){return G(e)},ItemComponent:c.a.createElement(O,null),tag:"_cmpl_Mov"}))}))))):null),c.a.createElement("div",{className:"footSpace"})))});function h(e,t){var a={};return Object(m.g)(e).map(function(n){if(e[n].isqvmAgent||e[n].isAdmin)if(t){var o=t&&t.toLowerCase(),c=e[n].name&&e[n].name.toLowerCase();o&&c&&c.indexOf(o)>=0&&(a[n]=e[n])}else a[n]=e[n]}),a}function T(e,t){var a={};return e&&e.map(function(e){if(e){var n=1*t[e].createdDate,o=Math.ceil(new Date(n).getTime()/864e5);a[o]||(a[o]=[]),a[o].push(e)}}),a}function C(e,t,a){var n={},o=0;return Object(m.g)(e).map(function(a){var c=t&&t.toLowerCase();if(c&&e[a]){var r=e[a].title&&e[a].title.toLowerCase(),l=r&&r.indexOf(c)>=0,i=e[a].amount&&e[a].amount.toString().toLowerCase(),s=i&&i.indexOf(c)>=0,b=e[a].description&&e[a].description.toLowerCase(),d=b&&b.indexOf(c)>=0,u=Object(m.P)("categories")&&Object(m.P)("categories")[e[a].categoryId]&&Object(m.P)("categories")[e[a].categoryId].name&&Object(m.P)("categories")[e[a].categoryId].name.toLowerCase(),p=u&&u.indexOf(c)>=0;(l||s||d||p)&&(n[a]=e[a],o+=e[a].amount)}else n[a]=e[a],o+=e[a].amount}),{list:Object(m.pb)(n,"date",1),total:o}}var S=function(){return m.fb.map(function(e,t){return{id:t,lbl:e}})},N=function(){var e=[],t=Object(m.P)("categories")||{};return Object(m.g)(t).map(function(a){e.push({id:t[a].categoryId,lbl:t[a].name})}),e}}}]);
//# sourceMappingURL=58.3b0363d6.chunk.js.map