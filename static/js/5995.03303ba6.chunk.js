"use strict";(self.webpackChunkhrmfinance=self.webpackChunkhrmfinance||[]).push([[5995,9760],{9760:(e,l,o)=>{o.r(l),o.d(l,{CloseModal:()=>r,OpenModal:()=>c,default:()=>s});var i=o(2791),t=o(5408),d=o(2350),n=o(184);const a="listDialog_mdh392",s=()=>{const e=(0,d.bh)("listDialog")||{};(0,t.Z)(a);let l=Object.keys(e);return(0,n.jsx)(n.Fragment,{children:l.map(((l,o)=>{let t=e[l];if(t&&t.visible){let e={};t.height&&(e.heigth=t.height),t.width,t.zIndex&&(e.zIndex=t.zIndex-1);let o={zIndex:t.zIndex},d=null,a=t.data;return t.content&&(d=i.cloneElement(t.content,{data:a})),(0,n.jsxs)("div",{className:"ltr-1kbnjow",style:e,children:[(0,n.jsx)("div",{className:"ltr-hoe9xz",children:(0,n.jsx)("div",{className:"ltr-1wao6ny",style:o,id:l,children:d})}),t.data.overlay?(0,n.jsx)("div",{className:"DialogHRMOverlay ".concat(t.visible?"active":""),onClick:()=>{var e;e=l,document.getElementsByTagName("html")[0].classList.remove("has-level-two"),r({id:e})}}):null]},l)}}))})},c=e=>{let l=(0,d.bh)("listDialog")||{},o=(0,d.M5)();l[o]||(l[o]={}),l[o].visible=!0;let i={};e.props?(i=e.props,i.modalID=o):i.modalID=o;let t=document.getElementsByTagName("body")[0];null!==t&&void 0!==t&&t.style&&(t.style.overflowY="hidden"),l[o].isView=e.isView,l[o].observeResize=e.observeResize,l[o].observeResize&&(l[o].observeInterval=setInterval((()=>{let e=document.querySelector("[dialog-key-id='".concat(o,"']")),i=e&&e.getBoundingClientRect();i&&(i.width===l[o].width&&i.height===l[o].height||(l[o].height=i.height+10,l[o].width=i.width,(0,d.Rz)("listDialog",l),(0,d.wt)(a)))}),200)),l[o].display=!0,e.zIndex&&(l[o].zIndex=e.zIndex),e.height&&(l[o].height=e.height),e.width&&(l[o].width=e.width),e.content&&(l[o].content=e.content),l[o].data=i,(0,d.Rz)("listDialog",l),(0,d.wt)(a),setTimeout((()=>{document.getElementsByTagName("html")[0].classList.add("has-level-two"),(0,d.Rz)("modalOpen",o),(0,d.wt)(a)}),125)},r=e=>{let l=(0,d.bh)("listDialog")||{},o=e.id;if(l[o]){var i,t,n;l[o].observeResize&&l[o].observeInterval&&clearInterval(l[o].observeInterval),l[o].display=!1,null===(i=l[o])||void 0===i||null===(t=i.data)||void 0===t||null===(n=t.closeEvent)||void 0===n||n.call(t),(0,d.Rz)("listDialog",l),delete l[o],document.getElementsByTagName("body")[0].style.overflowY=null,(0,d.wt)(a),setTimeout((()=>{delete l[o],document.getElementsByTagName("html")[0].classList.remove("has-level-two"),(0,d.Rz)("modalOpen",null)}),750)}}},1232:(e,l,o)=>{o.d(l,{GP:()=>s,N$:()=>n,hF:()=>r,i7:()=>t,nr:()=>d,pj:()=>v});var i=o(2350);const t=async(e,l)=>{var o,t;let d={...null===(o=(0,i.bh)((0,i.hQ)()))||void 0===o?void 0:o.filter_search_opera};d.params={businessId:null===(t=(0,i.bh)("profileUser"))||void 0===t?void 0:t.businessId,":account":null===e||void 0===e?void 0:e.account,":subAccount":null===e||void 0===e?void 0:e.subAccount,year:(0,i.bh)("date_current_year")};const n=(0,i.I7)(d),s=await n;if(s&&!s.error){(0,i.Rz)("collect_list",s),(0,i.Rz)("collect_by_doc",a(s)),(0,i.Rz)("collect_by_docM",a(s));let l=(null===e||void 0===e?void 0:e.account)+"_"+(null===e||void 0===e?void 0:e.subAccount);c(s,l)}l&&l()},d=async(e,l)=>{var o,t;let d={...null===(o=(0,i.bh)((0,i.hQ)()))||void 0===o?void 0:o.filter_search_opera};d.params={businessId:null===(t=(0,i.bh)("profileUser"))||void 0===t?void 0:t.businessId,":account":null===e||void 0===e?void 0:e.account,":subAccount":null===e||void 0===e?void 0:e.subAccount,year:(0,i.bh)("date_current_year")};const n=(0,i.I7)(d),s=await n;if(s&&!s.error){(0,i.Rz)("toPay_list",s),(0,i.Rz)("toPay_by_doc",a(s,!0)),(0,i.Rz)("toPay_by_docM",a(s,!0));let l=(null===e||void 0===e?void 0:e.account)+"_"+(null===e||void 0===e?void 0:e.subAccount);c(s,l)}l&&l()},n=async e=>{var l,o;let t={...null===(l=(0,i.bh)((0,i.hQ)()))||void 0===l?void 0:l.search_opera};t.params={businessId:null===(o=(0,i.bh)("profileUser"))||void 0===o?void 0:o.businessId,":search":(0,i.bh)("search_acc_record"),year:(0,i.bh)("date_current_year")};const d=(0,i.I7)(t),n=await d;n&&!n.error&&((0,i.Rz)("comprobante_list",n),(0,i.Rz)("comprobante_by_doc",a(n))),e&&e()};function a(e,l){var o={};let t=e&&(0,i._2)(e);return t.length>0?t.map((t=>{var d;let n=e[t],a=null===(d=n.document)||void 0===d?void 0:d.trim();if(!o[a]){o[a]={},["date","description","document","entryName"].forEach((e=>{o[a][e]=n[e]})),o[a].amount=0,o[a].operations=[]}if(n.type){let e=(0,i.Zv)(n.amount,2),t=(0,i.Zv)(o[a].amount,2),d=0;d=l?1*t+e*("debit"===n.type?-1:1):1*t+e*("credit"===n.type?-1:1),o[a].amount=(0,i.Zv)(d,2),o[a].operations.push(function(e){var l,o;let t={};t.account=null===(l=(0,i.bh)("account_ids"))||void 0===l?void 0:l[e.account],t.sub_account=null===(o=(0,i.bh)("sub_account_ids"))||void 0===o?void 0:o[e.subAccount],t.comprobanteId=e.comprobanteId,t.operationId=e.operationId,t.date=e.date,t.description=e.description;let d=(0,i.Zv)(e.amount,2);"credit"===e.type?(t.debit=0,t.credit=d):"debit"===e.type&&(t.credit=0,t.debit=d);return t}(n))}})):o=null,o}const s=(e,l,o)=>(0,i.MV)("SumDocuments",[e,l,o],(()=>{var o;let t=0;return e&&(null===(o=(0,i._2)(e))||void 0===o||o.map(((o,i)=>{var d;t+=1*(null===(d=e[o])||void 0===d?void 0:d[l])}))),t})),c=async(e,l,o)=>{let t=(0,i.bh)("rec_by_acc")||{};t[l]=((e,l,o)=>{var t;let d=0;return e&&(null===(t=(0,i._2)(e))||void 0===t||t.map(((l,o)=>{var t;let n=(0,i.Zv)(e[l].amount,2);d+=n*("credit"===(null===(t=e[l])||void 0===t?void 0:t.type)?-1:1)}))),d})(e)||"no",(0,i.Rz)("rec_by_acc",t),o&&o()},r=async(e,l,o)=>{var t,d;let n={...null===(t=(0,i.bh)((0,i.hQ)()))||void 0===t?void 0:t.filter_search_opera};n.params={businessId:null===(d=(0,i.bh)("profileUser"))||void 0===d?void 0:d.businessId,":account":null===e||void 0===e?void 0:e.account,":subAccount":null===e||void 0===e?void 0:e.subAccount,year:(0,i.bh)("date_current_year")};const a=(0,i.I7)(n),s=await a;s&&!s.error&&c(s,l),o&&o()},v=async(e,l,o)=>{var t,d;let n={...null===(t=(0,i.bh)((0,i.hQ)()))||void 0===t?void 0:t.search_subacc_acc};n.params={businessId:null===(d=(0,i.bh)("profileUser"))||void 0===d?void 0:d.businessId,":account":e,":search":l,year:(0,i.bh)("date_current_year")};const a=(0,i.I7)(n),s=await a;if(s&&!s.error){var c;let e=null===(c=(0,i._2)(s))||void 0===c?void 0:c[0];o&&o(s[e])}}},5995:(e,l,o)=>{o.r(l),o.d(l,{default:()=>x});var i=o(2791),t=o(2350),d=(o(2052),o(5114)),n=o(9760),a=o(6677),s=o(2647),c=o(184);const r=e=>{let{data:l,confirm:o,handleClick:i,close:t}=e;const{modalID:d}=l,a=e=>{(0,n.CloseModal)({id:d})};return(0,c.jsxs)("div",{style:{maxHeight:"40vh",minHeight:"28vh",overflow:"auto",background:"#fff",borderRadius:13,padding:"10px 19px"},children:[(0,c.jsxs)("div",{className:"_dsplFlx ",children:[(0,c.jsx)("p",{className:"form_title",children:"Eliminar Comprobante"}),(0,c.jsx)("div",{className:"flexSpace"})]}),(0,c.jsx)("div",{className:"_dsplFlx ",children:(0,c.jsx)("span",{children:"Una vez eliminado no podra ser recuperado"})}),(0,c.jsxs)("div",{className:"_dsplFlx ",style:{padding:"15px 10px"},children:[(0,c.jsx)("div",{className:"flexSpace"}),(0,c.jsx)("p",{className:"group_title addBtn",onClick:a,children:"Cancelar"}),(0,c.jsx)("p",{className:"group_title addBtn red",onClick:()=>{o(),a()},children:"Eliminar"})]})]})};var v=o(7689),u=o(1232),h=o(9179);const p=(0,s.PU)(),b=(0,d.if)(),m=(0,s.tW)(),_=(0,h.QC)(),y=(0,h.UC)(),x=e=>{var l,o,d,s,h,x,I,f,g;let{data:z,elmId:N,handleRefreshAll:j}=e;const[R,w]=(0,i.useState)(!1),[C,A]=(0,i.useState)(0),[k,M]=(0,i.useState)(0),S=(0,v.s0)();let O=z.account+"_"+z.subAccount;(0,i.useEffect)((()=>{R||(w(!0),A((0,t.M5)()))}));const Q=()=>{A((0,t.M5)())},D=()=>{(0,a.Je)(Q)},E=e=>{if("provider"===(null===z||void 0===z?void 0:z.type)){let e={account:null===z||void 0===z?void 0:z.account,subAccount:null===z||void 0===z?void 0:z.subAccount,customerId:null===z||void 0===z?void 0:z.customerId};(0,t.Rz)("Acc2Pay",e),(0,u.nr)(e,(()=>{(()=>{(0,t.Rz)("upd_provider",z),(0,t.Rz)("upd_provider_bck",JSON.parse(JSON.stringify(z)));let e={zIndex:450,height:"80vh",props:{minHeight:"1vh",overlay:!0}};e.content=(0,c.jsx)(y,{confirm:D}),(0,n.OpenModal)(e)})()}))}else if("customer"===(null===z||void 0===z?void 0:z.type)){let e={account:null===z||void 0===z?void 0:z.account,subAccount:null===z||void 0===z?void 0:z.subAccount,customerId:null===z||void 0===z?void 0:z.customerId};(0,t.Rz)("Acc2Collect",e),(0,u.i7)(e,(()=>{(()=>{(0,t.Rz)("upd_provider",z),(0,t.Rz)("upd_provider_bck",JSON.parse(JSON.stringify(z)));let e={zIndex:450,height:"80vh",props:{minHeight:"1vh",overlay:!0}};e.content=(0,c.jsx)(_,{confirm:D}),(0,n.OpenModal)(e)})()}))}},P=()=>{(0,a.Qn)(null===z||void 0===z?void 0:z.providerId,j)};(0,a.mQ)(null===(l=(0,t.bh)("sub_provider_group"))||void 0===l?void 0:l[z.providerId],"subProvider");let U="provider"===(null===z||void 0===z?void 0:z.type)&&(null===(o=(0,t.bh)("rec_by_acc"))||void 0===o?void 0:o[O])&&!isNaN(-1*(null===(d=(0,t.bh)("rec_by_acc"))||void 0===d?void 0:d[O])),F="customer"===(null===z||void 0===z?void 0:z.type)&&(null===(s=(0,t.bh)("rec_by_acc"))||void 0===s?void 0:s[O])&&!isNaN(1*(null===(h=(0,t.bh)("rec_by_acc"))||void 0===h?void 0:h[O]));return(0,c.jsx)("div",{className:"item_acc",id:"".concat(O),children:(0,c.jsxs)("div",{className:"_dsplFlx item_box provider_header",onMouseEnter:e=>{var l;null!==(l=(0,t.bh)("rec_by_acc"))&&void 0!==l&&l[O]||(M(!0),(0,u.hF)(z,O,(()=>{setTimeout((()=>{M(!1),Q()}),200)})))},children:[(0,c.jsxs)("div",{className:"_dsplFlx",onClick:async()=>{if((0,t.I0)()){(0,t.Rz)("upd_provider",z),(0,t.Rz)("upd_provider_bck",JSON.parse(JSON.stringify(z)));let e={zIndex:450,height:"80vh",props:{minHeight:"1vh",overlay:!0}};e.content=(0,c.jsx)(b,{confirm:D}),(0,n.OpenModal)(e)}},children:[(0,c.jsx)("div",{className:"code"}),(0,c.jsx)("div",{className:"name",children:null===z||void 0===z?void 0:z.name}),(0,c.jsx)("div",{className:"unit",children:null===z||void 0===z?void 0:z.unit})]}),(0,c.jsx)("div",{className:"flexSpace"}),(0,c.jsx)("div",{className:" addSbAcc purple",onClick:()=>(()=>{if("provider"===(null===z||void 0===z?void 0:z.type)){let e={account:null===z||void 0===z?void 0:z.account,subAccount:null===z||void 0===z?void 0:z.subAccount,customerId:null===z||void 0===z?void 0:z.customerId};(0,t.Rz)("Acc2Pay",e),(0,u.nr)(e,(()=>{S({pathname:"/pay"})}))}else if("customer"===(null===z||void 0===z?void 0:z.type)){let e={account:null===z||void 0===z?void 0:z.account,subAccount:null===z||void 0===z?void 0:z.subAccount,customerId:null===z||void 0===z?void 0:z.customerId};(0,t.Rz)("Acc2Collect",e),(0,u.i7)(e,(()=>{S({pathname:"/collect"})}))}})(),children:"Historial"}),k?(0,c.jsxs)("div",{className:"_dsplFlx",children:[(0,c.jsx)("div",{className:"icon",style:{marginRight:19},children:(0,c.jsx)(m,{stroke:"#646cff",size:24})}),(0,c.jsx)("div",{className:"loading_lbl",children:"cargando ...."})]}):(0,c.jsx)("div",{children:F||U?null!==(x=(0,t.Ch)()[(0,t.bh)("date_current_year")])&&void 0!==x&&x.isClosed?null:(0,c.jsx)("div",{className:" addSbAcc purple",onClick:()=>E(),children:U?"Por Pagar $".concat((-1*(null===(I=(0,t.bh)("rec_by_acc"))||void 0===I?void 0:I[O])).toFixed(2)):F?"Por Cobrar $".concat((1*(null===(f=(0,t.bh)("rec_by_acc"))||void 0===f?void 0:f[O])).toFixed(2)):null}):null}),(0,t.I0)()?null!==(g=(0,t.Ch)()[(0,t.bh)("date_current_year")])&&void 0!==g&&g.isClosed?null:(0,c.jsx)("div",{className:"icon",style:{marginLeft:19},onClick:()=>{let e=(0,t.bh)("lastTimeCallModal")||0;if(Date.now()>e){(0,t.Rz)("lastTimeCallModal",Date.now()+320);let e={zIndex:450,height:"40vh",props:{minHeight:"1vh",overlay:!0,closeEvent:()=>{}}};e.content=(0,c.jsx)(r,{confirm:P,item:z}),(0,n.OpenModal)(e)}},children:(0,c.jsx)(p,{name:"outline_delete",color:"#c62828"})}):null]})})}},6677:(e,l,o)=>{o.d(l,{Je:()=>t,Qn:()=>s,UO:()=>d,mQ:()=>a});var i=o(2350);const t=async e=>{var l,o;let t={...null===(l=(0,i.bh)((0,i.hQ)()))||void 0===l?void 0:l.all_prov_cust};t.params={businessId:null===(o=(0,i.bh)("profileUser"))||void 0===o?void 0:o.businessId,year:(0,i.bh)("date_current_year")};const d=(0,i.I7)(t),a=await d;a&&((0,i.Rz)("providers_list",n((0,i.jQ)(a),"name",1)),(0,i.Rz)("providers_ids",(0,i.ME)((0,i.jQ)(a),"providerId")),e&&e())},d=async e=>{var l,o;let t={...null===(l=(0,i.bh)((0,i.hQ)()))||void 0===l?void 0:l.search_prov_cust};t.params={businessId:null===(o=(0,i.bh)("profileUser"))||void 0===o?void 0:o.businessId,":search":(0,i.bh)("search_prov"),year:(0,i.bh)("date_current_year")};const d=(0,i.I7)(t),a=await d;a&&((0,i.Rz)("providers_list",n((0,i.jQ)(a),"name",1)),e&&e())};const n=(e,l,o)=>(0,i.MV)("sortProviders",[e],(()=>e&&e.sort(((e,i)=>{let t=1*e[l],d=1*i[l];return t<d?o?-1:1:t>d?o?1:-1:0})))),a=(e,l)=>(0,i.MV)("sortSubProviders",[e],(()=>e&&e.sort(((e,o)=>{let i=1*e[l],t=1*o[l];return i<t?-1:i>t?1:0})))),s=async(e,l)=>{var o,t;let d={...null===(o=(0,i.bh)((0,i.hQ)()))||void 0===o?void 0:o.delete_prov_cust};d.params={businessId:null===(t=(0,i.bh)("profileUser"))||void 0===t?void 0:t.businessId,providerId:e,year:(0,i.bh)("date_current_year")};const n=(0,i.I7)(d);await n&&l&&l()}},2052:()=>{}}]);
//# sourceMappingURL=5995.03303ba6.chunk.js.map