"use strict";(self.webpackChunkhrmfinance=self.webpackChunkhrmfinance||[]).push([[5995],{1232:(e,o,i)=>{i.d(o,{GP:()=>a,N$:()=>n,hF:()=>t,i7:()=>d,nr:()=>c,pj:()=>u});var l=i(2350);const d=async(e,o)=>{var i,d;let c={...null===(i=(0,l.bh)((0,l.hQ)()))||void 0===i?void 0:i.filter_search_opera};c.params={businessId:null===(d=(0,l.bh)("profileUser"))||void 0===d?void 0:d.businessId,":account":null===e||void 0===e?void 0:e.account,":subAccount":null===e||void 0===e?void 0:e.subAccount,year:(0,l.bh)("date_current_year")};const n=(0,l.I7)(c),a=await n;if(a&&!a.error){(0,l.Rz)("collect_list",a),(0,l.Rz)("collect_by_doc",r(a)),(0,l.Rz)("collect_by_docM",r(a));let o=(null===e||void 0===e?void 0:e.account)+"_"+(null===e||void 0===e?void 0:e.subAccount);s(a,o)}o&&o()},c=async(e,o)=>{var i,d;let c={...null===(i=(0,l.bh)((0,l.hQ)()))||void 0===i?void 0:i.filter_search_opera};c.params={businessId:null===(d=(0,l.bh)("profileUser"))||void 0===d?void 0:d.businessId,":account":null===e||void 0===e?void 0:e.account,":subAccount":null===e||void 0===e?void 0:e.subAccount,year:(0,l.bh)("date_current_year")};const n=(0,l.I7)(c),a=await n;if(a&&!a.error){(0,l.Rz)("toPay_list",a),(0,l.Rz)("toPay_by_doc",r(a,!0)),(0,l.Rz)("toPay_by_docM",r(a,!0));let o=(null===e||void 0===e?void 0:e.account)+"_"+(null===e||void 0===e?void 0:e.subAccount);s(a,o)}o&&o()},n=async e=>{var o,i;let d={...null===(o=(0,l.bh)((0,l.hQ)()))||void 0===o?void 0:o.search_opera};d.params={businessId:null===(i=(0,l.bh)("profileUser"))||void 0===i?void 0:i.businessId,":search":(0,l.bh)("search_acc_record"),year:(0,l.bh)("date_current_year")};const c=(0,l.I7)(d),n=await c;n&&!n.error&&((0,l.Rz)("comprobante_list",n),(0,l.Rz)("comprobante_by_doc",r(n))),e&&e()};function r(e,o){var i={};let d=e&&(0,l._2)(e);return d.length>0?d.map((d=>{var c;let n=e[d],r=null===(c=n.document)||void 0===c?void 0:c.trim();if(!i[r]){i[r]={},["date","description","document","entryName"].forEach((e=>{i[r][e]=n[e]})),i[r].amount=0,i[r].operations=[]}if(n.type){let e=(0,l.Zv)(n.amount,2),d=(0,l.Zv)(i[r].amount,2),c=0;c=o?1*d+e*("debit"===n.type?-1:1):1*d+e*("credit"===n.type?-1:1),i[r].amount=(0,l.Zv)(c,2),i[r].operations.push(function(e){var o,i;let d={};d.account=null===(o=(0,l.bh)("account_ids"))||void 0===o?void 0:o[e.account],d.sub_account=null===(i=(0,l.bh)("sub_account_ids"))||void 0===i?void 0:i[e.subAccount],d.comprobanteId=e.comprobanteId,d.operationId=e.operationId,d.date=e.date,d.description=e.description;let c=(0,l.Zv)(e.amount,2);"credit"===e.type?(d.debit=0,d.credit=c):"debit"===e.type&&(d.credit=0,d.debit=c);return d}(n))}})):i=null,i}const a=(e,o,i)=>(0,l.MV)("SumDocuments",[e,o,i],(()=>{var i;let d=0;return e&&(null===(i=(0,l._2)(e))||void 0===i||i.map(((i,l)=>{var c;d+=1*(null===(c=e[i])||void 0===c?void 0:c[o])}))),d})),s=async(e,o,i)=>{let d=(0,l.bh)("rec_by_acc")||{};d[o]=((e,o,i)=>{var d;let c=0;return e&&(null===(d=(0,l._2)(e))||void 0===d||d.map(((o,i)=>{var d;let n=(0,l.Zv)(e[o].amount,2);c+=n*("credit"===(null===(d=e[o])||void 0===d?void 0:d.type)?-1:1)}))),c})(e)||"no",(0,l.Rz)("rec_by_acc",d),i&&i()},t=async(e,o,i)=>{var d,c;let n={...null===(d=(0,l.bh)((0,l.hQ)()))||void 0===d?void 0:d.filter_search_opera};n.params={businessId:null===(c=(0,l.bh)("profileUser"))||void 0===c?void 0:c.businessId,":account":null===e||void 0===e?void 0:e.account,":subAccount":null===e||void 0===e?void 0:e.subAccount,year:(0,l.bh)("date_current_year")};const r=(0,l.I7)(n),a=await r;a&&!a.error&&s(a,o),i&&i()},u=async(e,o,i)=>{var d,c;let n={...null===(d=(0,l.bh)((0,l.hQ)()))||void 0===d?void 0:d.search_subacc_acc};n.params={businessId:null===(c=(0,l.bh)("profileUser"))||void 0===c?void 0:c.businessId,":account":e,":search":o,year:(0,l.bh)("date_current_year")};const r=(0,l.I7)(n),a=await r;if(a&&!a.error){var s;let e=null===(s=(0,l._2)(a))||void 0===s?void 0:s[0];i&&i(a[e])}}},5995:(e,o,i)=>{i.r(o),i.d(o,{default:()=>f});var l=i(2791),d=i(2350),c=(i(2052),i(5114)),n=i(9760),r=i(6677),a=i(2647),s=i(184);const t=e=>{let{data:o,confirm:i,handleClick:l,close:d}=e;const{modalID:c}=o,r=e=>{(0,n.CloseModal)({id:c})};return(0,s.jsxs)("div",{style:{maxHeight:"40vh",minHeight:"28vh",overflow:"auto",background:"#fff",borderRadius:13,padding:"10px 19px"},children:[(0,s.jsxs)("div",{className:"_dsplFlx ",children:[(0,s.jsx)("p",{className:"form_title",children:"Eliminar Comprobante"}),(0,s.jsx)("div",{className:"flexSpace"})]}),(0,s.jsx)("div",{className:"_dsplFlx ",children:(0,s.jsx)("span",{children:"Una vez eliminado no podra ser recuperado"})}),(0,s.jsxs)("div",{className:"_dsplFlx ",style:{padding:"15px 10px"},children:[(0,s.jsx)("div",{className:"flexSpace"}),(0,s.jsx)("p",{className:"group_title addBtn",onClick:r,children:"Cancelar"}),(0,s.jsx)("p",{className:"group_title addBtn red",onClick:()=>{i(),r()},children:"Eliminar"})]})]})};var u=i(7689),v=i(1232),p=i(9179);const h=(0,a.PU)(),b=(0,c.if)(),_=(0,a.tW)(),m=(0,p.QC)(),y=(0,p.UC)(),f=e=>{var o,i,c,a,p,f,x,I,j;let{data:N,elmId:z,handleRefreshAll:g}=e;const[R,A]=(0,l.useState)(!1),[C,k]=(0,l.useState)(0),[M,Q]=(0,l.useState)(0),S=(0,u.s0)();let w=N.account+"_"+N.subAccount;(0,l.useEffect)((()=>{R||(A(!0),k((0,d.M5)()))}));const P=()=>{k((0,d.M5)())},U=()=>{(0,r.Je)(P)},O=e=>{if("provider"===(null===N||void 0===N?void 0:N.type)){let e={account:null===N||void 0===N?void 0:N.account,subAccount:null===N||void 0===N?void 0:N.subAccount,customerId:null===N||void 0===N?void 0:N.customerId};(0,d.Rz)("Acc2Pay",e),(0,v.nr)(e,(()=>{(()=>{(0,d.Rz)("upd_provider",N),(0,d.Rz)("upd_provider_bck",JSON.parse(JSON.stringify(N)));let e={zIndex:450,height:"80vh",props:{minHeight:"1vh",overlay:!0}};e.content=(0,s.jsx)(y,{confirm:U}),(0,n.OpenModal)(e)})()}))}else if("customer"===(null===N||void 0===N?void 0:N.type)){let e={account:null===N||void 0===N?void 0:N.account,subAccount:null===N||void 0===N?void 0:N.subAccount,customerId:null===N||void 0===N?void 0:N.customerId};(0,d.Rz)("Acc2Collect",e),(0,v.i7)(e,(()=>{(()=>{(0,d.Rz)("upd_provider",N),(0,d.Rz)("upd_provider_bck",JSON.parse(JSON.stringify(N)));let e={zIndex:450,height:"80vh",props:{minHeight:"1vh",overlay:!0}};e.content=(0,s.jsx)(m,{confirm:U}),(0,n.OpenModal)(e)})()}))}},F=()=>{(0,r.Qn)(null===N||void 0===N?void 0:N.providerId,g)};(0,r.mQ)(null===(o=(0,d.bh)("sub_provider_group"))||void 0===o?void 0:o[N.providerId],"subProvider");let J="provider"===(null===N||void 0===N?void 0:N.type)&&(null===(i=(0,d.bh)("rec_by_acc"))||void 0===i?void 0:i[w])&&!isNaN(-1*(null===(c=(0,d.bh)("rec_by_acc"))||void 0===c?void 0:c[w])),E="customer"===(null===N||void 0===N?void 0:N.type)&&(null===(a=(0,d.bh)("rec_by_acc"))||void 0===a?void 0:a[w])&&!isNaN(1*(null===(p=(0,d.bh)("rec_by_acc"))||void 0===p?void 0:p[w]));return(0,s.jsx)("div",{className:"item_acc",id:"".concat(w),children:(0,s.jsxs)("div",{className:"_dsplFlx item_box provider_header",onMouseEnter:e=>{var o;null!==(o=(0,d.bh)("rec_by_acc"))&&void 0!==o&&o[w]||(Q(!0),(0,v.hF)(N,w,(()=>{setTimeout((()=>{Q(!1),P()}),200)})))},children:[(0,s.jsxs)("div",{className:"_dsplFlx",onClick:async()=>{if((0,d.I0)()){(0,d.Rz)("upd_provider",N),(0,d.Rz)("upd_provider_bck",JSON.parse(JSON.stringify(N)));let e={zIndex:450,height:"80vh",props:{minHeight:"1vh",overlay:!0}};e.content=(0,s.jsx)(b,{confirm:U}),(0,n.OpenModal)(e)}},children:[(0,s.jsx)("div",{className:"code"}),(0,s.jsx)("div",{className:"name",children:null===N||void 0===N?void 0:N.name}),(0,s.jsx)("div",{className:"unit",children:null===N||void 0===N?void 0:N.unit})]}),(0,s.jsx)("div",{className:"flexSpace"}),(0,s.jsx)("div",{className:" addSbAcc purple",onClick:()=>(()=>{if("provider"===(null===N||void 0===N?void 0:N.type)){let e={account:null===N||void 0===N?void 0:N.account,subAccount:null===N||void 0===N?void 0:N.subAccount,customerId:null===N||void 0===N?void 0:N.customerId};(0,d.Rz)("Acc2Pay",e),(0,v.nr)(e,(()=>{S({pathname:"/pay"})}))}else if("customer"===(null===N||void 0===N?void 0:N.type)){let e={account:null===N||void 0===N?void 0:N.account,subAccount:null===N||void 0===N?void 0:N.subAccount,customerId:null===N||void 0===N?void 0:N.customerId};(0,d.Rz)("Acc2Collect",e),(0,v.i7)(e,(()=>{S({pathname:"/collect"})}))}})(),children:"Historial"}),M?(0,s.jsxs)("div",{className:"_dsplFlx",children:[(0,s.jsx)("div",{className:"icon",style:{marginRight:19},children:(0,s.jsx)(_,{stroke:"#646cff",size:24})}),(0,s.jsx)("div",{className:"loading_lbl",children:"cargando ...."})]}):(0,s.jsx)("div",{children:E||J?null!==(f=(0,d.Ch)()[(0,d.bh)("date_current_year")])&&void 0!==f&&f.isClosed?null:(0,s.jsx)("div",{className:" addSbAcc purple",onClick:()=>O(),children:J?"Por Pagar $".concat((-1*(null===(x=(0,d.bh)("rec_by_acc"))||void 0===x?void 0:x[w])).toFixed(2)):E?"Por Cobrar $".concat((1*(null===(I=(0,d.bh)("rec_by_acc"))||void 0===I?void 0:I[w])).toFixed(2)):null}):null}),(0,d.I0)()?null!==(j=(0,d.Ch)()[(0,d.bh)("date_current_year")])&&void 0!==j&&j.isClosed?null:(0,s.jsx)("div",{className:"icon",style:{marginLeft:19},onClick:()=>{let e=(0,d.bh)("lastTimeCallModal")||0;if(Date.now()>e){(0,d.Rz)("lastTimeCallModal",Date.now()+320);let e={zIndex:450,height:"40vh",props:{minHeight:"1vh",overlay:!0,closeEvent:()=>{}}};e.content=(0,s.jsx)(t,{confirm:F,item:N}),(0,n.OpenModal)(e)}},children:(0,s.jsx)(h,{name:"outline_delete",color:"#c62828"})}):null]})})}},6677:(e,o,i)=>{i.d(o,{Je:()=>d,Qn:()=>a,UO:()=>c,mQ:()=>r});var l=i(2350);const d=async e=>{var o,i;let d={...null===(o=(0,l.bh)((0,l.hQ)()))||void 0===o?void 0:o.all_prov_cust};d.params={businessId:null===(i=(0,l.bh)("profileUser"))||void 0===i?void 0:i.businessId,year:(0,l.bh)("date_current_year")};const c=(0,l.I7)(d),r=await c;r&&((0,l.Rz)("providers_list",n((0,l.jQ)(r),"name",1)),(0,l.Rz)("providers_ids",(0,l.ME)((0,l.jQ)(r),"providerId")),e&&e())},c=async e=>{var o,i;let d={...null===(o=(0,l.bh)((0,l.hQ)()))||void 0===o?void 0:o.search_prov_cust};d.params={businessId:null===(i=(0,l.bh)("profileUser"))||void 0===i?void 0:i.businessId,":search":(0,l.bh)("search_prov"),year:(0,l.bh)("date_current_year")};const c=(0,l.I7)(d),r=await c;r&&((0,l.Rz)("providers_list",n((0,l.jQ)(r),"name",1)),e&&e())};const n=(e,o,i)=>(0,l.MV)("sortProviders",[e],(()=>e&&e.sort(((e,l)=>{let d=1*e[o],c=1*l[o];return d<c?i?-1:1:d>c?i?1:-1:0})))),r=(e,o)=>(0,l.MV)("sortSubProviders",[e],(()=>e&&e.sort(((e,i)=>{let l=1*e[o],d=1*i[o];return l<d?-1:l>d?1:0})))),a=async(e,o)=>{var i,d;let c={...null===(i=(0,l.bh)((0,l.hQ)()))||void 0===i?void 0:i.delete_prov_cust};c.params={businessId:null===(d=(0,l.bh)("profileUser"))||void 0===d?void 0:d.businessId,providerId:e,year:(0,l.bh)("date_current_year")};const n=(0,l.I7)(c);await n&&o&&o()}},2052:()=>{}}]);
//# sourceMappingURL=5995.6687df93.chunk.js.map