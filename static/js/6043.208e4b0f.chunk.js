"use strict";(self.webpackChunkhrmfinance=self.webpackChunkhrmfinance||[]).push([[6043],{978:(e,l,a)=>{a.d(l,{Z:()=>t});var s=a(2791),d=(a(4363),a(9760)),i=a(9661),n=a(2350),r=a(184);const c=(0,i.a)(),t=e=>{var l,a;let{data:i,confirm:t,item:o}=e;const[v,m]=(0,s.useState)(0),[u,h]=(0,s.useState)({}),[p,x]=(0,s.useState)(!1);let _=(null===u||void 0===u?void 0:u.account)||(null===o||void 0===o?void 0:o.account),b=(null===u||void 0===u?void 0:u.subAccount)||(null===o||void 0===o?void 0:o.subAccount),j=null===(l=(0,n.bh)("account_ids"))||void 0===l?void 0:l[_],N=null===(a=(0,n.bh)("sub_account_ids"))||void 0===a?void 0:a[b];return(0,r.jsxs)("div",{style:{maxHeight:"80vh",minHeight:"60vh",width:"560px",overflow:"auto",background:"#fff",borderRadius:13,padding:"10px 19px"},children:[(0,r.jsxs)("div",{className:"_dsplFlx ",children:[(0,r.jsx)("p",{className:"form_title",children:"Associar Cuenta"}),(0,r.jsx)("div",{className:"flexSpace"})]}),p?(0,r.jsxs)("div",{className:"_dsplFlx ",style:{margin:"38px 0"},children:[(0,r.jsx)("div",{className:"flexSpace"}),(0,r.jsx)(c,{width:420,handleClick:(e,l)=>{h({account:e,subAccount:l}),x(!1),m((0,n.M5)())}}),(0,r.jsx)("div",{className:"flexSpace"})]}):(0,r.jsx)("div",{className:"_dsplFlx ",style:{margin:"38px 0"},children:(0,r.jsxs)("div",{className:" acc_dtls",children:[(0,r.jsxs)("div",{className:"_dsplFlx",onClick:()=>{x(!0),m((0,n.M5)())},children:[(0,r.jsx)("div",{className:"code",style:{color:"#646cff"},children:null!==j&&void 0!==j&&j.code?null===j||void 0===j?void 0:j.code:"Selecionar cuentas"}),(0,r.jsx)("div",{className:"name",children:null===j||void 0===j?void 0:j.name})]}),N?(0,r.jsxs)("div",{className:"_dsplFlx",style:{margin:"10px 0 0 18px"},children:[(0,r.jsx)("div",{className:"code",children:null===N||void 0===N?void 0:N.subAccount}),(0,r.jsx)("div",{className:"name",children:null===N||void 0===N?void 0:N.subAccountName})]}):null,(0,r.jsx)("div",{className:"flexSpace"})]})}),(0,r.jsx)("div",{className:"card",children:(0,r.jsx)("button",{onClick:()=>{t&&t(u),(0,d.CloseModal)({id:i.modalID})},children:"Associar"})})]})}},6043:(e,l,a)=>{a.r(l),a.d(l,{default:()=>he});var s=a(2791),d=(a(1636),a(2350)),i=a(4050),n=a(9760),r=a(2647),c=a(7689),t=a(184);const o=(0,r.PU)(),v=(0,r.Vg)(),m=(0,r.tW)(),u="ourBank2S",h=e=>{var l;let{data:a,operations:r,accountD:h,subaccountD:p}=e;const[x,_]=(0,s.useState)(0),[b,j]=(0,s.useState)(!1),[N,g]=(0,s.useState)(!1),[f,y]=(0,s.useState)(""),[k,I]=(0,s.useState)(!1),[C,F]=(0,s.useState)(!1),[S,w]=(0,s.useState)(!1);(0,s.useEffect)((()=>{}),[h]);const R=()=>{_((0,d.M5)()),I(!1)},M=((0,c.s0)(),()=>{F(!1),(0,n.CloseModal)({id:a.modalID})});return(0,t.jsxs)("div",{style:{maxHeight:"80vh",width:"90vw",overflow:"auto",background:"var(--hrm_palette-general-background-b)",borderRadius:13,padding:"10px 19px 30px"},children:[(0,t.jsxs)("div",{className:"_dsplFlx ",children:[(0,t.jsx)("p",{className:"title_collect",children:"Registros del Banco"}),(0,t.jsx)("div",{className:"flexSpace"}),(0,t.jsx)("p",{className:"group_title addBtn purple",onClick:e=>{},children:"Exportar a CSV"})]}),(0,t.jsxs)("div",{className:"_dsplFlx ",style:{marginTop:14},children:[(0,t.jsx)("div",{style:{marginTop:11},children:(0,t.jsx)(v,{placeholder:"Buscar ....",width:560,obs:_,fetchData:R,loading:k,change:e=>{!k&&I(!0),y(e)},callempty:R,keyFlds:"search_h65767"})}),(0,t.jsx)("div",{style:{marginLeft:15}}),(0,t.jsx)("div",{className:"_dsplFlx cmp_dtls",children:(0,t.jsxs)("div",{className:"_dsplFlx",children:[(0,t.jsxs)("div",{className:"filter_btn _dsplFlx",onClick:()=>{},children:[(0,t.jsx)("div",{className:"lbl",children:b?"Filtrando":"Filtrar"}),(0,t.jsx)(o,{name:b?"cancel":"filter",color:"#66666"})]}),b?(0,t.jsx)("div",{className:"done_btn _dsplFlx",style:{borderColor:N?"var(--hrm_palette-success-fg)":"#c62828",marginLeft:9},onClick:()=>{},children:(0,t.jsx)(o,{name:N?"check_circle":"alert",color:N?"var(--hrm_palette-success-fg)":"#c62828"})}):null]})}),(0,t.jsx)("div",{className:"flexSpace"}),(0,t.jsx)("div",{children:C?(0,t.jsx)("div",{className:"icon_compr",children:(0,t.jsx)(m,{stroke:"#646cff",size:38,strokeW:6})}):(0,t.jsx)("div",{className:" addBtn purple btn_purpl_fweight",style:{marginTop:20},onClick:e=>{F(!0);let l=[];(0,d.bh)(u).map((e=>{var a,s;let i={...e};i.status=4;let n={...null===(a=(0,d.bh)((0,d.hQ)()))||void 0===a?void 0:a.add_bank_bUp};n.params={businessId:null===(s=(0,d.bh)("profileUser"))||void 0===s?void 0:s.businessId,year:(0,d.bh)("date_current_year")},n.form=i,l.push(n)})),(0,i.fp)(l,M)},children:"Save"})})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"_dsplFlx hdr_bar purple",children:[(0,t.jsx)("div",{className:"tr_bar_20",children:"Fecha"}),(0,t.jsx)("div",{className:"tr_bar_40",children:"Descripcion"}),(0,t.jsx)("div",{className:"tr_bar_20",children:"No cheque"}),(0,t.jsx)("div",{className:"tr_bar_20",children:"Importe"})]}),(0,t.jsx)("div",{className:"scollVh subMHeight",children:(0,d.bh)(u)&&(null===(l=(0,d.bh)(u))||void 0===l?void 0:l.map(((e,l)=>{var a;return(0,t.jsxs)("div",{className:"_dsplFlx hdr_bar",children:[(0,t.jsx)("div",{className:"tr_bar_20",children:e.date&&(0,d.sJ)(e.date)}),(0,t.jsx)("div",{className:"tr_bar_40 desc_font",children:e.description}),(0,t.jsx)("div",{className:"tr_bar_20",children:e.checkOrSlip}),(0,t.jsx)("div",{className:"tr_bar_20",children:null===(a=1*e.amount)||void 0===a?void 0:a.toFixed(2)})]},l)})))})]})]})};a(4363);const p=e=>{let{data:l,confirm:a,lbl_p:s,lbl_span:d,lbl_btn:i,theme:r}=e;const{modalID:c}=l,o=e=>{(0,n.CloseModal)({id:c})};return(0,t.jsxs)("div",{style:{maxHeight:"40vh",minHeight:"20vh",overflow:"auto",background:"var(--hrm_palette-general-background-b)",borderRadius:13,padding:"10px 19px"},children:[(0,t.jsxs)("div",{className:"_dsplFlx ",children:[(0,t.jsx)("p",{className:"form_title",children:s}),(0,t.jsx)("div",{className:"flexSpace"})]}),(0,t.jsx)("div",{className:"_dsplFlx ",children:(0,t.jsx)("span",{children:d})}),(0,t.jsxs)("div",{className:"_dsplFlx ",style:{padding:"15px 10px"},children:[(0,t.jsx)("div",{className:"flexSpace"}),(0,t.jsx)("p",{className:"group_title addBtn",onClick:o,children:"Cancelar"}),(0,t.jsx)("p",{className:"group_title addBtn ".concat(r||"red"),onClick:()=>{a(),o()},children:i})]})]})};var x=a(4304),_=a(24),b=a(978);const j=(0,r.PU)(),N=(0,r.JC)(),g=((0,r.tW)(),(0,r.Np)()),f=(0,_.f_)(),y="cmp_from_bank",k=e=>{var l,a,i,r,o;let{data:v,item:m,handleRefreshAll:u}=e;const[h,p]=(0,s.useState)(!1),[x,_]=(0,s.useState)(0);(0,c.s0)();(0,s.useEffect)((()=>{if(!h){var e,l;p(!0);let a="debit",s="credit",i={...m},n=null===i||void 0===i?void 0:i.amount;(null===i||void 0===i?void 0:i.amount)<0&&(a="credit",s="debit",n=-1*(null===i||void 0===i?void 0:i.amount));let r=null===i||void 0===i?void 0:i.description;b("description",r),b("date",1*(null===i||void 0===i?void 0:i.date)),i.document||b("document",(0,d.UG)(1*(null===i||void 0===i?void 0:i.date))+"_"+(0,d.LO)());let c=null===(e=(0,d.bh)("categories_ids"))||void 0===e?void 0:e[null===i||void 0===i?void 0:i.categoryId],t={};t.amount=n,t.movementId=null===i||void 0===i?void 0:i.movementId,t.description=r,t.date=null===i||void 0===i?void 0:i.date;let o={...t};t.account=null===(l=(0,d.bh)("global_account_params"))||void 0===l?void 0:l.cash_bank.account,t.type=a,o.account=null===c||void 0===c?void 0:c.account,null!==c&&void 0!==c&&c.subAccount&&(o.subAccount=null===c||void 0===c?void 0:c.subAccount),o.type=s,(0,d.Rz)("cmpListfromMbl",[o,t]),_((0,d.M5)())}}),[null===(l=(0,d.bh)(y))||void 0===l?void 0:l.movementId]);const b=(e,l,a)=>{let s=(0,d.bh)(y)||{};a?(s[a]||(s[a]={}),s[a][e]=l):s[e]=l,(0,d.Rz)(y,s),_((0,d.M5)())};return(0,t.jsxs)("div",{style:{maxHeight:"90vh",minHeight:"88vh",width:"960px",overflow:"auto",background:"var(--hrm_palette-general-background-b)",borderRadius:13,padding:"10px 19px"},children:[(0,t.jsxs)("div",{className:"_dsplFlx ",children:[(0,t.jsx)("p",{className:"form_title",children:"Associar Asiento"}),(0,t.jsx)("div",{className:"flexSpace"}),null!==m&&void 0!==m&&m.imagePath?(0,t.jsx)("p",{className:"group_title addBtn purple",onClick:()=>{},children:"See Image"}):null]}),(0,t.jsxs)("div",{className:"_dsplFlx ",children:[(0,t.jsx)(f,{init:null===(a=(0,d.bh)(y))||void 0===a?void 0:a.date,updDate:e=>b("date",e)}),(0,t.jsx)("div",{className:"flexSpace"}),(0,t.jsx)(g,{init:null===(i=(0,d.bh)(y))||void 0===i?void 0:i.document,label:"Documento",width:120,updChanges:e=>b("document",e)})]}),(0,t.jsx)("div",{className:"_dsplFlx ",children:(0,t.jsx)(g,{init:null===(r=(0,d.bh)(y))||void 0===r?void 0:r.description,label:"Descripcion",width:520,updChanges:e=>b("description",e)})}),(0,t.jsx)("div",{style:{marginTop:19},children:(0,t.jsx)(C,{item:(0,d.bh)("cmpListfromMbl"),updFrm:b,document:null===(o=(0,d.bh)(y))||void 0===o?void 0:o.document})}),(0,t.jsxs)("div",{className:"_dsplFlx ",style:{margin:"32px 32px 0 0"},children:[(0,t.jsx)("div",{className:"flexSpace"}),(0,t.jsx)(I,{clickHandler:async()=>{var e,l,a;let s={...(0,d.bh)(y)};s.date?s.date=new Date(s.date).getTime()+4800:s.date=(new Date).getTime()+4800;let i=await(0,d.fN)(s.date);s.comprobanteId=i,s.document||(s.document=(0,d.LO)()+"_"+(0,d.UG)(s.date));let r=[];(0,d.bh)("cmpListfromMbl")&&(null===(e=(0,d._2)((0,d.bh)("cmpListfromMbl")))||void 0===e||e.map((async(e,l)=>{let a=(0,d.bh)("cmpListfromMbl")[e];if(!isNaN(1*a.amount)&&1*a.amount>0){var i,n;let e={...s};e.account=a.account,a.subAccount&&(e.subAccount=a.subAccount),e.movementRef=m.movementId,e.type=a.type,e.amount=1*a.amount,e.operationId=(0,d.M5)();let l={...null===(i=(0,d.bh)((0,d.hQ)()))||void 0===i?void 0:i.add_opera};l.params={businessId:null===(n=(0,d.bh)("profileUser"))||void 0===n?void 0:n.businessId,year:new Date(s.date).getFullYear()},l.form=e,r.push(l)}})));let c={...null===(l=(0,d.bh)((0,d.hQ)()))||void 0===l?void 0:l.upd__incms_expns};c.params={businessId:null===(a=(0,d.bh)("profileUser"))||void 0===a?void 0:a.businessId,movementId:m.movementId,year:(0,d.bh)("date_current_year")},c.data2update={comprobanteId:i},r.push(c);const t=r.map((async e=>{const l=(0,d.I7)(e);await l}));await Promise.all(t),setTimeout((()=>{(0,d.Rz)("cmpListfromMbl",null),(0,d.Rz)(y,null),(null===v||void 0===v?void 0:v.modalID)&&(0,n.CloseModal)({id:null===v||void 0===v?void 0:v.modalID})}),400)},label:"Salvar"})]})]})},I=e=>{let{clickHandler:l,label:a}=e;return(0,t.jsx)("button",{className:"gHAsFI dqnOfN jUrKkb",onClick:l,children:(0,t.jsx)("div",{className:" jaqJnq",children:a})})},C=e=>{let{item:l,updFrm:a,document:d}=e;const[i,n]=(0,s.useState)(0);return(0,t.jsxs)(x.lp,{children:[(0,t.jsx)("div",{className:"iMTYiw hiKoiM",children:"Comprobante Contables"}),(0,t.jsx)("div",{className:"_dsplFlx w_100prc",style:{marginTop:19}}),(0,t.jsxs)("div",{className:"_dsplFlx w_100prc",children:[(0,t.jsx)("div",{className:"igLyC tr_bar_20 pddBtm-12",children:(0,t.jsx)("div",{className:"txfnt_lfal whi_headr",children:"Cuenta"})}),(0,t.jsx)("div",{className:"igLyC tr_bar_20 pddBtm-12",children:(0,t.jsx)("div",{className:"txfnt_lfal whi_headr",children:"Sub Cuenta"})}),(0,t.jsx)("div",{className:"igLyC tr_bar_30 pddBtm-12",children:(0,t.jsx)("div",{className:"txfnt_lfal whi_headr",children:"Documento"})}),(0,t.jsx)("div",{className:"igLyC tr_bar_15 pddBtm-12 tr_bar_15",children:(0,t.jsx)("div",{className:"txt_al_r whi_headr",children:"debito"})}),(0,t.jsx)("div",{className:"igLyC tr_bar_15 pddBtm-12 tr_bar_15",children:(0,t.jsx)("div",{className:"txt_al_r whi_headr",children:"Credito"})})]}),l&&l.map(((e,l)=>(0,t.jsx)(F,{item:e,document:d,index:l,onChange:n},e.movementId+"_"+l)))]})},F=e=>{var l,a;let{index:s,item:i,document:r,keyFld:c,onChange:o}=e;const v=e=>{};let m=null===(l=(0,d.bh)("account_ids"))||void 0===l?void 0:l[null===i||void 0===i?void 0:i.account],u=null===(a=(0,d.bh)("sub_account_ids"))||void 0===a?void 0:a[null===i||void 0===i?void 0:i.subAccount];const h=e=>{let l=(0,d.bh)("cmpListfromMbl");l[s].account=null===e||void 0===e?void 0:e.account,null!==e&&void 0!==e&&e.subAccount&&(l[s].subAccount=null===e||void 0===e?void 0:e.subAccount),(0,d.Rz)("cmpListfromMbl",l),o((0,d.M5)())};return(0,t.jsxs)("div",{className:"_dsplFlx w_100prc",children:[(0,t.jsx)("div",{className:"igLyC light_300_color tr_bar_20 pddBtm-12",children:(0,t.jsx)("div",{className:"txfnt_lfal",children:m?(0,t.jsx)(N,{data:m,color:"var(--light-300)",labelField:"code",infoField:"name"}):(0,t.jsx)("div",{onClick:()=>{var e;let l={zIndex:450,height:"80vh",props:{minHeight:"1vh",overlay:!0}};l.content=(0,t.jsx)(b.Z,{item:null===i||void 0===i||null===(e=i[c])||void 0===e?void 0:e.account,confirm:h}),(0,n.OpenModal)(l)},children:(0,t.jsx)(j,{name:"help-circle-outline",color:"var(--light-300)"})})})}),(0,t.jsx)("div",{className:"igLyC light_300_color tr_bar_20 pddBtm-12",children:(0,t.jsx)("div",{className:"txfnt_lfal",children:(0,t.jsx)(N,{data:u,color:"var(--light-300)",labelField:"subAccount",infoField:"subAccountName"})})}),(0,t.jsx)("div",{className:"igLyC light_300_color tr_bar_30 pddBtm-12",children:(0,t.jsx)("div",{className:"txfnt_lfal",children:r})}),"debit"===i.type?(0,t.jsx)(S,{keyFld:"amount",item:i,onChange:v}):(0,t.jsx)("div",{className:"igLyC light_300_color tr_bar_15",children:(0,t.jsx)("div",{className:" txt_al_r",children:"0.00"})}),"credit"===i.type?(0,t.jsx)(S,{keyFld:"amount",item:i,onChange:v}):(0,t.jsx)("div",{className:"igLyC light_300_color tr_bar_15",children:(0,t.jsx)("div",{className:" txt_al_r",children:"0.00"})})]})},S=e=>{let{label:l,item:a,onChange:i,keyFld:n,percentDefault:r}=e;const[c,o]=(0,s.useState)(0),[v,m]=(0,s.useState)(0),u=e=>{m(e.target.value)},h=e=>{13===e.keyCode&&((0,d.UE)(v)&&i&&i(n,v),o(!1))};v||null===a||void 0===a||a[n];return c?(0,t.jsx)("div",{className:"igLyC light_300_color tr_bar_15",children:(0,t.jsx)("input",{className:"inpyt_tx",type:"number","aria-haspopup":"false","auto-capitalize":"off","auto-complete":"off","auto-correct":"off","spell-check":"false",onChange:u,onKeyDown:h})}):(0,t.jsx)("div",{className:"igLyC light_300_color tr_bar_15",onClick:()=>o(!c),children:(0,t.jsx)("div",{className:" txt_al_r",children:(1*a[n]).toFixed(2)})})},w=(0,r.PU)(),R=(0,r.Vg)(),M=((0,r.tW)(),e=>{var l,a;let{data:r,item:c}=e;const[,o]=(0,s.useState)(0),[v,m]=(0,s.useState)(""),[u,h]=(0,s.useState)(!1),x=e=>{m(e),u&&h(!1)},_=()=>{(0,n.CloseModal)({id:r.modalID})},b=async e=>{var l,a;let s={...null===(l=(0,d.bh)((0,d.hQ)()))||void 0===l?void 0:l.upd_bank_bUp};s.params={businessId:null===(a=(0,d.bh)("profileUser"))||void 0===a?void 0:a.businessId,bankRecordId:c.bankRecordId,year:(0,d.bh)("date_current_year")},s.data2update={linkId:e.operationId,document:e.document,comprobanteId:e.comprobanteId,status:9};const n=(0,d.I7)(s);await n&&(0,i.Pe)(_)};return(0,t.jsxs)("div",{style:{maxHeight:"96vh",width:"90vw",overflow:"auto",background:"var(--hrm_palette-general-background-b)",borderRadius:13,padding:"10px 19px 30px"},children:[(0,t.jsxs)("div",{className:"_dsplFlx ",children:[(0,t.jsx)("p",{className:"title_collect",children:"Associar comprobante Manual"}),(0,t.jsx)("div",{className:"flexSpace"})]}),(0,t.jsx)("div",{className:"_dsplFlx ",style:{marginTop:14},children:(0,t.jsx)("div",{style:{marginTop:11},children:(0,t.jsx)(R,{placeholder:"Buscar ....",width:560,obs:o,fetchData:x,loading:u,change:e=>{!u&&h(!0),m(e)},callempty:x,keyFlds:"search_h65767"})})}),(0,t.jsxs)("div",{style:{marginTop:14},children:[(0,t.jsxs)("div",{className:"_dsplFlx hdr_bar green",style:{margin:"6px 0"},children:[(0,t.jsx)("div",{className:"tr_bar_5",children:(0,t.jsx)("div",{onClick:e=>{let l={zIndex:450,height:"80vh",props:{minHeight:"1vh",overlay:!0}};l.content=(0,t.jsx)(k,{item:c}),(0,n.OpenModal)(l)},children:(0,t.jsx)(w,{name:"tag-outline",color:"var(--hrm_palette-success-fg)"})})}),(0,t.jsx)("div",{className:"tr_bar_10",children:c.date&&(0,d.sJ)(c.date)}),(0,t.jsx)("div",{className:"tr_bar_15",children:c.comprobanteId}),(0,t.jsx)("div",{className:"tr_bar_40 desc_font",children:c.description}),(0,t.jsx)("div",{className:"tr_bar_15",children:c.checkOrSlip}),(0,t.jsx)("div",{className:"tr_bar_15",children:null===(l=1*c.amount)||void 0===l?void 0:l.toFixed(2)})]}),(0,t.jsxs)("div",{className:"_dsplFlx hdr_bar purple",children:[(0,t.jsx)("div",{className:"tr_bar_15",children:"Fecha"}),(0,t.jsx)("div",{className:"tr_bar_15",children:"Comprobante"}),(0,t.jsx)("div",{className:"tr_bar_40",children:"Descripcion"}),(0,t.jsx)("div",{className:"tr_bar_15",children:"No cheque"}),(0,t.jsx)("div",{className:"tr_bar_15",children:"Importe"})]}),(0,t.jsx)("div",{className:"scollVh subMHeight",children:(0,d.bh)("submayor_list")&&(null===(a=(0,d._2)((0,d.bh)("submayor_list")))||void 0===a?void 0:a.map(((e,l)=>{var a,s;let i=null===(a=(0,d.bh)("submayor_list"))||void 0===a?void 0:a[e];return v&&!D(i,v)?null:(0,t.jsxs)("div",{className:"_dsplFlx hdr_bar manual_vrfy",children:[(0,t.jsx)("div",{className:"tr_bar_10",children:i.date&&(0,d.sJ)(i.date)}),(0,t.jsx)("div",{className:"tr_bar_15 comprobanteId",onClick:()=>(e=>{let l={zIndex:450,height:"80vh",props:{minHeight:"1vh",overlay:!0}};l.content=(0,t.jsx)(p,{item:e,lbl_p:"Associar con el banco",lbl_span:"esta seguro que desea associar el comprobante ".concat(e.comprobanteId," a la cuenta de banco"),lbl_btn:"Confirm",theme:"purple",confirm:()=>b(e)}),(0,n.OpenModal)(l)})(i),children:i.comprobanteId}),(0,t.jsx)("div",{className:"tr_bar_40 desc_font",children:i.description}),(0,t.jsx)("div",{className:"tr_bar_15",children:i.document}),(0,t.jsx)("div",{className:"tr_bar_15",children:null===(s=1*i.amount)||void 0===s?void 0:s.toFixed(2)})]},l)})))})]})]})}),D=(e,l)=>{let a=l.toLowerCase(),s=!1;return["description","amount","document","comprobanteId"].map((l=>{var d,i,n;e[l]&&(null===(d=e[l])||void 0===d||null===(i=d.toString())||void 0===i||null===(n=i.toLowerCase())||void 0===n?void 0:n.indexOf(a))>=0&&(s=!0)})),s},T=(0,r.tW)(),B=e=>{var l;let{data:a,item:r,confirm:c}=e;const[o,v]=(0,s.useState)(0),[m,u]=(0,s.useState)(!1),h=()=>{u(!1),(0,n.CloseModal)({id:a.modalID}),c&&c()};let p=r.operationId||r.linkId,x=null===(l=(0,d.bh)("submayor_list"))||void 0===l?void 0:l[p],_=x||!r.linkId||r.operationId&&r.operationId!==r.linkId;return(0,t.jsxs)("div",{style:{height:"93vh",width:"860px",overflow:"auto",background:"var(--hrm_palette-general-background-b)",borderRadius:13,padding:"10px 19px 30px"},children:[(0,t.jsxs)("div",{className:"_dsplFlx ",children:[(0,t.jsx)("p",{className:"title_collect",children:"Comparar Comprobante con el Banco"}),(0,t.jsx)("div",{className:"flexSpace"}),(0,t.jsx)("div",{className:"group_title addBtn purple upl",onClick:()=>{let e={zIndex:450,height:"80vh",props:{minHeight:"1vh",overlay:!0}};e.content=(0,t.jsx)(M,{item:r}),(0,n.OpenModal)(e),h()},children:"Manual"}),_?m?(0,t.jsxs)("div",{className:"icon_compr _dsplFlx",style:{marginTop:12},children:[(0,t.jsx)("div",{className:"lbl_saving",children:"Linking ..."}),(0,t.jsx)(T,{stroke:"#646cff",size:24,strokeW:8})]}):(0,t.jsx)("div",{className:"group_title addBtn purple upl",onClick:()=>(async e=>{var l,a;u(!0);let s={...null===(l=(0,d.bh)((0,d.hQ)()))||void 0===l?void 0:l.upd_bank_bUp};s.params={businessId:null===(a=(0,d.bh)("profileUser"))||void 0===a?void 0:a.businessId,bankRecordId:r.bankRecordId,year:(0,d.bh)("date_current_year")},s.data2update={linkId:e.operationId,document:e.document,comprobanteId:e.comprobanteId,status:9};const n=(0,d.I7)(s);await n&&(0,i.Pe)(h)})(r),children:"Associar"}):null]}),(0,t.jsxs)("div",{className:"_dsplFlx  spaceAround flxWrp",style:{marginTop:24},children:[(0,t.jsxs)("div",{className:"boxCmp2compare green",children:[(0,t.jsx)("div",{className:"boxCmp2compare_title",children:"Registro del Banco"}),(0,t.jsxs)("div",{className:"boxCmp2compare_body",children:[(0,t.jsxs)("div",{className:"_dsplFlx",children:[(0,t.jsx)("div",{className:"flexSpace"}),(0,t.jsxs)("div",{className:"_dsplFlx",children:[(0,t.jsx)("div",{className:"lbl",children:"Fecha:"}),(0,t.jsx)("div",{className:"value",children:r.date&&(0,d.sJ)(r.date)})]})]}),(0,t.jsxs)("div",{className:"_dsplFlx",children:[(0,t.jsx)("div",{className:"flexSpace"}),(0,t.jsxs)("div",{className:"_dsplFlx",children:[(0,t.jsx)("div",{className:"lbl",children:"Importe:"}),(0,t.jsxs)("div",{className:"value",children:["$",r.amount]})]})]}),(0,t.jsxs)("div",{className:"_dsplFlx",children:[(0,t.jsx)("div",{className:"flexSpace"}),(0,t.jsxs)("div",{className:"_dsplFlx",children:[(0,t.jsx)("div",{className:"lbl",children:"No Cheque:"}),(0,t.jsx)("div",{className:"value",children:r.checkOrSlip})]})]}),(0,t.jsxs)("div",{className:"_dsplFlx",children:[(0,t.jsx)("div",{className:"flexSpace"}),(0,t.jsxs)("div",{className:"_dsplFlx",children:[(0,t.jsx)("div",{className:"lbl",children:"Comprobante:"}),(0,t.jsx)("div",{className:"value",children:r.comprobanteId})]})]}),(0,t.jsx)("div",{className:"_dsplFlx",children:(0,t.jsx)("div",{className:"_dsplFlx",children:(0,t.jsx)("div",{className:"value small",children:r.description})})})]})]}),(0,t.jsxs)("div",{className:"boxCmp2compare purple",children:[(0,t.jsx)("div",{className:"boxCmp2compare_title",children:"Comprobante en Contabilidad"}),(0,t.jsxs)("div",{className:"boxCmp2compare_body",children:[(0,t.jsxs)("div",{className:"_dsplFlx",children:[(0,t.jsx)("div",{className:"flexSpace"}),(0,t.jsxs)("div",{className:"_dsplFlx",children:[(0,t.jsx)("div",{className:"lbl",children:"Fecha:"}),(0,t.jsx)("div",{className:"value",children:(null===x||void 0===x?void 0:x.date)&&(0,d.sJ)(null===x||void 0===x?void 0:x.date)})]})]}),(0,t.jsxs)("div",{className:"_dsplFlx",children:[(0,t.jsx)("div",{className:"flexSpace"}),(0,t.jsxs)("div",{className:"_dsplFlx",children:[(0,t.jsx)("div",{className:"lbl",children:"Importe:"}),(0,t.jsxs)("div",{className:"value",children:["$",null===x||void 0===x?void 0:x.amount]})]})]}),(0,t.jsxs)("div",{className:"_dsplFlx",children:[(0,t.jsx)("div",{className:"flexSpace"}),(0,t.jsxs)("div",{className:"_dsplFlx",children:[(0,t.jsx)("div",{className:"lbl",children:"Documento:"}),(0,t.jsx)("div",{className:"value",children:null===x||void 0===x?void 0:x.document})]})]}),(0,t.jsxs)("div",{className:"_dsplFlx",children:[(0,t.jsx)("div",{className:"flexSpace"}),(0,t.jsxs)("div",{className:"_dsplFlx",children:[(0,t.jsx)("div",{className:"lbl",children:"Comprobante:"}),(0,t.jsx)("div",{className:"value",children:null===x||void 0===x?void 0:x.comprobanteId})]})]}),(0,t.jsx)("div",{className:"_dsplFlx",children:(0,t.jsx)("div",{className:"_dsplFlx",children:(0,t.jsx)("div",{className:"value small",children:null===x||void 0===x?void 0:x.description})})})]})]})]})]})},L=e=>{let{data:l,confirm:a,lbl_p:s,lbl_span:d}=e;const{modalID:i}=l,r=e=>{(0,n.CloseModal)({id:i})};return(0,t.jsxs)("div",{style:{maxHeight:"40vh",minHeight:"28vh",overflow:"auto",background:"var(--hrm_palette-general-background-b)",borderRadius:13,padding:"10px 19px"},children:[(0,t.jsxs)("div",{className:"_dsplFlx ",children:[(0,t.jsx)("p",{className:"form_title",children:s}),(0,t.jsx)("div",{className:"flexSpace"})]}),(0,t.jsx)("div",{className:"_dsplFlx ",children:(0,t.jsx)("span",{children:d})}),(0,t.jsxs)("div",{className:"_dsplFlx ",style:{padding:"15px 10px"},children:[(0,t.jsx)("div",{className:"flexSpace"}),(0,t.jsx)("p",{className:"group_title addBtn",onClick:r,children:"Cancelar"}),(0,t.jsx)("p",{className:"group_title addBtn red",onClick:()=>{a(),r()},children:"Eliminar"})]})]})};var z=a(1087);const O=(0,r.PU)(),A=(0,r.Vg)(),H=(0,r.YZ)(),V=(0,r.tW)(),E="bank_verify_consolidation",U=e=>{var l,a,n;let{reCompare:r,navTo:c,accountD:o,accountForm:v,loadingV:m}=e;const[u,h]=(0,s.useState)(0),[p,x]=(0,s.useState)(""),[_,b]=(0,s.useState)(!1),[j,N]=(0,s.useState)(!1);(0,s.useEffect)((()=>{f()}),[o]);const g=()=>{h((0,d.M5)()),b(!1)},f=()=>{var e;(0,d.Rz)(E,Z(null===(e=(0,d.bh)("ourBank_filtered"))||void 0===e?void 0:e.verified,p,j)),g()};if(m)return(0,t.jsx)(W,{});let y=new Date(null===(l=(0,d.bh)("date_range_submayor"))||void 0===l?void 0:l.initDate).getMonth()+1,k=(0,i.S)(y,v);return(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"_dsplFlx ",style:{marginTop:14},children:[(0,t.jsx)("div",{style:{marginTop:11},children:(0,t.jsx)(A,{placeholder:"Buscar ....",width:560,obs:h,fetchData:f,loading:_,change:e=>{!_&&b(!0),x(e)},callempty:f,keyFlds:"search_h65767"})}),(0,t.jsx)("div",{style:{marginLeft:15}}),(0,t.jsx)("div",{children:(0,t.jsxs)("div",{className:"_dsplFlx ",style:{marginTop:20},children:[(0,t.jsx)(H,{initvalue:j,keyCode:72,updChange:e=>{return l=e,setTimeout((()=>{var e;(0,d.Rz)(E,Z(null===(e=(0,d.bh)("ourBank_filtered"))||void 0===e?void 0:e.verified,p,l)),g()}),200),void N(l);var l},color:"var(--hrm_palette-color-orange-800)"}),(0,t.jsx)("span",{className:"checklabel",children:"Regitros con alertas"})]})}),(0,t.jsx)("div",{className:"flexSpace"}),(0,t.jsxs)("div",{className:"_dsplFlx ",children:[(0,t.jsx)("div",{className:"total_comprobante_title",children:"No de Registros:"}),(0,t.jsx)("div",{className:"total_comprobante gray",children:(0,t.jsx)("span",{children:(0,d.bh)(E).length})})]})]}),(0,t.jsxs)("div",{className:"_dsplFlx",style:{marginTop:15},children:[(0,t.jsxs)("div",{className:"_dsplFlx",children:[(0,t.jsx)("div",{className:"igLyC_sum jyoO_sum",style:{color:"var(--hrm_palette-item_coll_gray)"},children:"Saldo submayor Banco:"}),(0,t.jsx)("div",{className:"igLyC_sum jyo3_sum ",style:{color:"var(--hrm_palette-inverse-background-b)"},children:"credit"===o.type?(-1*k).toFixed(2):(1*k).toFixed(2)})]}),(0,t.jsx)("div",{className:"flexSpace"}),(0,t.jsxs)("div",{className:"_dsplFlx",children:[(0,t.jsx)("div",{className:"igLyC_sum jyoO_sum",style:{color:"var(--hrm_palette-item_coll_gray)"},children:"Total verificado:"}),(0,t.jsx)("div",{className:"igLyC_sum jyo3_sum ",style:{color:"var(--hrm_palette-inverse-background-b)"},children:null===(a=Q(null===(n=(0,d.bh)("ourBank_filtered"))||void 0===n?void 0:n.verified))||void 0===a?void 0:a.toFixed(2)})]})]}),(0,t.jsx)("div",{style:{marginTop:15}}),(0,t.jsx)(q,{search:p,filter:j,navTo:c,reCompare:r})]})},W=e=>{let{}=e;return(0,t.jsxs)("div",{style:{minHeight:"calc(70vh - 1px)"},children:[(0,t.jsx)("div",{className:"load_animation"}),(0,t.jsxs)("div",{className:"_dsplFlx ",style:{marginTop:32},children:[(0,t.jsx)("div",{className:"flexSpace"}),(0,t.jsxs)("div",{className:"icon_compr _dsplFlx",children:[(0,t.jsx)("div",{className:"lbl_saving",children:"Loading ..."}),(0,t.jsx)(V,{stroke:"#646cff",size:24,strokeW:8})]}),(0,t.jsx)("div",{className:"flexSpace"})]})]})},q=e=>{var l;let{navTo:a,reCompare:i}=e;const[n,r]=(0,s.useState)(64),c=()=>{r((e=>e+64))};return(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"_dsplFlx hdr_bar purple",children:[(0,t.jsx)("div",{className:"tr_bar_15",children:"Comprobante"}),(0,t.jsx)("div",{className:"tr_bar_10",children:"Fecha"}),(0,t.jsx)("div",{className:"tr_bar_40",children:"Descripcion"}),(0,t.jsx)("div",{className:"tr_bar_10",children:"No cheque"}),(0,t.jsx)("div",{className:"tr_bar_10",children:"Importe"}),(0,t.jsx)("div",{className:"tr_bar_10",children:"Documento"})]}),(0,t.jsx)("div",{id:"scollVhBankVerified",className:"scollVh",style:{height:"calc(96vh - 235px)"},children:(0,d.bh)(E)&&(null===(l=(0,d.bh)(E))||void 0===l?void 0:l.map(((e,l)=>(0,t.jsx)(Y,{element:e,inx:l,navTo:a,reCompare:i,verifyManual:!0,range2Scroll:n-l===32,show:l<n,updRange:c,elementId:e.bankRecordId},l+"_bankItm"))))})]})},P=e=>{var l,a,r;let{element:c,show:o,navTo:v,reCompare:m,inx:u,range2Scroll:h,verifyManual:p,updRange:x}=e;const[_,b]=(0,s.useState)(!1),j=(0,s.useRef)(null),N=(0,s.useRef)(0),g=(0,s.useRef)(!1),f=(0,s.useRef)(null);if((0,s.useEffect)((()=>(h&&(f.current=setInterval((()=>{let e=document.getElementById("scollVhBankVerified");if(!g.current&&N.current!==e.scrollTop){N.current=e.scrollTop;let l=(0,d.cv)(j.current);l.top+l.height-N.current<0&&(0,d.Ey)(x)&&(g.current=!0,x())}}),250)),()=>{f.current&&clearInterval(f.current)})),[h]),!o)return null;const y=()=>{b(!1)},k=()=>{m(y)},I=()=>{let e={zIndex:450,height:"80vh",props:{minHeight:"1vh",overlay:!0}};e.content=(0,t.jsx)(M,{item:c,confirm:k}),(0,n.OpenModal)(e)},C=()=>{let e={zIndex:450,height:"80vh",props:{minHeight:"1vh",overlay:!0}};e.content=(0,t.jsx)(B,{item:c,confirm:k}),(0,n.OpenModal)(e)},F=async e=>{var l,a;let s={...null===(l=(0,d.bh)((0,d.hQ)()))||void 0===l?void 0:l.delete_bank_bUp};s.params={businessId:null===(a=(0,d.bh)("profileUser"))||void 0===a?void 0:a.businessId,bankRecordId:c.bankRecordId,year:(0,d.bh)("date_current_year")};const n=(0,d.I7)(s);await n&&(0,i.Pe)(k)};let S=null===(l=(0,d.bh)("submayor_list"))||void 0===l?void 0:l[c.linkId],w=("credit"===(null===S||void 0===S?void 0:S.type)?-1:1)*(null===S||void 0===S?void 0:S.amount),R=null===(a=(0,d.bh)("ourBank_filtered"))||void 0===a?void 0:a.verified_duplicatedLink[c.bankRecordId],D=w-(null===c||void 0===c?void 0:c.amount)!==0||R;return(0,t.jsxs)("div",{className:"_dsplFlx hdr_bar ",ref:j,"item-index":"".concat(u),children:[(0,t.jsxs)("div",{className:"tr_bar_15 comprobante_id _dsplFlx",children:[_?(0,t.jsx)("div",{className:"icon_compr",children:(0,t.jsx)(V,{stroke:"#646cff",size:24,strokeW:8})}):(0,t.jsx)("div",{className:"icon_compr",onClick:()=>(async e=>{p||!e.linkId&&e.operationId?C():I()})(c),children:(0,t.jsx)(O,{name:D?"alert":c.linkId?"check_circle":c.comprobanteId?"link":"alert",color:D?"var(--hrm_palette-color-orange-800)":c.linkId?"var(--hrm_palette-success-fg)":c.comprobanteId?"var(--hrm_palette-mono-filled-hover)":"#c62828"})}),(0,t.jsx)("div",{className:"flexSpace"}),(0,t.jsx)("div",{onClick:()=>v(c),children:(0,t.jsx)(z.OL,{to:{pathname:"/accounting-ledger",search:"?cId=".concat(c.comprobanteId)},children:c.comprobanteId})}),(0,t.jsx)("div",{className:"flexSpace"})]}),(0,t.jsx)("div",{className:"tr_bar_10",children:c.date&&(0,d.sJ)(c.date)}),(0,t.jsx)("div",{className:"tr_bar_40 desc_font",children:c.description}),(0,t.jsx)("div",{className:"tr_bar_10",children:c.checkOrSlip}),(0,t.jsx)("div",{className:"tr_bar_10",children:null===(r=1*c.amount)||void 0===r?void 0:r.toFixed(2)}),(0,t.jsx)("div",{className:"tr_bar_10",children:c.document}),(0,t.jsx)("div",{className:"icon_2rmv",onClick:()=>{let e=(0,d.bh)("lastTimeCallModal")||0;if(Date.now()>e){(0,d.Rz)("lastTimeCallModal",Date.now()+320);let e={zIndex:450,height:"40vh",props:{minHeight:"1vh",overlay:!0,closeEvent:()=>{}}};e.content=(0,t.jsx)(L,{confirm:F,lbl_p:"Eliminar Movimiento del Banco",lbl_span:"Una vez eliminado no podra ser recuperado"}),(0,n.OpenModal)(e)}},children:(0,t.jsx)(O,{name:"outline_delete",color:"#c62828"})})]})},J=(e,l)=>l.elementId===e.elementId&&l.show===e.show&&l.range2Scroll===e.range2Scroll,Y=(0,s.memo)(P,J),Z=(e,l,a)=>(0,d.MV)("filterBankValidate",[e,l,a],(()=>{var s;let i=[];return null===(s=(0,d._2)(e))||void 0===s||s.map((s=>{let n=e[s],r=!0;if(9!==n.status&&(r=!1),l&&(K(n,l)||(r=!1)),a){var c,t;let e=null===(c=(0,d.bh)("submayor_list"))||void 0===c?void 0:c[n.linkId],l=("credit"===(null===e||void 0===e?void 0:e.type)?-1:1)*(null===e||void 0===e?void 0:e.amount),a=null===(t=(0,d.bh)("ourBank_filtered"))||void 0===t?void 0:t.verified_duplicatedLink[n.bankRecordId];l-(null===n||void 0===n?void 0:n.amount)!==0||a||(r=!1)}r&&i.push(n)})),(0,d.dT)(i,"date")})),K=(e,l)=>{let a=l.toLowerCase(),s=!1;return["description","amount","document","comprobanteId","dateDDMMYYYY"].map((l=>{var d,i,n;e[l]&&(null===(d=e[l])||void 0===d||null===(i=d.toString())||void 0===i||null===(n=i.toLowerCase())||void 0===n?void 0:n.indexOf(a))>=0&&(s=!0)})),s},Q=e=>{var l;let a=0;return e&&(null===(l=(0,d._2)(e))||void 0===l||l.map(((l,s)=>{let i=1*e[l].amount;a=1*(0,d.Zv)(a,2)+1*(0,d.Zv)(i,2)}))),a},$=(0,r.PU)(),G=(0,r.Vg)(),X=(0,r.YZ)(),ee=(0,r.tW)(),le="bank_consolidation_2r",ae=e=>{let{data:l,operations:a,accountD:r,subaccountD:c,accountForm:o}=e;const[,v]=(0,s.useState)(0),[m,u]=(0,s.useState)(!1),[p,x]=(0,s.useState)(!1),[_,b]=(0,s.useState)(""),[j,N]=(0,s.useState)(!1);(0,s.useEffect)((()=>{(0,d.Rz)("bank_consolidation",null),(0,i.Pe)(k)}),[r]);const g=()=>{v((0,d.M5)())},f=e=>{(0,n.CloseModal)({id:l.modalID})},y=e=>{let l=(0,d.bh)("bank_consolidation");(0,d.Rz)(le,l),_&&(0,d.Rz)(le,te(l,_,m,p)),g()},k=e=>{let l=(0,d.bh)("ourBank"),s=((0,i.i_)((0,i.T7)(a,null===r||void 0===r?void 0:r.code,null===c||void 0===c?void 0:c.subAccount),null===r||void 0===r?void 0:r.code,null===c||void 0===c?void 0:c.subAccount),(0,i.y1)(l));(0,i.EK)(),(0,d.Rz)("bank_consolidation",null===s||void 0===s?void 0:s.ready),(0,d.Rz)("cmpbNotInBank",null===s||void 0===s?void 0:s.cmpbNotInBank);let o=(0,i.k4)((0,d.bh)("sortBank"),(0,d.bh)("ourBank"));o.length>0&&((0,d.Rz)("ourBank2S",o),(()=>{let e={zIndex:450,height:"80vh",props:{minHeight:"1vh",overlay:!0}};e.content=(0,t.jsx)(h,{accountD:r,subaccountD:c}),(0,n.OpenModal)(e)})()),y(),g(),(0,d.Ey)(e)&&e()};return(0,t.jsxs)("div",{style:{height:"96vh",width:"90vw",overflow:"auto",background:"var(--hrm_palette-general-background-b)",borderRadius:13,padding:"10px 19px 10px"},children:[(0,t.jsxs)("div",{className:"_dsplFlx ",children:[(0,t.jsx)("p",{className:"title_collect",children:"Consolidacion Bancaria"}),(0,t.jsx)("div",{className:"flexSpace"}),(0,t.jsx)("div",{className:"flexSpace"}),(0,t.jsxs)("div",{className:"_dsplFlx ",style:{marginTop:20},children:[(0,t.jsx)(X,{initvalue:j,keyCode:57,updChange:e=>{return l=e,(0,d.Rz)("loadingVerify",!0),N(l),void setTimeout((()=>{(0,d.Rz)("loadingVerify",!1),g()}),200);var l}}),(0,t.jsx)("span",{className:"checklabel",children:"Registros Verificados"})]}),(0,t.jsxs)("div",{className:"group_title addBtn purple upl",children:["Importar CSV (Bank)",(0,t.jsx)("input",{id:"fileupload",type:"file",onChange:e=>{var l=new FileReader;l.onload=function(e){var l=e.target.result;let a=(0,i.h1)((0,d.JO)(l),"Date");(0,d.Rz)("sortBank",a),k()},l.readAsText(e.target.files[0],"UTF-8")}})]}),(0,t.jsx)("p",{className:"group_title addBtn purple",onClick:e=>{let l=(0,d.bh)(le);(0,d.eY)("comparacion_estados_de_cuentas_"+(0,d.M5)()+".csv",l)},children:"Exportar a CSV"}),(0,t.jsx)("p",{className:"group_title addBtn purple",onClick:k,children:"Refresh"})]}),j?(0,t.jsx)(U,{reCompare:k,navTo:f,updObs:g,filterBc:y,accountForm:o,accountD:r,loadingV:(0,d.bh)("loadingVerify")}):(0,t.jsx)(se,{reCompare:k,navTo:f,updObs:g,filterBc:y,accountForm:o,accountD:r,loadingV:(0,d.bh)("loadingVerify")})]})},se=e=>{var l,a,n,r,c,o,v;let{reCompare:m,navTo:u,updObs:h,filterBc:p,accountD:x,accountForm:_,loadingV:b}=e;const[j,N]=(0,s.useState)(0),[g,f]=(0,s.useState)(!1),[y,k]=(0,s.useState)(!1),[I,C]=(0,s.useState)(""),[F,S]=(0,s.useState)(!1),[w,R]=(0,s.useState)(!1),[M,D]=(0,s.useState)(!1);let T=new Date(null===(l=(0,d.bh)("date_range_submayor"))||void 0===l?void 0:l.initDate).getMonth()+1,B=(0,i.S)(T,_);const[L,z]=(0,s.useState)(64),O=()=>{z((e=>e+64))};if(b)return(0,t.jsx)(de,{});let A=M&&F?null===(a=(0,d.bh)("ourBank_filtered"))||void 0===a?void 0:a.bankSubLeft_wZr:null===(n=(0,d.bh)("ourBank_filtered"))||void 0===n?void 0:n.bankSubLeft;return(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"_dsplFlx ",style:{marginTop:14},children:[(0,t.jsx)("div",{style:{marginTop:11},children:(0,t.jsx)(G,{placeholder:"Buscar ....",width:560,obs:N,fetchData:p,loading:w,change:e=>{!w&&R(!0),C(e)},callempty:p,keyFlds:"search_h65767"})}),(0,t.jsx)("div",{style:{marginLeft:15}}),(0,t.jsx)("div",{className:"_dsplFlx cmp_dtls",children:(0,t.jsxs)("div",{className:"_dsplFlx",children:[(0,t.jsxs)("div",{className:"filter_btn _dsplFlx",onClick:()=>{let e=(0,d.bh)("bank_consolidation");(0,d.Rz)(le,e);let l=!g;I?(0,d.Rz)(le,te(e,I,l,y)):l&&(0,d.Rz)(le,te(e,"",l,y)),f(l),h()},children:[(0,t.jsx)("div",{className:"lbl",children:g?"Filtrando":"Filtrar"}),(0,t.jsx)($,{name:g?"cancel":"filter",color:"#66666"})]}),g?(0,t.jsx)("div",{className:"done_btn _dsplFlx",style:{borderColor:y?"var(--hrm_palette-success-fg)":"#c62828",marginLeft:9},onClick:()=>{let e=(0,d.bh)("bank_consolidation");(0,d.Rz)(le,e);let l=!y;I?(0,d.Rz)(le,te(e,I,g,l)):g&&(0,d.Rz)(le,te(e,"",g,l)),k(l),h()},children:(0,t.jsx)($,{name:y?"link":"alert",color:y?"var(--hrm_palette-mono-filled-hover)":"#c62828"})}):null]})}),(0,t.jsx)("div",{className:"flexSpace"}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"_dsplFlx ",style:{marginTop:4},children:[(0,t.jsx)(X,{initvalue:M,keyCode:77,updChange:e=>D(e)}),(0,t.jsx)("span",{className:"checklabel",children:"Comprobantes fuera del banco"})]}),M?(0,t.jsxs)("div",{className:"_dsplFlx ",style:{marginTop:4},children:[(0,t.jsx)(X,{initvalue:F,keyCode:77,updChange:e=>S(e),color:"var(--primary-hover)"}),(0,t.jsx)("span",{className:"checklabel",children:"Comprobantes saldo 0.00 "})]}):null]}),(0,t.jsx)("div",{className:"flexSpace"}),(0,t.jsxs)("div",{className:"_dsplFlx ",children:[(0,t.jsx)("div",{className:"total_comprobante_title",children:"No de Registros:"}),(0,t.jsx)("div",{className:"total_comprobante gray",children:(0,t.jsx)("span",{children:null===(r=(0,d._2)((0,d.bh)(le)))||void 0===r?void 0:r.length})})]})]}),(0,t.jsxs)("div",{className:"_dsplFlx",style:{marginTop:5},children:[(0,t.jsxs)("div",{className:"_dsplFlx",children:[(0,t.jsx)("div",{className:"igLyC_sum jyoO_sum",style:{color:"var(--hrm_palette-item_coll_gray)"},children:"Saldo submayor Banco:"}),(0,t.jsx)("div",{className:"igLyC_sum jyo3_sum ",style:{color:"var(--hrm_palette-inverse-background-b)"},children:"credit"===x.type?(-1*B).toFixed(2):(1*B).toFixed(2)})]}),(0,t.jsx)("div",{className:"flexSpace"}),(0,t.jsxs)("div",{className:"_dsplFlx",children:[(0,t.jsx)("div",{className:"igLyC_sum jyoO_sum",style:{color:"var(--hrm_palette-item_coll_gray)"},children:"Total pendiente:"}),(0,t.jsx)("div",{className:"igLyC_sum jyo3_sum ",style:{color:"var(--hrm_palette-inverse-background-b)"},children:null===(c=oe((0,d.bh)(le)))||void 0===c?void 0:c.toFixed(2)})]})]}),(0,t.jsx)("div",{style:{marginTop:15}}),M?(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"_dsplFlx hdr_bar purple",children:[(0,t.jsx)("div",{className:"tr_bar_15",children:"Comprobante"}),(0,t.jsx)("div",{className:"tr_bar_10",children:"Fecha"}),(0,t.jsx)("div",{className:"tr_bar_10",children:"Importe"}),(0,t.jsx)("div",{className:"tr_bar_10",children:"Documento"})]}),(0,t.jsx)("div",{className:"scollVh",style:{height:"calc(70vh - 150px)"},children:A&&(null===(o=(0,d._2)(A))||void 0===o?void 0:o.map(((e,l)=>{let a=A[e];return(0,t.jsx)(ie,{element:a,inx:l,navTo:u,sld0:M&&F,updObs:h},l+"_outbankItm")})))})]}):(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"_dsplFlx hdr_bar purple",children:[(0,t.jsx)("div",{className:"tr_bar_15",children:"Comprobante"}),(0,t.jsx)("div",{className:"tr_bar_10",children:"Fecha"}),(0,t.jsx)("div",{className:"tr_bar_40",children:"Descripcion"}),(0,t.jsx)("div",{className:"tr_bar_10",children:"No cheque"}),(0,t.jsx)("div",{className:"tr_bar_10",children:"Importe"}),(0,t.jsx)("div",{className:"tr_bar_10",children:"Documento"})]}),(0,t.jsx)("div",{id:"scollVhPendingBank",className:"scollVh",style:{height:"calc(70vh - 150px)"},children:(0,d.bh)(le)&&(null===(v=(0,d.bh)(le))||void 0===v?void 0:v.map(((e,l)=>{let a=!0,s=(0,d.bh)("date_range_submayor");return g&&(a=!1,y&&e.comprobanteId&&(a=!0),y||e.comprobanteId||(a=!0)),!a||isNaN(e.amount)||e.date<(null===s||void 0===s?void 0:s.initDate)||e.date>(null===s||void 0===s?void 0:s.lastDate)?null:(0,t.jsx)(ce,{element:e,inx:l,navTo:u,reCompare:m,range2Scroll:L-l===32,show:l<L,updRange:O,elementId:e.bankRecordId},l+"_bankItm")})))})]})]})},de=e=>{let{}=e;return(0,t.jsxs)("div",{style:{minHeight:"calc(70vh - 1px)"},children:[(0,t.jsx)("div",{className:"load_animation"}),(0,t.jsxs)("div",{className:"_dsplFlx ",style:{marginTop:32},children:[(0,t.jsx)("div",{className:"flexSpace"}),(0,t.jsxs)("div",{className:"icon_compr _dsplFlx",children:[(0,t.jsx)("div",{className:"lbl_saving",children:"Loading ..."}),(0,t.jsx)(ee,{stroke:"#646cff",size:24,strokeW:8})]}),(0,t.jsx)("div",{className:"flexSpace"})]})]})},ie=e=>{var l;let{element:a,navTo:s,ind43:i,sld0:r,updObs:c}=e;const o=async()=>{var e;if(null!==(e=(0,d.Ch)()[(0,d.bh)("date_current_year")])&&void 0!==e&&e.isClosed){let e={zIndex:450,height:"40vh",props:{minHeight:"1vh",overlay:!0,closeEvent:()=>{}}};e.content=(0,t.jsx)(L,{label:"No puede eliminar este registro !!!",labelColor:"var(--hrm_palette-selected-nav-text)",body:"El a\xf1o contable al que pertenece esta cerrado",btnConfirm:"OK"}),(0,n.OpenModal)(e)}else if(r){var l,i;let e={...null===(l=(0,d.bh)((0,d.hQ)()))||void 0===l?void 0:l.delete_opera};e.params={businessId:null===(i=(0,d.bh)("profileUser"))||void 0===i?void 0:i.businessId,operationId:a.operationId};const n=(0,d.I7)(e);await n&&s()}};return(0,t.jsxs)("div",{className:"_dsplFlx hdr_bar",children:[(0,t.jsxs)("div",{className:"tr_bar_15 comprobante_id _dsplFlx",children:[(0,t.jsx)("div",{className:"flexSpace"}),(0,t.jsx)("div",{onClick:()=>s(a),children:(0,t.jsx)(z.OL,{to:{pathname:"/accounting-ledger",search:"?cId=".concat(a.comprobanteId)},children:a.comprobanteId})}),(0,t.jsx)("div",{className:"flexSpace"})]}),(0,t.jsx)("div",{className:"tr_bar_10",children:a.date&&(0,d.sJ)(a.date)}),(0,t.jsx)("div",{className:"tr_bar_10",children:null===(l=1*a.amount)||void 0===l?void 0:l.toFixed(2)}),(0,t.jsx)("div",{className:"tr_bar_10",children:a.document}),(0,d.ML)()&&r?(0,t.jsx)("div",{className:"icon_2rmv",style:{marginLeft:19},onClick:()=>{let e=(0,d.bh)("lastTimeCallModal")||0;if(Date.now()>e){(0,d.Rz)("lastTimeCallModal",Date.now()+320);let e={zIndex:450,height:"40vh",props:{minHeight:"1vh",overlay:!0,closeEvent:()=>{}}};e.content=(0,t.jsx)(L,{confirm:o,lbl_p:"Eliminar Registro del Comprobante "+a.comprobanteId,lbl_span:"Una vez eliminado no podra ser recuperado"}),(0,n.OpenModal)(e)}},children:(0,t.jsx)($,{name:"outline_delete",color:"#c62828"})}):null]},i)},ne=e=>{var l,a,r;let{element:c,navTo:o,reCompare:v,inx:m,verifyManual:u,range2Scroll:h,show:p,updRange:x}=e;const[_,b]=(0,s.useState)(!1),j=(0,s.useRef)(null),N=(0,s.useRef)(0),g=(0,s.useRef)(!1),f=(0,s.useRef)(null);if((0,s.useEffect)((()=>(h&&(f.current=setInterval((()=>{let e=document.getElementById("scollVhPendingBank");if(!g.current&&N.current!==e.scrollTop){N.current=e.scrollTop;let l=(0,d.cv)(j.current);l.top+l.height-N.current<0&&(0,d.Ey)(x)&&(g.current=!0,x())}}),250)),()=>{f.current&&clearInterval(f.current)})),[h]),!p)return null;const y=()=>{b(!1)},k=()=>{v(y)},I=()=>{let e={zIndex:450,height:"80vh",props:{minHeight:"1vh",overlay:!0}};e.content=(0,t.jsx)(M,{item:c,confirm:k}),(0,n.OpenModal)(e)},C=()=>{let e={zIndex:450,height:"80vh",props:{minHeight:"1vh",overlay:!0}};e.content=(0,t.jsx)(B,{item:c,confirm:k}),(0,n.OpenModal)(e)},F=async e=>{var l,a;let s={...null===(l=(0,d.bh)((0,d.hQ)()))||void 0===l?void 0:l.delete_bank_bUp};s.params={businessId:null===(a=(0,d.bh)("profileUser"))||void 0===a?void 0:a.businessId,bankRecordId:c.bankRecordId,year:(0,d.bh)("date_current_year")};const n=(0,d.I7)(s);await n&&(0,i.Pe)(k)};let S=null===(l=(0,d.bh)("submayor_list"))||void 0===l?void 0:l[c.linkId],w=("credit"===(null===S||void 0===S?void 0:S.type)?-1:1)*(null===S||void 0===S?void 0:S.amount),R=null===(a=(0,d.bh)("ourBank_filtered"))||void 0===a?void 0:a.verified_duplicatedLink[c.bankRecordId],D=w-(null===c||void 0===c?void 0:c.amount)!==0||R;return(0,t.jsxs)("div",{className:"_dsplFlx hdr_bar",ref:j,"item-index":"".concat(m),children:[(0,t.jsxs)("div",{className:"tr_bar_15 comprobante_id _dsplFlx",children:[_?(0,t.jsx)("div",{className:"icon_compr",children:(0,t.jsx)(ee,{stroke:"#646cff",size:24,strokeW:8})}):(0,t.jsx)("div",{className:"icon_compr",onClick:()=>(async e=>{u||!e.linkId&&e.operationId?C():I()})(c),children:(0,t.jsx)($,{name:D?"alert":c.linkId?"check_circle":c.comprobanteId?"link":"alert",color:D?"var(--hrm_palette-color-orange-800)":c.linkId?"var(--hrm_palette-success-fg)":c.comprobanteId?"var(--hrm_palette-mono-filled-hover)":"#c62828"})}),(0,t.jsx)("div",{className:"flexSpace"}),(0,t.jsx)("div",{onClick:()=>o(c),children:(0,t.jsx)(z.OL,{to:{pathname:"/accounting-ledger",search:"?cId=".concat(c.comprobanteId)},children:c.comprobanteId})}),(0,t.jsx)("div",{className:"flexSpace"})]}),(0,t.jsx)("div",{className:"tr_bar_10",children:c.date&&(0,d.sJ)(c.date)}),(0,t.jsx)("div",{className:"tr_bar_40 desc_font",children:c.description}),(0,t.jsx)("div",{className:"tr_bar_10",children:c.checkOrSlip}),(0,t.jsx)("div",{className:"tr_bar_10",children:null===(r=1*c.amount)||void 0===r?void 0:r.toFixed(2)}),(0,t.jsx)("div",{className:"tr_bar_10",children:c.document}),(0,t.jsx)("div",{className:"icon_2rmv",onClick:()=>{let e=(0,d.bh)("lastTimeCallModal")||0;if(Date.now()>e){(0,d.Rz)("lastTimeCallModal",Date.now()+320);let e={zIndex:450,height:"40vh",props:{minHeight:"1vh",overlay:!0,closeEvent:()=>{}}};e.content=(0,t.jsx)(L,{confirm:F,lbl_p:"Eliminar Movimiento del Banco",lbl_span:"Una vez eliminado no podra ser recuperado"}),(0,n.OpenModal)(e)}},children:(0,t.jsx)($,{name:"outline_delete",color:"#c62828"})})]})},re=(e,l)=>l.elementId===e.elementId&&l.show===e.show&&l.range2Scroll===e.range2Scroll,ce=(0,s.memo)(ne,re);function te(e,l,a,s){var i;let n=l.toLowerCase();var r=[];return null===(i=(0,d._2)(e))||void 0===i||i.map((l=>{let d=e[l],i=!1,c=(s&&d.comprobanteId||!s&&!d.comprobanteId)&&4===d.status;n?(i=!1,["description","amount","checkOrSlip","comprobanteId"].map((e=>{var l,s,r,t,o,v;a?d[e]&&(null===(l=d[e])||void 0===l||null===(s=l.toString())||void 0===s||null===(r=s.toLowerCase())||void 0===r?void 0:r.indexOf(n))>=0&&c&&(i=!0):d[e]&&(null===(t=d[e])||void 0===t||null===(o=t.toString())||void 0===o||null===(v=o.toLowerCase())||void 0===v?void 0:v.indexOf(n))>=0&&(i=!0)}))):c&&(i=!0),i&&r.push(d)})),r}const oe=e=>{var l;let a=0;return e&&(null===(l=(0,d._2)(e))||void 0===l||l.map(((l,s)=>{let i=1*e[l].amount;a=1*(0,d.Zv)(a,2)+1*(0,d.Zv)(i,2)}))),a},ve=(0,r.xu)(),me=(0,r.tW)(),ue="submFilterData",he=e=>{var l,a,r,c,o,v;let{data:m,accountForm:u}=e;const[,h]=(0,s.useState)(0),[p,x]=(0,s.useState)(!0),[_,b]=(0,s.useState)(64),j=(0,s.useRef)(null);let N=(0,d.bh)("submayor_group");(0,s.useEffect)((()=>{k()}),[u]);let g=null===(l=(0,d.bh)("account_ids"))||void 0===l?void 0:l[null===u||void 0===u?void 0:u.account],f=null===(a=(0,d.bh)("sub_account_ids"))||void 0===a?void 0:a[null===u||void 0===u?void 0:u.subAccount];const y=e=>{(0,n.CloseModal)({id:m.modalID})},k=()=>{let e=(0,d.bh)("date_current_year"),l=(new Date).getMonth()+1,a=new Date(l+"/01/"+e),s=new Date(l+1+"/01/"+e),n=a.getTime(),r=s.getTime()-600;(0,d.Rz)("date_range_submayor",{initDate:n,lastDate:r}),(0,i.rs)(u,C)},I=()=>{b((e=>e+64))},C=()=>{var e,l,a;let s=(null===(e=(0,d.bh)("submayor_group"))||void 0===e?void 0:e.operations)&&(0,i.T7)(null===(l=(0,d.bh)("submayor_group"))||void 0===l?void 0:l.operations,null===u||void 0===u?void 0:u.account,null===u||void 0===u?void 0:u.subAccount,F);(0,d.Rz)(ue,s),(async(e,l)=>{64!==_?b(64):h((0,d.M5)())})();let n=Math.ceil((null===(a=(0,d.bh)("submayor_group"))||void 0===a?void 0:a.operations.length)/64);(0,d.Z$)(I,1250,n),setTimeout((()=>{x(!1)}),230)};let F=new Date(null===(r=(0,d.bh)("date_range_submayor"))||void 0===r?void 0:r.initDate).getMonth(),S=(0,i.S)(F,u);return(0,t.jsxs)("div",{style:{height:"96vh",width:"90vw",overflow:"auto",background:"var(--hrm_palette-general-background-b)",borderRadius:13,padding:"10px 19px 10px"},children:[(0,t.jsxs)("div",{className:"_dsplFlx ",children:[(0,t.jsx)("p",{className:"title_collect",children:"SubMayor de la Cuenta"}),(0,t.jsx)("div",{className:"flexSpace"}),(0,t.jsx)("p",{className:"group_title addBtn purple",onClick:()=>{let e=(0,i.T7)(null===N||void 0===N?void 0:N.operations,null===g||void 0===g?void 0:g.code,null===f||void 0===f?void 0:f.subAccount);(0,d.eY)("export_submayor_"+(null===g||void 0===g?void 0:g.code)+"_"+(null!==f&&void 0!==f&&f.subAccount?(null===f||void 0===f?void 0:f.subAccount)+"_":"")+(0,d.M5)()+".csv",(0,i.i_)(e,null===g||void 0===g?void 0:g.code,null===f||void 0===f?void 0:f.subAccount))},children:"Exportar a CSV"}),(0,d.ML)()&&(null===(c=(0,d.bh)("global_account_params"))||void 0===c||null===(o=c.cash_bank)||void 0===o?void 0:o.account)===(null===g||void 0===g?void 0:g.accountId)?(0,t.jsx)("div",{className:"group_title addBtn purple upl",onClick:()=>{let e={zIndex:450,height:"80vh",props:{minHeight:"1vh",overlay:!0}};e.content=(0,t.jsx)(ae,{accountD:g,subaccountD:f,operations:null===N||void 0===N?void 0:N.operations,accountForm:u}),(0,n.OpenModal)(e),(0,n.CloseModal)({id:m.modalID})},children:"Consolidacion Bancaria"}):null]}),(0,t.jsxs)("div",{className:"_dsplFlx cmp_dtls",children:[(0,t.jsxs)("div",{className:" acc_dtls",style:{marginTop:10},children:[(0,t.jsxs)("div",{className:"_dsplFlx",children:[(0,t.jsx)("div",{className:"code","data-ref":"".concat(null===g||void 0===g?void 0:g.accountId),style:{color:"var(--hrm_palette-blue-purple)"},children:null===g||void 0===g?void 0:g.code}),(0,t.jsx)("div",{className:"name",style:{color:"var(--hrm_palette-imput-label_gray)"},children:null===g||void 0===g?void 0:g.name})]}),(0,t.jsx)("div",{className:"flexSpace"}),f?(0,t.jsxs)("div",{className:"_dsplFlx",style:{margin:"10px 0 0 18px"},children:[(0,t.jsx)("div",{className:"code","data-ref":"".concat(null===f||void 0===f?void 0:f.sub_accountId),style:{color:"var(--hrm_palette-inverse-background-b)"},children:null===f||void 0===f?void 0:f.subAccount}),(0,t.jsx)("div",{className:"name",style:{color:"var(--hrm_palette-imput-label_gray)"},children:null===f||void 0===f?void 0:f.subAccountName})]}):null]}),(0,t.jsx)("div",{className:"flexSpace"}),(0,t.jsxs)("div",{className:"_dsplFlx acc_dtls",style:{margin:"18px 10px 0 0"},children:[(0,t.jsx)("div",{className:"name",style:{color:"var(--hrm_palette-imput-label_gray)"},children:"Saldo Inicial"}),(0,t.jsx)("div",{className:"code",style:{marginLeft:10,color:"var(--hrm_palette-blue-purple)"},children:(1*S).toFixed(2)})]}),(0,t.jsx)("div",{className:"_dsplFlx",children:(0,t.jsx)("div",{style:{marginTop:6},children:(0,t.jsx)(ve,{onSelect:e=>{let{initDate:l,lastDate:a}=e;x(!0),(0,d.Rz)("date_range_submayor",{initDate:l,lastDate:a}),(0,i.rs)(u,C)},initMonth:F,year:(0,d.bh)("date_current_year"),direction:"right",background:"#f9f9f9",color:"var(--hrm_palette-blue-purple)"})})})]}),(0,t.jsxs)("div",{className:"_dsplFlx hdr_bar purple",children:[(0,t.jsx)("div",{className:"tr_bar_25",children:"Comprobante"}),(0,t.jsx)("div",{className:"tr_bar_10",children:"Fecha"}),(0,t.jsx)("div",{className:"tr_bar_35",children:"Documento"}),(0,t.jsx)("div",{className:"tr_bar_10",children:"Debito"}),(0,t.jsx)("div",{className:"tr_bar_10",children:"Credito"}),(0,t.jsx)("div",{className:"tr_bar_10",children:"Saldo"})]}),p?(0,t.jsx)("div",{className:"_dsplFlx  spaceAround flxWrp",style:{marginTop:140},children:(0,t.jsxs)("div",{className:"icon_compr _dsplFlx",children:[(0,t.jsx)("div",{className:"lbl_saving ",children:"Cargando ..."}),(0,t.jsx)(me,{stroke:"var(--hrm_palette-blue-purple)",size:24,strokeW:8})]})}):(0,t.jsx)("div",{id:"scollSubMayorList",className:"clients_container",ref:j,style:{height:"calc(96vh - 185px)"},children:(0,d.bh)(ue)&&(null===(v=(0,d.bh)(ue))||void 0===v?void 0:v.map(((e,l)=>(0,t.jsx)(pe,{element:e,range2Scroll:_-l===32,show:l<_,inx:l,updRange:I,close:y},l))))})]})},pe=e=>{var l,a,i;let{element:n,show:r,range2Scroll:c,close:o,inx:v,updRange:m}=e;const[,u]=(0,s.useState)(0),h=(0,s.useRef)(null),p=((0,s.useRef)(0),(0,s.useRef)(!1),(0,s.useRef)(null));if((0,s.useEffect)((()=>()=>{p.current&&clearInterval(p.current)}),[c]),!r)return null;return(0,t.jsxs)("div",{className:"_dsplFlx hdr_bar",ref:h,"item-index":"".concat(v),...c?{"watching-scroll":"true"}:"",children:[(0,t.jsx)("div",{className:"tr_bar_25 comprobante_id",onClick:()=>o(n),children:(0,t.jsx)(z.OL,{to:{pathname:"/accounting-ledger",search:"?cId=".concat(n.comprobanteId)},children:n.comprobanteId})}),(0,t.jsx)("div",{className:"tr_bar_10",children:n.date&&(0,d.sJ)(n.date)}),(0,t.jsx)("div",{className:"tr_bar_35",children:n.document}),(0,t.jsx)("div",{className:"tr_bar_10",children:null===(l=1*n.debit)||void 0===l?void 0:l.toFixed(2)}),(0,t.jsx)("div",{className:"tr_bar_10",children:null===(a=1*n.credit)||void 0===a?void 0:a.toFixed(2)}),(0,t.jsx)("div",{className:"tr_bar_10",children:null===(i=1*n.saldo)||void 0===i?void 0:i.toFixed(2)})]})}},4304:(e,l,a)=>{a.d(l,{lp:()=>n,NK:()=>i});a(2791);var s=a(1087),d=a(184);const i=e=>{let{clickHandler:l,label:a,navTo:i}=e;return(0,d.jsx)("button",{className:"gHAsFI dqnOfN jUrKkb",onClick:l,children:(0,d.jsx)(s.OL,{className:" jaqJnq",to:i,children:a})})},n=e=>{let{children:l}=e;return(0,d.jsx)("div",{className:"jRutKh",children:(0,d.jsx)("div",{className:"jSvsvz",children:(0,d.jsx)("div",{className:"jzcvbH",children:(0,d.jsx)("div",{className:" kfqEsq",children:l})})})})}},1636:()=>{}}]);
//# sourceMappingURL=6043.208e4b0f.chunk.js.map