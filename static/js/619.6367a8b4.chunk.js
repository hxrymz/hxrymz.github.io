"use strict";(self.webpackChunkhrmfinance=self.webpackChunkhrmfinance||[]).push([[619],{619:(e,a,c)=>{c.r(a),c.d(a,{default:()=>_});var l=c(2791),i=c(2350),t=c(2647),d=(c(4719),c(9760)),n=c(9661),s=c(7689),o=c(24),u=c(184);const r=(0,t.PU)(),m=(0,t.Np)(),v=(0,t.tL)(),h=(0,n.a)(),b=(0,t.JC)(),p=(0,o.f_)(),x="new_operation_comprobante",_=e=>{var a,c,t,n,o,b,_,C,k,f,y,g,P,F,O,w;let{data:A,confirm:L}=e;const[S,D]=(0,l.useState)(!1),[I,M]=(0,l.useState)(0),R=(0,s.s0)();(0,l.useEffect)((()=>{S||(D(!0),(0,i.Rz)("accountPicker",{}),M((0,i.M5)()))}));const z=(e,a,c)=>{let l=(0,i.bh)(x)||{};c?(l[c]||(l[c]={}),l[c][e]=a):l[e]=a,(0,i.Rz)(x,l),M((0,i.M5)())},T=(e,a,c)=>{let l=(0,i.bh)("accountPicker")||{};c?(l[c]||(l[c]={}),l[c][e]=a):l[e]=a,(0,i.Rz)("accountPicker",l),M((0,i.M5)())},H=e=>{let a=(0,i.bh)("accountListOnCmp")||{};delete a[e],(0,i.Rz)("accountListOnCmp",a),M((0,i.M5)())};let K=null===(a=(0,i.bh)("account_ids"))||void 0===a?void 0:a[null===(c=(0,i.bh)("accountPicker"))||void 0===c?void 0:c.account],U=null===(t=(0,i.bh)("sub_account_ids"))||void 0===t?void 0:t[null===(n=(0,i.bh)("accountPicker"))||void 0===n?void 0:n.subAccount];return(0,u.jsxs)("div",{style:{maxHeight:"90vh",minHeight:"88vh",width:"760px",overflow:"auto",background:"var(--hrm_palette-general-background-b)",borderRadius:13,padding:"10px 19px"},children:[(0,u.jsxs)("div",{className:"_dsplFlx ",children:[(0,u.jsx)("p",{className:"form_title",children:"Asiento Manual"}),(0,u.jsx)("div",{className:"flexSpace"})]}),(0,u.jsxs)("div",{className:"_dsplFlx ",children:[(0,u.jsx)(p,{init:null===(o=(0,i.bh)(x))||void 0===o?void 0:o.date,updDate:e=>z("date",e)}),(0,u.jsx)("div",{className:"flexSpace"})]}),(0,u.jsx)(m,{init:null===(b=(0,i.bh)(x))||void 0===b?void 0:b.description,label:"Descripcion",width:520,updChanges:e=>z("description",e)}),(0,u.jsxs)("div",{className:"boxAddAcc",style:{margin:"18px 0"},children:[null!==(_=(0,i.bh)("accountPicker"))&&void 0!==_&&_.account?(0,u.jsxs)("div",{className:"_dsplFlx ",style:{margin:"18px 0"},children:[(0,u.jsxs)("div",{className:" acc_dtls",children:[(0,u.jsxs)("div",{className:"_dsplFlx",children:[(0,u.jsx)("div",{className:"code",style:{color:"#646cff"},children:null===K||void 0===K?void 0:K.code}),(0,u.jsx)("div",{className:"name",children:null===K||void 0===K?void 0:K.name})]}),(0,u.jsx)("div",{className:"flexSpace"}),U?(0,u.jsxs)("div",{className:"_dsplFlx",style:{margin:"10px 0 0 18px"},children:[(0,u.jsx)("div",{className:"code",children:null===U||void 0===U?void 0:U.subAccount}),(0,u.jsx)("div",{className:"name",children:null===U||void 0===U?void 0:U.subAccountName})]}):null]}),(0,u.jsx)("div",{className:"flexSpace"}),(0,u.jsx)("div",{className:"icon",onClick:()=>{(0,i.Rz)("accountPicker",null),M((0,i.M5)())},children:(0,u.jsx)(r,{name:"outline_edit",color:"#1a73e8"})})]}):(0,u.jsx)(h,{placeholder:"buscar una cuenta",width:420,handleClick:(e,a)=>{let c={account:e,subAccount:a};(0,i.Rz)("accountPicker",c),M((0,i.M5)())}}),null!==(C=(0,i.bh)("accountPicker"))&&void 0!==C&&C.account?(0,u.jsxs)("div",{className:"_dsplFlx ",style:{margin:"18px 0"},children:[(0,u.jsx)("div",{className:"flexSpace"}),(0,u.jsx)(v,{data:[{label:"Debito",id:"debit"},{label:"Credito",id:"credit"}],active:null===(k=(0,i.bh)("accountPicker"))||void 0===k?void 0:k.type,updSelect:e=>T("type",e)}),(0,u.jsx)("div",{className:"flexSpace"})]}):null,null!==(f=(0,i.bh)("accountPicker"))&&void 0!==f&&f.account&&null!==(y=(0,i.bh)("accountPicker"))&&void 0!==y&&y.type?(0,u.jsxs)("div",{className:"_dsplFlx ",children:[(0,u.jsx)(m,{init:null===(g=(0,i.bh)("accountPicker"))||void 0===g?void 0:g.document,label:"Documento",width:120,updChanges:e=>T("document",e)}),(0,u.jsx)("div",{className:"",style:{maxWidth:130,marginLeft:7},children:(0,u.jsx)(m,{init:null===(P=(0,i.bh)("accountPicker"))||void 0===P?void 0:P.amount,label:"Importe",width:120,type:"number",updChanges:e=>T("amount",e)})}),(0,u.jsx)("div",{className:"flexSpace"}),null!==(F=(0,i.bh)("accountPicker"))&&void 0!==F&&F.amount&&null!==(O=(0,i.bh)("accountPicker"))&&void 0!==O&&O.document?(0,u.jsx)("div",{className:"card",children:(0,u.jsx)("button",{onClick:()=>{let e={...(0,i.bh)("accountPicker")}||{},a={...(0,i.bh)("accountPicker")}||{},c={...(0,i.bh)("accountListOnCmp")}||{};c[e.account+"_"+e.subAccount+"_"+e.document]=e,(0,i.Rz)("accountListOnCmp",c),a.document="",a.amount="",a.type="",(0,i.Rz)("accountPicker",a),M((0,i.M5)())},children:"Agregar"})}):null]}):null,(0,u.jsxs)("div",{className:"_dsplFlx hdr_bar purple",style:{margin:"18px 0"},children:[(0,u.jsx)("div",{className:"tr_bar tr_bar_20",children:"Cuenta"}),(0,u.jsx)("div",{className:"tr_bar tr_bar_20",children:"Sub Cuenta"}),(0,u.jsx)("div",{className:"tr_bar tr_bar_20",children:"Documento"}),(0,u.jsx)("div",{className:"tr_bar tr_bar_20",children:"Debito"}),(0,u.jsx)("div",{className:"tr_bar tr_bar_20",children:"Credito"})]}),(0,i.bh)("accountListOnCmp")&&(null===(w=(0,i._2)((0,i.bh)("accountListOnCmp")))||void 0===w?void 0:w.map(((e,a)=>(0,u.jsx)(j,{idKey:e,data:(0,i.bh)("accountListOnCmp")[e],deleteItem:H},e))))]}),(0,u.jsxs)("div",{className:"_dsplFlx ",children:[(0,u.jsx)("div",{className:"flexSpace"}),N((0,i.bh)("accountListOnCmp"))?(0,u.jsx)("div",{className:"card",children:(0,u.jsx)("button",{onClick:async()=>{var e,a;let c=(0,i.bh)(x);c.date?c.date=new Date(c.date).getTime()+4800:c.date=(new Date).getTime()+4800;let l=[],t=await(0,i.fN)(c.date),n={date:c.date,comprobanteId:t,description:c.description,businessId:null===(e=(0,i.bh)("profileUser"))||void 0===e?void 0:e.businessId,year:new Date(c.date).getFullYear()};delete c.date;let s=(0,i.bh)("accountListOnCmp")&&(0,i._2)((0,i.bh)("accountListOnCmp"));s&&(null===s||void 0===s||s.map((async(e,a)=>{var t;let d={...c},n={...(0,i.bh)("accountListOnCmp")[e]};d.account=n.account;let s=null===(t=(0,i.bh)("account_ids"))||void 0===t?void 0:t[n.account];s.payOrCollect&&(d.payOrCollect=s.payOrCollect),d.subAccount=n.subAccount,d.type=n.type,d.document=n.document.trim(),d.amount=1*n.amount,d.operationId=(0,i.M5)(),l.push(d)})));let o={...null===(a=(0,i.bh)((0,i.hQ)()))||void 0===a?void 0:a.add_multi_opera};o.params=n,o.form=l;const u=(0,i.I7)(o);await u&&((null===A||void 0===A?void 0:A.modalID)&&(0,d.CloseModal)({id:null===A||void 0===A?void 0:A.modalID}),setTimeout((()=>{(0,i.Rz)("accountListOnCmp",null),(0,i.Rz)(x,null),M((0,i.M5)()),L&&L(),R({pathname:"/accounting-ledger",search:"?cId=".concat(t)})}),400))},children:"Guardar"})}):null]})]})},j=e=>{var a,c;let{data:l,deleteItem:t,idKey:d}=e,n=null===(a=(0,i.bh)("account_ids"))||void 0===a?void 0:a[null===l||void 0===l?void 0:l.account],s=null===(c=(0,i.bh)("sub_account_ids"))||void 0===c?void 0:c[null===l||void 0===l?void 0:l.subAccount];return(0,u.jsxs)("div",{className:"_dsplFlx hdr_bar",children:[(0,u.jsx)("div",{className:"tr_bar tr_bar_20",children:(0,u.jsx)(b,{data:n,labelField:"code",infoField:"name"})}),(0,u.jsx)("div",{className:"tr_bar tr_bar_20",children:(0,u.jsx)(b,{data:s,labelField:"subAccount",infoField:"subAccountName"})}),(0,u.jsx)("div",{className:"tr_bar tr_bar_20",children:null!==l&&void 0!==l&&l.document?l.document:""}),(0,u.jsx)("div",{className:"tr_bar tr_bar_20",children:"debit"===(null===l||void 0===l?void 0:l.type)?l.amount:0}),(0,u.jsx)("div",{className:"tr_bar tr_bar_20",children:"credit"===(null===l||void 0===l?void 0:l.type)?l.amount:0}),(0,u.jsx)("div",{className:"flexSpace"}),(0,u.jsx)("div",{className:"icon",onClick:()=>{t(d)},children:(0,u.jsx)(r,{name:"outline_delete",color:"#c62828"})})]})},N=e=>{let a=0,c=e&&(0,i._2)(e);return c&&(null===c||void 0===c||c.map(((c,l)=>{let i=e[c],t=a.toFixed(2),d=null!==i&&void 0!==i&&i.amount?"debit"===(null===i||void 0===i?void 0:i.type)?parseFloat(i.amount):-1*parseFloat(i.amount):0;a=d+parseFloat(t)}))),c&&(null===c||void 0===c?void 0:c.length)>0&&0===a}},4719:()=>{}}]);
//# sourceMappingURL=619.6367a8b4.chunk.js.map