"use strict";(self.webpackChunkhrmfinance=self.webpackChunkhrmfinance||[]).push([[619],{619:(e,a,l)=>{l.r(a),l.d(a,{default:()=>_});var c=l(2791),i=l(2350),t=l(2647),n=(l(4719),l(9760)),s=l(9661),d=l(7689),o=l(24),r=(l(3728),l(184));const u=(0,t.PU)(),v=(0,t.Np)(),m=(0,t.tL)(),h=(0,s.a)(),b=(0,t.JC)(),p=(0,o.f_)(),x="new_operation_comprobante",_=e=>{var a,l,t,s,o,b,_,y,f,C,k,g,I,P,F,w;let{data:A,confirm:L}=e;const[O,R]=(0,c.useState)(!1),[S,z]=(0,c.useState)(0),M=(0,d.s0)();(0,c.useEffect)((()=>{O||(R(!0),(0,i.Rz)("accountPicker",{}),z((0,i.M5)()))}));const D=(e,a,l)=>{let c=(0,i.bh)(x)||{};l?(c[l]||(c[l]={}),c[l][e]=a):c[e]=a,(0,i.Rz)(x,c),z((0,i.M5)())},U=(e,a,l)=>{let c=(0,i.bh)("accountPicker")||{};l?(c[l]||(c[l]={}),c[l][e]=a):c[e]=a,(0,i.Rz)("accountPicker",c),z((0,i.M5)())},q=e=>{let a=(0,i.bh)("accountListOnCmp")||{};delete a[e],(0,i.Rz)("accountListOnCmp",a),z((0,i.M5)())};let E=null===(a=(0,i.bh)("account_ids"))||void 0===a?void 0:a[null===(l=(0,i.bh)("accountPicker"))||void 0===l?void 0:l.account],Q=null===(t=(0,i.bh)("sub_account_ids"))||void 0===t?void 0:t[null===(s=(0,i.bh)("accountPicker"))||void 0===s?void 0:s.subAccount];return(0,r.jsxs)("div",{style:{maxHeight:"90vh",minHeight:"88vh",width:"760px",overflow:"auto",background:"var(--hrm_palette-general-background-b)",borderRadius:13,padding:"10px 19px"},children:[(0,r.jsxs)("div",{className:"_dsplFlx ",children:[(0,r.jsx)("p",{className:"form_title",children:"Asiento Manual"}),(0,r.jsx)("div",{className:"flexSpace"})]}),(0,r.jsxs)("div",{className:"_dsplFlx ",children:[(0,r.jsx)(p,{init:null===(o=(0,i.bh)(x))||void 0===o?void 0:o.date,updDate:e=>D("date",e)}),(0,r.jsx)("div",{className:"flexSpace"})]}),(0,r.jsx)(v,{init:null===(b=(0,i.bh)(x))||void 0===b?void 0:b.description,label:"Descripcion",width:520,updChanges:e=>D("description",e)}),(0,r.jsxs)("div",{className:"boxAddAcc",style:{margin:"18px 0"},children:[null!==(_=(0,i.bh)("accountPicker"))&&void 0!==_&&_.account?(0,r.jsxs)("div",{className:"_dsplFlx ",style:{margin:"18px 0"},children:[(0,r.jsxs)("div",{className:" acc_dtls",children:[(0,r.jsxs)("div",{className:"_dsplFlx",children:[(0,r.jsx)("div",{className:"code",style:{color:"#646cff"},children:null===E||void 0===E?void 0:E.code}),(0,r.jsx)("div",{className:"name",children:null===E||void 0===E?void 0:E.name})]}),(0,r.jsx)("div",{className:"flexSpace"}),Q?(0,r.jsxs)("div",{className:"_dsplFlx",style:{margin:"10px 0 0 18px"},children:[(0,r.jsx)("div",{className:"code",children:null===Q||void 0===Q?void 0:Q.subAccount}),(0,r.jsx)("div",{className:"name",children:null===Q||void 0===Q?void 0:Q.subAccountName})]}):null]}),(0,r.jsx)("div",{className:"flexSpace"}),(0,r.jsx)("div",{className:"icon",onClick:()=>{(0,i.Rz)("accountPicker",null),z((0,i.M5)())},children:(0,r.jsx)(u,{name:"outline_edit",color:"#1a73e8"})})]}):(0,r.jsx)(h,{placeholder:"buscar una cuenta",width:420,handleClick:(e,a)=>{let l={account:e,subAccount:a};(0,i.Rz)("accountPicker",l),z((0,i.M5)())}}),null!==(y=(0,i.bh)("accountPicker"))&&void 0!==y&&y.account?(0,r.jsxs)("div",{className:"_dsplFlx ",style:{margin:"18px 0"},children:[(0,r.jsx)("div",{className:"flexSpace"}),(0,r.jsx)(m,{data:[{label:"Debito",id:"debit"},{label:"Credito",id:"credit"}],active:null===(f=(0,i.bh)("accountPicker"))||void 0===f?void 0:f.type,updSelect:e=>U("type",e)}),(0,r.jsx)("div",{className:"flexSpace"})]}):null,null!==(C=(0,i.bh)("accountPicker"))&&void 0!==C&&C.account&&null!==(k=(0,i.bh)("accountPicker"))&&void 0!==k&&k.type?(0,r.jsxs)("div",{className:"_dsplFlx ",children:[(0,r.jsx)(v,{init:null===(g=(0,i.bh)("accountPicker"))||void 0===g?void 0:g.document,label:"Documento",width:120,updChanges:e=>U("document",e)}),(0,r.jsx)("div",{className:"",style:{maxWidth:130,marginLeft:7},children:(0,r.jsx)(v,{init:null===(I=(0,i.bh)("accountPicker"))||void 0===I?void 0:I.amount,label:"Importe",width:120,type:"number",updChanges:e=>U("amount",e)})}),(0,r.jsx)("div",{className:"flexSpace"}),null!==(P=(0,i.bh)("accountPicker"))&&void 0!==P&&P.amount&&null!==(F=(0,i.bh)("accountPicker"))&&void 0!==F&&F.document?(0,r.jsx)("div",{className:"card",children:(0,r.jsx)("button",{onClick:()=>{let e={...(0,i.bh)("accountPicker")}||{},a={...(0,i.bh)("accountPicker")}||{},l={...(0,i.bh)("accountListOnCmp")}||{};l[e.account+"_"+e.subAccount+"_"+e.document]=e,(0,i.Rz)("accountListOnCmp",l),a.document="",a.amount="",a.type="",(0,i.Rz)("accountPicker",a),z((0,i.M5)())},children:"Agregar"})}):null]}):null,(0,r.jsxs)("div",{className:"_dsplFlx hdr_bar purple",style:{margin:"18px 0"},children:[(0,r.jsx)("div",{className:"tr_bar tr_bar_20",children:"Cuenta"}),(0,r.jsx)("div",{className:"tr_bar tr_bar_20",children:"Sub Cuenta"}),(0,r.jsx)("div",{className:"tr_bar tr_bar_20",children:"Documento"}),(0,r.jsx)("div",{className:"tr_bar tr_bar_20",children:"Debito"}),(0,r.jsx)("div",{className:"tr_bar tr_bar_20",children:"Credito"})]}),(0,i.bh)("accountListOnCmp")&&(null===(w=(0,i._2)((0,i.bh)("accountListOnCmp")))||void 0===w?void 0:w.map(((e,a)=>(0,r.jsx)(j,{idKey:e,data:(0,i.bh)("accountListOnCmp")[e],deleteItem:q},e))))]}),(0,r.jsxs)("div",{className:"_dsplFlx ",children:[(0,r.jsx)("div",{className:"flexSpace"}),N((0,i.bh)("accountListOnCmp"))?(0,r.jsx)("div",{className:"card",children:(0,r.jsx)("button",{onClick:async()=>{var e,a;let l=(0,i.bh)(x);l.date?l.date=new Date(l.date).getTime()+4800:l.date=(new Date).getTime()+4800;let c=[],t=await(0,i.fN)(l.date),s={date:l.date,comprobanteId:t,description:l.description,businessId:null===(e=(0,i.bh)("profileUser"))||void 0===e?void 0:e.businessId,year:new Date(l.date).getFullYear()};delete l.date;let d=(0,i.bh)("accountListOnCmp")&&(0,i._2)((0,i.bh)("accountListOnCmp"));d&&(null===d||void 0===d||d.map((async(e,a)=>{var t;let n={...l},s={...(0,i.bh)("accountListOnCmp")[e]};n.account=s.account;let d=null===(t=(0,i.bh)("account_ids"))||void 0===t?void 0:t[s.account];d.payOrCollect&&(n.payOrCollect=d.payOrCollect),n.subAccount=s.subAccount,n.type=s.type,n.document=s.document.trim(),n.amount=1*s.amount,n.operationId=(0,i.M5)(),c.push(n)})));let o={...null===(a=(0,i.bh)((0,i.hQ)()))||void 0===a?void 0:a.add_multi_opera};o.params=s,o.form=c;const r=(0,i.I7)(o);await r&&((null===A||void 0===A?void 0:A.modalID)&&(0,n.CloseModal)({id:null===A||void 0===A?void 0:A.modalID}),setTimeout((()=>{(0,i.Rz)("accountListOnCmp",null),(0,i.Rz)(x,null),z((0,i.M5)()),L&&L(),M({pathname:"/accounting-ledger",search:"?cId=".concat(t)})}),400))},children:"Guardar"})}):null]})]})},j=e=>{var a,l;let{data:c,deleteItem:t,idKey:n}=e,s=null===(a=(0,i.bh)("account_ids"))||void 0===a?void 0:a[null===c||void 0===c?void 0:c.account],d=null===(l=(0,i.bh)("sub_account_ids"))||void 0===l?void 0:l[null===c||void 0===c?void 0:c.subAccount];return(0,r.jsxs)("div",{className:"_dsplFlx hdr_bar",children:[(0,r.jsx)("div",{className:"tr_bar tr_bar_20",children:(0,r.jsx)(b,{data:s,labelField:"code",infoField:"name"})}),(0,r.jsx)("div",{className:"tr_bar tr_bar_20",children:(0,r.jsx)(b,{data:d,labelField:"subAccount",infoField:"subAccountName"})}),(0,r.jsx)("div",{className:"tr_bar tr_bar_20",children:null!==c&&void 0!==c&&c.document?c.document:""}),(0,r.jsx)("div",{className:"tr_bar tr_bar_20",children:"debit"===(null===c||void 0===c?void 0:c.type)?c.amount:0}),(0,r.jsx)("div",{className:"tr_bar tr_bar_20",children:"credit"===(null===c||void 0===c?void 0:c.type)?c.amount:0}),(0,r.jsx)("div",{className:"flexSpace"}),(0,r.jsx)("div",{className:"icon",onClick:()=>{t(n)},children:(0,r.jsx)(u,{name:"outline_delete",color:"#c62828"})})]})},N=e=>{let a=0,l=e&&(0,i._2)(e);return l&&(null===l||void 0===l||l.map(((l,c)=>{let i=e[l],t=a.toFixed(2),n=null!==i&&void 0!==i&&i.amount?"debit"===(null===i||void 0===i?void 0:i.type)?parseFloat(i.amount):-1*parseFloat(i.amount):0;a=n+parseFloat(t)}))),l&&(null===l||void 0===l?void 0:l.length)>0&&0===a}},3728:(e,a,l)=>{l.d(a,{NA:()=>s,g5:()=>n,ph:()=>i,yq:()=>t});var c=l(2350);const i=async e=>{var a,l;let i=null===(a=(0,c.bh)((0,c.hQ)()))||void 0===a?void 0:a.all_entries;i.params={businessId:null===(l=(0,c.bh)("profileUser"))||void 0===l?void 0:l.businessId};const t=(0,c.I7)(i),n=await t;n&&((0,c.Rz)("entries_list",n),(0,c.Rz)("entries_ids",(0,c.ME)(n,"accountingEntryId")),e&&e())},t=async e=>{var a,l;let i=null===(a=(0,c.bh)((0,c.hQ)()))||void 0===a?void 0:a.search_entries;i.params={businessId:null===(l=(0,c.bh)("profileUser"))||void 0===l?void 0:l.businessId,":search":(0,c.bh)("search_entry_qry")};const t=(0,c.I7)(i),n=await t;n&&((0,c.Rz)("entries_list",n),e&&e())},n=async(e,a)=>{var l,i;let t=null===(l=(0,c.bh)((0,c.hQ)()))||void 0===l?void 0:l.delete_entries;t.params={businessId:null===(i=(0,c.bh)("profileUser"))||void 0===i?void 0:i.businessId,accountingEntryId:e};const n=(0,c.I7)(t);await n&&a&&a()},s=async e=>{const a=(0,c.I7)({query:"getLastSequence"}),l=await a;if(l)return l}},4719:()=>{}}]);
//# sourceMappingURL=619.db73e9c7.chunk.js.map