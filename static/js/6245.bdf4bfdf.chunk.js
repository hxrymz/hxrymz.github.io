"use strict";(self.webpackChunkhrmfinance=self.webpackChunkhrmfinance||[]).push([[6245],{713:(o,s,n)=>{n.d(s,{$P:()=>Q,B8:()=>P,Ex:()=>w,H9:()=>z,IR:()=>I,N0:()=>c,QJ:()=>f,Rd:()=>p,VI:()=>k,Ve:()=>y,WA:()=>g,ZW:()=>h,Zj:()=>R,_U:()=>t,a2:()=>r,fK:()=>v,g5:()=>e,ii:()=>_,nj:()=>U,qT:()=>b,qv:()=>m,yJ:()=>d,yk:()=>u});var i=n(2350);const e={WH:"Almacen",PR:"Production",PT:"Patio"},t=async o=>{var s,n;let e={...null===(s=(0,i.bh)((0,i.hQ)()))||void 0===s?void 0:s.scan_inv_location};e.params={businessId:null===(n=(0,i.bh)("profileUser"))||void 0===n?void 0:n.businessId};let t=(0,i.bh)("date_range_inv_loc");if(null!==t&&void 0!==t&&t.initDate||(0,i.bh)("locationId2F")||(0,i.bh)("productId2F")||(0,i.bh)("searchLocationQry")&&(0,i.bh)("searchLocationQry").length>1){if((0,i.bh)("searchLocationQry").split(" ").map(((o,s)=>{o&&(e.params[":search"+s]=o.trim())})),(0,i.bh)("locationId2F")&&(e.params[":search5"]=(0,i.bh)("locationId2F").trim()),(0,i.bh)("productId2F")){let o=5;(0,i.bh)("locationId2F")&&(o=4),e.params[":search"+o]=(0,i.bh)("productId2F").trim()}null!==t&&void 0!==t&&t.initDate&&(e.params[":date1"]=null===t||void 0===t?void 0:t.initDate,e.params[":date2"]=null===t||void 0===t?void 0:t.lastDate);const s=(0,i.I7)(e),n=await s;n&&!n.error&&(a(n),(0,i.Rz)("inv_location_ids",n),(0,i.Rz)("inv_location_list",R((0,i.jQ)(n),"date",0)),o&&o())}else(0,i.Rz)("inv_location_list",null),o&&o()},a=async o=>{let s={},n={};o&&(0,i._2)(o).map((i=>{var e,t,a,r;s[null===(e=o[i])||void 0===e?void 0:e.inventoryId]||(s[null===(a=o[i])||void 0===a?void 0:a.inventoryId]=1);n[null===(t=o[i])||void 0===t?void 0:t.productId]||(n[null===(r=o[i])||void 0===r?void 0:r.productId]=1)}));const e=(0,i._2)(n).map((async o=>{await l(o)}));await Promise.all(e);return 1},r=async o=>{var s,n;let e={...null===(s=(0,i.bh)((0,i.hQ)()))||void 0===s?void 0:s.scan_inv_location};e.params={businessId:null===(n=(0,i.bh)("profileUser"))||void 0===n?void 0:n.businessId,":search0":o};const t=(0,i.I7)(e),a=await t;return a&&!a.error?a:null},l=async o=>{var s,n;if(null!==(s=(0,i.bh)("ProductsOnScanItems"))&&void 0!==s&&s[o])return null===(n=(0,i.bh)("ProductsOnScanItems"))||void 0===n?void 0:n[o];{var e,t;let s={...null===(e=(0,i.bh)((0,i.hQ)()))||void 0===e?void 0:e.search_prod};s.params={businessId:null===(t=(0,i.bh)("profileUser"))||void 0===t?void 0:t.businessId,":search0":o};const n=(0,i.I7)(s),a=await n;if(console.log(s),console.log(a),a){let s=(0,i.bh)("ProductsOnScanItems")||{};return s[o]=a[o],(0,i.Rz)("ProductsOnScanItems",s),a[o]}return null}},d=async o=>{var s,n;let e={...null===(s=(0,i.bh)((0,i.hQ)()))||void 0===s?void 0:s.search_prod};e.params={businessId:null===(n=(0,i.bh)("profileUser"))||void 0===n?void 0:n.businessId,":search0":o};const t=(0,i.I7)(e),a=await t;if(a){let o=(0,i.bh)("ProductsOnScanItems")||{},s=Object.assign({},o,a);return(0,i.Rz)("ProductsOnScanItems",s),q(a)}return[]},c=async o=>{var s,n;let e={...null===(s=(0,i.bh)((0,i.hQ)()))||void 0===s?void 0:s.scan_area_location};e.params={businessId:null===(n=(0,i.bh)("profileUser"))||void 0===n?void 0:n.businessId,limit:120};const t=(0,i.I7)(e),a=await t;a?((0,i.Rz)("location_drpdwn",j(a)),(0,i.Rz)("locations_ids",a),(0,i.Rz)("locations_list",R((0,i.jQ)(a),"areaLocationId")),o&&o()):o&&o()},v=async(o,s)=>{var n,e;let t={...null===(n=(0,i.bh)((0,i.hQ)()))||void 0===n?void 0:n.scan_voucher_production};t.params={businessId:null===(e=(0,i.bh)("profileUser"))||void 0===e?void 0:e.businessId,":search0":o};const a=(0,i.I7)(t),r=await a;r&&!r.error&&(0,i._2)(r)&&(0,i._2)(r).length>0?s&&s(r):s&&s(null)},u=async o=>{var s,n;let e={...null===(s=(0,i.bh)((0,i.hQ)()))||void 0===s?void 0:s.scan_voucher_production};if(e.params={businessId:null===(n=(0,i.bh)("profileUser"))||void 0===n?void 0:n.businessId,limit:120},(0,i.bh)("searchVoucherQry")&&(0,i.bh)("searchVoucherQry").length>1){(0,i.bh)("searchVoucherQry").split(" ").map(((o,s)=>{o&&(e.params[":search"+s]=o.trim())}));const s=(0,i.I7)(e),n=await s;n&&((0,i.Rz)("voucher_production",n),(0,i.Rz)("vouchers_list",R((0,i.jQ)(n),"voucherId")),o&&o())}else(0,i.Rz)("vouchers_list",null),o&&o()},h=async(o,s)=>{var n,e;let t={...null===(n=(0,i.bh)((0,i.hQ)()))||void 0===n?void 0:n.get_inventory_prod};t.params={businessId:null===(e=(0,i.bh)("profileUser"))||void 0===e?void 0:e.businessId,":productId":o};const a=(0,i.I7)(t),r=await a;r&&((0,i.Rz)("inv_products_list",R((0,i.jQ)(r.list),"name")),(0,i.Rz)("inv_products_stock",r.stock),s&&s())},p=async(o,s)=>{var n,e;let t={...null===(n=(0,i.bh)((0,i.hQ)()))||void 0===n?void 0:n.get_prod_stock};t.params={businessId:null===(e=(0,i.bh)("profileUser"))||void 0===e?void 0:e.businessId,productId:o};const a=(0,i.I7)(t),r=await a;if(r){let n={...(0,i.bh)("products_stock")};n[o]=r.stock,(0,i.Rz)("products_stock",n),s&&s()}},b=async o=>{var s,n;let e={...null===(s=(0,i.bh)((0,i.hQ)()))||void 0===s?void 0:s.all_prods};e.params={businessId:null===(n=(0,i.bh)("profileUser"))||void 0===n?void 0:n.businessId},e.subQuerys={},e.subQuerys.stock=1;const t=(0,i.I7)(e),a=await t;if(a){let s={},n=[],e=0;a.map((o=>{var t;if(null!==o&&void 0!==o&&null!==(t=o.inventory)&&void 0!==t&&t.qty){var a,r,l;if(e+=1*(0,i.Zv)(null===o||void 0===o||null===(a=o.inventory)||void 0===a?void 0:a.amount,2),s[o.unit])s[o.unit]+=null===o||void 0===o||null===(r=o.inventory)||void 0===r?void 0:r.qty;else s[o.unit]=null===o||void 0===o||null===(l=o.inventory)||void 0===l?void 0:l.qty;n.push({productId:o.productId,name:o.name,unit:o.unit,qty:(1*o.inventory.qty).toFixed(2),amount:(1*o.inventory.amount).toFixed(2),cost:(o.inventory.amount/o.inventory.qty*1).toFixed(2)})}})),(0,i.Ey)(o)&&o({list:R(n,"name"),total:e,units:s})}},I=async(o,s)=>{var n,e;let t={...null===(n=(0,i.bh)((0,i.hQ)()))||void 0===n?void 0:n.group_prod_stock};t.params={businessId:null===(e=(0,i.bh)("profileUser"))||void 0===e?void 0:e.businessId};const a=(0,i.I7)(t),r=await a;if(r){let n=(0,i._I)(r.comps),e=0,t=0,a=0,l=[],d=[];(0,i._2)(o).map((s=>{let c={...o[s]},v=("debit"===o[s].type?1:-1)*o[s].amount,u=1*(0,i.Zv)(v,2);if(e+=u,r.comps[o[s].comprobanteId]){c.inventory=r.comps[o[s].comprobanteId];let e=0;if((0,i._2)(r.comps[o[s].comprobanteId]).map((n=>{e=1*(0,i.Zv)(e,2)+1*(0,i.Zv)(r.comps[o[s].comprobanteId][n],2)})),e=e<0?-1*e:e,e=1*(0,i.Zv)(e,2),c.inventoryAmount=e,t+=e,u=u<0?-1*u:u,u-e!==0){let o=u-e;a+=o,d.push(c),console.log("diff",c,u,e,o)}else l.push(c);delete n[o[s].comprobanteId]}else a+=v,d.push(c)}));let c=0;(0,i._2)(n).map((o=>{let s=0;(0,i._2)(n[o]).map((e=>{s=1*(0,i.Zv)(s,2)+1*(0,i.Zv)(n[o][e],2)})),c+=s})),console.log("inventoryBack",n,"inventoryBackTotal",c),(0,i.Rz)("inv_comprobantes_compare",{hasError:d,success:l,inventoryBack:n}),(0,i.Ey)(s)&&s()}},m=async o=>{var s,n,e;let t={...null===(s=(0,i.bh)((0,i.hQ)()))||void 0===s?void 0:s.filter_search_opera};t.params={businessId:null===(n=(0,i.bh)("profileUser"))||void 0===n?void 0:n.businessId,year:(0,i.bh)("date_current_year"),":account":null===(e=(0,i.bh)("global_account_params"))||void 0===e?void 0:e.inventory.account};const a=(0,i.I7)(t),r=await a;r&&!r.error&&(0,i.Ey)(o)&&o(R((0,i.jQ)(r),"date"))},_=async o=>{var s,n;let e={...null===(s=(0,i.bh)((0,i.hQ)()))||void 0===s?void 0:s.all_prods};e.params={businessId:null===(n=(0,i.bh)("profileUser"))||void 0===n?void 0:n.businessId};const t=(0,i.I7)(e),a=await t;a&&((0,i.Rz)("products_list",R(a,"name")),(0,i.Rz)("products_ids",(0,i.ME)((0,i.jQ)(a),"productId")),o&&o())},y=async o=>{var s,n;let e={...null===(s=(0,i.bh)((0,i.hQ)()))||void 0===s?void 0:s.search_prod};if(e.params={businessId:null===(n=(0,i.bh)("profileUser"))||void 0===n?void 0:n.businessId,limit:120},(0,i.bh)("searchQry").length>1){(0,i.bh)("searchQry").split(" ").map(((o,s)=>{o&&(e.params[":search"+s]=o.trim())}));const s=(0,i.I7)(e),n=await s;n&&((0,i.Rz)("products_list",R((0,i.jQ)(n),"code")),o&&o())}else(0,i.Rz)("products_list",null),o&&o()},f=async o=>{var s,n;let e={...null===(s=(0,i.bh)((0,i.hQ)()))||void 0===s?void 0:s.all_entry_invoices};e.params={businessId:null===(n=(0,i.bh)("profileUser"))||void 0===n?void 0:n.businessId};const t=(0,i.I7)(e),a=await t;a&&((0,i.Rz)("movements_list",R(a,"date")),(0,i.Rz)("movements_ids",(0,i.ME)((0,i.jQ)(a),"inventoryId")),o&&o())},Q=async o=>{var s;if((null===(s=(0,i.bh)("searchMovQry"))||void 0===s?void 0:s.length)>1){var n,e;let s={...null===(n=(0,i.bh)((0,i.hQ)()))||void 0===n?void 0:n.search_inventory};s.params={businessId:null===(e=(0,i.bh)("profileUser"))||void 0===e?void 0:e.businessId,":search0":(0,i.bh)("searchMovQry")};const t=(0,i.I7)(s),a=await t;a&&((0,i.Rz)("movements_list",function(o){var s={};let n=o&&(0,i._2)(o);n.length>0?n.map((n=>{let i=o[n];s[i.comprobanteId]||(s[i.comprobanteId]={},s[i.comprobanteId].amount=0,s[i.comprobanteId].document=i.document,s[i.comprobanteId].date=i.date,s[i.comprobanteId].comprobanteId=i.comprobanteId,s[i.comprobanteId].entriesInvoiceId=i.entriesInvoiceId,s[i.comprobanteId].products=[]),s[i.comprobanteId].amount+=i.qty*i.price,s[i.comprobanteId].products.push({productId:i.productId,qty:i.qty,price:i.price,inventoryId:i.inventoryId})})):s=null;return s}(a)),(0,i.Rz)("movements_ids",a),o&&o())}else(0,i.Rz)("movements_list",[]),(0,i.Rz)("movements_ids",{}),o&&o()};const R=function(o,s){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return(0,i.MV)("sortProducts",[o],(()=>o&&o.sort(((o,i)=>{let e=o[s],t=i[s];return e<t?n?-1:1:e>t?n?1:-1:0}))))},w=async(o,s)=>{var n,e;let t={...null===(n=(0,i.bh)((0,i.hQ)()))||void 0===n?void 0:n.rmv_area_location};t.params={businessId:null===(e=(0,i.bh)("profileUser"))||void 0===e?void 0:e.businessId,areaLocationId:o};const a=(0,i.I7)(t);await a&&s&&s()},z=async(o,s)=>{var n,e;let t={...null===(n=(0,i.bh)((0,i.hQ)()))||void 0===n?void 0:n.rmv_inv_location};t.params={businessId:null===(e=(0,i.bh)("profileUser"))||void 0===e?void 0:e.businessId,inventoryLocationId:o};const a=(0,i.I7)(t);await a&&s&&s()},U=async(o,s)=>{var n,e;let t={...null===(n=(0,i.bh)((0,i.hQ)()))||void 0===n?void 0:n.delete_prod};t.params={businessId:null===(e=(0,i.bh)("profileUser"))||void 0===e?void 0:e.businessId,productId:o};const a=(0,i.I7)(t);await a&&s&&s()},g=async(o,s)=>{var n,e;let t={...null===(n=(0,i.bh)((0,i.hQ)()))||void 0===n?void 0:n.delete_inventory};t.params={businessId:null===(e=(0,i.bh)("profileUser"))||void 0===e?void 0:e.businessId,inventoryId:o};const a=(0,i.I7)(t);await a&&s&&s()},k=async(o,s)=>{var n,e;({...null===(n=(0,i.bh)((0,i.hQ)()))||void 0===n?void 0:n.entry_invoice_acc_2}).params={businessId:null===(e=(0,i.bh)("profileUser"))||void 0===e?void 0:e.businessId,entriesInvoiceId:o}},P=(o,s)=>(0,i.MV)("rangeProdArr",[o,s],(()=>o?(0,i._2)(o).slice(0,s):[])),j=o=>{let s=[{id:null,label:"Location"}];return o&&(0,i._2)(o).map((n=>{var i,e;s.push({id:n,label:"".concat(null===(i=o[n])||void 0===i?void 0:i.areaId,"-").concat(null===(e=o[n])||void 0===e?void 0:e.location)})})),s},q=o=>{let s=[];return o&&(0,i._2)(o).map((n=>{var i;s.push({id:n,label:null===(i=o[n])||void 0===i?void 0:i.name})})),s}}}]);
//# sourceMappingURL=6245.bdf4bfdf.chunk.js.map