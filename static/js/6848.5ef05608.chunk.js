"use strict";(self.webpackChunkhrmfinance=self.webpackChunkhrmfinance||[]).push([[6848],{6848:(l,s,d)=>{d.r(s),d.d(s,{default:()=>h});var e=d(2791),a=d(2350),i=d(2647),c=(d(9803),d(9760)),o=d(9661),n=d(7689),t=(d(24),d(4050)),u=d(184);const v=(0,i.PU)(),r=((0,i.Np)(),(0,o.FC)()),m="new_multi_deposit_prov",x="multi_deposit_by_prov_Doc",h=l=>{var s,d,i,o,v,r,h,b,j,N,f,F,g,y,k,D,L,R,S;let{data:I,confirm:A}=l;const w=(0,e.useRef)(!1),[,z]=(0,e.useState)(0),C=(0,n.s0)();(0,e.useEffect)((()=>{w.current||(w.current=!0,(0,t.Ht)("global_accounts","global_account_params",T),(0,a.Rz)("PamentMethodAccount",null),(0,a.Rz)(x,null),(0,a.Rz)("accountPicker",{}),z((0,a.M5)()))}));const T=()=>{z((0,a.M5)())};let M=null===(s=(0,a.bh)("global_account_params"))||void 0===s?void 0:s.cash_bank,H=null===(d=(0,a.bh)("global_account_params"))||void 0===d?void 0:d.bankComisions;return(0,u.jsxs)("div",{style:{maxHeight:"90vh",minHeight:"88vh",width:"840px",overflow:"auto",background:"var(--hrm_palette-general-background-b)",borderRadius:13,padding:"10px 19px"},children:[(0,u.jsxs)("div",{className:"_dsplFlx ",children:[(0,u.jsx)("p",{className:"form_title",children:"Registrando Deposito"}),(0,u.jsx)("div",{className:"flexSpace"})]}),(0,u.jsxs)("div",{className:"_dsplFlx",style:{marginTop:25},children:[(0,u.jsx)("div",{className:"flexSpace"}),null!==M&&void 0!==M&&M.account?(0,u.jsxs)("div",{className:" acc_dtls",children:[(0,u.jsxs)("div",{className:"_dsplFlx",children:[(0,u.jsx)("div",{className:"code",style:{color:"#646cff"},children:null===(i=(0,a.bh)("account_ids"))||void 0===i||null===(o=i[null===M||void 0===M?void 0:M.account])||void 0===o?void 0:o.code}),(0,u.jsx)("div",{className:"name",children:null===(v=(0,a.bh)("account_ids"))||void 0===v||null===(r=v[null===M||void 0===M?void 0:M.account])||void 0===r?void 0:r.name})]}),(0,u.jsx)("div",{className:"flexSpace"})]}):null]}),(0,u.jsxs)("div",{className:"_dsplFlx ",children:[(0,u.jsx)("div",{className:"flexSpace"}),(0,u.jsxs)("div",{className:"_dsplFlx align_itm",children:[(0,u.jsx)("p",{className:"key_docL",children:"Documento:"}),(0,u.jsx)("p",{className:"value_docL",children:null===(h=(0,a.bh)(m))||void 0===h?void 0:h.id})]}),(0,u.jsx)("div",{className:"_dsplFlx align_itm",style:{paddingLeft:8},children:(0,u.jsx)("p",{className:"amount_docL",children:"$"+(null===(b=(0,a.bh)(m))||void 0===b?void 0:b.amount)})})]}),(0,u.jsxs)("div",{className:"_dsplFlx",children:[(0,u.jsx)("div",{className:"flexSpace"}),null!==M&&void 0!==M&&M.account?(0,u.jsxs)("div",{className:" acc_dtls",children:[(0,u.jsxs)("div",{className:"_dsplFlx",children:[(0,u.jsx)("div",{className:"code",style:{color:"#646cff"},children:null===(j=(0,a.bh)("account_ids"))||void 0===j||null===(N=j[null===H||void 0===H?void 0:H.account])||void 0===N?void 0:N.code}),(0,u.jsx)("div",{className:"name",children:null===(f=(0,a.bh)("account_ids"))||void 0===f||null===(F=f[null===H||void 0===H?void 0:H.account])||void 0===F?void 0:F.name})]}),(0,u.jsx)("div",{className:"flexSpace"})]}):null]}),(0,u.jsxs)("div",{className:"_dsplFlx ",children:[(0,u.jsx)("div",{className:"flexSpace"}),(0,u.jsxs)("div",{className:"_dsplFlx align_itm",children:[(0,u.jsx)("p",{className:"key_docL",children:"Documento:"}),(0,u.jsx)("p",{className:"value_docL",children:null===(g=(0,a.bh)(m))||void 0===g?void 0:g.id})]}),(0,u.jsx)("div",{className:"_dsplFlx align_itm",style:{paddingLeft:8},children:(0,u.jsx)("p",{className:"amount_docL",children:"$"+-1*(null===(y=(0,a.bh)(m))||void 0===y?void 0:y.paymentDepositFee)})})]}),(0,u.jsxs)("div",{className:"_dsplFlx ",children:[(0,u.jsx)("p",{className:"key_docL",children:"Fecha:"}),(0,u.jsx)("p",{className:"value_docL",children:(0,a.sJ)(null===(k=(0,a.bh)(m))||void 0===k?void 0:k.depositDate)})]}),(0,u.jsx)("div",{className:"value_docL",style:{textAlign:"left"},children:"Quickbook Deposit ID ".concat(null===(D=(0,a.bh)(m))||void 0===D?void 0:D.id)}),(0,u.jsx)("div",{className:"separator"}),null===(L=(0,a.bh)(m))||void 0===L||null===(R=L.transactions)||void 0===R?void 0:R.map((l=>(0,u.jsx)(p,{data:l,updObs:T},l.id))),0===_(null===(S=(0,a.bh)(m))||void 0===S?void 0:S.transactions)?(0,u.jsxs)("div",{className:"_dsplFlx ",children:[(0,u.jsx)("div",{className:"flexSpace"}),(0,u.jsx)("div",{className:"card",children:(0,u.jsx)("button",{onClick:async()=>{var l,s,d,e,i,o,n,t,u,v,r;let h=(0,a.bh)(m)||{},p=[];h.date=h.depositDate,h.date||(h.date=(new Date).getTime()+4800);let _=await(0,a.fN)(h.date),b=null===(l=(0,a.bh)("global_account_params"))||void 0===l?void 0:l.cash_bank,j={};j.document=null===(s=(0,a.bh)(m))||void 0===s?void 0:s.id,j.account=null===b||void 0===b?void 0:b.account,j.subAccount=null===b||void 0===b?void 0:b.subAccount,j.type="debit",j.amount=1*(null===(d=(0,a.bh)(m))||void 0===d?void 0:d.amount),j.operationId=(0,a.M5)(),p.push(j);let N=null===(e=(0,a.bh)("global_account_params"))||void 0===e?void 0:e.bankComisions,f={};f.document=null===(i=(0,a.bh)(m))||void 0===i?void 0:i.id,f.account=null===N||void 0===N?void 0:N.account,f.subAccount=null===N||void 0===N?void 0:N.subAccount,f.type="debit",f.amount=-1*(null===(o=(0,a.bh)(m))||void 0===o?void 0:o.paymentDepositFee),f.operationId=(0,a.M5)(),p.push(f),null===(n=(0,a.bh)(m))||void 0===n||null===(t=n.transactions)||void 0===t||t.map((l=>{const s=l.processorTransactionReference;let d=(0,a.bh)(s),e=(1*(null===l||void 0===l?void 0:l.amount)+-1*(null===l||void 0===l?void 0:l.totalTransactionFee)).toFixed(2),i={};i.document=null===l||void 0===l?void 0:l.referenceNumber,i.account=null===d||void 0===d?void 0:d.account,i.subAccount=null===d||void 0===d?void 0:d.subAccount,i.type="credit",i.amount=1*e,i.operationId=(0,a.M5)(),p.push(i)}));let F={date:h.date,comprobanteId:_,description:"Quickbook Deposit ID ".concat(null===(u=(0,a.bh)(m))||void 0===u?void 0:u.id),businessId:null===(v=(0,a.bh)("profileUser"))||void 0===v?void 0:v.businessId,year:new Date(h.date).getFullYear()};delete h.date;let g={...null===(r=(0,a.bh)((0,a.hQ)()))||void 0===r?void 0:r.add_multi_opera};g.params=F,g.form=p;const y=(0,a.I7)(g);await y&&setTimeout((()=>{var l,s;(0,a.Rz)(x,null),(0,a.Rz)(m,null),null===(l=(0,a.bh)(m))||void 0===l||null===(s=l.transactions)||void 0===s||s.map((l=>{const s=l.processorTransactionReference;(0,a.Rz)(s,null)})),(0,a.Rz)("multi_deposit_anticipo_by_doc",null),(null===I||void 0===I?void 0:I.modalID)&&(0,c.CloseModal)({id:null===I||void 0===I?void 0:I.modalID}),C({pathname:"/accounting-ledger",search:"?cId=".concat(_)})}),400)},children:"Guardar"})})]}):null]})},p=l=>{var s,d,i,c,o,n;let{data:t,updObs:m}=l;const[x,h]=(0,e.useState)(0),p=t.processorTransactionReference;let _=null===(s=(0,a.bh)("account_ids"))||void 0===s?void 0:s[null===(d=(0,a.bh)(p))||void 0===d?void 0:d.account],b=null===(i=(0,a.bh)("sub_account_ids"))||void 0===i?void 0:i[null===(c=(0,a.bh)(p))||void 0===c?void 0:c.subAccount],j=(1*(null===t||void 0===t?void 0:t.amount)+1*(null===t||void 0===t?void 0:t.totalTransactionFee)).toFixed(2),N=null===t||void 0===t||null===(o=t.contactName)||void 0===o||null===(n=o.split("/\n"))||void 0===n?void 0:n.join("");return(0,u.jsxs)("div",{className:" ",children:[(0,u.jsx)("div",{className:"_dsplFlx ",children:null!==_&&void 0!==_&&_.code?(0,u.jsxs)("div",{className:"_dsplFlx ",children:[(0,u.jsxs)("div",{className:"_dsplFlx",children:[null!==_&&void 0!==_&&_.code?(0,u.jsxs)("div",{className:" acc_dtls",children:[(0,u.jsxs)("div",{className:"_dsplFlx",children:[(0,u.jsx)("div",{className:"code",style:{color:"#646cff"},children:null===_||void 0===_?void 0:_.code}),(0,u.jsx)("div",{className:"name",children:null===_||void 0===_?void 0:_.name})]}),(0,u.jsx)("div",{className:"flexSpace"})]}):null,b?(0,u.jsxs)("div",{className:"_dsplFlx",children:[(0,u.jsx)("div",{className:"code",style:{color:"#646cff"},children:null===b||void 0===b?void 0:b.code}),(0,u.jsx)("div",{className:"name",children:null===b||void 0===b?void 0:b.name})]}):null]}),(0,u.jsx)("div",{className:"flexSpace"}),(0,u.jsx)("div",{className:"icon",onClick:()=>{(0,a.Rz)(p,null),m()},children:(0,u.jsx)(v,{name:"outline_edit",color:"#1a73e8"})})]}):(0,u.jsxs)("div",{className:"_dsplFlx ",children:[(0,u.jsxs)("div",{className:"_dsplFlx align_itm",style:{marginRight:40},children:[(0,u.jsx)("p",{className:"key_docL",children:"Name:"}),(0,u.jsx)("p",{className:"value_docL",children:N})]}),(0,u.jsx)("div",{className:"flexSpace"}),(0,u.jsx)(r,{placeholder:"buscar una cuenta",width:420,handleClick:l=>{let s={account:l.account,subAccount:l.subAccount};(0,a.Rz)(p,s),h((0,a.M5)())}})]})}),(0,u.jsxs)("div",{className:"_dsplFlx ",children:[(0,u.jsxs)("div",{className:"_dsplFlx align_itm",children:[(0,u.jsx)("p",{className:"key_docL",children:"Documento:"}),(0,u.jsx)("p",{className:"value_docL",children:null===t||void 0===t?void 0:t.referenceNumber})]}),(0,u.jsx)("div",{className:"_dsplFlx align_itm",style:{paddingLeft:8},children:(0,u.jsx)("p",{className:"amount_docL",children:"$"+j})}),(0,u.jsx)("div",{className:"flexSpace"})]})]})},_=l=>{let s=0;return l&&(null===l||void 0===l||l.map(((l,d)=>{var e;const i=l.processorTransactionReference;s+=null!==(e=(0,a.bh)(i))&&void 0!==e&&e.account?0:1}))),s}},9803:()=>{}}]);
//# sourceMappingURL=6848.5ef05608.chunk.js.map