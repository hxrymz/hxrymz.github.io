"use strict";(self.webpackChunkhrmfinance=self.webpackChunkhrmfinance||[]).push([[6848],{6848:(l,s,d)=>{d.r(s),d.d(s,{default:()=>h});var e=d(2791),a=d(2350),i=d(2647),o=(d(9803),d(9760)),c=d(9661),n=d(7689),t=d(4050),u=d(184);const v=(0,i.PU)(),r=(0,c.FC)(),m="new_multi_deposit_prov",p="multi_deposit_by_prov_Doc",h=l=>{var s,d,i,c,v,r,h,b,j,N,f,g,y,F,k,I,D,L,R;let{data:S,confirm:A}=l;const w=(0,e.useRef)(!1),[,z]=(0,e.useState)(0),C=(0,n.s0)();(0,e.useEffect)((()=>{w.current||(w.current=!0,(0,t.Ht)("global_accounts","global_account_params",M),(0,a.Rz)("PamentMethodAccount",null),(0,a.Rz)(p,null),(0,a.Rz)("accountPicker",{}),z((0,a.M5)()))}));const M=()=>{z((0,a.M5)())},T=async(l,s)=>{var d,e;let i={...null===(d=(0,a.bh)((0,a.hQ)()))||void 0===d?void 0:d.upd_deposit_summary};i.params={businessId:null===(e=(0,a.bh)("profileUser"))||void 0===e?void 0:e.businessId,depositSummaryId:l},i.data2update={comprobanteId:s},console.log(i);const o=(0,a.I7)(i),c=await o;console.log(c),c&&c.error};let Q=null===(s=(0,a.bh)("global_account_params"))||void 0===s?void 0:s.cash_bank,H=null===(d=(0,a.bh)("global_account_params"))||void 0===d?void 0:d.bankComisions;return(0,u.jsxs)("div",{style:{maxHeight:"90vh",minHeight:"88vh",width:"840px",overflow:"auto",background:"var(--hrm_palette-general-background-b)",borderRadius:13,padding:"10px 19px"},children:[(0,u.jsxs)("div",{className:"_dsplFlx ",children:[(0,u.jsx)("p",{className:"form_title",children:"Registrando Deposito"}),(0,u.jsx)("div",{className:"flexSpace"})]}),(0,u.jsxs)("div",{className:"_dsplFlx",style:{marginTop:25},children:[(0,u.jsx)("div",{className:"flexSpace"}),null!==Q&&void 0!==Q&&Q.account?(0,u.jsxs)("div",{className:" acc_dtls",children:[(0,u.jsxs)("div",{className:"_dsplFlx",children:[(0,u.jsx)("div",{className:"code",style:{color:"#646cff"},children:null===(i=(0,a.bh)("account_ids"))||void 0===i||null===(c=i[null===Q||void 0===Q?void 0:Q.account])||void 0===c?void 0:c.code}),(0,u.jsx)("div",{className:"name",children:null===(v=(0,a.bh)("account_ids"))||void 0===v||null===(r=v[null===Q||void 0===Q?void 0:Q.account])||void 0===r?void 0:r.name})]}),(0,u.jsx)("div",{className:"flexSpace"})]}):null]}),(0,u.jsxs)("div",{className:"_dsplFlx ",children:[(0,u.jsx)("div",{className:"flexSpace"}),(0,u.jsxs)("div",{className:"_dsplFlx align_itm",children:[(0,u.jsx)("p",{className:"key_docL",children:"Documento:"}),(0,u.jsx)("p",{className:"value_docL",children:null===(h=(0,a.bh)(m))||void 0===h?void 0:h.id})]}),(0,u.jsx)("div",{className:"_dsplFlx align_itm",style:{paddingLeft:8},children:(0,u.jsx)("p",{className:"amount_docL",children:"$"+(null===(b=(0,a.bh)(m))||void 0===b?void 0:b.amount)})})]}),(0,u.jsxs)("div",{className:"_dsplFlx",children:[(0,u.jsx)("div",{className:"flexSpace"}),null!==Q&&void 0!==Q&&Q.account?(0,u.jsxs)("div",{className:" acc_dtls",children:[(0,u.jsxs)("div",{className:"_dsplFlx",children:[(0,u.jsx)("div",{className:"code",style:{color:"#646cff"},children:null===(j=(0,a.bh)("account_ids"))||void 0===j||null===(N=j[null===H||void 0===H?void 0:H.account])||void 0===N?void 0:N.code}),(0,u.jsx)("div",{className:"name",children:null===(f=(0,a.bh)("account_ids"))||void 0===f||null===(g=f[null===H||void 0===H?void 0:H.account])||void 0===g?void 0:g.name})]}),(0,u.jsx)("div",{className:"flexSpace"})]}):null]}),(0,u.jsxs)("div",{className:"_dsplFlx ",children:[(0,u.jsx)("div",{className:"flexSpace"}),(0,u.jsxs)("div",{className:"_dsplFlx align_itm",children:[(0,u.jsx)("p",{className:"key_docL",children:"Documento:"}),(0,u.jsx)("p",{className:"value_docL",children:null===(y=(0,a.bh)(m))||void 0===y?void 0:y.id})]}),(0,u.jsx)("div",{className:"_dsplFlx align_itm",style:{paddingLeft:8},children:(0,u.jsx)("p",{className:"amount_docL",children:"$"+-1*(null===(F=(0,a.bh)(m))||void 0===F?void 0:F.paymentDepositFee)})})]}),(0,u.jsxs)("div",{className:"_dsplFlx ",children:[(0,u.jsx)("p",{className:"key_docL",children:"Fecha:"}),(0,u.jsx)("p",{className:"value_docL",children:(0,a.sJ)(null===(k=(0,a.bh)(m))||void 0===k?void 0:k.depositDate)})]}),(0,u.jsx)("div",{className:"value_docL",style:{textAlign:"left"},children:"Quickbook Deposit ID ".concat(null===(I=(0,a.bh)(m))||void 0===I?void 0:I.id)}),(0,u.jsx)("div",{className:"separator"}),null===(D=(0,a.bh)(m))||void 0===D||null===(L=D.transactions)||void 0===L?void 0:L.map((l=>(0,u.jsx)(x,{data:l,updObs:M},l.id))),0===_(null===(R=(0,a.bh)(m))||void 0===R?void 0:R.transactions)?(0,u.jsxs)("div",{className:"_dsplFlx ",children:[(0,u.jsx)("div",{className:"flexSpace"}),(0,u.jsx)("div",{className:"card",children:(0,u.jsx)("button",{onClick:async()=>{var l,s,d,e,i,c,n,t,u,v,r,h,x;let _=(0,a.bh)(m)||{},b=[];_.date=_.depositDate,_.date||(_.date=(new Date).getTime()+4800);let j=await(0,a.fN)(_.date),N=null===(l=(0,a.bh)("global_account_params"))||void 0===l?void 0:l.cash_bank,f={};f.document=null===(s=(0,a.bh)(m))||void 0===s?void 0:s.id,f.account=null===N||void 0===N?void 0:N.account,f.subAccount=null===N||void 0===N?void 0:N.subAccount,f.type="debit",f.amount=1*(null===(d=(0,a.bh)(m))||void 0===d?void 0:d.amount),f.operationId=(0,a.M5)(),b.push(f);let g=null===(e=(0,a.bh)("global_account_params"))||void 0===e?void 0:e.bankComisions,y={};y.document=null===(i=(0,a.bh)(m))||void 0===i?void 0:i.id,y.account=null===g||void 0===g?void 0:g.account,y.subAccount=null===g||void 0===g?void 0:g.subAccount,y.type="debit",y.amount=-1*(null===(c=(0,a.bh)(m))||void 0===c?void 0:c.paymentDepositFee),y.operationId=(0,a.M5)(),b.push(y);let F={};F.document=null===(n=(0,a.bh)(m))||void 0===n?void 0:n.id,F.account=null===N||void 0===N?void 0:N.account,F.subAccount=null===N||void 0===N?void 0:N.subAccount,F.type="credit",F.amount=-1*(null===(t=(0,a.bh)(m))||void 0===t?void 0:t.paymentDepositFee),F.operationId=(0,a.M5)(),b.push(F),null===(u=(0,a.bh)(m))||void 0===u||null===(v=u.transactions)||void 0===v||v.map((l=>{const s=l.processorTransactionReference;let d=(0,a.bh)(s),e=1*(null===l||void 0===l?void 0:l.amount),i={};i.document=null===l||void 0===l?void 0:l.referenceNumber,i.account=null===d||void 0===d?void 0:d.account,i.subAccount=null===d||void 0===d?void 0:d.subAccount,i.type="credit",i.amount=1*e,i.operationId=(0,a.M5)(),b.push(i)}));let k={date:_.date,comprobanteId:j,description:"Quickbook Deposit ID ".concat(null===(r=(0,a.bh)(m))||void 0===r?void 0:r.id),businessId:null===(h=(0,a.bh)("profileUser"))||void 0===h?void 0:h.businessId,year:new Date(_.date).getFullYear()};delete _.date;let I={...null===(x=(0,a.bh)((0,a.hQ)()))||void 0===x?void 0:x.add_multi_opera};I.params=k,I.form=b;const D=(0,a.I7)(I);await D&&setTimeout((()=>{var l,s,d;(0,a.Rz)(p,null),T(null===(l=(0,a.bh)(m))||void 0===l?void 0:l.depositSummaryId,j),null===(s=(0,a.bh)(m))||void 0===s||null===(d=s.transactions)||void 0===d||d.map((l=>{const s=l.processorTransactionReference;(0,a.Rz)(s,null)})),(0,a.Rz)("multi_deposit_anticipo_by_doc",null),(0,a.Rz)(m,null),(null===S||void 0===S?void 0:S.modalID)&&(0,o.CloseModal)({id:null===S||void 0===S?void 0:S.modalID}),C({pathname:"/accounting-ledger",search:"?cId=".concat(j)})}),400)},children:"Guardar"})})]}):null]})},x=l=>{var s,d,i,o,c,n;let{data:t,updObs:m}=l;const[p,h]=(0,e.useState)(0),x=t.processorTransactionReference;let _=null===(s=(0,a.bh)("account_ids"))||void 0===s?void 0:s[null===(d=(0,a.bh)(x))||void 0===d?void 0:d.account],b=null===(i=(0,a.bh)("sub_account_ids"))||void 0===i?void 0:i[null===(o=(0,a.bh)(x))||void 0===o?void 0:o.subAccount],j=(1*(null===t||void 0===t?void 0:t.amount)+1*(null===t||void 0===t?void 0:t.totalTransactionFee)).toFixed(2),N=null===t||void 0===t||null===(c=t.contactName)||void 0===c||null===(n=c.split("/\n"))||void 0===n?void 0:n.join("");return(0,u.jsxs)("div",{className:" ",children:[(0,u.jsx)("div",{className:"_dsplFlx ",children:null!==_&&void 0!==_&&_.code?(0,u.jsxs)("div",{className:"_dsplFlx ",children:[(0,u.jsxs)("div",{className:"_dsplFlx",children:[null!==_&&void 0!==_&&_.code?(0,u.jsxs)("div",{className:" acc_dtls",children:[(0,u.jsxs)("div",{className:"_dsplFlx",children:[(0,u.jsx)("div",{className:"code",style:{color:"#646cff"},children:null===_||void 0===_?void 0:_.code}),(0,u.jsx)("div",{className:"name",children:null===_||void 0===_?void 0:_.name})]}),(0,u.jsx)("div",{className:"flexSpace"})]}):null,b?(0,u.jsxs)("div",{className:"_dsplFlx",children:[(0,u.jsx)("div",{className:"code",style:{color:"#646cff"},children:null===b||void 0===b?void 0:b.code}),(0,u.jsx)("div",{className:"name",children:null===b||void 0===b?void 0:b.name})]}):null]}),(0,u.jsx)("div",{className:"flexSpace"}),(0,u.jsx)("div",{className:"icon",onClick:()=>{(0,a.Rz)(x,null),m()},children:(0,u.jsx)(v,{name:"outline_edit",color:"#1a73e8"})})]}):(0,u.jsxs)("div",{className:"_dsplFlx ",children:[(0,u.jsxs)("div",{className:"_dsplFlx align_itm",style:{marginRight:40},children:[(0,u.jsx)("p",{className:"key_docL",children:"Name:"}),(0,u.jsx)("p",{className:"value_docL",children:N})]}),(0,u.jsx)("div",{className:"flexSpace"}),(0,u.jsx)(r,{placeholder:"buscar una cuenta",width:420,handleClick:l=>{let s={account:l.account,subAccount:l.subAccount};(0,a.Rz)(x,s),m()}})]})}),(0,u.jsxs)("div",{className:"_dsplFlx ",children:[(0,u.jsxs)("div",{className:"_dsplFlx align_itm",children:[(0,u.jsx)("p",{className:"key_docL",children:"Documento:"}),(0,u.jsx)("p",{className:"value_docL",children:null===t||void 0===t?void 0:t.referenceNumber})]}),(0,u.jsx)("div",{className:"_dsplFlx align_itm",style:{paddingLeft:8},children:(0,u.jsx)("p",{className:"amount_docL",children:"$"+j})}),(0,u.jsx)("div",{className:"flexSpace"})]})]})},_=l=>{let s=0;return l&&(null===l||void 0===l||l.map(((l,d)=>{var e;const i=l.processorTransactionReference;s+=null!==(e=(0,a.bh)(i))&&void 0!==e&&e.account?0:1}))),s}},9803:()=>{}}]);
//# sourceMappingURL=6848.9005b2ea.chunk.js.map