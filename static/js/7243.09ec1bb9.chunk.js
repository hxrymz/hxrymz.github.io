"use strict";(self.webpackChunkhrmfinance=self.webpackChunkhrmfinance||[]).push([[7243,9760],{9760:(e,l,n)=>{n.r(l),n.d(l,{CloseModal:()=>r,OpenModal:()=>c,default:()=>d});var a=n(2791),i=n(5408),o=n(2350),s=n(184);const t="listDialog_mdh392",d=()=>{const e=(0,o.bh)("listDialog")||{};(0,i.Z)(t);let l=Object.keys(e);return(0,s.jsx)(s.Fragment,{children:l.map(((l,n)=>{let i=e[l];if(i&&i.visible){let e={};i.height&&(e.heigth=i.height),i.width,i.zIndex&&(e.zIndex=i.zIndex-1);let n={zIndex:i.zIndex},o=null,t=i.data;return i.content&&(o=a.cloneElement(i.content,{data:t})),(0,s.jsxs)("div",{className:"ltr-1kbnjow",style:e,children:[(0,s.jsx)("div",{className:"ltr-hoe9xz",children:(0,s.jsx)("div",{className:"ltr-1wao6ny",style:n,id:l,children:o})}),i.data.overlay?(0,s.jsx)("div",{className:"DialogHRMOverlay ".concat(i.visible?"active":""),onClick:()=>{var e;e=l,document.getElementsByTagName("html")[0].classList.remove("has-level-two"),r({id:e})}}):null]},l)}}))})},c=e=>{let l=(0,o.bh)("listDialog")||{},n=(0,o.M5)();l[n]||(l[n]={}),l[n].visible=!0;let a={};e.props?(a=e.props,a.modalID=n):a.modalID=n;let i=document.getElementsByTagName("body")[0];null!==i&&void 0!==i&&i.style&&(i.style.overflowY="hidden"),l[n].isView=e.isView,l[n].observeResize=e.observeResize,l[n].observeResize&&(l[n].observeInterval=setInterval((()=>{let e=document.querySelector("[dialog-key-id='".concat(n,"']")),a=e&&e.getBoundingClientRect();a&&(a.width===l[n].width&&a.height===l[n].height||(l[n].height=a.height+10,l[n].width=a.width,(0,o.Rz)("listDialog",l),(0,o.wt)(t)))}),200)),l[n].display=!0,e.zIndex&&(l[n].zIndex=e.zIndex),e.height&&(l[n].height=e.height),e.width&&(l[n].width=e.width),e.content&&(l[n].content=e.content),l[n].data=a,(0,o.Rz)("listDialog",l),(0,o.wt)(t),setTimeout((()=>{document.getElementsByTagName("html")[0].classList.add("has-level-two"),(0,o.Rz)("modalOpen",n),(0,o.wt)(t)}),125)},r=e=>{let l=(0,o.bh)("listDialog")||{},n=e.id;if(l[n]){var a,i,s;l[n].observeResize&&l[n].observeInterval&&clearInterval(l[n].observeInterval),l[n].display=!1,null===(a=l[n])||void 0===a||null===(i=a.data)||void 0===i||null===(s=i.closeEvent)||void 0===s||s.call(i),(0,o.Rz)("listDialog",l),delete l[n],document.getElementsByTagName("body")[0].style.overflowY=null,(0,o.wt)(t),setTimeout((()=>{delete l[n],document.getElementsByTagName("html")[0].classList.remove("has-level-two"),(0,o.Rz)("modalOpen",null)}),750)}}},3885:(e,l,n)=>{n.d(l,{Z:()=>o});n(2791),n(1534);var a=n(9760),i=n(184);const o=e=>{let{data:l,confirm:n,title:o,msg:s}=e;const{modalID:t}=l;return(0,i.jsxs)("div",{style:{maxHeight:"40vh",minHeight:"18vh",overflow:"auto",background:"#fff",borderRadius:13,padding:"10px 19px"},children:[(0,i.jsxs)("div",{className:"_dsplFlx ",children:[(0,i.jsx)("p",{className:"form_title",style:{color:"var(--hrm_palette-static-brand-red"},children:o||"Lo sentimos"}),(0,i.jsx)("div",{className:"flexSpace"})]}),s,(0,i.jsxs)("div",{className:"_dsplFlx ",style:{padding:"5px 10px"},children:[(0,i.jsx)("div",{className:"flexSpace"}),(0,i.jsx)("p",{className:"group_title addBtn blue",onClick:()=>{n&&n(),(0,a.CloseModal)({id:t})},children:"OK"})]})]})}},7243:(e,l,n)=>{n.r(l),n.d(l,{default:()=>u});var a=n(2791),i=n(2350),o=n(2647),s=(n(7889),n(9760)),t=n(3885),d=n(713),c=n(15),r=n(184);(0,o.YZ)();const h=(0,o.Np)(),v=((0,o.tL)(),(0,o.PU)()),m="do_inventory_location",u=e=>{var l,n,o,v,u;let{data:p,confirm:b}=e;const[g,y]=(0,a.useState)(!1),[j,I]=(0,a.useState)(0),_=(0,a.useRef)(0);(0,a.useEffect)((()=>{g||(y(!0),I((0,i.M5)()))}));const N=e=>{let l={zIndex:450,height:"80vh",props:{minHeight:"1vh",overlay:!0}};l.content=(0,r.jsx)(t.Z,{msg:e}),(0,s.OpenModal)(l)};let f=(0,i.bh)("scanningInventoryByLocation"),w=null===f||void 0===f?void 0:f[(0,i.bh)("currentLocationOnScan")];return(0,r.jsxs)("div",{style:{maxHeight:"90vh",minHeight:"86vh",width:"760px",overflow:"auto",background:"var(--hrm_palette-general-background-b)",borderRadius:13,padding:"10px 19px 39px"},children:[(0,r.jsxs)("div",{className:"_dsplFlx ",children:[(0,r.jsx)("p",{className:"form_title",children:"Inventory By Location"}),(0,r.jsx)("div",{className:"flexSpace"}),(0,r.jsx)("div",{className:"",children:(0,r.jsx)("button",{onClick:async()=>{var e,l;let n=(0,i.bh)("scanningInventoryByLocation"),a=(0,i.bh)("inventoryOnScanItems")||{},o=[];n&&(0,i._2)(n).map((e=>{(0,i._2)(n[e]).map((l=>{var i,s;null!==a&&void 0!==a&&a[l]&&o.push({inventoryId:l,locationId:e,date:n[e][l],productId:null===a||void 0===a||null===(i=a[l])||void 0===i?void 0:i.productId,alphaCode:null===a||void 0===a||null===(s=a[l])||void 0===s?void 0:s.alphaCode})}))}));let t={...null===(e=(0,i.bh)((0,i.hQ)()))||void 0===e?void 0:e.add_inv_location_batch};t.params={businessId:null===(l=(0,i.bh)("profileUser"))||void 0===l?void 0:l.businessId},t.form=o;const d=(0,i.I7)(t);await d;(null===p||void 0===p?void 0:p.modalID)&&(0,s.CloseModal)({id:null===p||void 0===p?void 0:p.modalID}),setTimeout((()=>{(0,i.Rz)("inventoryOnScanItems",null),(0,i.Rz)("scanningInventoryByLocation",null),(0,i.Rz)(m,null),I((0,i.M5)()),b&&b()}),400)},children:"Guardar"})})]}),(0,i.bh)("currentLocationOnScan")?(0,r.jsx)("div",{className:"lh-default hrm_themecolor blue_30",style:{marginTop:20},children:(0,r.jsx)("div",{className:"IssueLabel hrm_labelColor hrm_label_14lh",children:(0,r.jsx)("div",{className:"_dsplFlx keyToken fnt_curr_scan",children:"Scanning this location ".concat("".concat(null===(l=(0,i.bh)("locations_ids"))||void 0===l||null===(n=l[(0,i.bh)("currentLocationOnScan")])||void 0===n?void 0:n.areaId,"-").concat(null===(o=(0,i.bh)("locations_ids"))||void 0===o||null===(v=o[(0,i.bh)("currentLocationOnScan")])||void 0===v?void 0:v.location))})})}):null,(0,r.jsx)("div",{className:"_dsplFlx spaceAround",style:{marginTop:20},children:(0,r.jsx)(h,{init:null===(u=(0,i.bh)(m))||void 0===u?void 0:u.i2scan,width:320,updChanges:e=>((e,l,n)=>{let a=(0,i.bh)(m)||{};n?(a[n]||(a[n]={}),a[n][e]=l):a[e]=l,(0,i.Rz)(m,a),I((0,i.M5)())})("i2scan",e),onEnter:e=>{var l;if((0,i.bh)("locations_ids")[e]){(0,i.Rz)("currentLocationOnScan",e);let l=(0,i.bh)("scanningInventoryByLocation")||{};l[e]||(l[e]={}),(0,i.Rz)("scanningInventoryByLocation",l),I((0,i.M5)())}else if((0,i.bh)("currentLocationOnScan"))(async e=>{if(await(0,d.SI)(e)){let l=(0,i.bh)("currentLocationOnScan"),n=(0,i.bh)("scanningInventoryByLocation")||{};n[l][e]||(n[l][e]=(new Date).getTime()),(0,i.Rz)("scanningInventoryByLocation",n)}else(0,c.OpenToast)({text:"hubo un error con el codigo escaneado",timeout:1500});I((0,i.M5)())})(e);else{N((0,r.jsx)("div",{className:"_dsplFlx ",children:(0,r.jsx)("span",{children:"Debe escanear una locacion primero"})})),(0,c.OpenToast)({text:"Debe escanear una locacion primero",timeout:1500})}null===_||void 0===_||null===(l=_.current)||void 0===l||l.clearTx()},ref:_})}),w?(0,r.jsx)("div",{className:"",children:(0,r.jsx)(x,{locationId:(0,i.bh)("currentLocationOnScan"),locList:w,isCurrent:!0})}):null,(0,r.jsx)("div",{className:"separator"}),(0,r.jsx)("div",{className:"colScroll",children:f&&(0,i._2)(f).map((e=>e===(0,i.bh)("currentLocationOnScan")?null:(0,r.jsx)(x,{locationId:e,locList:null===f||void 0===f?void 0:f[e]},e)))}),(0,r.jsx)("div",{className:"_dsplFlx ",children:(0,r.jsx)("div",{className:"flexSpace"})})]})},x=e=>{var l,n,a,o;let{locationId:s,locList:t,isCurrent:d}=e;return(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"lh-default hrm_themecolor ".concat(d?"blue_30":"yellow_orange"),style:{marginTop:20},children:(0,r.jsx)("div",{className:"IssueLabel hrm_labelColor hrm_label_14lh",children:(0,r.jsxs)("div",{className:"_dsplFlx keyToken fnt_curr_scan ",children:[(0,r.jsx)(v,{name:"map-marker-radius-outline",color:"var(--lighten-color)",size:20}),"".concat(null===(l=(0,i.bh)("locations_ids"))||void 0===l||null===(n=l[s])||void 0===n?void 0:n.areaId,"-").concat(null===(a=(0,i.bh)("locations_ids"))||void 0===a||null===(o=a[s])||void 0===o?void 0:o.location)]})})}),t&&(0,i._2)(t).map((e=>{var l,n,a,o;return(0,r.jsx)("div",{children:null!==(l=(0,i.bh)("inventoryOnScanItems"))&&void 0!==l&&null!==(n=l[e])&&void 0!==n&&n.alphaCode?(0,r.jsx)("div",{className:"invAlpha",children:(0,r.jsx)("h5",{children:null===(a=(0,i.bh)("inventoryOnScanItems"))||void 0===a||null===(o=a[e])||void 0===o?void 0:o.alphaCode})}):(0,r.jsxs)("div",{className:" _dsplFlx ",children:[(0,r.jsx)("div",{className:"flexSpace"}),(0,r.jsxs)("div",{className:"invAlpha error _dsplFlx",children:[(0,r.jsx)("div",{className:"icon",children:(0,r.jsx)(v,{name:"alert",color:"#c62828",size:20})}),(0,r.jsx)("h5",{children:e})]}),(0,r.jsx)("div",{className:"flexSpace"})]})},e)}))]},s)}},7889:()=>{},1534:()=>{}}]);
//# sourceMappingURL=7243.09ec1bb9.chunk.js.map