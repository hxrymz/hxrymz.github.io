"use strict";(self.webpackChunkhrmfinance=self.webpackChunkhrmfinance||[]).push([[7244],{238:(e,l,s)=>{s.r(l),s.d(l,{default:()=>N});var i=s(2791),a=(s(5868),s(2647)),n=s(7689),d=s(2350),t=s(5143),c=s(8037),r=s(2825),o=s(9760),m=s(6514),v=s(9018),x=s(8965),h=s(9927),u=s(184);const p=(0,a.Np)(),j=(0,a.Zg)(),g=(0,a.PU)(),b=(0,a.tW)(),f=(0,d.Ks)()+"_upd",N=e=>{var l,s;let{data:a,confirm:t}=e;const[,c]=(0,i.useState)(1),[r,m]=(0,i.useState)(2);const v=null===(l=(0,n.TH)().search)||void 0===l||null===(s=l.split("?"))||void 0===s?void 0:s[1],x=(0,d.mB)(v);null===x||void 0===x||x.cId;const h=()=>{(0,d.Ey)(t)&&t(),(null===a||void 0===a?void 0:a.modalID)&&(0,o.CloseModal)({id:null===a||void 0===a?void 0:a.modalID})},p=e=>{m(e)};return(0,u.jsx)("div",{style:{height:(0,d.bh)("isOS")?"89vh":"94vh",marginTop:(0,d.bh)("isOS")?"9vh":"6vh",width:"94vw",overflow:"auto",background:"var(--dark-800)",borderRadius:13,padding:"12px 6px 20px"},children:(0,u.jsxs)("div",{className:" ",style:{marginBottom:24},children:[(0,u.jsxs)("div",{className:"h23g9woI",children:[(0,u.jsxs)("div",{className:"jKZvHt ",onClick:h,children:[(0,u.jsx)(g,{name:"arrowBack",size:22,color:"var(--light-200)"}),(0,u.jsx)("div",{className:"eULkqP"})]}),(0,u.jsx)("div",{className:"flexSpace"}),(0,d.bh)("image_preview_mov")?(0,u.jsx)("div",{className:"icon_action ".concat(1===r?"active":""," "),onClick:()=>p(1),children:(0,u.jsx)(g,{name:"image_outline",color:"var(--light-200)"})}):null,(0,u.jsx)("div",{className:"icon_action ".concat(2===r?"active":""," "),onClick:()=>p(2),children:(0,u.jsx)(g,{name:"list_form",color:"var(--light-200)"})})]}),(0,u.jsx)("div",{style:{paddingTop:4}}),(0,u.jsx)(w,{viewId:1,activeView:r,children:(0,u.jsx)(_,{})}),(0,u.jsx)(w,{viewId:2,activeView:r,children:(0,u.jsx)(y,{close:h})})]})})},_=e=>{let{activeView:l,children:s}=e;const[,a]=(0,i.useState)(1),[n,c]=(0,i.useState)(""),r=(0,i.useRef)(null),o=(0,i.useRef)(null),v=(0,i.useRef)(null),p=e=>{var l;null===v||void 0===v||null===(l=v.current)||void 0===l||l.setAttribute("show",e)},j=(0,x.w)("",{shallowRender:!0}),N=(0,x.w)("",{shallowRender:!0}),_=()=>{a((0,d.M5)())},y=e=>{if(null!==e&&void 0!==e&&e.ExpenseDocuments){let l=(0,t.Tb)(null===e||void 0===e?void 0:e.ExpenseDocuments);(0,d.Rz)(f,l),_()}},w=async e=>{let l=await(0,t.yO)(e);y(l)},k=()=>{N.value="",c(null),p(!1)};return(0,u.jsxs)("div",{style:{maxWidth:560,height:"90vmin",padding:"5px!important"},children:[(0,u.jsxs)("div",{className:"_dsplFlx ",style:{padding:9},children:[(0,u.jsx)("div",{className:"flexSpace"}),(0,d.bh)("image_url_mov")?(0,u.jsx)("div",{style:{marginBottom:10},children:(0,d.bh)("loading_image_text")?(0,u.jsxs)("div",{className:"icon_compr _dsplFlx",style:{marginTop:10},children:[(0,u.jsxs)("div",{className:"lbl_saving ",children:[(0,t.mU)(22)," ..."]}),(0,u.jsx)(b,{stroke:"var(--partial-success)",size:24,strokeW:8})]}):(0,u.jsxs)("div",{className:"_dsplFlx",style:{margin:"6px 20px 5px"},onClick:e=>{let l=(0,d.bh)("image_fileName"),s=l.split(".").pop(),i=l.split(s)[0]+"png";(0,d.CO)(i)&&(0,t.Qq)(i+"_receipt.json",(async e=>{if(e){var l=await fetch(e),s=await l.json();null!==s&&void 0!==s&&s.ExpenseDocuments?y(s):w(i)}else w(i)}))},children:[(0,u.jsx)("div",{className:"lbl_saving ",style:{margin:"4px 20px 0 0"},children:(0,t.mU)(3)}),(0,u.jsxs)("div",{className:"btn_icon",children:[(0,u.jsx)("div",{className:"icon_absol inside ",children:(0,u.jsx)(g,{name:"image_outline",color:"var(--light-300)",size:20})}),(0,u.jsx)("div",{className:"icon_absol ",children:(0,u.jsx)(g,{name:"scan-helper",color:"var(--partial-success)",size:28})})]})]})}):null]}),n?(0,u.jsxs)("div",{className:"imagePreview",children:[(0,u.jsxs)("div",{className:"",onClick:k,children:[(0,u.jsx)("div",{className:"lbl_dtls",children:(0,t.mU)(5)}),(0,u.jsx)("div",{className:"text2link",children:n})]}),(0,u.jsx)(I,{icon:"market",title:(0,t.mU)(50),frmNm:f,keyfld:"title",updObs:_,newValue:n,confirm:k,join:" "}),(0,u.jsx)(I,{icon:"money_outline",title:(0,t.mU)(51),frmNm:f,keyfld:"amount",updObs:_,newValue:n,confirm:k,replace:!0}),(0,u.jsx)(I,{icon:"text",title:(0,t.mU)(52),frmNm:f,keyfld:"document",updObs:_,newValue:n,confirm:k,join:" "}),(0,u.jsx)(I,{icon:"info",title:(0,t.mU)(53),frmNm:f,keyfld:"description",updObs:_,newValue:n,confirm:k,join:" "})]}):(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{className:"text2Copy_container _dsplFlx",ref:v,children:(0,u.jsxs)("div",{className:"",style:{width:"100%"},children:[(0,u.jsxs)("div",{className:"_dsplFlx",children:[(0,u.jsx)("div",{className:"lbl_dtls",style:{marginBottom:12},children:(0,t.mU)(5)}),(0,u.jsx)("div",{className:"flexSpace"}),(0,u.jsx)("div",{className:"icon_absol inside ",onClick:()=>N.value="",children:(0,u.jsx)(g,{name:"cancel",color:"var(--light-300)",size:20})})]}),(0,u.jsx)("div",{className:"text2link",onClick:()=>c(N.value),children:N.referenceRender})]})}),(0,u.jsxs)("div",{className:"loading_animation_container _dsplFlx",style:{marginTop:112},ref:r,children:[(0,u.jsx)("div",{className:"flexSpace"}),(0,u.jsxs)("div",{className:"icon_compr _dsplFlx loadingFit",style:{marginTop:10},children:[(0,u.jsx)("div",{className:"lbl_saving ",children:j.referenceRender}),(0,u.jsx)(b,{stroke:"var(--partial-success)",size:32,strokeW:8})]}),(0,u.jsx)("div",{className:"flexSpace"})]}),(0,u.jsx)("div",{className:"imagePreview image_container",ref:o,children:(0,u.jsx)(m.d$,{children:(0,u.jsx)(m.Uv,{children:(0,u.jsx)(h.SVGImg,{image:(0,d.bh)("image_preview_mov"),updTxt:e=>{N.value=N.value+" "+e,p(!0)},vectors:(0,d.bh)("image_mov_text")})})})})]})]})},y=e=>{var l,s,a;let{activeView:n,close:m}=e;const[,x]=(0,i.useState)(1),h=()=>{x((0,d.M5)())};let p=["title","description","document","amount","categoryId","imagePath"],j=(0,d.vy)(p,(0,d.bh)(f),(0,d.bh)(f+"_bck"));const g=e=>{b("categoryId",e)},b=(e,l)=>{let s=(0,d.bh)(f)||{};s[e]=l,(0,d.Rz)(f,s),x((0,d.M5)())};let N=null===(l=(0,d.bh)("categories_ids"))||void 0===l||null===(s=l[null===(a=(0,d.bh)(f))||void 0===a?void 0:a.categoryId])||void 0===s?void 0:s.name;return(0,u.jsxs)("div",{style:{maxWidth:560,height:"90vmin",padding:"5px!important"},children:[(0,u.jsxs)("div",{className:"_dsplFlx ",style:{padding:9},children:[(0,u.jsx)("div",{className:"flexSpace"}),j.hasChange?(0,u.jsx)("div",{className:"",children:(0,u.jsx)(c.N,{color:"#007bfc",label:(0,t.mU)(43),clickHandler:async()=>{var e,l,s;let i=(0,d.vy)(p,(0,d.bh)(f),(0,d.bh)(f+"_bck")),a={...null===(e=(0,d.bh)((0,d.hQ)()))||void 0===e?void 0:e.upd__incms_expns};a.params={businessId:null===(l=(0,d.bh)("profileUser"))||void 0===l?void 0:l.businessId,movementId:null===(s=(0,d.bh)(f))||void 0===s?void 0:s.movementId,year:(0,d.bh)("date_current_year")},a.data2update=i.data,(async e=>{const l=(0,d.I7)(e),s=await l;setTimeout((()=>{let l=(0,d.bh)("ignoreMemo")||{};l[e.params.movementId]=2,(0,d.Rz)("ignoreMemo",l)}),100),s&&!s.error&&m(!0)})(a)}})}):null]}),(0,u.jsxs)("div",{className:"scollVh min88",children:[(0,u.jsx)("div",{className:"_dsplFlx  spaceAround flxWrp",children:(0,u.jsx)(v.Z,{icon:"groups",label:(0,t.mU)(54),value:N||(0,t.mU)(45),handleClick:e=>{var l,s;let i={zIndex:480,props:{minHeight:"1vh",overlay:!0}};i.content=(0,u.jsx)(r.Z,{type:(null===(l=(0,d.bh)(f))||void 0===l?void 0:l.movementType)+"s",confirm:g,init:null===(s=(0,d.bh)(f))||void 0===s?void 0:s.categoryId}),(0,o.OpenModal)(i)}})}),(0,u.jsxs)("div",{className:"_dsplFlx  spaceAround flxWrp",children:[(0,u.jsx)(k,{title:(0,t.mU)(50),frmNm:f,keyfld:"title",updObs:h}),(0,u.jsx)(k,{title:(0,t.mU)(51),frmNm:f,keyfld:"amount",updObs:h}),(0,u.jsx)(k,{title:(0,t.mU)(52),frmNm:f,keyfld:"document",updObs:h}),(0,u.jsx)(k,{title:(0,t.mU)(53),frmNm:f,keyfld:"description",updObs:h,isTxtArea:!0})]})]})]})},w=e=>{let{viewId:l,activeView:s,children:i}=e;return(0,u.jsx)("div",{className:"opacityView",style:{opacity:l===s?1:0,marginTop:2},children:l===s?i:null})},k=e=>{var l;let{title:s,keyfld:a,frmNm:n,isTxtArea:t,updObs:c}=e;const[,r]=(0,i.useState)(1),o=(e,l)=>{let s=(0,d.bh)(n)||{};s[e]=l,(0,d.Rz)(n,s),r((0,d.M5)()),c()};let m=null===(l=(0,d.bh)(n))||void 0===l?void 0:l[a];return(0,u.jsxs)("div",{className:" dtls minhh",children:[(0,u.jsx)("div",{className:"lbl_h_dtls",style:{marginTop:8,textAlign:"left"},children:s}),(0,u.jsx)("div",{className:"_dsplFlx",children:t?(0,u.jsx)("div",{className:"lbl_dtls txt2lp",children:(0,u.jsx)(j,{init:m,width:"86vw",updChanges:e=>o(a,e)})}):(0,u.jsx)("div",{className:"lbl_dtls txt2lp",children:(0,u.jsx)(p,{init:m,width:"86vw",updChanges:e=>o(a,e)})})})]})},I=e=>{var l;let{icon:s,title:a,keyfld:n,replace:t,frmNm:c,newValue:r,confirm:o,join:m}=e;const[,x]=(0,i.useState)(1);let h=null===(l=(0,d.bh)(c))||void 0===l?void 0:l[n];return(0,u.jsx)(v.Z,{icon:s,label:a,value:h||"click to associate",handleClick:()=>{((e,l)=>{let s=(0,d.bh)(c)||{};s[e]=l?l.trim():((0,d.fY)(s[e])+m+r).trim(),(0,d.Rz)(c,s),x((0,d.M5)())})(n,t?r:null),(0,d.Ey)(o)&&o()}})}},5868:()=>{}}]);
//# sourceMappingURL=7244.7d1fbcde.chunk.js.map