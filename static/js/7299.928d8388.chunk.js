"use strict";(self.webpackChunkhrmfinance=self.webpackChunkhrmfinance||[]).push([[7299,9760],{9760:(e,l,n)=>{n.r(l),n.d(l,{CloseModal:()=>r,OpenModal:()=>c,default:()=>d});var a=n(2791),i=n(5408),s=n(2350),o=n(184);const t="listDialog_mdh392",d=()=>{const e=(0,s.bh)("listDialog")||{};(0,i.Z)(t);let l=Object.keys(e);return(0,o.jsx)(o.Fragment,{children:l.map(((l,n)=>{let i=e[l];if(i&&i.visible){let e={};i.height&&(e.heigth=i.height),i.width,i.zIndex&&(e.zIndex=i.zIndex-1);let n={zIndex:i.zIndex},s=null,t=i.data;return i.content&&(s=a.cloneElement(i.content,{data:t})),(0,o.jsxs)("div",{className:"ltr-1kbnjow",style:e,children:[(0,o.jsx)("div",{className:"ltr-hoe9xz",children:(0,o.jsx)("div",{className:"ltr-1wao6ny",style:n,id:l,children:s})}),i.data.overlay?(0,o.jsx)("div",{className:"DialogHRMOverlay ".concat(i.visible?"active":""),onClick:()=>{var e;e=l,document.getElementsByTagName("html")[0].classList.remove("has-level-two"),r({id:e})}}):null]},l)}}))})},c=e=>{let l=(0,s.bh)("listDialog")||{},n=(0,s.M5)();l[n]||(l[n]={}),l[n].visible=!0;let a={};e.props?(a=e.props,a.modalID=n):a.modalID=n;let i=document.getElementsByTagName("body")[0];null!==i&&void 0!==i&&i.style&&(i.style.overflowY="hidden"),l[n].isView=e.isView,l[n].observeResize=e.observeResize,l[n].observeResize&&(l[n].observeInterval=setInterval((()=>{let e=document.querySelector("[dialog-key-id='".concat(n,"']")),a=e&&e.getBoundingClientRect();a&&(a.width===l[n].width&&a.height===l[n].height||(l[n].height=a.height+10,l[n].width=a.width,(0,s.Rz)("listDialog",l),(0,s.wt)(t)))}),200)),l[n].display=!0,e.zIndex&&(l[n].zIndex=e.zIndex),e.height&&(l[n].height=e.height),e.width&&(l[n].width=e.width),e.content&&(l[n].content=e.content),l[n].data=a,(0,s.Rz)("listDialog",l),(0,s.wt)(t),setTimeout((()=>{document.getElementsByTagName("html")[0].classList.add("has-level-two"),(0,s.Rz)("modalOpen",n),(0,s.wt)(t)}),125)},r=e=>{let l=(0,s.bh)("listDialog")||{},n=e.id;if(l[n]){var a,i,o;l[n].observeResize&&l[n].observeInterval&&clearInterval(l[n].observeInterval),l[n].display=!1,null===(a=l[n])||void 0===a||null===(i=a.data)||void 0===i||null===(o=i.closeEvent)||void 0===o||o.call(i),(0,s.Rz)("listDialog",l),delete l[n],document.getElementsByTagName("body")[0].style.overflowY=null,(0,s.wt)(t),setTimeout((()=>{delete l[n],document.getElementsByTagName("html")[0].classList.remove("has-level-two"),(0,s.Rz)("modalOpen",null)}),750)}}},7299:(e,l,n)=>{n.r(l),n.d(l,{default:()=>v});var a=n(2791),i=n(2350),s=n(2647),o=(n(7889),n(9760)),t=(n(1534),n(184));const d=e=>{let{data:l,confirm:n,msg:a}=e;const{modalID:i}=l;return(0,t.jsxs)("div",{style:{maxHeight:"40vh",minHeight:"18vh",overflow:"auto",background:"#fff",borderRadius:13,padding:"10px 19px"},children:[(0,t.jsxs)("div",{className:"_dsplFlx ",children:[(0,t.jsx)("p",{className:"form_title",style:{color:"var(--hrm_palette-static-brand-red"},children:"Lo sentimos"}),(0,t.jsx)("div",{className:"flexSpace"})]}),a,(0,t.jsxs)("div",{className:"_dsplFlx ",style:{padding:"5px 10px"},children:[(0,t.jsx)("div",{className:"flexSpace"}),(0,t.jsx)("p",{className:"group_title addBtn blue",onClick:()=>{(0,o.CloseModal)({id:i})},children:"OK"})]})]})},c=((0,s.YZ)(),(0,s.Np)()),r=((0,s.tL)(),(0,s.PU)()),h="do_inventory_location",v=e=>{var l,n,s,r,v;let{data:u,confirm:x}=e;const[p,b]=(0,a.useState)(!1),[g,y]=(0,a.useState)(0),j=(0,a.useRef)(0);(0,a.useEffect)((()=>{p||(b(!0),y((0,i.M5)()))}));const I=e=>{let l={zIndex:450,height:"80vh",props:{minHeight:"1vh",overlay:!0}};l.content=(0,t.jsx)(d,{msg:e}),(0,o.OpenModal)(l)};let _=(0,i.bh)("scanningInventoryByLocation"),f=null===_||void 0===_?void 0:_[(0,i.bh)("currentLocationOnScan")];return(0,t.jsxs)("div",{style:{maxHeight:"90vh",minHeight:"86vh",width:"760px",overflow:"auto",background:"var(--hrm_palette-general-background-b)",borderRadius:13,padding:"10px 19px 39px"},children:[(0,t.jsxs)("div",{className:"_dsplFlx ",children:[(0,t.jsx)("p",{className:"form_title",children:"Inventory By Location"}),(0,t.jsx)("div",{className:"flexSpace"}),(0,t.jsx)("div",{className:"",children:(0,t.jsx)("button",{onClick:async()=>{var e,l;let n=(0,i.bh)("scanningInventoryByLocation"),a=(0,i.bh)("inventoryOnScanItems")||{},s=[];n&&(0,i._2)(n).map((e=>{(0,i._2)(n[e]).map((l=>{var i,o;null!==a&&void 0!==a&&a[l]&&s.push({inventoryId:l,locationId:e,date:n[e][l],productId:null===a||void 0===a||null===(i=a[l])||void 0===i?void 0:i.productId,alphaCode:null===a||void 0===a||null===(o=a[l])||void 0===o?void 0:o.alphaCode})}))}));let t={...null===(e=(0,i.bh)((0,i.hQ)()))||void 0===e?void 0:e.add_inv_location_batch};t.params={businessId:null===(l=(0,i.bh)("profileUser"))||void 0===l?void 0:l.businessId},t.form=s;const d=(0,i.I7)(t);await d;(null===u||void 0===u?void 0:u.modalID)&&(0,o.CloseModal)({id:null===u||void 0===u?void 0:u.modalID}),setTimeout((()=>{(0,i.Rz)("inventoryOnScanItems",null),(0,i.Rz)("scanningInventoryByLocation",null),(0,i.Rz)(h,null),y((0,i.M5)()),x&&x()}),400)},children:"Guardar"})})]}),(0,i.bh)("currentLocationOnScan")?(0,t.jsx)("div",{className:"lh-default hrm_themecolor blue_30",style:{marginTop:20},children:(0,t.jsx)("div",{className:"IssueLabel hrm_labelColor hrm_label_14lh",children:(0,t.jsx)("div",{className:"_dsplFlx keyToken fnt_curr_scan",children:"Scanning this location ".concat("".concat(null===(l=(0,i.bh)("locations_ids"))||void 0===l||null===(n=l[(0,i.bh)("currentLocationOnScan")])||void 0===n?void 0:n.areaId,"-").concat(null===(s=(0,i.bh)("locations_ids"))||void 0===s||null===(r=s[(0,i.bh)("currentLocationOnScan")])||void 0===r?void 0:r.location))})})}):null,(0,t.jsx)("div",{className:"_dsplFlx spaceAround",style:{marginTop:20},children:(0,t.jsx)(c,{init:null===(v=(0,i.bh)(h))||void 0===v?void 0:v.i2scan,width:320,updChanges:e=>((e,l,n)=>{let a=(0,i.bh)(h)||{};n?(a[n]||(a[n]={}),a[n][e]=l):a[e]=l,(0,i.Rz)(h,a),y((0,i.M5)())})("i2scan",e),onEnter:e=>{var l;if((0,i.bh)("locations_ids")[e]){(0,i.Rz)("currentLocationOnScan",e);let l=(0,i.bh)("scanningInventoryByLocation")||{};l[e]||(l[e]={}),(0,i.Rz)("scanningInventoryByLocation",l),y((0,i.M5)())}else if((0,i.bh)("currentLocationOnScan"))(async(e,l)=>{let n=(0,i.bh)("inventoryOnScanItems")||{};if(null!==n&&void 0!==n&&n[e])l&&l(e);else{var a,s;let o={...null===(a=(0,i.bh)((0,i.hQ)()))||void 0===a?void 0:a.search_inventory};o.params={businessId:null===(s=(0,i.bh)("profileUser"))||void 0===s?void 0:s.businessId,":search0":e};const t=(0,i.I7)(o),d=await t;d?(n[e]=d[e],(0,i.Rz)("inventoryOnScanItems",n),l&&l(d[e])):l&&l(null)}})(e,(()=>{let l=(0,i.bh)("currentLocationOnScan"),n=(0,i.bh)("scanningInventoryByLocation")||{};n[l][e]||(n[l][e]=(new Date).getTime()),(0,i.Rz)("scanningInventoryByLocation",n),y((0,i.M5)())}));else{I((0,t.jsx)("div",{className:"_dsplFlx ",children:(0,t.jsx)("span",{children:"Debe escanear una locacion primero"})}))}null===j||void 0===j||null===(l=j.current)||void 0===l||l.clearTx()},ref:j})}),f?(0,t.jsx)("div",{className:"",children:(0,t.jsx)(m,{locationId:(0,i.bh)("currentLocationOnScan"),locList:f,isCurrent:!0})}):null,(0,t.jsx)("div",{className:"separator"}),(0,t.jsx)("div",{className:"colScroll",children:_&&(0,i._2)(_).map((e=>e===(0,i.bh)("currentLocationOnScan")?null:(0,t.jsx)(m,{locationId:e,locList:null===_||void 0===_?void 0:_[e]},e)))}),(0,t.jsx)("div",{className:"_dsplFlx ",children:(0,t.jsx)("div",{className:"flexSpace"})})]})},m=e=>{var l,n,a,s;let{locationId:o,locList:d,isCurrent:c}=e;return(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"lh-default hrm_themecolor ".concat(c?"blue_30":"yellow_orange"),style:{marginTop:20},children:(0,t.jsx)("div",{className:"IssueLabel hrm_labelColor hrm_label_14lh",children:(0,t.jsxs)("div",{className:"_dsplFlx keyToken fnt_curr_scan ",children:[(0,t.jsx)(r,{name:"map-marker-radius-outline",color:"var(--lighten-color)",size:20}),"".concat(null===(l=(0,i.bh)("locations_ids"))||void 0===l||null===(n=l[o])||void 0===n?void 0:n.areaId,"-").concat(null===(a=(0,i.bh)("locations_ids"))||void 0===a||null===(s=a[o])||void 0===s?void 0:s.location)]})})}),d&&(0,i._2)(d).map((e=>{var l,n,a,s;return(0,t.jsx)("div",{children:null!==(l=(0,i.bh)("inventoryOnScanItems"))&&void 0!==l&&null!==(n=l[e])&&void 0!==n&&n.alphaCode?(0,t.jsx)("div",{className:"invAlpha",children:(0,t.jsx)("h5",{children:null===(a=(0,i.bh)("inventoryOnScanItems"))||void 0===a||null===(s=a[e])||void 0===s?void 0:s.alphaCode})}):(0,t.jsxs)("div",{className:" _dsplFlx ",children:[(0,t.jsx)("div",{className:"flexSpace"}),(0,t.jsxs)("div",{className:"invAlpha error _dsplFlx",children:[(0,t.jsx)("div",{className:"icon",children:(0,t.jsx)(r,{name:"alert",color:"#c62828",size:20})}),(0,t.jsx)("h5",{children:e})]}),(0,t.jsx)("div",{className:"flexSpace"})]})},e)}))]},o)}},7889:()=>{},1534:()=>{}}]);
//# sourceMappingURL=7299.928d8388.chunk.js.map