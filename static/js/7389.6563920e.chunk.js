"use strict";(self.webpackChunkhrmfinance=self.webpackChunkhrmfinance||[]).push([[7389],{7389:(e,a,s)=>{s.r(a),s.d(a,{default:()=>u});var l=s(2791),t=s(2350),o=s(2647),d=s(9760),n=(s(1206),s(1573)),i=s(2502),r=s(4050),c=s(184);const p=(0,o.Vg)(),m=(0,n.mi)(),h=(0,n.vj)(),u=e=>{var a,s;let{data:o,elmId:n,updObs:u}=e;const[v,b]=(0,l.useState)(!1),[y,_]=(0,l.useState)(0),[I,j]=(0,l.useState)(!1),[x,f]=(0,l.useState)(!1),[g,N]=(0,l.useState)(!1);(0,l.useEffect)((()=>{v||(b(!0),_((0,t.M5)()),(0,r.Ht)("global_accounts","global_account_params",k))}));const Q=()=>{j(!1),f(!0)},k=e=>{(0,i.Dy)(w)},w=async(e,a)=>{_((0,t.M5)()),N(!1)};return(0,c.jsxs)("div",{className:"",children:[(0,c.jsxs)("div",{className:"accounts_header",children:[(0,c.jsx)("h2",{children:"Empleados"}),(0,c.jsx)("div",{className:"_dsplFlx ",children:(0,c.jsx)("p",{className:"group_title addBtn purple",onClick:()=>{f(!1);let e={zIndex:450,height:"80vh",props:{minHeight:"1vh",overlay:!0}};e.content=(0,c.jsx)(m,{confimr:k}),(0,d.OpenModal)(e)},children:"Agregar Empleado"})}),(0,c.jsxs)("div",{className:"_dsplFlx ",style:{marginTop:14},children:[(0,c.jsx)(p,{placeholder:"Buscar ....",width:360,obs:_,fetchData:e=>{N(!0),(0,i.kQ)(w)},loading:g,change:e=>{!g&&N(!0)},callempty:k,keyFlds:"searchQry"}),(0,c.jsx)("div",{className:"flexSpace"}),(0,c.jsxs)("div",{className:"_dsplFlx ",children:[(0,c.jsx)("div",{className:"total_comprobante_title",children:"No de Empleados:"}),(0,c.jsx)("div",{className:"total_comprobante gray",children:(0,c.jsx)("span",{children:null===(a=(0,t._2)((0,t.bh)("employees_list")))||void 0===a?void 0:a.length})})]})]})]}),(0,c.jsx)("div",{className:"employees_container scollVh",children:(0,t.bh)("employees_list")&&(null===(s=(0,t._2)((0,t.bh)("employees_list")))||void 0===s?void 0:s.map((e=>(0,c.jsx)(h,{data:(0,t.bh)("employees_list")[e],elmId:e,openUpdateView:Q,handleRefreshAll:k},e))))})]})}},2502:(e,a,s)=>{s.d(a,{Dy:()=>t,kQ:()=>o,lG:()=>d});var l=s(2350);const t=async e=>{var a,s;let t={...null===(a=(0,l.bh)((0,l.hQ)()))||void 0===a?void 0:a.all_employee};t.params={businessId:null===(s=(0,l.bh)("profileUser"))||void 0===s?void 0:s.businessId};const o=(0,l.I7)(t),d=await o;d&&((0,l.Rz)("employees_list",n((0,l.jQ)(d),"code")),(0,l.Rz)("employees_ids",(0,l.ME)((0,l.jQ)(d),"employeeId")),e&&e())},o=async e=>{var a,s;let t={...null===(a=(0,l.bh)((0,l.hQ)()))||void 0===a?void 0:a.search_employee};t.params={businessId:null===(s=(0,l.bh)("profileUser"))||void 0===s?void 0:s.businessId,":search":(0,l.bh)("searchQry")};const o=(0,l.I7)(t),d=await o;d&&((0,l.Rz)("employees_list",n((0,l.jQ)(d),"code")),e&&e())},d=async(e,a)=>{var s,t,o,d;let n={...null===(s=(0,l.bh)((0,l.hQ)()))||void 0===s?void 0:s.filter_search_opera};n.params={businessId:null===(t=(0,l.bh)("profileUser"))||void 0===t?void 0:t.businessId,year:(0,l.bh)("date_current_year"),":date1":(null===(o=(0,l.bh)("date_range_comps"))||void 0===o?void 0:o.initDate)-10,":date2":null===(d=(0,l.bh)("date_range_comps"))||void 0===d?void 0:d.lastDate,":search0":e};const i=(0,l.I7)(n),r=await i;r&&!r.error&&((0,l.Rz)("paystub_submayor_list",r),(0,l.Rz)("paystub_submayor_group",function(e){var a={};e.length>0?e.map((e=>{let s=e.date+"_"+e.comprobanteId;if(!a[s]){a[s]={},["date","description","entryName","comprobanteId","employeeId","document"].forEach((l=>{a[s][l]=e[l]})),a[s].amount=0,a[s].balance=0,a[s].operations=[]}e.type&&(a[s].balance=1*(0,l.Zv)(a[s].balance,2)+("debit"===e.type?1*(0,l.Zv)(e.amount,2):0),a[s].operations.push(function(e){var a;let s={};s.employeeId=null===(a=(0,l.bh)("employees_ids"))||void 0===a?void 0:a[e.employeeId],s.comprobanteId=e.comprobanteId,s.operationId=e.operationId,s.document=e.document,s.date=e.date,"credit"===e.type?(s.debit=0,s.credit=e.amount):"debit"===e.type&&(s.credit=0,s.debit=e.amount);return s}(e)))})):a=null;return a}((0,l.jQ)(r)))),a&&a()};const n=(e,a)=>(0,l.MV)("sortEmployees",[e],(()=>e&&e.sort(((e,s)=>{let l=1*e[a],t=1*s[a];return l<t?-1:l>t?1:0}))))},1206:()=>{}}]);
//# sourceMappingURL=7389.6563920e.chunk.js.map