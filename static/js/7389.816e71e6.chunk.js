"use strict";(self.webpackChunkhrmfinance=self.webpackChunkhrmfinance||[]).push([[7389,9760],{9760:(e,l,t)=>{t.r(l),t.d(l,{CloseModal:()=>c,OpenModal:()=>r,default:()=>n});var s=t(2791),a=t(5408),o=t(2350),i=t(184);const d="listDialog_mdh392",n=()=>{const e=(0,o.bh)("listDialog")||{};(0,a.Z)(d);let l=Object.keys(e);return(0,i.jsx)(i.Fragment,{children:l.map(((l,t)=>{let a=e[l];if(a&&a.visible){let e={};a.height&&(e.heigth=a.height),a.width,a.zIndex&&(e.zIndex=a.zIndex-1);let t={zIndex:a.zIndex},o=null,d=a.data;return a.content&&(o=s.cloneElement(a.content,{data:d})),(0,i.jsxs)("div",{className:"ltr-1kbnjow",style:e,children:[(0,i.jsx)("div",{className:"ltr-hoe9xz",children:(0,i.jsx)("div",{className:"ltr-1wao6ny",style:t,id:l,children:o})}),a.data.overlay?(0,i.jsx)("div",{className:"DialogHRMOverlay ".concat(a.visible?"active":""),onClick:()=>{var e;e=l,document.getElementsByTagName("html")[0].classList.remove("has-level-two"),c({id:e})}}):null]},l)}}))})},r=e=>{let l=(0,o.bh)("listDialog")||{},t=(0,o.M5)();l[t]||(l[t]={}),l[t].visible=!0;let s={};e.props?(s=e.props,s.modalID=t):s.modalID=t;let a=document.getElementsByTagName("body")[0];null!==a&&void 0!==a&&a.style&&(a.style.overflowY="hidden"),l[t].isView=e.isView,l[t].observeResize=e.observeResize,l[t].observeResize&&(l[t].observeInterval=setInterval((()=>{let e=document.querySelector("[dialog-key-id='".concat(t,"']")),s=e&&e.getBoundingClientRect();s&&(s.width===l[t].width&&s.height===l[t].height||(l[t].height=s.height+10,l[t].width=s.width,(0,o.Rz)("listDialog",l),(0,o.wt)(d)))}),200)),l[t].display=!0,e.zIndex&&(l[t].zIndex=e.zIndex),e.height&&(l[t].height=e.height),e.width&&(l[t].width=e.width),e.content&&(l[t].content=e.content),l[t].data=s,(0,o.Rz)("listDialog",l),(0,o.wt)(d),setTimeout((()=>{document.getElementsByTagName("html")[0].classList.add("has-level-two"),(0,o.Rz)("modalOpen",t),(0,o.wt)(d)}),125)},c=e=>{let l=(0,o.bh)("listDialog")||{},t=e.id;if(l[t]){var s,a,i;l[t].observeResize&&l[t].observeInterval&&clearInterval(l[t].observeInterval),l[t].display=!1,null===(s=l[t])||void 0===s||null===(a=s.data)||void 0===a||null===(i=a.closeEvent)||void 0===i||i.call(a),(0,o.Rz)("listDialog",l),delete l[t],document.getElementsByTagName("body")[0].style.overflowY=null,(0,o.wt)(d),setTimeout((()=>{delete l[t],document.getElementsByTagName("html")[0].classList.remove("has-level-two"),(0,o.Rz)("modalOpen",null)}),750)}}},7389:(e,l,t)=>{t.r(l),t.d(l,{default:()=>p});var s=t(2791),a=t(2350),o=t(2647),i=t(9760),d=(t(1206),t(1573)),n=t(2502),r=t(4050),c=t(184);const h=(0,o.Vg)(),m=(0,d.mi)(),v=(0,d.vj)(),p=e=>{var l,t;let{data:o,elmId:d,updObs:p}=e;const[u,b]=(0,s.useState)(!1),[y,g]=(0,s.useState)(0),[I,_]=(0,s.useState)(!1),[x,w]=(0,s.useState)(!1),[j,f]=(0,s.useState)(!1);(0,s.useEffect)((()=>{u||(b(!0),g((0,a.M5)()),(0,r.Ht)("global_accounts","global_account_params",N))}));const z=()=>{_(!1),w(!0)},N=e=>{(0,n.Dy)(R)},R=async(e,l)=>{g((0,a.M5)()),f(!1)};return(0,c.jsxs)("div",{className:"",children:[(0,c.jsxs)("div",{className:"accounts_header",children:[(0,c.jsx)("h2",{children:"Empleados"}),(0,c.jsx)("div",{className:"_dsplFlx ",children:(0,c.jsx)("p",{className:"group_title addBtn purple",onClick:()=>{w(!1);let e={zIndex:450,height:"80vh",props:{minHeight:"1vh",overlay:!0}};e.content=(0,c.jsx)(m,{confimr:N}),(0,i.OpenModal)(e)},children:"Agregar Empleado"})}),(0,c.jsxs)("div",{className:"_dsplFlx ",style:{marginTop:14},children:[(0,c.jsx)(h,{placeholder:"Buscar ....",width:360,obs:g,fetchData:e=>{f(!0),(0,n.kQ)(R)},loading:j,change:e=>{!j&&f(!0)},callempty:N,keyFlds:"searchQry"}),(0,c.jsx)("div",{className:"flexSpace"}),(0,c.jsxs)("div",{className:"_dsplFlx ",children:[(0,c.jsx)("div",{className:"total_comprobante_title",children:"No de Empleados:"}),(0,c.jsx)("div",{className:"total_comprobante gray",children:(0,c.jsx)("span",{children:null===(l=(0,a._2)((0,a.bh)("employees_list")))||void 0===l?void 0:l.length})})]})]})]}),(0,c.jsx)("div",{className:"employees_container scollVh",children:(0,a.bh)("employees_list")&&(null===(t=(0,a._2)((0,a.bh)("employees_list")))||void 0===t?void 0:t.map((e=>(0,c.jsx)(v,{data:(0,a.bh)("employees_list")[e],elmId:e,openUpdateView:z,handleRefreshAll:N},e))))})]})}},2502:(e,l,t)=>{t.d(l,{Dy:()=>a,G:()=>n,aU:()=>d,kQ:()=>o,lG:()=>i});var s=t(2350);const a=async e=>{var l,t;let a={...null===(l=(0,s.bh)((0,s.hQ)()))||void 0===l?void 0:l.all_employee};a.params={businessId:null===(t=(0,s.bh)("profileUser"))||void 0===t?void 0:t.businessId};const o=(0,s.I7)(a),i=await o;i&&((0,s.Rz)("employees_list",d((0,s.jQ)(i),"code")),(0,s.Rz)("employees_ids",(0,s.ME)((0,s.jQ)(i),"employeeId")),e&&e())},o=async e=>{var l,t;let a={...null===(l=(0,s.bh)((0,s.hQ)()))||void 0===l?void 0:l.search_employee};a.params={businessId:null===(t=(0,s.bh)("profileUser"))||void 0===t?void 0:t.businessId,":search":(0,s.bh)("searchQry")};const o=(0,s.I7)(a),i=await o;i&&((0,s.Rz)("employees_list",d((0,s.jQ)(i),"code")),e&&e())},i=async(e,l)=>{var t,a,o,i;let d={...null===(t=(0,s.bh)((0,s.hQ)()))||void 0===t?void 0:t.filter_search_opera};d.params={businessId:null===(a=(0,s.bh)("profileUser"))||void 0===a?void 0:a.businessId,year:(0,s.bh)("date_current_year"),":date1":(null===(o=(0,s.bh)("date_range_comps"))||void 0===o?void 0:o.initDate)-10,":date2":null===(i=(0,s.bh)("date_range_comps"))||void 0===i?void 0:i.lastDate,":search0":e};const n=(0,s.I7)(d),r=await n;r&&!r.error&&((0,s.Rz)("paystub_submayor_list",r),(0,s.Rz)("paystub_submayor_group",function(e){var l={};e.length>0?e.map((e=>{let t=e.date+"_"+e.comprobanteId;if(!l[t]){l[t]={},["date","description","entryName","comprobanteId","employeeId","document"].forEach((s=>{l[t][s]=e[s]})),l[t].amount=0,l[t].balance=0,l[t].operations=[]}e.type&&(l[t].balance=1*(0,s.Zv)(l[t].balance,2)+("debit"===e.type?1*(0,s.Zv)(e.amount,2):0),l[t].operations.push(function(e){var l;let t={};t.employeeId=null===(l=(0,s.bh)("employees_ids"))||void 0===l?void 0:l[e.employeeId],t.comprobanteId=e.comprobanteId,t.document=e.document,t.date=e.date,"credit"===e.type?(t.debit=0,t.credit=e.amount):"debit"===e.type&&(t.credit=0,t.debit=e.amount);return t}(e)))})):l=null;return l}((0,s.jQ)(r)))),l&&l()};const d=(e,l)=>(0,s.MV)("sortEmployees",[e],(()=>e&&e.sort(((e,t)=>{let s=1*e[l],a=1*t[l];return s<a?-1:s>a?1:0})))),n=async(e,l)=>{var t;let a={query:"deleteEmployeesHRG",params:{businessId:null===(t=(0,s.bh)("profileUser"))||void 0===t?void 0:t.businessId,employeeId:e}};const o=(0,s.I7)(a);await o&&l&&l()}},1206:()=>{}}]);
//# sourceMappingURL=7389.816e71e6.chunk.js.map