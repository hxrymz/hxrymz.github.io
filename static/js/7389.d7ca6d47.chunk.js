"use strict";(self.webpackChunkhrmfinance=self.webpackChunkhrmfinance||[]).push([[7389,7766],{7389:(e,s,a)=>{a.r(s),a.d(s,{default:()=>u});var l=a(2791),o=a(2350),t=a(2647),d=a(9760),i=(a(1206),a(1573)),n=a(2502),r=a(4050),c=a(184);const p=(0,t.Vg)(),h=(0,i.mi)(),m=(0,i.vj)(),u=e=>{var s,a;let{data:t,elmId:i,updObs:u}=e;const[v,y]=(0,l.useState)(!1),[b,_]=(0,l.useState)(0),[x,I]=(0,l.useState)(!1),[j,f]=(0,l.useState)(!1),[g,N]=(0,l.useState)(!1);(0,l.useEffect)((()=>{v||(y(!0),_((0,o.M5)()),(0,r.Ht)("global_accounts","global_account_params",w),(0,o.Rz)("cmpByPayStubMayor",{}))}));const Q=()=>{I(!1),f(!0)},w=e=>{(0,n.Dy)(S)},S=async(e,s)=>{_((0,o.M5)()),N(!1)};return(0,c.jsxs)("div",{className:"",children:[(0,c.jsxs)("div",{className:"accounts_header",children:[(0,c.jsx)("h2",{children:"Empleados"}),(0,c.jsx)("div",{className:"_dsplFlx ",children:(0,c.jsx)("p",{className:"group_title addBtn purple",onClick:()=>{f(!1);let e={zIndex:450,height:"80vh",props:{minHeight:"1vh",overlay:!0}};e.content=(0,c.jsx)(h,{confimr:w}),(0,d.OpenModal)(e)},children:"Agregar Empleado"})}),(0,c.jsxs)("div",{className:"_dsplFlx ",style:{marginTop:14},children:[(0,c.jsx)(p,{placeholder:"Buscar ....",width:360,obs:_,fetchData:e=>{N(!0),(0,n.kQ)(S)},loading:g,change:e=>{!g&&N(!0)},callempty:w,keyFlds:"searchQry"}),(0,c.jsx)("div",{className:"flexSpace"}),(0,c.jsxs)("div",{className:"_dsplFlx ",children:[(0,c.jsx)("div",{className:"total_comprobante_title",children:"No de Empleados:"}),(0,c.jsx)("div",{className:"total_comprobante gray",children:(0,c.jsx)("span",{children:null===(s=(0,o._2)((0,o.bh)("employees_list")))||void 0===s?void 0:s.length})})]})]})]}),(0,c.jsx)("div",{className:"employees_container scollVh",children:(0,o.bh)("employees_list")&&(null===(a=(0,o._2)((0,o.bh)("employees_list")))||void 0===a?void 0:a.map((e=>(0,c.jsx)(m,{data:(0,o.bh)("employees_list")[e],elmId:e,openUpdateView:Q,handleRefreshAll:w},e))))})]})}},2502:(e,s,a)=>{a.d(s,{Dy:()=>o,Oy:()=>i,kQ:()=>t,lG:()=>d});var l=a(2350);const o=async e=>{var s,a;let o={...null===(s=(0,l.bh)((0,l.hQ)()))||void 0===s?void 0:s.all_employee};o.params={businessId:null===(a=(0,l.bh)("profileUser"))||void 0===a?void 0:a.businessId};const t=(0,l.I7)(o),d=await t;d&&((0,l.Rz)("employees_list",n((0,l.jQ)(d),"code")),(0,l.Rz)("employees_ids",(0,l.ME)((0,l.jQ)(d),"employeeId")),e&&e())},t=async e=>{var s,a;let o={...null===(s=(0,l.bh)((0,l.hQ)()))||void 0===s?void 0:s.search_employee};o.params={businessId:null===(a=(0,l.bh)("profileUser"))||void 0===a?void 0:a.businessId,":search":(0,l.bh)("searchQry")};const t=(0,l.I7)(o),d=await t;d&&((0,l.Rz)("employees_list",n((0,l.jQ)(d),"code")),e&&e())},d=async(e,s)=>{var a,o,t,d;let n={...null===(a=(0,l.bh)((0,l.hQ)()))||void 0===a?void 0:a.search_employee_paystub};n.params={businessId:null===(o=(0,l.bh)("profileUser"))||void 0===o?void 0:o.businessId,year:(0,l.bh)("date_current_year"),":date1":(null===(t=(0,l.bh)("date_range_comps"))||void 0===t?void 0:t.initDate)-10,":date2":null===(d=(0,l.bh)("date_range_comps"))||void 0===d?void 0:d.lastDate,":employeeId":e};const r=(0,l.I7)(n),c=await r;c&&!c.error&&((0,l.Rz)("paystub_submayor_list",c),(0,l._2)(c).map((async e=>{var s,a;i(null===(s=c[e])||void 0===s?void 0:s.comprobanteId,null===(a=c[e])||void 0===a?void 0:a.employeeId)}))),s&&s()},i=async(e,s)=>{let a="get_compById_last"+e+"_"+s,o=(0,l.bh)(a)||0;if(Date.now()>o){var t,d;(0,l.Rz)(a,Date.now()+890);let o={...null===(t=(0,l.bh)((0,l.hQ)()))||void 0===t?void 0:t.filter_search_opera};o.params={businessId:null===(d=(0,l.bh)("profileUser"))||void 0===d?void 0:d.businessId,":search0":e,":search1":s};const i=(0,l.I7)(o),n=await i;if(n){let s=(0,l.bh)("cmpByPayStubMayor");return s[e]=n,(0,l.Rz)("cmpByPayStubMayor",s),n}}return null};const n=(e,s)=>(0,l.MV)("sortEmployees",[e],(()=>e&&e.sort(((e,a)=>{let l=1*e[s],o=1*a[s];return l<o?-1:l>o?1:0}))))},1206:()=>{}}]);
//# sourceMappingURL=7389.d7ca6d47.chunk.js.map