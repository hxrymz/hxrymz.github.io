"use strict";(self.webpackChunkhrmfinance=self.webpackChunkhrmfinance||[]).push([[8300],{297:function(l,n,a){a.r(n);var d=a(4165),i=a(1413),o=a(5861),e=a(9439),s=a(2791),c=a(2350),t=a(2647),u=(a(6021),a(9760)),r=a(1232),v=a(9661),m=a(7689),b=a(24),h=a(3990),p=a(4050),_=a(184),x=(0,t.PU)(),f=(0,t.Np)(),j=(0,v.LZ)(),N=(0,b.f_)(),y=(0,t.JC)(),g="new_multi_pay_prov",I="Acc2MPay",A="multi_pay_by_prov_Doc",Z="toPay_by_docM",D="multi_pay_2S",F="extraAccountListOnPay";n.default=function(l){var n,a,t,r,v,b,x,j,y,C,R,S,z,P,O=l.data,T=(l.confirm,(0,s.useState)(!1)),H=(0,e.Z)(T,2),U=H[0],B=H[1],K=(0,s.useState)(0),Q=(0,e.Z)(K,2),G=(Q[0],Q[1]),L=(0,m.s0)(),$=function(){G((0,c.M5)())};(0,s.useEffect)((function(){U||(B(!0),(0,p.Ht)("global_accounts","global_account_params",$),(0,c.Rz)(D,null),(0,c.Rz)(Z,null),(0,c.Rz)(A,null),(0,c.Rz)("accountPicker",{}),G((0,c.M5)()))}));var E=function(l,n,a){var d=(0,c.bh)(g)||{};a?(d[a]||(d[a]={}),d[a][l]=n):d[l]=n,(0,c.Rz)(g,d),G((0,c.M5)())},J=function(){var l=(0,o.Z)((0,d.Z)().mark((function l(){var n,a,e,s,t,r,v,m,b,h,p,_,x,f,j,N;return(0,d.Z)().wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return t=(0,c.bh)(g)||{},r=[],v=new Date,t.date?(v=new Date(t.date),t.date=new Date(t.date).getTime()):t.date=Date.now(),m=v.getFullYear()+""+(v.getMonth()+1)+"-"+(0,c.KX)(),t.comprobanteId=m,b="",(h=(0,c.bh)(D)&&(0,c._2)((0,c.bh)(D)))&&(null===h||void 0===h||h.map((function(l,n){var a,d,o=(0,i.Z)({},t),e=(0,c.bh)(D)[l];o.document=null===e||void 0===e?void 0:e.document,b+=(null===e||void 0===e?void 0:e.document)+" ; ",o.account=null===e||void 0===e?void 0:e.account,o.subAccount=null===e||void 0===e?void 0:e.subAccount,o.providerId=null===e||void 0===e?void 0:e.providerId,o.type=null===e||void 0===e?void 0:e.type,o.amount=null===e||void 0===e?void 0:e.amount,o.payOrCollect="pay",o.operationId=(0,c.M5)();var s=(0,i.Z)({},null===(a=(0,c.bh)((0,c.hQ)()))||void 0===a?void 0:a.add_opera);s.params={businessId:null===(d=(0,c.bh)("profileUser"))||void 0===d?void 0:d.businessId},s.form=o,r.push(s)}))),(p=(0,c.bh)(F)&&(0,c._2)((0,c.bh)(F)))&&(null===p||void 0===p||p.map((function(l,n){var a,d,o,e,s,u=(0,i.Z)({},t),v=(0,c.bh)(F)[l];u.document=u.paymentDocument,u.account=null===v||void 0===v?void 0:v.account,u.subAccount=null===v||void 0===v?void 0:v.subAccount,u.type="debit",u.amount=null===v||void 0===v?void 0:v.amount,u.operationId=(0,c.M5)();var m=(0,i.Z)({},null===(a=(0,c.bh)((0,c.hQ)()))||void 0===a?void 0:a.add_opera);m.params={businessId:null===(d=(0,c.bh)("profileUser"))||void 0===d?void 0:d.businessId},m.form=u,r.push(m);var h=(0,i.Z)({},t);h.document=h.paymentDocument,h.paymentDocument=b,h.account=null===(o=(0,c.bh)("global_account_params"))||void 0===o?void 0:o.cash_bank,h.type="credit",h.amount=1*(null===v||void 0===v?void 0:v.amount),h.operationId=(0,c.M5)();var p=(0,i.Z)({},null===(e=(0,c.bh)((0,c.hQ)()))||void 0===e?void 0:e.add_opera);p.params={businessId:null===(s=(0,c.bh)("profileUser"))||void 0===s?void 0:s.businessId},p.form=h,r.push(p)}))),_=(0,i.Z)({},t),x=M((0,c.bh)(D)),_.document=_.paymentDocument,_.paymentDocument=b,_.account=null===(n=(0,c.bh)("global_account_params"))||void 0===n?void 0:n.cash_bank,(f=null===(a=(0,c.bh)("account_ids"))||void 0===a?void 0:a[_.account]).payOrCollect&&(_.payOrCollect=f.payOrCollect),_.type="credit",_.amount=1*x,_.operationId=(0,c.M5)(),(j=(0,i.Z)({},null===(e=(0,c.bh)((0,c.hQ)()))||void 0===e?void 0:e.add_opera)).params={businessId:null===(s=(0,c.bh)("profileUser"))||void 0===s?void 0:s.businessId},j.form=_,r.push(j),N=r.map(function(){var l=(0,o.Z)((0,d.Z)().mark((function l(n){var a;return(0,d.Z)().wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return a=(0,c.I7)(n),l.next=3,a;case 3:l.sent;case 5:case"end":return l.stop()}}),l)})));return function(n){return l.apply(this,arguments)}}()),l.next=28,Promise.all(N);case 28:setTimeout((function(){(0,c.Rz)(A,null),(0,c.Rz)(g,null),(null===O||void 0===O?void 0:O.modalID)&&(0,u.CloseModal)({id:null===O||void 0===O?void 0:O.modalID}),L({pathname:"/accounting-ledger",search:"?cId=".concat(m)})}),400);case 29:case"end":return l.stop()}}),l)})));return function(){return l.apply(this,arguments)}}(),X=function(){var l=(0,i.Z)({},(0,c.bh)(A))||{},n=(0,i.Z)({},(0,c.bh)(D))||{};(0,c._2)(l).map((function(a){var d,o,e=(null===(d=(0,c.bh)(I))||void 0===d?void 0:d.account)+"_"+(null===(o=(0,c.bh)(I))||void 0===o?void 0:o.subAccount)+"_"+a,s=(0,i.Z)({},(0,c.bh)(I));n[e]={},n[e].amount=1*l[a],n[e].document=a,n[e].type="debit",n[e].account=null===s||void 0===s?void 0:s.account,n[e].providerId=null===s||void 0===s?void 0:s.providerId,n[e].subAccount=null===s||void 0===s?void 0:s.subAccount})),(0,c.Rz)(D,n),(0,c.Rz)(A,null),(0,c.Rz)(I,null),G((0,c.M5)())};return(0,_.jsxs)("div",{style:{maxHeight:"90vh",minHeight:"88vh",width:"720px",overflow:"auto",background:"#fff",borderRadius:13,padding:"10px 19px"},children:[(0,_.jsxs)("div",{className:"_dsplFlx ",children:[(0,_.jsx)("p",{className:"form_title",children:"Registrando Pago"}),(0,_.jsx)("div",{className:"flexSpace"})]}),(0,_.jsxs)("div",{className:"_dsplFlx",children:[(0,_.jsx)("div",{className:"flexSpace"}),null!==(n=(0,c.bh)("global_account_params"))&&void 0!==n&&n.cash_bank?(0,_.jsxs)("div",{className:" acc_dtls",children:[(0,_.jsxs)("div",{className:"_dsplFlx",children:[(0,_.jsx)("div",{className:"code",style:{color:"#646cff"},children:null===(a=(0,c.bh)("account_ids"))||void 0===a||null===(t=a[null===(r=(0,c.bh)("global_account_params"))||void 0===r?void 0:r.cash_bank])||void 0===t?void 0:t.code}),(0,_.jsx)("div",{className:"name",children:null===(v=(0,c.bh)("account_ids"))||void 0===v||null===(b=v[null===(x=(0,c.bh)("global_account_params"))||void 0===x?void 0:x.cash_bank])||void 0===b?void 0:b.name})]}),(0,_.jsx)("div",{className:"flexSpace"})]}):null]}),(0,_.jsxs)("div",{className:"_dsplFlx ",children:[(0,_.jsx)(N,{init:null===(j=(0,c.bh)(g))||void 0===j?void 0:j.date,updDate:function(l){return E("date",l)}}),(0,_.jsx)("div",{className:"flexSpace"}),(0,_.jsx)(f,{init:null===(y=(0,c.bh)(g))||void 0===y?void 0:y.paymentDocument,label:"Documento de Pago",width:200,updChanges:function(l){return E("paymentDocument",l)}})]}),(0,_.jsx)(f,{init:null===(C=(0,c.bh)(g))||void 0===C?void 0:C.description,label:"Descripcion",width:520,updChanges:function(l){return E("description",l)}}),(0,_.jsxs)("div",{className:" _dsplFlx",children:[(0,_.jsx)("div",{className:"flexSpace"}),(0,_.jsx)("p",{className:"group_title addBtn purple",onClick:function(){var l={zIndex:450,height:"93vh",props:{minHeight:"1vh",overlay:!0}};l.content=(0,_.jsx)(w,{updObs:G,confirm:X}),(0,u.OpenModal)(l)},children:"Provedores"})]}),(0,c.bh)(D)&&(0,c._2)((0,c.bh)(D)).length>0?(0,_.jsxs)("div",{className:"boxAddAcc",style:{margin:"18px 0"},children:[(0,_.jsxs)("div",{className:"_dsplFlx hdr_bar purple",style:{margin:"18px 0"},children:[(0,_.jsx)("div",{className:"tr_bar tr_bar_25",children:"Cuenta"}),(0,_.jsx)("div",{className:"tr_bar tr_bar_25",children:"Sub Cuenta"}),(0,_.jsx)("div",{className:"tr_bar tr_bar_25",children:"Documento"}),(0,_.jsx)("div",{className:"tr_bar tr_bar_25",children:"Balance"})]}),(0,c.bh)(D)&&(null===(R=(0,c._2)((0,c.bh)(D)))||void 0===R?void 0:R.map((function(l,n){return(0,_.jsx)(k,{idKey:l,data:(0,c.bh)(D)[l],updObs:G},l)}))),(0,_.jsx)(k,{data:{account:null===(S=(0,c.bh)("global_account_params"))||void 0===S?void 0:S.cash_bank,amount:M((0,c.bh)(D)),type:"credit",document:null===(z=(0,c.bh)(g))||void 0===z?void 0:z.paymentDocument},updObs:G})]}):null,(0,_.jsx)(h.Z,{collectionName:F}),null!==(P=(0,c.bh)(g))&&void 0!==P&&P.paymentDocument&&M((0,c.bh)(D))>0?(0,_.jsxs)("div",{className:"_dsplFlx ",children:[(0,_.jsx)("div",{className:"flexSpace"}),(0,_.jsx)("div",{className:"card",children:(0,_.jsx)("button",{onClick:J,children:"Guardar"})})]}):null]})};var k=function(l){var n,a,d=l.data;return 1*(null===d||void 0===d?void 0:d.amount)===0?null:(0,_.jsxs)("div",{className:"_dsplFlx hdr_bar",children:[(0,_.jsx)("div",{className:"tr_bar tr_bar_25",style:{marginTop:10},children:(0,_.jsx)(y,{data:null===(n=(0,c.bh)("account_ids"))||void 0===n?void 0:n[null===d||void 0===d?void 0:d.account],color:"debit"===d.type?"#009688":"#c62828",labelField:"code",infoField:"name"})}),(0,_.jsx)("div",{className:"tr_bar tr_bar_25",style:{marginTop:10},children:null!==d&&void 0!==d&&d.subAccount?(0,_.jsx)(y,{data:null===(a=(0,c.bh)("sub_account_ids"))||void 0===a?void 0:a[null===d||void 0===d?void 0:d.subAccount],color:"debit"===d.type?"#009688":"#c62828",labelField:"subAccount",infoField:"subAccountName"}):null}),(0,_.jsx)("div",{className:"tr_bar tr_bar_25",style:{marginTop:10},children:null===d||void 0===d?void 0:d.document}),(0,_.jsxs)("div",{className:"tr_bar tr_bar_25",style:{marginTop:10},children:["$",(1*(null===d||void 0===d?void 0:d.amount)).toFixed(2)]})]})},w=function(l){var n,a,d,i,o,t,v,m,b,h,p,x,f,N,y,g,A=l.data,D=l.confirm,F=(0,s.useState)(0),k=(0,e.Z)(F,2),w=(k[0],k[1]),M=function(){w((0,c.M5)())};return(0,_.jsxs)("div",{style:{maxHeight:"92vh",minHeight:"90vh",width:"720px",overflow:"auto",background:"#fff",borderRadius:13,padding:"10px 19px"},children:[(0,_.jsxs)("div",{className:"_dsplFlx ",children:[(0,_.jsx)("p",{className:"form_title",children:"Pagos por Provedores"}),(0,_.jsx)("div",{className:"flexSpace"})]}),(0,_.jsx)("div",{style:{margin:"18px 0"},children:null!==(n=(0,c.bh)(I))&&void 0!==n&&n.account?(0,_.jsxs)("div",{children:[(0,_.jsxs)("div",{className:" acc_dtls",children:[(0,_.jsxs)("div",{className:"_dsplFlx",children:[(0,_.jsx)("div",{className:"code",style:{color:"#646cff"},onClick:function(){(0,c.Rz)(I,null),w((0,c.M5)())},children:null===(a=(0,c.bh)("account_ids"))||void 0===a||null===(d=a[null===(i=(0,c.bh)(I))||void 0===i?void 0:i.account])||void 0===d?void 0:d.code}),(0,_.jsx)("div",{className:"name",children:null===(o=(0,c.bh)("account_ids"))||void 0===o||null===(t=o[null===(v=(0,c.bh)(I))||void 0===v?void 0:v.account])||void 0===t?void 0:t.name})]}),(0,_.jsx)("div",{className:"flexSpace"}),null!==(m=(0,c.bh)(I))&&void 0!==m&&m.subAccount?(0,_.jsxs)("div",{className:"_dsplFlx",style:{margin:"10px 0 0 18px"},children:[(0,_.jsx)("div",{className:"code",children:null===(b=(0,c.bh)("sub_account_ids"))||void 0===b||null===(h=b[null===(p=(0,c.bh)(I))||void 0===p?void 0:p.subAccount])||void 0===h?void 0:h.subAccount}),(0,_.jsx)("div",{className:"name",children:null===(x=(0,c.bh)("sub_account_ids"))||void 0===x||null===(f=x[null===(N=(0,c.bh)(I))||void 0===N?void 0:N.subAccount])||void 0===f?void 0:f.subAccountName})]}):null]}),(0,_.jsxs)("div",{className:"boxAddAcc",style:{margin:"18px 0"},children:[(0,_.jsxs)("div",{className:"_dsplFlx hdr_bar purple",style:{margin:"18px 0"},children:[(0,_.jsx)("div",{className:"tr_bar tr_bar_50",children:"Documento"}),(0,_.jsx)("div",{className:"tr_bar tr_bar_20",children:"Balance"}),(0,_.jsx)("div",{className:"tr_bar tr_bar_5"}),(0,_.jsx)("div",{className:"tr_bar tr_bar_25",children:"Por Pagar"})]}),(0,c.bh)(Z)&&(null===(y=(0,c._2)((0,c.bh)(Z)))||void 0===y?void 0:y.map((function(l,n){return(0,_.jsx)(C,{idKey:l,data:(0,c.bh)(Z)[l],updObs:w},l)})))]})]}):(0,_.jsx)(j,{placeholder:"buscar un provedor",width:420,handleClick:function(l){var n={account:null===l||void 0===l?void 0:l.account,subAccount:null===l||void 0===l?void 0:l.subAccount,providerId:null===l||void 0===l?void 0:l.providerId};(0,c.Rz)(I,n),(0,r.nr)(n,M)}})}),null!==(g=(0,c.bh)(I))&&void 0!==g&&g.subAccount?(0,_.jsxs)("div",{className:"_dsplFlx ",children:[(0,_.jsx)("div",{className:"flexSpace"}),(0,_.jsx)("p",{className:"group_title addBtn purple",onClick:function(){D&&D(),(null===A||void 0===A?void 0:A.modalID)&&(0,u.CloseModal)({id:null===A||void 0===A?void 0:A.modalID})},children:"Guardar"})]}):null]})},C=function(l){var n=l.data,a=l.updObs,d=(l.idKey,(0,s.useState)(0)),i=(0,e.Z)(d,2),o=i[0],t=i[1],u=function(l,n,a){var d=(0,c.bh)(A)||{};a?(d[a]||(d[a]={}),d[a][l]=n):d[l]=n,(0,c.Rz)(A,d)};return 1*(null===n||void 0===n?void 0:n.amount)===0?null:(0,_.jsxs)("div",{className:"_dsplFlx hdr_bar",children:[(0,_.jsx)("div",{className:"tr_bar tr_bar_50",style:{marginTop:10},children:null===n||void 0===n?void 0:n.document}),(0,_.jsxs)("div",{className:"tr_bar tr_bar_20",style:{marginTop:10},children:["$",(1*(null===n||void 0===n?void 0:n.amount)).toFixed(2)]}),(0,_.jsx)("div",{className:"tr_bar tr_bar_5",style:{marginTop:10},children:o>(null===n||void 0===n?void 0:n.amount)?(0,_.jsx)("div",{className:"icon",children:(0,_.jsx)(x,{name:"alert",color:"#c62828"})}):null}),(0,_.jsx)("div",{className:"tr_bar tr_bar_25",children:(0,_.jsx)(f,{init:o,width:80,updChanges:function(l){return t(d=l),u(null===n||void 0===n?void 0:n.document,d),void a((0,c.M5)());var d}})})]})},M=function(l){var n,a=0;return l&&(null===(n=(0,c._2)(l))||void 0===n||n.map((function(n,d){var i;a+=1*(0,c.Zv)(null===(i=l[n])||void 0===i?void 0:i.amount,2)}))),a}}}]);
//# sourceMappingURL=8300.70c5fcb9.chunk.js.map