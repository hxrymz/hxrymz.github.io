"use strict";(self.webpackChunkhrmfinance=self.webpackChunkhrmfinance||[]).push([[8300],{297:function(n,a,l){l.r(a);var d=l(4165),i=l(1413),o=l(5861),e=l(9439),c=l(2791),s=l(2350),t=l(2647),u=(l(6021),l(9760)),r=l(1232),v=l(9661),m=l(7689),b=l(24),h=l(3990),p=l(4050),_=l(184),x=(0,t.PU)(),f=(0,t.Np)(),j=(0,v.LZ)(),N=(0,b.f_)(),y=(0,t.JC)(),g="new_multi_pay_prov",A="Acc2MPay",I="multi_pay_by_prov_Doc",Z="toPay_by_docM",D="multi_pay_2S",F="extraAccountListOnPay";a.default=function(n){n.data,n.confirm;var a,l,t,r,v,b,x,j,y,C,R,S,z,P,O=(0,c.useState)(!1),T=(0,e.Z)(O,2),H=T[0],U=T[1],B=(0,c.useState)(0),K=(0,e.Z)(B,2),Q=(K[0],K[1]),G=(0,m.s0)(),L=function(){Q((0,s.M5)())};(0,c.useEffect)((function(){H||(U(!0),(0,p.Ht)("global_accounts","global_account_params",L),(0,s.Rz)(D,null),(0,s.Rz)(Z,null),(0,s.Rz)(I,null),(0,s.Rz)("accountPicker",{}),Q((0,s.M5)()))}));var $=function(n,a,l){var d=(0,s.bh)(g)||{};l?(d[l]||(d[l]={}),d[l][n]=a):d[n]=a,(0,s.Rz)(g,d),Q((0,s.M5)())},E=function(){var n=(0,o.Z)((0,d.Z)().mark((function n(){var a,l,e,c,t,u,r,v,m,b,h,p,_,x,f,j;return(0,d.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=(0,s.bh)(g)||{},u=[],r=new Date,t.date?(r=new Date(t.date),t.date=new Date(t.date).getTime()):t.date=Date.now(),v=r.getFullYear()+""+(r.getMonth()+1)+"-"+(0,s.KX)(),t.comprobanteId=v,m="",(b=(0,s.bh)(D)&&(0,s._2)((0,s.bh)(D)))&&(null===b||void 0===b||b.map((function(n,a){var l,d,o=(0,i.Z)({},t),e=(0,s.bh)(D)[n];o.document=null===e||void 0===e?void 0:e.document,m+=(null===e||void 0===e?void 0:e.document)+" ; ",o.account=null===e||void 0===e?void 0:e.account,o.subAccount=null===e||void 0===e?void 0:e.subAccount,o.providerId=null===e||void 0===e?void 0:e.providerId,o.type=null===e||void 0===e?void 0:e.type,o.amount=null===e||void 0===e?void 0:e.amount,o.payOrCollect="pay",o.operationId=(0,s.M5)();var c=(0,i.Z)({},null===(l=(0,s.bh)((0,s.hQ)()))||void 0===l?void 0:l.add_opera);c.params={businessId:null===(d=(0,s.bh)("profileUser"))||void 0===d?void 0:d.businessId},c.form=o,u.push(c)}))),(h=(0,s.bh)(F)&&(0,s._2)((0,s.bh)(F)))&&(null===h||void 0===h||h.map((function(n,a){var l,d,o,e,c,r=(0,i.Z)({},t),v=(0,s.bh)(F)[n];r.document=r.paymentDocument,r.account=null===v||void 0===v?void 0:v.account,r.subAccount=null===v||void 0===v?void 0:v.subAccount,r.type="debit",r.amount=null===v||void 0===v?void 0:v.amount,r.operationId=(0,s.M5)();var b=(0,i.Z)({},null===(l=(0,s.bh)((0,s.hQ)()))||void 0===l?void 0:l.add_opera);b.params={businessId:null===(d=(0,s.bh)("profileUser"))||void 0===d?void 0:d.businessId},b.form=r,u.push(b);var h=(0,i.Z)({},t);h.document=h.paymentDocument,h.paymentDocument=m,h.account=null===(o=(0,s.bh)("global_account_params"))||void 0===o?void 0:o.cash_bank,h.type="credit",h.amount=1*(null===v||void 0===v?void 0:v.amount),h.operationId=(0,s.M5)();var p=(0,i.Z)({},null===(e=(0,s.bh)((0,s.hQ)()))||void 0===e?void 0:e.add_opera);p.params={businessId:null===(c=(0,s.bh)("profileUser"))||void 0===c?void 0:c.businessId},p.form=h,u.push(p)}))),p=(0,i.Z)({},t),_=M((0,s.bh)(D)),p.document=p.paymentDocument,p.paymentDocument=m,p.account=null===(a=(0,s.bh)("global_account_params"))||void 0===a?void 0:a.cash_bank,(x=null===(l=(0,s.bh)("account_ids"))||void 0===l?void 0:l[p.account]).payOrCollect&&(p.payOrCollect=x.payOrCollect),p.type="credit",p.amount=1*_,p.operationId=(0,s.M5)(),(f=(0,i.Z)({},null===(e=(0,s.bh)((0,s.hQ)()))||void 0===e?void 0:e.add_opera)).params={businessId:null===(c=(0,s.bh)("profileUser"))||void 0===c?void 0:c.businessId},f.form=p,u.push(f),j=u.map(function(){var n=(0,o.Z)((0,d.Z)().mark((function n(a){var l;return(0,d.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return l=(0,s.I7)(a),n.next=3,l;case 3:n.sent;case 5:case"end":return n.stop()}}),n)})));return function(a){return n.apply(this,arguments)}}()),n.next=28,Promise.all(j);case 28:setTimeout((function(){(0,s.Rz)(I,null),(0,s.Rz)(g,null),Q((0,s.M5)()),G({pathname:"/accounting-ledger",search:"?cId=".concat(v)})}),400);case 29:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),J=function(){var n=(0,i.Z)({},(0,s.bh)(I))||{},a=(0,i.Z)({},(0,s.bh)(D))||{};(0,s._2)(n).map((function(l){var d,o,e=(null===(d=(0,s.bh)(A))||void 0===d?void 0:d.account)+"_"+(null===(o=(0,s.bh)(A))||void 0===o?void 0:o.subAccount)+"_"+l,c=(0,i.Z)({},(0,s.bh)(A));a[e]={},a[e].amount=1*n[l],a[e].document=l,a[e].type="debit",a[e].account=null===c||void 0===c?void 0:c.account,a[e].providerId=null===c||void 0===c?void 0:c.providerId,a[e].subAccount=null===c||void 0===c?void 0:c.subAccount})),(0,s.Rz)(D,a),(0,s.Rz)(I,null),(0,s.Rz)(A,null),Q((0,s.M5)())};return(0,_.jsxs)("div",{style:{maxHeight:"90vh",minHeight:"88vh",width:"720px",overflow:"auto",background:"#fff",borderRadius:13,padding:"10px 19px"},children:[(0,_.jsxs)("div",{className:"_dsplFlx ",children:[(0,_.jsx)("p",{className:"form_title",children:"Registrando Pago"}),(0,_.jsx)("div",{className:"flexSpace"})]}),(0,_.jsxs)("div",{className:"_dsplFlx",children:[(0,_.jsx)("div",{className:"flexSpace"}),null!==(a=(0,s.bh)("global_account_params"))&&void 0!==a&&a.cash_bank?(0,_.jsxs)("div",{className:" acc_dtls",children:[(0,_.jsxs)("div",{className:"_dsplFlx",children:[(0,_.jsx)("div",{className:"code",style:{color:"#646cff"},children:null===(l=(0,s.bh)("account_ids"))||void 0===l||null===(t=l[null===(r=(0,s.bh)("global_account_params"))||void 0===r?void 0:r.cash_bank])||void 0===t?void 0:t.code}),(0,_.jsx)("div",{className:"name",children:null===(v=(0,s.bh)("account_ids"))||void 0===v||null===(b=v[null===(x=(0,s.bh)("global_account_params"))||void 0===x?void 0:x.cash_bank])||void 0===b?void 0:b.name})]}),(0,_.jsx)("div",{className:"flexSpace"})]}):null]}),(0,_.jsxs)("div",{className:"_dsplFlx ",children:[(0,_.jsx)(N,{init:null===(j=(0,s.bh)(g))||void 0===j?void 0:j.date,updDate:function(n){return $("date",n)}}),(0,_.jsx)("div",{className:"flexSpace"}),(0,_.jsx)(f,{init:null===(y=(0,s.bh)(g))||void 0===y?void 0:y.paymentDocument,label:"Documento de Pago",width:200,updChanges:function(n){return $("paymentDocument",n)}})]}),(0,_.jsx)(f,{init:null===(C=(0,s.bh)(g))||void 0===C?void 0:C.description,label:"Descripcion",width:520,updChanges:function(n){return $("description",n)}}),(0,_.jsxs)("div",{className:" _dsplFlx",children:[(0,_.jsx)("div",{className:"flexSpace"}),(0,_.jsx)("p",{className:"group_title addBtn purple",onClick:function(){var n={zIndex:450,height:"93vh",props:{minHeight:"1vh",overlay:!0}};n.content=(0,_.jsx)(w,{updObs:Q,confirm:J}),(0,u.OpenModal)(n)},children:"Provedores"})]}),(0,s.bh)(D)&&(0,s._2)((0,s.bh)(D)).length>0?(0,_.jsxs)("div",{className:"boxAddAcc",style:{margin:"18px 0"},children:[(0,_.jsxs)("div",{className:"_dsplFlx hdr_bar purple",style:{margin:"18px 0"},children:[(0,_.jsx)("div",{className:"tr_bar tr_bar_25",children:"Cuenta"}),(0,_.jsx)("div",{className:"tr_bar tr_bar_25",children:"Sub Cuenta"}),(0,_.jsx)("div",{className:"tr_bar tr_bar_25",children:"Documento"}),(0,_.jsx)("div",{className:"tr_bar tr_bar_25",children:"Balance"})]}),(0,s.bh)(D)&&(null===(R=(0,s._2)((0,s.bh)(D)))||void 0===R?void 0:R.map((function(n,a){return(0,_.jsx)(k,{idKey:n,data:(0,s.bh)(D)[n],updObs:Q},n)}))),(0,_.jsx)(k,{data:{account:null===(S=(0,s.bh)("global_account_params"))||void 0===S?void 0:S.cash_bank,amount:M((0,s.bh)(D)),type:"credit",document:null===(z=(0,s.bh)(g))||void 0===z?void 0:z.paymentDocument},updObs:Q})]}):null,(0,_.jsx)(h.Z,{collectionName:F}),null!==(P=(0,s.bh)(g))&&void 0!==P&&P.paymentDocument&&M((0,s.bh)(D))>0?(0,_.jsxs)("div",{className:"_dsplFlx ",children:[(0,_.jsx)("div",{className:"flexSpace"}),(0,_.jsx)("div",{className:"card",children:(0,_.jsx)("button",{onClick:E,children:"Guardar"})})]}):null]})};var k=function(n){var a,l,d=n.data;return 1*(null===d||void 0===d?void 0:d.amount)===0?null:(0,_.jsxs)("div",{className:"_dsplFlx hdr_bar",children:[(0,_.jsx)("div",{className:"tr_bar tr_bar_25",style:{marginTop:10},children:(0,_.jsx)(y,{data:null===(a=(0,s.bh)("account_ids"))||void 0===a?void 0:a[null===d||void 0===d?void 0:d.account],color:"debit"===d.type?"#009688":"#c62828",labelField:"code",infoField:"name"})}),(0,_.jsx)("div",{className:"tr_bar tr_bar_25",style:{marginTop:10},children:null!==d&&void 0!==d&&d.subAccount?(0,_.jsx)(y,{data:null===(l=(0,s.bh)("sub_account_ids"))||void 0===l?void 0:l[null===d||void 0===d?void 0:d.subAccount],color:"debit"===d.type?"#009688":"#c62828",labelField:"subAccount",infoField:"subAccountName"}):null}),(0,_.jsx)("div",{className:"tr_bar tr_bar_25",style:{marginTop:10},children:null===d||void 0===d?void 0:d.document}),(0,_.jsxs)("div",{className:"tr_bar tr_bar_25",style:{marginTop:10},children:["$",(1*(null===d||void 0===d?void 0:d.amount)).toFixed(2)]})]})},w=function(n){var a,l,d,i,o,t,v,m,b,h,p,x,f,N,y,g,I=n.data,D=n.confirm,F=(0,c.useState)(0),k=(0,e.Z)(F,2),w=(k[0],k[1]),M=function(){w((0,s.M5)())};return(0,_.jsxs)("div",{style:{maxHeight:"92vh",minHeight:"90vh",width:"720px",overflow:"auto",background:"#fff",borderRadius:13,padding:"10px 19px"},children:[(0,_.jsxs)("div",{className:"_dsplFlx ",children:[(0,_.jsx)("p",{className:"form_title",children:"Pagos por Provedores"}),(0,_.jsx)("div",{className:"flexSpace"})]}),(0,_.jsx)("div",{style:{margin:"18px 0"},children:null!==(a=(0,s.bh)(A))&&void 0!==a&&a.account?(0,_.jsxs)("div",{children:[(0,_.jsxs)("div",{className:" acc_dtls",children:[(0,_.jsxs)("div",{className:"_dsplFlx",children:[(0,_.jsx)("div",{className:"code",style:{color:"#646cff"},onClick:function(){(0,s.Rz)(A,null),w((0,s.M5)())},children:null===(l=(0,s.bh)("account_ids"))||void 0===l||null===(d=l[null===(i=(0,s.bh)(A))||void 0===i?void 0:i.account])||void 0===d?void 0:d.code}),(0,_.jsx)("div",{className:"name",children:null===(o=(0,s.bh)("account_ids"))||void 0===o||null===(t=o[null===(v=(0,s.bh)(A))||void 0===v?void 0:v.account])||void 0===t?void 0:t.name})]}),(0,_.jsx)("div",{className:"flexSpace"}),null!==(m=(0,s.bh)(A))&&void 0!==m&&m.subAccount?(0,_.jsxs)("div",{className:"_dsplFlx",style:{margin:"10px 0 0 18px"},children:[(0,_.jsx)("div",{className:"code",children:null===(b=(0,s.bh)("sub_account_ids"))||void 0===b||null===(h=b[null===(p=(0,s.bh)(A))||void 0===p?void 0:p.subAccount])||void 0===h?void 0:h.subAccount}),(0,_.jsx)("div",{className:"name",children:null===(x=(0,s.bh)("sub_account_ids"))||void 0===x||null===(f=x[null===(N=(0,s.bh)(A))||void 0===N?void 0:N.subAccount])||void 0===f?void 0:f.subAccountName})]}):null]}),(0,_.jsxs)("div",{className:"boxAddAcc",style:{margin:"18px 0"},children:[(0,_.jsxs)("div",{className:"_dsplFlx hdr_bar purple",style:{margin:"18px 0"},children:[(0,_.jsx)("div",{className:"tr_bar tr_bar_50",children:"Documento"}),(0,_.jsx)("div",{className:"tr_bar tr_bar_20",children:"Balance"}),(0,_.jsx)("div",{className:"tr_bar tr_bar_5"}),(0,_.jsx)("div",{className:"tr_bar tr_bar_25",children:"Por Pagar"})]}),(0,s.bh)(Z)&&(null===(y=(0,s._2)((0,s.bh)(Z)))||void 0===y?void 0:y.map((function(n,a){return(0,_.jsx)(C,{idKey:n,data:(0,s.bh)(Z)[n],updObs:w},n)})))]})]}):(0,_.jsx)(j,{placeholder:"buscar un provedor",width:420,handleClick:function(n){var a={account:null===n||void 0===n?void 0:n.account,subAccount:null===n||void 0===n?void 0:n.subAccount,providerId:null===n||void 0===n?void 0:n.providerId};(0,s.Rz)(A,a),(0,r.nr)(a,M)}})}),null!==(g=(0,s.bh)(A))&&void 0!==g&&g.subAccount?(0,_.jsxs)("div",{className:"_dsplFlx ",children:[(0,_.jsx)("div",{className:"flexSpace"}),(0,_.jsx)("p",{className:"group_title addBtn purple",onClick:function(){D&&D(),(null===I||void 0===I?void 0:I.modalID)&&(0,u.CloseModal)({id:null===I||void 0===I?void 0:I.modalID})},children:"Guardar"})]}):null]})},C=function(n){var a=n.data,l=n.updObs,d=(n.idKey,(0,c.useState)(0)),i=(0,e.Z)(d,2),o=i[0],t=i[1],u=function(n,a,l){var d=(0,s.bh)(I)||{};l?(d[l]||(d[l]={}),d[l][n]=a):d[n]=a,(0,s.Rz)(I,d)};return 1*(null===a||void 0===a?void 0:a.amount)===0?null:(0,_.jsxs)("div",{className:"_dsplFlx hdr_bar",children:[(0,_.jsx)("div",{className:"tr_bar tr_bar_50",style:{marginTop:10},children:null===a||void 0===a?void 0:a.document}),(0,_.jsxs)("div",{className:"tr_bar tr_bar_20",style:{marginTop:10},children:["$",(1*(null===a||void 0===a?void 0:a.amount)).toFixed(2)]}),(0,_.jsx)("div",{className:"tr_bar tr_bar_5",style:{marginTop:10},children:o>(null===a||void 0===a?void 0:a.amount)?(0,_.jsx)("div",{className:"icon",children:(0,_.jsx)(x,{name:"alert",color:"#c62828"})}):null}),(0,_.jsx)("div",{className:"tr_bar tr_bar_25",children:(0,_.jsx)(f,{init:o,width:80,updChanges:function(n){return t(d=n),u(null===a||void 0===a?void 0:a.document,d),void l((0,s.M5)());var d}})})]})},M=function(n){var a,l=0;return n&&(null===(a=(0,s._2)(n))||void 0===a||a.map((function(a,d){var i;l+=1*(0,s.Zv)(null===(i=n[a])||void 0===i?void 0:i.amount,2)}))),l}}}]);
//# sourceMappingURL=8300.9ede48ba.chunk.js.map