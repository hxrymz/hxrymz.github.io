"use strict";(self.webpackChunkhrmfinance=self.webpackChunkhrmfinance||[]).push([[8300],{297:function(a,n,l){l.r(n);var d=l(4165),i=l(1413),o=l(5861),e=l(9439),s=l(2791),c=l(2350),t=l(2647),r=(l(6021),l(9760)),u=l(1232),v=l(9661),m=l(7689),b=l(24),h=l(3990),p=l(184),_=(0,t.PU)(),x=(0,t.Np)(),f=(0,v.LZ)(),j=(0,b.f_)(),N=(0,t.JC)(),y="new_multi_pay_prov",g="Acc2MPay",A="multi_pay_by_prov_Doc",I="toPay_by_docM",Z="multi_pay_2S",D="extraAccountListOnPay";n.default=function(a){a.data,a.confirm;var n,l,t,u,v,b,_,f,N,w,M,R,S,z,P=(0,s.useState)(!1),O=(0,e.Z)(P,2),T=O[0],U=O[1],B=(0,s.useState)(0),K=(0,e.Z)(B,2),Q=(K[0],K[1]),H=(0,m.s0)();(0,s.useEffect)((function(){T||(U(!0),(0,c.Rz)(Z,null),(0,c.Rz)(I,null),(0,c.Rz)(A,null),(0,c.Rz)("accountPicker",{}),Q((0,c.M5)()))}));var G=function(a,n,l){var d=(0,c.bh)(y)||{};l?(d[l]||(d[l]={}),d[l][a]=n):d[a]=n,(0,c.Rz)(y,d),Q((0,c.M5)())},L=function(){var a=(0,o.Z)((0,d.Z)().mark((function a(){var n,l,e,s,t,r,u,v,m,b,h,p,_,x,f,j;return(0,d.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=(0,c.bh)(y)||{},r=[],u=new Date,t.date?(u=new Date(t.date),t.date=new Date(t.date).getTime()):t.date=Date.now(),v=u.getFullYear()+""+(u.getMonth()+1)+"-"+(0,c.KX)(),t.comprobanteId=v,m="",(b=(0,c.bh)(Z)&&(0,c._2)((0,c.bh)(Z)))&&(null===b||void 0===b||b.map((function(a,n){var l,d,o=(0,i.Z)({},t),e=(0,c.bh)(Z)[a];o.document=null===e||void 0===e?void 0:e.document,m+=(null===e||void 0===e?void 0:e.document)+" ; ",o.account=null===e||void 0===e?void 0:e.account,o.subAccount=null===e||void 0===e?void 0:e.subAccount,o.providerId=null===e||void 0===e?void 0:e.providerId,o.type=null===e||void 0===e?void 0:e.type,o.amount=null===e||void 0===e?void 0:e.amount,o.payOrCollect="pay",o.operationId=(0,c.M5)();var s=(0,i.Z)({},null===(l=(0,c.bh)((0,c.hQ)()))||void 0===l?void 0:l.add_opera);s.params={businessId:null===(d=(0,c.bh)("profileUser"))||void 0===d?void 0:d.businessId},s.form=o,r.push(s)}))),(h=(0,c.bh)(D)&&(0,c._2)((0,c.bh)(D)))&&(null===h||void 0===h||h.map((function(a,n){var l,d,o,e,s,u=(0,i.Z)({},t),v=(0,c.bh)(D)[a];u.document=u.paymentDocument,u.account=null===v||void 0===v?void 0:v.account,u.subAccount=null===v||void 0===v?void 0:v.subAccount,u.type="debit",u.amount=null===v||void 0===v?void 0:v.amount,u.operationId=(0,c.M5)();var b=(0,i.Z)({},null===(l=(0,c.bh)((0,c.hQ)()))||void 0===l?void 0:l.add_opera);b.params={businessId:null===(d=(0,c.bh)("profileUser"))||void 0===d?void 0:d.businessId},b.form=u,r.push(b);var h=(0,i.Z)({},t);h.document=h.paymentDocument,h.paymentDocument=m,h.account=null===(o=(0,c.bh)("global_account_params"))||void 0===o?void 0:o.cash_bank,h.type="credit",h.amount=1*(null===v||void 0===v?void 0:v.amount),h.operationId=(0,c.M5)();var p=(0,i.Z)({},null===(e=(0,c.bh)((0,c.hQ)()))||void 0===e?void 0:e.add_opera);p.params={businessId:null===(s=(0,c.bh)("profileUser"))||void 0===s?void 0:s.businessId},p.form=h,r.push(p)}))),p=(0,i.Z)({},t),_=C((0,c.bh)(Z)),p.document=p.paymentDocument,p.paymentDocument=m,p.account=null===(n=(0,c.bh)("global_account_params"))||void 0===n?void 0:n.cash_bank,(x=null===(l=(0,c.bh)("account_ids"))||void 0===l?void 0:l[p.account]).payOrCollect&&(p.payOrCollect=x.payOrCollect),p.type="credit",p.amount=1*_,p.operationId=(0,c.M5)(),(f=(0,i.Z)({},null===(e=(0,c.bh)((0,c.hQ)()))||void 0===e?void 0:e.add_opera)).params={businessId:null===(s=(0,c.bh)("profileUser"))||void 0===s?void 0:s.businessId},f.form=p,r.push(f),j=r.map(function(){var a=(0,o.Z)((0,d.Z)().mark((function a(n){var l;return(0,d.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return l=(0,c.I7)(n),a.next=3,l;case 3:a.sent;case 5:case"end":return a.stop()}}),a)})));return function(n){return a.apply(this,arguments)}}()),a.next=28,Promise.all(j);case 28:setTimeout((function(){(0,c.Rz)(A,null),(0,c.Rz)(y,null),Q((0,c.M5)()),H({pathname:"/accounting-ledger",search:"?cId=".concat(v)})}),400);case 29:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}(),$=function(){var a=(0,i.Z)({},(0,c.bh)(A))||{},n=(0,i.Z)({},(0,c.bh)(Z))||{};(0,c._2)(a).map((function(l){var d,o,e=(null===(d=(0,c.bh)(g))||void 0===d?void 0:d.account)+"_"+(null===(o=(0,c.bh)(g))||void 0===o?void 0:o.subAccount)+"_"+l,s=(0,i.Z)({},(0,c.bh)(g));n[e]={},n[e].amount=1*a[l],n[e].document=l,n[e].type="debit",n[e].account=null===s||void 0===s?void 0:s.account,n[e].providerId=null===s||void 0===s?void 0:s.providerId,n[e].subAccount=null===s||void 0===s?void 0:s.subAccount})),(0,c.Rz)(Z,n),(0,c.Rz)(A,null),(0,c.Rz)(g,null),Q((0,c.M5)())};return(0,p.jsxs)("div",{style:{overflow:"auto",background:"#fff",borderRadius:13,padding:"10px 19px"},children:[(0,p.jsxs)("div",{className:"_dsplFlx ",children:[(0,p.jsx)("p",{className:"form_title",children:"Registrando Pago"}),(0,p.jsx)("div",{className:"flexSpace"})]}),(0,p.jsxs)("div",{className:"_dsplFlx",children:[(0,p.jsx)("div",{className:"flexSpace"}),null!==(n=(0,c.bh)("global_account_params"))&&void 0!==n&&n.cash_bank?(0,p.jsxs)("div",{className:" acc_dtls",children:[(0,p.jsxs)("div",{className:"_dsplFlx",children:[(0,p.jsx)("div",{className:"code",style:{color:"#646cff"},children:null===(l=(0,c.bh)("account_ids"))||void 0===l||null===(t=l[null===(u=(0,c.bh)("global_account_params"))||void 0===u?void 0:u.cash_bank])||void 0===t?void 0:t.code}),(0,p.jsx)("div",{className:"name",children:null===(v=(0,c.bh)("account_ids"))||void 0===v||null===(b=v[null===(_=(0,c.bh)("global_account_params"))||void 0===_?void 0:_.cash_bank])||void 0===b?void 0:b.name})]}),(0,p.jsx)("div",{className:"flexSpace"})]}):null]}),(0,p.jsxs)("div",{className:"_dsplFlx ",children:[(0,p.jsx)(j,{init:null===(f=(0,c.bh)(y))||void 0===f?void 0:f.date,updDate:function(a){return G("date",a)}}),(0,p.jsx)("div",{className:"flexSpace"}),(0,p.jsx)(x,{init:null===(N=(0,c.bh)(y))||void 0===N?void 0:N.paymentDocument,label:"Documento de Pago",width:200,updChanges:function(a){return G("paymentDocument",a)}})]}),(0,p.jsx)(x,{init:null===(w=(0,c.bh)(y))||void 0===w?void 0:w.description,label:"Descripcion",width:520,updChanges:function(a){return G("description",a)}}),(0,p.jsxs)("div",{className:" _dsplFlx",children:[(0,p.jsx)("div",{className:"flexSpace"}),(0,p.jsx)("p",{className:"group_title addBtn purple",onClick:function(){var a={zIndex:450,height:"93vh",props:{minHeight:"1vh",overlay:!0}};a.content=(0,p.jsx)(k,{updObs:Q,confirm:$}),(0,r.OpenModal)(a)},children:"Provedores"})]}),(0,c.bh)(Z)&&(0,c._2)((0,c.bh)(Z)).length>0?(0,p.jsxs)("div",{className:"boxAddAcc",style:{margin:"18px 0"},children:[(0,p.jsxs)("div",{className:"_dsplFlx hdr_bar purple",style:{margin:"18px 0"},children:[(0,p.jsx)("div",{className:"tr_bar tr_bar_25",children:"Cuenta"}),(0,p.jsx)("div",{className:"tr_bar tr_bar_25",children:"Sub Cuenta"}),(0,p.jsx)("div",{className:"tr_bar tr_bar_25",children:"Documento"}),(0,p.jsx)("div",{className:"tr_bar tr_bar_25",children:"Balance"})]}),(0,c.bh)(Z)&&(null===(M=(0,c._2)((0,c.bh)(Z)))||void 0===M?void 0:M.map((function(a,n){return(0,p.jsx)(F,{idKey:a,data:(0,c.bh)(Z)[a],updObs:Q},a)}))),(0,p.jsx)(F,{data:{account:null===(R=(0,c.bh)("global_account_params"))||void 0===R?void 0:R.cash_bank,amount:C((0,c.bh)(Z)),type:"credit",document:null===(S=(0,c.bh)(y))||void 0===S?void 0:S.paymentDocument},updObs:Q})]}):null,(0,p.jsx)(h.Z,{collectionName:D}),null!==(z=(0,c.bh)(y))&&void 0!==z&&z.paymentDocument&&C((0,c.bh)(Z))>0?(0,p.jsxs)("div",{className:"_dsplFlx ",children:[(0,p.jsx)("div",{className:"flexSpace"}),(0,p.jsx)("div",{className:"card",children:(0,p.jsx)("button",{onClick:L,children:"Guardar"})})]}):null]})};var F=function(a){var n,l,d=a.data;return 1*(null===d||void 0===d?void 0:d.amount)===0?null:(0,p.jsxs)("div",{className:"_dsplFlx hdr_bar",children:[(0,p.jsx)("div",{className:"tr_bar tr_bar_25",style:{marginTop:10},children:(0,p.jsx)(N,{data:null===(n=(0,c.bh)("account_ids"))||void 0===n?void 0:n[null===d||void 0===d?void 0:d.account],color:"debit"===d.type?"#009688":"#c62828",labelField:"code",infoField:"name"})}),(0,p.jsx)("div",{className:"tr_bar tr_bar_25",style:{marginTop:10},children:null!==d&&void 0!==d&&d.subAccount?(0,p.jsx)(N,{data:null===(l=(0,c.bh)("sub_account_ids"))||void 0===l?void 0:l[null===d||void 0===d?void 0:d.subAccount],color:"debit"===d.type?"#009688":"#c62828",labelField:"subAccount",infoField:"subAccountName"}):null}),(0,p.jsx)("div",{className:"tr_bar tr_bar_25",style:{marginTop:10},children:null===d||void 0===d?void 0:d.document}),(0,p.jsxs)("div",{className:"tr_bar tr_bar_25",style:{marginTop:10},children:["$",(1*(null===d||void 0===d?void 0:d.amount)).toFixed(2)]})]})},k=function(a){var n,l,d,i,o,t,v,m,b,h,_,x,j,N,y,A,Z=a.data,D=a.confirm,F=(0,s.useState)(0),k=(0,e.Z)(F,2),C=(k[0],k[1]),M=function(){C((0,c.M5)())};return(0,p.jsxs)("div",{style:{maxHeight:"90vh",minHeight:"88vh",width:"720px",overflow:"auto",background:"#fff",borderRadius:13,padding:"10px 19px"},children:[(0,p.jsxs)("div",{className:"_dsplFlx ",children:[(0,p.jsx)("p",{className:"form_title",children:"Pagos por Provedores"}),(0,p.jsx)("div",{className:"flexSpace"})]}),(0,p.jsx)("div",{style:{margin:"18px 0"},children:null!==(n=(0,c.bh)(g))&&void 0!==n&&n.account?(0,p.jsxs)("div",{children:[(0,p.jsxs)("div",{className:" acc_dtls",children:[(0,p.jsxs)("div",{className:"_dsplFlx",children:[(0,p.jsx)("div",{className:"code",style:{color:"#646cff"},onClick:function(){(0,c.Rz)(g,null),C((0,c.M5)())},children:null===(l=(0,c.bh)("account_ids"))||void 0===l||null===(d=l[null===(i=(0,c.bh)(g))||void 0===i?void 0:i.account])||void 0===d?void 0:d.code}),(0,p.jsx)("div",{className:"name",children:null===(o=(0,c.bh)("account_ids"))||void 0===o||null===(t=o[null===(v=(0,c.bh)(g))||void 0===v?void 0:v.account])||void 0===t?void 0:t.name})]}),(0,p.jsx)("div",{className:"flexSpace"}),null!==(m=(0,c.bh)(g))&&void 0!==m&&m.subAccount?(0,p.jsxs)("div",{className:"_dsplFlx",style:{margin:"10px 0 0 18px"},children:[(0,p.jsx)("div",{className:"code",children:null===(b=(0,c.bh)("sub_account_ids"))||void 0===b||null===(h=b[null===(_=(0,c.bh)(g))||void 0===_?void 0:_.subAccount])||void 0===h?void 0:h.subAccount}),(0,p.jsx)("div",{className:"name",children:null===(x=(0,c.bh)("sub_account_ids"))||void 0===x||null===(j=x[null===(N=(0,c.bh)(g))||void 0===N?void 0:N.subAccount])||void 0===j?void 0:j.subAccountName})]}):null]}),(0,p.jsxs)("div",{className:"boxAddAcc",style:{margin:"18px 0"},children:[(0,p.jsxs)("div",{className:"_dsplFlx hdr_bar purple",style:{margin:"18px 0"},children:[(0,p.jsx)("div",{className:"tr_bar tr_bar_25",children:"Documento"}),(0,p.jsx)("div",{className:"tr_bar tr_bar_20",children:"Balance"}),(0,p.jsx)("div",{className:"tr_bar tr_bar_5"}),(0,p.jsx)("div",{className:"tr_bar tr_bar_25",children:"Por Pagar"}),(0,p.jsx)("div",{className:"tr_bar tr_bar_20",children:"Anticipos"})]}),(0,c.bh)(I)&&(null===(y=(0,c._2)((0,c.bh)(I)))||void 0===y?void 0:y.map((function(a,n){return(0,p.jsx)(w,{idKey:a,data:(0,c.bh)(I)[a],updObs:C},a)})))]})]}):(0,p.jsx)(f,{placeholder:"buscar un provedor",width:420,handleClick:function(a){var n={account:null===a||void 0===a?void 0:a.account,subAccount:null===a||void 0===a?void 0:a.subAccount,providerId:null===a||void 0===a?void 0:a.providerId};(0,c.Rz)(g,n),(0,u.nr)(n,M)}})}),null!==(A=(0,c.bh)(g))&&void 0!==A&&A.subAccount?(0,p.jsxs)("div",{className:"_dsplFlx ",children:[(0,p.jsx)("div",{className:"flexSpace"}),(0,p.jsx)("p",{className:"group_title addBtn purple",onClick:function(){D&&D(),(null===Z||void 0===Z?void 0:Z.modalID)&&(0,r.CloseModal)({id:null===Z||void 0===Z?void 0:Z.modalID})},children:"Guardar"})]}):null]})},w=function(a){var n=a.data,l=a.updObs,d=(a.idKey,(0,s.useState)(0)),i=(0,e.Z)(d,2),o=i[0],t=i[1],r=function(a,n,l){var d=(0,c.bh)(A)||{};l?(d[l]||(d[l]={}),d[l][a]=n):d[a]=n,(0,c.Rz)(A,d)};return 1*(null===n||void 0===n?void 0:n.amount)===0?null:(0,p.jsxs)("div",{className:"_dsplFlx hdr_bar",children:[(0,p.jsx)("div",{className:"tr_bar tr_bar_25",style:{marginTop:10},children:null===n||void 0===n?void 0:n.document}),(0,p.jsxs)("div",{className:"tr_bar tr_bar_20",style:{marginTop:10},children:["$",(1*(null===n||void 0===n?void 0:n.amount)).toFixed(2)]}),(0,p.jsx)("div",{className:"tr_bar tr_bar_5",style:{marginTop:10},children:o>(null===n||void 0===n?void 0:n.amount)?(0,p.jsx)("div",{className:"icon",children:(0,p.jsx)(_,{name:"alert",color:"#c62828"})}):null}),(0,p.jsx)("div",{className:"tr_bar tr_bar_25",children:(0,p.jsx)(x,{init:o,width:80,updChanges:function(a){return t(d=a),r(null===n||void 0===n?void 0:n.document,d),void l((0,c.M5)());var d}})}),(0,p.jsx)("div",{className:"tr_bar tr_bar_20",style:{marginTop:10},children:0})]})},C=function(a){var n,l=0;return a&&(null===(n=(0,c._2)(a))||void 0===n||n.map((function(n,d){var i;l+=1*(0,c.Zv)(null===(i=a[n])||void 0===i?void 0:i.amount,2)}))),l}}}]);
//# sourceMappingURL=8300.dc35d713.chunk.js.map