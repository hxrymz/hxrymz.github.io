"use strict";(self.webpackChunkhrmfinance=self.webpackChunkhrmfinance||[]).push([[8469],{297:function(n,l,a){a.r(l);var d=a(4165),i=a(1413),o=a(5861),e=a(9439),s=a(2791),c=a(2350),t=a(2647),r=(a(6021),a(9760)),u=a(1232),v=a(9661),m=a(7689),b=a(24),h=a(3990),p=a(4050),_=a(184),x=(0,t.PU)(),f=(0,t.Np)(),j=(0,v.LZ)(),N=(0,b.f_)(),y=(0,t.JC)(),g="new_multi_pay_prov",I="Acc2MPay",A="multi_pay_by_prov_Doc",Z="toPay_by_docM",k="multi_pay_2S",D="extraAccountListOnPay";l.default=function(n){var l,a,t,u,v,b,x,j,y,w,R,S,z,P,O=n.data,T=(n.confirm,(0,s.useState)(!1)),H=(0,e.Z)(T,2),U=H[0],B=H[1],Q=(0,s.useState)(0),K=(0,e.Z)(Q,2),G=(K[0],K[1]),L=(0,m.s0)(),$=function(){G((0,c.M5)())};(0,s.useEffect)((function(){U||(B(!0),(0,p.Ht)("global_accounts","global_account_params",$),(0,c.Rz)(k,null),(0,c.Rz)(Z,null),(0,c.Rz)(A,null),(0,c.Rz)("accountPicker",{}),G((0,c.M5)()))}));var E=function(n,l,a){var d=(0,c.bh)(g)||{};a?(d[a]||(d[a]={}),d[a][n]=l):d[n]=l,(0,c.Rz)(g,d),G((0,c.M5)())},J=function(){var n=(0,o.Z)((0,d.Z)().mark((function n(){var l,a,e,s,t,u,v,m,b,h,p,_,x,f,j;return(0,d.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=(0,c.bh)(g)||{},u=[],t.date?t.date=new Date(t.date).getTime():t.date=(new Date).getTime()+800,n.next=5,(0,c.fN)();case 5:return v=n.sent,t.comprobanteId=v,m="",(b=(0,c.bh)(k)&&(0,c._2)((0,c.bh)(k)))&&(null===b||void 0===b||b.map((function(n,l){var a,d,o=(0,i.Z)({},t),e=(0,c.bh)(k)[n];o.document=null===e||void 0===e?void 0:e.document,m+=(null===e||void 0===e?void 0:e.document)+" ; ",o.account=null===e||void 0===e?void 0:e.account,o.subAccount=null===e||void 0===e?void 0:e.subAccount,o.providerId=null===e||void 0===e?void 0:e.providerId,o.type=null===e||void 0===e?void 0:e.type,o.amount=null===e||void 0===e?void 0:e.amount,o.payOrCollect="pay",o.operationId=(0,c.M5)();var s=(0,i.Z)({},null===(a=(0,c.bh)((0,c.hQ)()))||void 0===a?void 0:a.add_opera);s.params={businessId:null===(d=(0,c.bh)("profileUser"))||void 0===d?void 0:d.businessId},s.form=o,u.push(s)}))),(h=(0,c.bh)(D)&&(0,c._2)((0,c.bh)(D)))&&(null===h||void 0===h||h.map((function(n,l){var a,d,o,e,s,r=(0,i.Z)({},t),v=(0,c.bh)(D)[n];r.document=r.paymentDocument,r.account=null===v||void 0===v?void 0:v.account,r.subAccount=null===v||void 0===v?void 0:v.subAccount,r.type="debit",r.amount=null===v||void 0===v?void 0:v.amount,r.operationId=(0,c.M5)();var b=(0,i.Z)({},null===(a=(0,c.bh)((0,c.hQ)()))||void 0===a?void 0:a.add_opera);b.params={businessId:null===(d=(0,c.bh)("profileUser"))||void 0===d?void 0:d.businessId},b.form=r,u.push(b);var h=(0,i.Z)({},t);h.document=h.paymentDocument,h.paymentDocument=m,h.account=null===(o=(0,c.bh)("global_account_params"))||void 0===o?void 0:o.cash_bank,h.type="credit",h.amount=1*(null===v||void 0===v?void 0:v.amount),h.operationId=(0,c.M5)();var p=(0,i.Z)({},null===(e=(0,c.bh)((0,c.hQ)()))||void 0===e?void 0:e.add_opera);p.params={businessId:null===(s=(0,c.bh)("profileUser"))||void 0===s?void 0:s.businessId},p.form=h,u.push(p)}))),p=(0,i.Z)({},t),_=M((0,c.bh)(k)),p.document=p.paymentDocument,p.paymentDocument=m,p.account=null===(l=(0,c.bh)("global_account_params"))||void 0===l?void 0:l.cash_bank,(x=null===(a=(0,c.bh)("account_ids"))||void 0===a?void 0:a[p.account]).payOrCollect&&(p.payOrCollect=x.payOrCollect),p.type="credit",p.amount=1*_,p.operationId=(0,c.M5)(),(f=(0,i.Z)({},null===(e=(0,c.bh)((0,c.hQ)()))||void 0===e?void 0:e.add_opera)).params={businessId:null===(s=(0,c.bh)("profileUser"))||void 0===s?void 0:s.businessId},f.form=p,u.push(f),j=u.map(function(){var n=(0,o.Z)((0,d.Z)().mark((function n(l){var a;return(0,d.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=(0,c.I7)(l),n.next=3,a;case 3:n.sent;case 5:case"end":return n.stop()}}),n)})));return function(l){return n.apply(this,arguments)}}()),n.next=29,Promise.all(j);case 29:setTimeout((function(){(0,c.Rz)(A,null),(0,c.Rz)(g,null),(null===O||void 0===O?void 0:O.modalID)&&(0,r.CloseModal)({id:null===O||void 0===O?void 0:O.modalID}),L({pathname:"/accounting-ledger",search:"?cId=".concat(v)})}),400);case 30:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),q=function(){var n=(0,i.Z)({},(0,c.bh)(A))||{},l=(0,i.Z)({},(0,c.bh)(k))||{};(0,c._2)(n).map((function(a){var d,o,e=(null===(d=(0,c.bh)(I))||void 0===d?void 0:d.account)+"_"+(null===(o=(0,c.bh)(I))||void 0===o?void 0:o.subAccount)+"_"+a,s=(0,i.Z)({},(0,c.bh)(I));l[e]={},l[e].amount=1*n[a],l[e].document=a,l[e].type="debit",l[e].account=null===s||void 0===s?void 0:s.account,l[e].providerId=null===s||void 0===s?void 0:s.providerId,l[e].subAccount=null===s||void 0===s?void 0:s.subAccount})),(0,c.Rz)(k,l),(0,c.Rz)(A,null),(0,c.Rz)(I,null),G((0,c.M5)())};return(0,_.jsxs)("div",{style:{maxHeight:"90vh",minHeight:"88vh",width:"720px",overflow:"auto",background:"var(--hrm_palette-general-background-b)",borderRadius:13,padding:"10px 19px"},children:[(0,_.jsxs)("div",{className:"_dsplFlx ",children:[(0,_.jsx)("p",{className:"form_title",children:"Registrando Pago"}),(0,_.jsx)("div",{className:"flexSpace"})]}),(0,_.jsxs)("div",{className:"_dsplFlx",children:[(0,_.jsx)("div",{className:"flexSpace"}),null!==(l=(0,c.bh)("global_account_params"))&&void 0!==l&&l.cash_bank?(0,_.jsxs)("div",{className:" acc_dtls",children:[(0,_.jsxs)("div",{className:"_dsplFlx",children:[(0,_.jsx)("div",{className:"code",style:{color:"#646cff"},children:null===(a=(0,c.bh)("account_ids"))||void 0===a||null===(t=a[null===(u=(0,c.bh)("global_account_params"))||void 0===u?void 0:u.cash_bank])||void 0===t?void 0:t.code}),(0,_.jsx)("div",{className:"name",children:null===(v=(0,c.bh)("account_ids"))||void 0===v||null===(b=v[null===(x=(0,c.bh)("global_account_params"))||void 0===x?void 0:x.cash_bank])||void 0===b?void 0:b.name})]}),(0,_.jsx)("div",{className:"flexSpace"})]}):null]}),(0,_.jsxs)("div",{className:"_dsplFlx ",children:[(0,_.jsx)(N,{init:null===(j=(0,c.bh)(g))||void 0===j?void 0:j.date,updDate:function(n){return E("date",n)}}),(0,_.jsx)("div",{className:"flexSpace"}),(0,_.jsx)(f,{init:null===(y=(0,c.bh)(g))||void 0===y?void 0:y.paymentDocument,label:"Documento de Pago",width:200,updChanges:function(n){return E("paymentDocument",n)}})]}),(0,_.jsx)(f,{init:null===(w=(0,c.bh)(g))||void 0===w?void 0:w.description,label:"Descripcion",width:520,updChanges:function(n){return E("description",n)}}),(0,_.jsxs)("div",{className:" _dsplFlx",children:[(0,_.jsx)("div",{className:"flexSpace"}),(0,_.jsx)("p",{className:"group_title addBtn purple",onClick:function(){var n={zIndex:450,height:"93vh",props:{minHeight:"1vh",overlay:!0}};n.content=(0,_.jsx)(C,{updObs:G,confirm:q}),(0,r.OpenModal)(n)},children:"Provedores"})]}),(0,c.bh)(k)&&(0,c._2)((0,c.bh)(k)).length>0?(0,_.jsxs)("div",{className:"boxAddAcc",style:{margin:"18px 0"},children:[(0,_.jsxs)("div",{className:"_dsplFlx hdr_bar purple",style:{margin:"18px 0"},children:[(0,_.jsx)("div",{className:"tr_bar tr_bar_25",children:"Cuenta"}),(0,_.jsx)("div",{className:"tr_bar tr_bar_25",children:"Sub Cuenta"}),(0,_.jsx)("div",{className:"tr_bar tr_bar_25",children:"Documento"}),(0,_.jsx)("div",{className:"tr_bar tr_bar_25",children:"Balance"})]}),(0,c.bh)(k)&&(null===(R=(0,c._2)((0,c.bh)(k)))||void 0===R?void 0:R.map((function(n,l){return(0,_.jsx)(F,{idKey:n,data:(0,c.bh)(k)[n],updObs:G},n)}))),(0,_.jsx)(F,{data:{account:null===(S=(0,c.bh)("global_account_params"))||void 0===S?void 0:S.cash_bank,amount:M((0,c.bh)(k)),type:"credit",document:null===(z=(0,c.bh)(g))||void 0===z?void 0:z.paymentDocument},updObs:G})]}):null,(0,_.jsx)(h.Z,{collectionName:D}),null!==(P=(0,c.bh)(g))&&void 0!==P&&P.paymentDocument&&M((0,c.bh)(k))>0?(0,_.jsxs)("div",{className:"_dsplFlx ",children:[(0,_.jsx)("div",{className:"flexSpace"}),(0,_.jsx)("div",{className:"card",children:(0,_.jsx)("button",{onClick:J,children:"Guardar"})})]}):null]})};var F=function(n){var l,a,d=n.data;return 1*(null===d||void 0===d?void 0:d.amount)===0?null:(0,_.jsxs)("div",{className:"_dsplFlx hdr_bar",children:[(0,_.jsx)("div",{className:"tr_bar tr_bar_25",style:{marginTop:10},children:(0,_.jsx)(y,{data:null===(l=(0,c.bh)("account_ids"))||void 0===l?void 0:l[null===d||void 0===d?void 0:d.account],color:"debit"===d.type?"#009688":"#c62828",labelField:"code",infoField:"name"})}),(0,_.jsx)("div",{className:"tr_bar tr_bar_25",style:{marginTop:10},children:null!==d&&void 0!==d&&d.subAccount?(0,_.jsx)(y,{data:null===(a=(0,c.bh)("sub_account_ids"))||void 0===a?void 0:a[null===d||void 0===d?void 0:d.subAccount],color:"debit"===d.type?"#009688":"#c62828",labelField:"subAccount",infoField:"subAccountName"}):null}),(0,_.jsx)("div",{className:"tr_bar tr_bar_25",style:{marginTop:10},children:null===d||void 0===d?void 0:d.document}),(0,_.jsxs)("div",{className:"tr_bar tr_bar_25",style:{marginTop:10},children:["$",(1*(null===d||void 0===d?void 0:d.amount)).toFixed(2)]})]})},C=function(n){var l,a,d,i,o,t,v,m,b,h,p,x,f,N,y,g,A=n.data,k=n.confirm,D=(0,s.useState)(0),F=(0,e.Z)(D,2),C=(F[0],F[1]),M=function(){C((0,c.M5)())};return(0,_.jsxs)("div",{style:{maxHeight:"92vh",minHeight:"90vh",width:"720px",overflow:"auto",background:"#fff",borderRadius:13,padding:"10px 19px"},children:[(0,_.jsxs)("div",{className:"_dsplFlx ",children:[(0,_.jsx)("p",{className:"form_title",children:"Pagos por Provedores"}),(0,_.jsx)("div",{className:"flexSpace"})]}),(0,_.jsx)("div",{style:{margin:"18px 0"},children:null!==(l=(0,c.bh)(I))&&void 0!==l&&l.account?(0,_.jsxs)("div",{children:[(0,_.jsxs)("div",{className:" acc_dtls",children:[(0,_.jsxs)("div",{className:"_dsplFlx",children:[(0,_.jsx)("div",{className:"code",style:{color:"#646cff"},onClick:function(){(0,c.Rz)(I,null),C((0,c.M5)())},children:null===(a=(0,c.bh)("account_ids"))||void 0===a||null===(d=a[null===(i=(0,c.bh)(I))||void 0===i?void 0:i.account])||void 0===d?void 0:d.code}),(0,_.jsx)("div",{className:"name",children:null===(o=(0,c.bh)("account_ids"))||void 0===o||null===(t=o[null===(v=(0,c.bh)(I))||void 0===v?void 0:v.account])||void 0===t?void 0:t.name})]}),(0,_.jsx)("div",{className:"flexSpace"}),null!==(m=(0,c.bh)(I))&&void 0!==m&&m.subAccount?(0,_.jsxs)("div",{className:"_dsplFlx",style:{margin:"10px 0 0 18px"},children:[(0,_.jsx)("div",{className:"code",children:null===(b=(0,c.bh)("sub_account_ids"))||void 0===b||null===(h=b[null===(p=(0,c.bh)(I))||void 0===p?void 0:p.subAccount])||void 0===h?void 0:h.subAccount}),(0,_.jsx)("div",{className:"name",children:null===(x=(0,c.bh)("sub_account_ids"))||void 0===x||null===(f=x[null===(N=(0,c.bh)(I))||void 0===N?void 0:N.subAccount])||void 0===f?void 0:f.subAccountName})]}):null]}),(0,_.jsxs)("div",{className:"boxAddAcc",style:{margin:"18px 0"},children:[(0,_.jsxs)("div",{className:"_dsplFlx hdr_bar purple",style:{margin:"18px 0"},children:[(0,_.jsx)("div",{className:"tr_bar tr_bar_50",children:"Documento"}),(0,_.jsx)("div",{className:"tr_bar tr_bar_20",children:"Balance"}),(0,_.jsx)("div",{className:"tr_bar tr_bar_5"}),(0,_.jsx)("div",{className:"tr_bar tr_bar_25",children:"Por Pagar"})]}),(0,c.bh)(Z)&&(null===(y=(0,c._2)((0,c.bh)(Z)))||void 0===y?void 0:y.map((function(n,l){return(0,_.jsx)(w,{idKey:n,data:(0,c.bh)(Z)[n],updObs:C},n)})))]})]}):(0,_.jsx)(j,{placeholder:"buscar un provedor",width:420,handleClick:function(n){var l={account:null===n||void 0===n?void 0:n.account,subAccount:null===n||void 0===n?void 0:n.subAccount,providerId:null===n||void 0===n?void 0:n.providerId};(0,c.Rz)(I,l),(0,u.nr)(l,M)}})}),null!==(g=(0,c.bh)(I))&&void 0!==g&&g.subAccount?(0,_.jsxs)("div",{className:"_dsplFlx ",children:[(0,_.jsx)("div",{className:"flexSpace"}),(0,_.jsx)("p",{className:"group_title addBtn purple",onClick:function(){k&&k(),(null===A||void 0===A?void 0:A.modalID)&&(0,r.CloseModal)({id:null===A||void 0===A?void 0:A.modalID})},children:"Guardar"})]}):null]})},w=function(n){var l=n.data,a=n.updObs,d=(n.idKey,(0,s.useState)(0)),i=(0,e.Z)(d,2),o=i[0],t=i[1],r=function(n,l,a){var d=(0,c.bh)(A)||{};a?(d[a]||(d[a]={}),d[a][n]=l):d[n]=l,(0,c.Rz)(A,d)};return 1*(null===l||void 0===l?void 0:l.amount)===0?null:(0,_.jsxs)("div",{className:"_dsplFlx hdr_bar",children:[(0,_.jsx)("div",{className:"tr_bar tr_bar_50",style:{marginTop:10},children:null===l||void 0===l?void 0:l.document}),(0,_.jsxs)("div",{className:"tr_bar tr_bar_20",style:{marginTop:10},children:["$",(1*(null===l||void 0===l?void 0:l.amount)).toFixed(2)]}),(0,_.jsx)("div",{className:"tr_bar tr_bar_5",style:{marginTop:10},children:o>(null===l||void 0===l?void 0:l.amount)?(0,_.jsx)("div",{className:"icon",children:(0,_.jsx)(x,{name:"alert",color:"#c62828"})}):null}),(0,_.jsx)("div",{className:"tr_bar tr_bar_25",children:(0,_.jsx)(f,{init:o,width:80,updChanges:function(n){return t(d=n),r(null===l||void 0===l?void 0:l.document,d),void a((0,c.M5)());var d}})})]})},M=function(n){var l,a=0;return n&&(null===(l=(0,c._2)(n))||void 0===l||l.map((function(l,d){var i;a+=1*(0,c.Zv)(null===(i=n[l])||void 0===i?void 0:i.amount,2)}))),a}}}]);
//# sourceMappingURL=8469.55114ef2.chunk.js.map