/*! For license information please see 8684.5e0b7f9e.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkhrmfinance=self.webpackChunkhrmfinance||[]).push([[8684,9760],{9760:(e,l,t)=>{t.r(l),t.d(l,{CloseModal:()=>r,OpenModal:()=>d,default:()=>a});var o=t(2791),s=t(5408),i=t(2350),c=t(184);const n="listDialog_mdh392",a=()=>{const e=(0,i.bh)("listDialog")||{};(0,s.Z)(n);let l=Object.keys(e);return(0,c.jsx)(c.Fragment,{children:l.map(((l,t)=>{let s=e[l];if(s&&s.visible){let e={};s.height&&(e.heigth=s.height),s.width,s.zIndex&&(e.zIndex=s.zIndex-1);let t={zIndex:s.zIndex},i=null,n=s.data;return s.content&&(i=o.cloneElement(s.content,{data:n})),(0,c.jsxs)("div",{className:"ltr-1kbnjow",style:e,children:[(0,c.jsx)("div",{className:"ltr-hoe9xz",children:(0,c.jsx)("div",{className:"ltr-1wao6ny",style:t,id:l,children:i})}),s.data.overlay?(0,c.jsx)("div",{className:"DialogHRMOverlay ".concat(s.visible?"active":""),onClick:()=>{var e;e=l,document.getElementsByTagName("html")[0].classList.remove("has-level-two"),r({id:e})}}):null]},l)}}))})},d=e=>{let l=(0,i.bh)("listDialog")||{},t=(0,i.M5)();l[t]||(l[t]={}),l[t].visible=!0;let o={};e.props?(o=e.props,o.modalID=t):o.modalID=t;let s=document.getElementsByTagName("body")[0];null!==s&&void 0!==s&&s.style&&(s.style.overflowY="hidden"),l[t].isView=e.isView,l[t].observeResize=e.observeResize,l[t].observeResize&&(l[t].observeInterval=setInterval((()=>{let e=document.querySelector("[dialog-key-id='".concat(t,"']")),o=e&&e.getBoundingClientRect();o&&(o.width===l[t].width&&o.height===l[t].height||(l[t].height=o.height+10,l[t].width=o.width,(0,i.Rz)("listDialog",l),(0,i.wt)(n)))}),200)),l[t].display=!0,e.zIndex&&(l[t].zIndex=e.zIndex),e.height&&(l[t].height=e.height),e.width&&(l[t].width=e.width),e.content&&(l[t].content=e.content),l[t].data=o,(0,i.Rz)("listDialog",l),(0,i.wt)(n),setTimeout((()=>{document.getElementsByTagName("html")[0].classList.add("has-level-two"),(0,i.Rz)("modalOpen",t),(0,i.wt)(n)}),125)},r=e=>{let l=(0,i.bh)("listDialog")||{},t=e.id;if(l[t]){var o,s,c;l[t].observeResize&&l[t].observeInterval&&clearInterval(l[t].observeInterval),l[t].display=!1,null===(o=l[t])||void 0===o||null===(s=o.data)||void 0===s||null===(c=s.closeEvent)||void 0===c||c.call(s),(0,i.Rz)("listDialog",l),delete l[t],document.getElementsByTagName("body")[0].style.overflowY=null,(0,i.wt)(n),setTimeout((()=>{delete l[t],document.getElementsByTagName("html")[0].classList.remove("has-level-two"),(0,i.Rz)("modalOpen",null)}),750)}}},5281:(e,l,t)=>{t.d(l,{Z:()=>c});var o=t(2791),s=t(184);class i extends o.Component{constructor(){super(),this.state={scrollPosition:null},this.handleInterval=this.handleInterval.bind(this),this.handleRequestAnimationFrame=this.handleRequestAnimationFrame.bind(this)}componentWillMount(){this.intervalID=setInterval(this.handleInterval,50)}componentWillUnmount(){clearInterval(this.intervalID),cancelAnimationFrame(this.requestID),this.requestID=null,this.intervalID=null}getWindowScrollTop(){return window.pageYOffset||document.documentElement.scrollTop}handleInterval(){cancelAnimationFrame(this.requestID),this.requestID=requestAnimationFrame(this.handleRequestAnimationFrame)}handleRequestAnimationFrame(){const{scrollPosition:e}=this.state,l=this.getWindowScrollTop();l!==e&&("function"===typeof this.props.scrollhandler&&this.props.scrollhandler(l),this.setState({scrollPosition:l}))}render(){return(0,s.jsx)(s.Fragment,{})}}const c=i},8684:(e,l,t)=>{t.r(l),t.d(l,{default:()=>p});var o=t(2791),s=t(2350),i=t(2647),c=(t(9760),t(6021),t(1232)),n=t(9179),a=t(4050),d=t(9661),r=t(5281),u=t(184);const v=(0,i.Vg)(),h=(0,n.pl)(),b=((0,n.Wh)(),(0,i.PU)()),m="Acc2Collect",_=((0,d.FC)(),(0,i.tL)()),p=e=>{var l,t;let{data:i,elmId:n,updObs:d}=e;const[r,v]=(0,o.useState)(!1),[b,_]=(0,o.useState)(0),[p,y]=(0,o.useState)(!1),[g,w]=(0,o.useState)(!1);(0,o.useEffect)((()=>{r||(v(!0),(0,s.Rz)("list_show_type_collect","pending"),(0,a.Ht)("global_accounts","global_account_params",f),_((0,s.M5)()),(0,a.ZX)())}));const f=async(e,l)=>{_((0,s.M5)()),y(!1)};return(0,u.jsxs)("div",{className:"",children:[(0,u.jsxs)("div",{className:"accounts_header _dsplFlx",children:[(0,u.jsx)("div",{children:(0,u.jsx)("h2",{children:"Cobros"})}),(0,u.jsx)("div",{className:"flexSpace"})]}),(0,u.jsxs)("div",{className:"",style:{maxWidth:"920px",padding:16},children:[(0,u.jsx)("div",{className:"",style:{height:190},children:(0,u.jsx)(x,{handle_getall:e=>{(0,c.i7)((0,s.bh)(m),f)},data:i,cb_result:f,updObs:_,searchCllb:e=>{w(e)}})}),(0,u.jsx)("div",{className:"accounts_container scollVh scoll_CP_Height",children:(null===(l=(0,s.bh)(m))||void 0===l?void 0:l.account)&&(0,s.bh)("collect_by_doc")&&(null===(t=(0,s._2)((0,s.bh)("collect_by_doc")))||void 0===t?void 0:t.map((e=>{let l=1*(0,s.bh)("collect_by_doc")[e].amount;if("done"===(0,s.bh)("list_show_type_collect")&&0===l||"pending"===(0,s.bh)("list_show_type_collect")&&0!==l){let l=(0,s.bh)("collect_by_doc")[e].document;return!g||l.indexOf(g)>=0?(0,u.jsx)(h,{data:(0,s.bh)("collect_by_doc")[e],elmId:e},e):null}return null})))})]})]})},x=e=>{var l,t,i,c,n,a,d,h,p,x;let{handle_getall:y,data:g,cb_result:w,updObs:f,searchCllb:I}=e;const[j,N]=(0,o.useState)(0),[z,R]=(0,o.useState)(!1);let A=null===(l=(0,s.bh)("account_ids"))||void 0===l?void 0:l[null===(t=(0,s.bh)(m))||void 0===t?void 0:t.account],F=null===(i=(0,s.bh)("sub_account_ids"))||void 0===i?void 0:i[null===(c=(0,s.bh)(m))||void 0===c?void 0:c.subAccount],D=(null===(n=(0,s.bh)(m))||void 0===n?void 0:n.account)+"_"+(null===(a=(0,s.bh)(m))||void 0===a?void 0:a.subAccount);return(0,u.jsxs)("div",{className:"menu_collect ".concat(z?"_floating":""),children:[(0,u.jsxs)("div",{className:"_dsplFlx ",style:{margin:"18px 0"},children:[(0,u.jsxs)("div",{className:" acc_dtls",children:[(0,u.jsxs)("div",{className:"_dsplFlx",children:[(0,u.jsx)("div",{className:"code",style:{color:"#646cff",cursor:"pointer"},children:null===A||void 0===A?void 0:A.code}),(0,u.jsx)("div",{className:"name",children:null===A||void 0===A?void 0:A.name})]}),(0,u.jsx)("div",{className:"flexSpace"}),F?(0,u.jsxs)("div",{className:"_dsplFlx",style:{margin:"10px 0 0 18px"},children:[(0,u.jsx)("div",{className:"code",children:null===F||void 0===F?void 0:F.subAccount}),(0,u.jsx)("div",{className:"name",children:null===F||void 0===F?void 0:F.subAccountName})]}):null,null!==(d=(0,s.bh)(m))&&void 0!==d&&d.account?(0,u.jsxs)("div",{className:"_dsplFlx ",style:{padding:"35px 18px 10px "},children:[(0,u.jsxs)("div",{className:"_dsplFlx ",children:[(0,u.jsx)("div",{className:"flexSpace"}),(0,u.jsx)(_,{data:[{label:"Pendientes",id:"pending"},{label:"Cobrados",id:"done"}],active:(0,s.bh)("list_show_type_collect")||"pending",updSelect:e=>(e=>{(0,s.Rz)("list_show_type_collect",e),f((0,s.M5)())})(e)}),(0,u.jsx)("div",{className:"flexSpace"})]}),(0,u.jsx)("div",{style:{padding:"0px 0px 0px 8px"},className:"flexSpace"}),(0,u.jsx)(v,{placeholder:"Buscar ....",width:260,obs:N,fetchData:I,change:I,callempty:I,keyFlds:"searchQry"})]}):null]}),(0,u.jsx)("div",{className:"flexSpace"}),(0,u.jsxs)("div",{children:[(0,u.jsxs)("div",{className:"_dsplFlx acc_dtls",children:[(0,u.jsx)("div",{className:"name",children:"Por Cobrar:"}),(0,u.jsx)("div",{className:"code",style:{margin:"0px 0 0 7px",color:"#646cff"},children:null!==(h=(0,s.bh)("rec_by_acc"))&&void 0!==h&&h[D]&&!isNaN(1*(null===(p=(0,s.bh)("rec_by_acc"))||void 0===p?void 0:p[D]))?" $".concat((1*(null===(x=(0,s.bh)("rec_by_acc"))||void 0===x?void 0:x[D])).toFixed(2)):"$0.00"})]}),(0,u.jsx)("div",{children:(0,u.jsx)("div",{className:"icon autoCenter",onClick:()=>{var e,l;let t=[];(null===(e=(0,s.bh)(m))||void 0===e?void 0:e.account)&&(0,s.bh)("collect_by_doc")&&(null===(l=(0,s._2)((0,s.bh)("collect_by_doc")))||void 0===l||l.map((e=>{let l=1*(0,s.bh)("collect_by_doc")[e].amount;if("done"===(0,s.bh)("list_show_type_collect")&&0===l||"pending"===(0,s.bh)("list_show_type_collect")&&0!==l){var o,i,c;let l={document:null===(o=(0,s.bh)("collect_by_doc")[e])||void 0===o?void 0:o.document,description:null===(i=(0,s.bh)("collect_by_doc")[e])||void 0===i?void 0:i.description,amount:1*(null===(c=(0,s.bh)("collect_by_doc")[e])||void 0===c?void 0:c.amount)};t.push(l)}}))),(0,s.eY)("export_provider_"+(null===A||void 0===A?void 0:A.code)+"_"+(null===F||void 0===F?void 0:F.subAccount)+"_"+(0,s.M5)()+".csv",t)},children:(0,u.jsx)(b,{name:"google-spreadsheet",color:"#c62828"})})})]})]}),(0,u.jsx)(r.Z,{scrollhandler:e=>{R(e>130)}})]})}},1232:(e,l,t)=>{t.d(l,{GP:()=>a,N$:()=>c,hF:()=>r,i7:()=>s,nr:()=>i,pj:()=>u});var o=t(2350);const s=async(e,l)=>{var t,s;let i={...null===(t=(0,o.bh)((0,o.hQ)()))||void 0===t?void 0:t.filter_search_opera};i.params={businessId:null===(s=(0,o.bh)("profileUser"))||void 0===s?void 0:s.businessId,":account":null===e||void 0===e?void 0:e.account,":subAccount":null===e||void 0===e?void 0:e.subAccount};const c=(0,o.I7)(i),a=await c;if((0,o.wL)("getall_collects"),(0,o.wL)(i),(0,o.wL)(a),a&&!a.error){(0,o.Rz)("collect_list",a),(0,o.Rz)("collect_by_doc",n(a)),(0,o.Rz)("collect_by_docM",n(a));let l=(null===e||void 0===e?void 0:e.account)+"_"+(null===e||void 0===e?void 0:e.subAccount);d(a,l)}l&&l()},i=async(e,l)=>{var t,s;let i={...null===(t=(0,o.bh)((0,o.hQ)()))||void 0===t?void 0:t.filter_search_opera};i.params={businessId:null===(s=(0,o.bh)("profileUser"))||void 0===s?void 0:s.businessId,":account":null===e||void 0===e?void 0:e.account,":subAccount":null===e||void 0===e?void 0:e.subAccount};const c=(0,o.I7)(i),a=await c;if((0,o.wL)("getall_toPay"),(0,o.wL)(i),(0,o.wL)(a),a&&!a.error){(0,o.Rz)("toPay_list",a),(0,o.Rz)("toPay_by_doc",n(a,!0)),(0,o.Rz)("toPay_by_docM",n(a,!0));let l=(null===e||void 0===e?void 0:e.account)+"_"+(null===e||void 0===e?void 0:e.subAccount);d(a,l)}l&&l()},c=async e=>{var l,t;let s={...null===(l=(0,o.bh)((0,o.hQ)()))||void 0===l?void 0:l.search_opera};s.params={businessId:null===(t=(0,o.bh)("profileUser"))||void 0===t?void 0:t.businessId,":search":(0,o.bh)("search_acc_record")};const i=(0,o.I7)(s),c=await i;c&&!c.error&&((0,o.Rz)("comprobante_list",c),(0,o.Rz)("comprobante_by_doc",n(c))),e&&e()};function n(e,l){var t={};let s=e&&(0,o._2)(e);return s.length>0?s.map((s=>{var i;let c=e[s],n=null===(i=c.document)||void 0===i?void 0:i.trim();if(!t[n]){t[n]={},["date","description","document","entryName"].forEach((e=>{t[n][e]=c[e]})),t[n].amount=0,t[n].operations=[]}if(c.type){let e=(0,o.Zv)(c.amount,2),s=(0,o.Zv)(t[n].amount,2),i=0;i=l?1*s+e*("debit"===c.type?-1:1):1*s+e*("credit"===c.type?-1:1),t[n].amount=(0,o.Zv)(i,2),t[n].operations.push(function(e){var l,t;let s={};s.account=null===(l=(0,o.bh)("account_ids"))||void 0===l?void 0:l[e.account],s.sub_account=null===(t=(0,o.bh)("sub_account_ids"))||void 0===t?void 0:t[e.subAccount],s.comprobanteId=e.comprobanteId,s.date=e.date,s.description=e.description;let i=(0,o.Zv)(e.amount,2);"credit"===e.type?(s.debit=0,s.credit=i):"debit"===e.type&&(s.credit=0,s.debit=i);return s}(c))}})):t=null,t}const a=(e,l,t)=>(0,o.MV)("SumDocuments",[e,l,t],(()=>{var t;let s=0;return e&&(null===(t=(0,o._2)(e))||void 0===t||t.map(((t,o)=>{var i;s+=1*(null===(i=e[t])||void 0===i?void 0:i[l])}))),s})),d=async(e,l,t)=>{let s=(0,o.bh)("rec_by_acc")||{};s[l]=((e,l,t)=>{var s;let i=0;return e&&(null===(s=(0,o._2)(e))||void 0===s||s.map(((l,t)=>{var s;let c=(0,o.Zv)(e[l].amount,2);i+=c*("credit"===(null===(s=e[l])||void 0===s?void 0:s.type)?-1:1)}))),i})(e)||"no",(0,o.Rz)("rec_by_acc",s),t&&t()},r=async(e,l,t)=>{var s,i;let c={...null===(s=(0,o.bh)((0,o.hQ)()))||void 0===s?void 0:s.filter_search_opera};c.params={businessId:null===(i=(0,o.bh)("profileUser"))||void 0===i?void 0:i.businessId,":account":null===e||void 0===e?void 0:e.account,":subAccount":null===e||void 0===e?void 0:e.subAccount};const n=(0,o.I7)(c),a=await n;a&&!a.error&&d(a,l),t&&t()},u=async(e,l,t)=>{var s,i;let c={...null===(s=(0,o.bh)((0,o.hQ)()))||void 0===s?void 0:s.search_subacc_acc};c.params={businessId:null===(i=(0,o.bh)("profileUser"))||void 0===i?void 0:i.businessId,":account":e,":search":l};const n=(0,o.I7)(c),a=await n;if((0,o.wL)("searchSubAccbyCode"),(0,o.wL)(c),(0,o.wL)(a),a&&!a.error){var d;let e=null===(d=(0,o._2)(a))||void 0===d?void 0:d[0];t&&t(a[e])}}},6021:()=>{}}]);
//# sourceMappingURL=8684.5e0b7f9e.chunk.js.map