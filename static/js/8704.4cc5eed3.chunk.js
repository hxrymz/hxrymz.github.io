"use strict";(self.webpackChunkhrmfinance=self.webpackChunkhrmfinance||[]).push([[8704,7766],{689:(e,s,i)=>{i.r(s),i.d(s,{default:()=>h});var d=i(2791),l=i(2350),o=(i(8202),i(9760)),a=i(9498),t=i(2647),n=(i(9803),i(184));var r=i(6963),c=i(4e3),v=i(6824);let x=0;var p=i(5261);const u=(0,t.PU)(),m="new_multi_deposit_prov",h=e=>{var s,i;let{data:h,index:b,handleRefreshAll:f,show:y}=e;const[j,w]=(0,d.useState)(!1),[N,g]=(0,d.useState)(0);if((0,d.useEffect)((()=>{j||(w(!0),g((0,l.M5)()))})),!y)return null;const S=()=>{g((0,l.M5)())},z=()=>{(0,a.EY)(S)},F=async()=>{var e,s;let i={...null===(e=(0,l.bh)((0,l.hQ)()))||void 0===e?void 0:e.upd_deposit_summary};i.params={businessId:null===(s=(0,l.bh)("profileUser"))||void 0===s?void 0:s.businessId,depositSummaryId:null===h||void 0===h?void 0:h.depositSummaryId},i.data2update={comprobanteId:0};const d=(0,l.I7)(i),o=await d;o&&!o.error&&(0,a.EY)(S)};(0,a.in)(null===(s=(0,l.bh)("sub_deposit_group"))||void 0===s?void 0:s[h.depositId],"subDeposit");return(0,n.jsxs)("div",{className:" ".concat(b," deposit_box "),children:[(0,n.jsxs)("div",{className:"_dsplFlx ",children:[(0,n.jsxs)("div",{className:"_dsplFlx ",children:[(0,n.jsx)("div",{className:"key_deposit_balance "}),(0,n.jsx)("div",{className:"value_deposit_gross",children:(0,l.sJ)(null===h||void 0===h?void 0:h.depositDate)})]}),(0,n.jsx)("div",{className:"flexSpace"}),(0,n.jsxs)("div",{className:"_dsplFlx ",children:[(0,n.jsx)("div",{className:"icon_image ",style:{padding:"5px 10px 0 0"},onClick:()=>{(async e=>{const s=await r.PDFDocument.create();s.registerFontkit(c.Z);const i=await(0,v.h2)(s);console.log(i);let d=s.addPage();const{width:o,height:a}=d.getSize();x=a-40;let t=(0,l.sJ)(null===e||void 0===e?void 0:e.depositDate);const n=i.GSansBold.widthOfTextAtSize(t,13);d.drawText(t,{x:575-n,y:x,size:13,font:i.GSansBold,color:(0,r.rgb)(0,0,0)}),x-=20;const p=i.GSansBold.widthOfTextAtSize(null===e||void 0===e?void 0:e.id,12),u=i.GSansBold.widthOfTextAtSize("Deposit ID:  ",11);d.drawText("Deposit ID: ",{x:575-p-u,y:x,size:11,font:i.GSansBold,color:(0,r.rgb)(0,0,0)}),d.drawText(null===e||void 0===e?void 0:e.id,{x:575-p,y:x,size:12,font:i.GSansBold,color:(0,r.rgb)(0,0,0)}),x-=50;const m=i.Lexend_700.widthOfTextAtSize("$"+(null===e||void 0===e?void 0:e.amount),12),h=i.GSansBold.widthOfTextAtSize("Amount:",11);d.drawText("Amount:",{x:515-h,y:x,size:11,font:i.GSansBold,color:(0,r.rgb)(0,0,0)}),d.drawText("$"+(null===e||void 0===e?void 0:e.amount),{x:575-m,y:x,size:12,font:i.Lexend_700,color:(0,r.rgb)(0,0,0)}),x-=20;let _="$".concat((1*(null===e||void 0===e?void 0:e.paymentDepositFee)).toFixed(2));const b=i.Lexend_700.widthOfTextAtSize(_,12),f=i.GSansBold.widthOfTextAtSize("Fees:",11);d.drawText("Fees:",{x:515-f,y:x,size:11,font:i.GSansBold,color:(0,r.rgb)(0,0,0)}),d.drawText(_,{x:575-b,y:x,size:12,font:i.Lexend_700,color:(0,r.rgb)(0,0,0)});let y=a-30;d.drawText("Granite Concepts",{x:20,y:y,size:13,font:i.GSansBold,color:(0,r.rgb)(0,0,0)}),d.drawText("4504 Poplar Level Rd",{x:20,y:y-15,size:10,font:i.GSansBold,color:(0,r.rgb)(0,0,0)}),d.drawText("Louisville, KY 40213",{x:20,y:y-30,size:10,font:i.GSansBold,color:(0,r.rgb)(0,0,0)}),d.drawText("(502) 742-2473",{x:20,y:y-45,size:10,font:i.GSansBold,color:(0,r.rgb)(0,0,0)}),d.drawText("graniteconceptsky@gmail.com",{x:20,y:y-60,size:10,font:i.GSansBold,color:(0,r.rgb)(0,0,0)}),d.drawText("graniteconceptsky.com",{x:20,y:y-75,size:10,font:i.GSansBold,color:(0,r.rgb)(0,0,0)}),x-=90,d.drawText("Invoice",{x:15,y:x,size:10,font:i.GSansBold,color:(0,r.rgb)(0,0,0)}),d.drawText("Reference",{x:70,y:x,size:10,font:i.GSansBold,color:(0,r.rgb)(0,0,0)}),d.drawText("Name",{x:160,y:x,size:10,font:i.GSansBold,color:(0,r.rgb)(0,0,0)}),d.drawText("Amount",{x:440,y:x,size:11,font:i.Lexend_700,color:(0,r.rgb)(0,0,0)}),d.drawText("Fee",{x:540,y:x,size:11,font:i.Lexend_700,color:(0,r.rgb)(0,0,0)}),d.drawRectangle({x:15,y:x-10,width:575,height:.85,color:(0,r.rgb)(0,0,0),borderColor:(0,r.rgb)(0,0,0)}),null===e||void 0===e||e.transactions.map((e=>{var s,l;x-=40;let o=null===e||void 0===e||null===(s=e.contactName)||void 0===s||null===(l=s.split("/\n"))||void 0===l?void 0:l.join(""),a="$".concat((1*(null===e||void 0===e?void 0:e.amount)).toFixed(2)),t="$".concat((1*(null===e||void 0===e?void 0:e.totalTransactionFee)).toFixed(2));const n=i.Lexend_700.widthOfTextAtSize(a,11),c=i.Lexend_700.widthOfTextAtSize(t,11);d.drawText(null===e||void 0===e?void 0:e.referenceNumber,{x:20,y:x,size:10,font:i.GSansBold,color:(0,r.rgb)(0,0,0)}),d.drawText(null===e||void 0===e?void 0:e.processorTransactionReference,{x:60,y:x,size:10,font:i.GSansBold,color:(0,r.rgb)(0,0,0)}),d.drawText(o,{x:150,y:x,size:10,font:i.GSansBold,color:(0,r.rgb)(0,0,0)}),d.drawText(a,{x:480-n,y:x,size:11,font:i.Lexend_700,color:(0,r.rgb)(0,0,0)}),d.drawText(t,{x:575-c,y:x,size:11,font:i.Lexend_700,color:(0,r.rgb)(0,0,0)})}));const j=await s.save();let w=(0,l.ou)(j);window.open(w)})(h)},children:(0,n.jsx)(u,{name:"printer",color:" var(--hrm_palette-blue-purple)"})}),(0,n.jsx)("div",{className:"icon_image ",style:{padding:"5px 10px 0 0"},onClick:e=>{if(null!==h&&void 0!==h&&h.comprobanteId)F();else{(0,l.Rz)(m,h),(0,l.Rz)(m+"_bck",JSON.parse(JSON.stringify(h)));let e={zIndex:450,height:"80vh",props:{minHeight:"1vh",overlay:!0}};e.content=(0,n.jsx)(p.ME,{confirm:z,item:h}),(0,o.OpenModal)(e)}},children:(0,n.jsx)(u,{name:null!==h&&void 0!==h&&h.comprobanteId?"success":"google-spreadsheet",color:null!==h&&void 0!==h&&h.comprobanteId?"var(--hrm_palette-success-fg)":"var(--partial-success)"})})]})]}),(0,n.jsxs)("div",{className:"_dsplFlx ",children:[(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"_dsplFlx ",children:[(0,n.jsx)("div",{className:"key_deposit_balance ",children:"Deposit ID:"}),(0,n.jsx)("div",{className:"value_deposit_balance ",children:null===h||void 0===h?void 0:h.id})]}),(0,n.jsxs)("div",{className:"_dsplFlx ",children:[(0,n.jsx)("div",{className:"trnsNo",children:null===h||void 0===h?void 0:h.transactions.length}),(0,n.jsx)("div",{className:" _dsplFlx value_deposit_balance ",children:(null===h||void 0===h?void 0:h.transactions.length)>1?"transactions":"transaction"})]})]}),(0,n.jsx)("div",{className:"flexSpace"}),(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"_dsplFlx ",children:[(0,n.jsx)("div",{className:"key_deposit_balance ",style:{width:130}}),(0,n.jsxs)("div",{className:"value_deposit_gross",children:["$",(1*(null===h||void 0===h?void 0:h.amount)).toFixed(2)]})]}),(0,n.jsxs)("div",{className:"_dsplFlx ",children:[(0,n.jsx)("div",{className:"key_deposit_balance ",style:{width:130},children:"Fees:"}),(0,n.jsxs)("div",{className:"value_deposit_balance ",children:["$",(1*(null===h||void 0===h?void 0:h.paymentDepositFee)).toFixed(2)]})]}),(0,n.jsxs)("div",{className:"_dsplFlx ",children:[(0,n.jsx)("div",{className:"key_deposit_balance ",style:{width:130},children:"Net amount:"}),(0,n.jsxs)("div",{className:"value_deposit_balance ",children:["$",(1*(null===h||void 0===h?void 0:h.amount)-1*(null===h||void 0===h?void 0:h.paymentDepositFee)).toFixed(2)]})]})]})]}),(0,n.jsx)(t.rD,{children:(0,n.jsx)("div",{className:" spaceAround flxWrp ",style:{margin:"6px 0 6px"},children:null===h||void 0===h||null===(i=h.transactions)||void 0===i?void 0:i.map((e=>(0,n.jsx)(_,{data:e,id:e.id})))})})]})},_=e=>{var s,i;let{data:o,index:a,handleRefreshAll:t,show:r}=e;const[c,v]=(0,d.useState)(!1),[x,p]=(0,d.useState)(0);(0,d.useEffect)((()=>{c||(v(!0),p((0,l.M5)()))}));let u=null===o||void 0===o||null===(s=o.contactName)||void 0===s||null===(i=s.split("/\n"))||void 0===i?void 0:i.join("");return(0,n.jsx)("div",{className:" ".concat(a," deposit_boxItm "),children:(0,n.jsxs)("div",{className:"_dsplFlx ",children:[(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"_dsplFlx ",children:[(0,n.jsx)("div",{className:"key_deposit_balance "}),(0,n.jsx)("div",{className:"value_deposit_gross",children:null===o||void 0===o?void 0:o.processorTransactionReference})]}),(0,n.jsxs)("div",{className:"_dsplFlx ",children:[(0,n.jsx)("div",{className:"key_deposit_balance ",children:"Documeto Referencia:"}),(0,n.jsx)("div",{className:"value_deposit_name ",children:null===o||void 0===o?void 0:o.referenceNumber})]}),(0,n.jsxs)("div",{className:"_dsplFlx ",children:[(0,n.jsx)("div",{className:"key_deposit_balance ",children:"Customer:"}),(0,n.jsx)("div",{className:"value_deposit_name ",children:u})]})]}),(0,n.jsx)("div",{className:"flexSpace"}),(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"_dsplFlx ",children:[(0,n.jsx)("div",{className:"key_deposit_balance ",style:{width:130}}),(0,n.jsxs)("div",{className:"value_deposit_gross",children:["$",(1*(null===o||void 0===o?void 0:o.amount)).toFixed(2)]})]}),(0,n.jsxs)("div",{className:"_dsplFlx ",children:[(0,n.jsx)("div",{className:"key_deposit_balance ",style:{width:130},children:"Fees:"}),(0,n.jsxs)("div",{className:"value_deposit_balance ",children:["$",(1*(null===o||void 0===o?void 0:o.totalTransactionFee)).toFixed(2)]})]}),(0,n.jsxs)("div",{className:"_dsplFlx ",children:[(0,n.jsx)("div",{className:"key_deposit_balance ",style:{width:130},children:"Net amount:"}),(0,n.jsxs)("div",{className:"value_deposit_balance ",children:["$",(1*(null===o||void 0===o?void 0:o.amount)-1*(null===o||void 0===o?void 0:o.totalTransactionFee)).toFixed(2)]})]})]})]})})}},9498:(e,s,i)=>{i.d(s,{EY:()=>l,LY:()=>n,Sb:()=>t,hj:()=>o,in:()=>a});var d=i(2350);const l=async e=>{let s=(0,d.bh)("getall_deposit_last")||0;if(Date.now()>s){var i,l;(0,d.Rz)("getall_deposit_last",Date.now()+190);let s={...null===(i=(0,d.bh)((0,d.hQ)()))||void 0===i?void 0:i.scan_deposit_summary};s.params={businessId:null===(l=(0,d.bh)("profileUser"))||void 0===l?void 0:l.businessId};const o=(0,d.I7)(s),t=await o;t&&((0,d.Rz)("deposits_list",a(t,"depositDate")),(0,d.Rz)("deposits_ids",(0,d.ME)((0,d.jQ)(t),"depositId")),e&&e())}},o=async e=>{var s,i;let l={...null===(s=(0,d.bh)((0,d.hQ)()))||void 0===s?void 0:s.scan_deposit_summary};l.params={businessId:null===(i=(0,d.bh)("profileUser"))||void 0===i?void 0:i.businessId},(0,d.bh)("searchQryDept").split(" ").map(((e,s)=>{e&&(l.params[":search"+s]=e.trim())}));const o=(0,d.I7)(l),t=await o;t?((0,d.Rz)("deposits_list",a((0,d.jQ)(t),"date")),(0,d.Rz)("deposits_ids",t),e&&e()):(0,d.Rz)("deposits_list",[])},a=(e,s,i)=>(0,d.MV)("sortDeposits",[e],(()=>e&&e.sort(((e,d)=>{let l=e[s],o=d[s];return l<o?i?-1:1:l>o?i?1:-1:0})))),t=async(e,s)=>{var i,l;let o={...null===(i=(0,d.bh)((0,d.hQ)()))||void 0===i?void 0:i.delete_deposit};o.params={businessId:null===(l=(0,d.bh)("profileUser"))||void 0===l?void 0:l.businessId,depositId:e};const a=(0,d.I7)(o);await a&&s&&s()},n=async e=>{var s,i;let l={...null===(s=(0,d.bh)((0,d.hQ)()))||void 0===s?void 0:s.all_deposit_summary};l.params={businessId:null===(i=(0,d.bh)("profileUser"))||void 0===i?void 0:i.businessId,":search1":"  "};const o=(0,d.I7)(l),a=await o;if(a){let s=[],i=(0,d._U)(a,"id");(0,d.sO)(e)&&(e=JSON.parse(e)),e.map((e=>{let l={...e};if(l.depositSummaryId=e.id,e.id&&e.amount&&e.paymentDepositFee&&!i[e.id]){var o,a;console.log("id 2 save ",e.id);let i={...null===(o=(0,d.bh)((0,d.hQ)()))||void 0===o?void 0:o.add_deposit_summary};i.params={businessId:null===(a=(0,d.bh)("profileUser"))||void 0===a?void 0:a.businessId},i.form=l,s.push(i)}})),(0,d.DF)(s,r)}},r=async e=>{const s=(0,d.I7)(e),i=await s;if(i)return i}},8202:()=>{},9803:()=>{}}]);
//# sourceMappingURL=8704.4cc5eed3.chunk.js.map