"use strict";(self.webpackChunkhrmfinance=self.webpackChunkhrmfinance||[]).push([[8969],{8969:function(e,i,l){l.r(i),l.d(i,{default:function(){return w}});var n=l(6459),d=l(1413),r=l(4165),t=l(5861),a=l(9439),s=l(2791),o=l(2350),c=l(2647),u=(l(1534),l(9760)),v=l(7689),h=l(9661),p=l(24),m=(l(6824),l(9715),l(7709)),x=(l(7889),l(184)),f=function(e){var i=e.data,l=e.wT,n=e.hT,d=(e.svDm,e.vertice),r=e.item,t=e.comp2Render,c=e.confirm,v=(0,s.useState)(1),h=(0,a.Z)(v,2)[1];(0,s.useEffect)((function(){h((0,o.M5)())}),[d]);var p=function(e){c(e),f()},f=function(){(null===i||void 0===i?void 0:i.modalID)&&(0,u.CloseModal)({id:null===i||void 0===i?void 0:i.modalID})},b={LL:(0,x.jsx)(m.gY,{item:r,wT:l,hT:n,svDm:null===r||void 0===r?void 0:r.bluePrint,addBlPr:p,profile:null===r||void 0===r?void 0:r.profile}),U:(0,x.jsx)(m.Xu,{item:r,wT:l,hT:n,svDm:null===r||void 0===r?void 0:r.bluePrint,addBlPr:p,profile:null===r||void 0===r?void 0:r.profile})};return(0,x.jsx)("div",{style:{maxHeight:"86vh",minHeight:"65vh",width:"960px",overflow:"auto",background:"var(--hrm_palette-general-background-b)",borderRadius:13,padding:"10px 19px"},children:b[t]})},b=(l(4622),(0,c.PU)()),_=((0,c.YZ)(),(0,c.A5)()),j=(0,c.Np)(),N=((0,h.a)(),(0,c.JC)()),g=((0,h.LZ)(),(0,p.Az)()),y=(0,p.f_)(),I="new_product_entry_comprobante",C="productListOnVoucherCmp",k="productList2VoucherSelected",P=[{productId:"hH2lVnw7JAiY0Ulg",unit:"S/F",qty:"1",profile:"COBE",inventoryId:"kYrHYgG11eflsVeJ",alphaCode:"MT-2548",date:1697818423967,bluePrint:{type:"U",vertices:{1:{vertice:1,isWall:1,width:92,profile:null},2:{vertice:2,needProfile:1,width:24,profile:"COBE"},3:{vertice:3,isWall:1,width:52,profile:null},4:{vertice:4,width:24,needProfile:1,profile:"COBE"},5:{vertice:5,needProfile:1,profile:"COBE"},6:{vertice:6,isWall:1,profile:null},8:{vertice:8,width:24,needProfile:1,profile:"COBE"},sink:{vertice:"sink",needProfile:1,width:28,height:18,xPos:32,yPos:"6",profile:"COBE"}}}},{productId:"P9ZnIAVrEq3zI1aJ",unit:"Uno",qty:"1",inventoryId:"ZANy7sILcOpt2QvF",alphaCode:"MT-0072",date:1697818507142},{productId:"ohQordOGWnhgRpIF",unit:"S/F",qty:"1",profile:"PENCIL",inventoryId:"EQrhQWOhHSEAWvJB",alphaCode:"MT-4886",date:1697818569508,bluePrint:{type:"LL",vertices:{1:{vertice:1,needProfile:0,isWall:1,width:92,profile:null},2:{vertice:2,width:24,needProfile:1,profile:"PENCIL"},3:{vertice:3,isWall:1,width:52,profile:null},4:{vertice:4,needProfile:1,width:24,profile:"PENCIL"},5:{vertice:5,needProfile:1,profile:"PENCIL"},6:{vertice:6,isWall:1,profile:null},sink:{vertice:"sink",needProfile:1,width:28,height:18,xPos:32,yPos:"6",profile:"PENCIL"}}}}],w=function(e){var i,l,n,c,h,p,f,b,_,N=e.data,g=e.confirm,k=e.updateView,w=(0,s.useState)(!1),F=(0,a.Z)(w,2),z=F[0],L=F[1],M=(0,s.useState)(0),S=(0,a.Z)(M,2),R=(S[0],S[1]);(0,v.s0)();(0,s.useEffect)((function(){z||(L(!0),(0,o.Rz)("accountPicker",{}),(0,o.Rz)(C,P),R((0,o.M5)()))}));var Z=function(e,i,l){var n=(0,o.bh)(I)||{};l?(n[l]||(n[l]={}),n[l][e]=i):n[e]=i,(0,o.Rz)(I,n),R((0,o.M5)())},B=function(){var e=(0,t.Z)((0,r.Z)().mark((function e(){var i,l,n,t,a,s,c,v;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((0,o.Rz)("bluePrint",null),i=(0,o.bh)(I)||{},l={invoice:null===i||void 0===i?void 0:i.invoice,date:null===i||void 0===i?void 0:i.date,clientAddress:null===i||void 0===i?void 0:i.clientAddress,clientName:null===i||void 0===i?void 0:i.clientName,products:[]},n=(new Date).getTime()+800,l.date&&(t=new Date(l.date).getTime(),n=t||n),l.date=n,l.products=(0,o.bh)(C),l.voucherId=(0,o.M5)(),console.log(l),!k){e.next=12;break}e.next=20;break;case 12:return(c=(0,d.Z)({},null===(a=(0,o.bh)((0,o.hQ)()))||void 0===a?void 0:a.add_voucher_production)).params={businessId:null===(s=(0,o.bh)("profileUser"))||void 0===s?void 0:s.businessId},c.form=l,v=(0,o.I7)(c),e.next=18,v;case 18:e.sent;case 20:(null===N||void 0===N?void 0:N.modalID)&&(0,u.CloseModal)({id:null===N||void 0===N?void 0:N.modalID}),setTimeout((function(){(0,o.Rz)(C,null),(0,o.Rz)("provider_picker",null),(0,o.Rz)(I,null),R((0,o.M5)()),g&&g()}),400);case 22:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();null===(i=(0,o.bh)("account_ids"))||void 0===i||i[null===(l=(0,o.bh)("accountPicker"))||void 0===l?void 0:l.account],null===(n=(0,o.bh)("sub_account_ids"))||void 0===n||n[null===(c=(0,o.bh)("accountPicker"))||void 0===c?void 0:c.subAccount];return(0,x.jsxs)("div",{style:{maxHeight:"96vh",minHeight:"93vh",width:"1060px",overflow:"auto",background:"var(--hrm_palette-general-background-b)",borderRadius:13,padding:"10px 19px"},children:[(0,x.jsxs)("div",{className:"_dsplFlx ",children:[(0,x.jsx)("p",{className:"form_title",children:"Crear Voucher"}),(0,x.jsx)("div",{className:"flexSpace"})]}),(0,x.jsxs)("div",{className:"_dsplFlx ",children:[(0,x.jsx)(y,{init:null===(h=(0,o.bh)(I))||void 0===h?void 0:h.date,updDate:function(e){return Z("date",e)}}),(0,x.jsx)("div",{className:"flexSpace"}),(0,x.jsx)(j,{init:null===(p=(0,o.bh)(I))||void 0===p?void 0:p.invoice,label:"No Factura",width:120,updChanges:function(e){return Z("invoice",e)}})]}),(0,x.jsx)(E,{}),(0,x.jsx)("div",{className:"_dsplFlx ",style:{margin:"18px 0"},children:(0,x.jsx)(j,{init:null===(f=(0,o.bh)(I))||void 0===f?void 0:f.clientName,label:"Nombre Cliente",width:520,updChanges:function(e){return Z("clientName",e)}})}),(0,x.jsx)("div",{className:"_dsplFlx ",style:{margin:"18px 0"},children:(0,x.jsx)(j,{init:null===(b=(0,o.bh)(I))||void 0===b?void 0:b.clientAddress,label:"Direccion",width:520,updChanges:function(e){return Z("clientAddress",e)}})}),(0,x.jsxs)("div",{className:"_dsplFlx ",children:[(0,x.jsx)("div",{className:"flexSpace"}),(0,x.jsx)("div",{className:"card",children:(0,x.jsx)("button",{onClick:B,children:k?"Actualizar":"Guardar"})})]}),(0,x.jsx)("div",{className:"rndImghidde",children:(0,o.bh)(C)&&(null===(_=(0,o.bh)(C))||void 0===_?void 0:_.map((function(e,i){var l,n,d={LL:(0,x.jsx)(m.gY,{item:e,svDm:null===e||void 0===e?void 0:e.bluePrint,addBlPr:function(){},profile:null===e||void 0===e?void 0:e.profile}),U:(0,x.jsx)(m.Xu,{item:e,svDm:null===e||void 0===e?void 0:e.bluePrint,addBlPr:function(){},profile:null===e||void 0===e?void 0:e.profile})};return null!==e&&void 0!==e&&null!==(l=e.bluePrint)&&void 0!==l&&l.type?d[null===e||void 0===e||null===(n=e.bluePrint)||void 0===n?void 0:n.type]:null})))})]})},E=function(e){var i,l,r,t,c,u,v,h,p,m,f;(0,n.Z)(e);var N=(0,s.useState)(0),y=(0,a.Z)(N,2),P=(y[0],y[1]),w=function(){P((0,o.M5)())},E=null===(i=(0,o.bh)("products_ids"))||void 0===i?void 0:i[null===(l=(0,o.bh)("product_picker_in"))||void 0===l?void 0:l.productId],L=function(e,i,l){var n=(0,o.bh)("product_picker_in")||{};l?(n[l]||(n[l]={}),n[l][e]=i):n[e]=i,(0,o.Rz)("product_picker_in",n),P((0,o.M5)())},M=function(e){var i=(0,o.bh)(C)||[];i.splice(e,1),(0,o.Rz)(C,i),P((0,o.M5)())},S=(0,o.bh)(k)||{};return(0,x.jsxs)("div",{className:"boxAddAcc",style:{margin:"18px 0"},children:[null!==(r=(0,o.bh)("product_picker_in"))&&void 0!==r&&r.productId?(0,x.jsx)("div",{className:"_dsplFlx ",style:{margin:"18px 0"},children:(0,x.jsxs)("div",{className:" acc_dtls",children:[(0,x.jsxs)("div",{className:"_dsplFlx",onClick:function(e){(0,o.Rz)("product_picker_in",null),P((0,o.M5)())},children:[(0,x.jsx)("div",{className:"code",style:{color:"#646cff"},children:null===E||void 0===E?void 0:E.upc_barcode}),(0,x.jsx)("div",{className:"name",children:null===E||void 0===E?void 0:E.name})]}),(0,x.jsx)("div",{className:"flexSpace"})]})}):(0,x.jsx)(g,{width:420,handleClick:function(e){var i={productId:e.productId,unit:e.unit};(0,o.Rz)("product_picker_in",i),P((0,o.M5)())}}),null!==(t=(0,o.bh)("product_picker_in"))&&void 0!==t&&t.productId?(0,x.jsxs)("div",{className:"_dsplFlx ",children:[E.hasDimension?(0,x.jsx)("div",{className:"",style:{width:270,marginLeft:18},children:(0,x.jsx)(j,{init:null===(c=(0,o.bh)("product_picker_in"))||void 0===c?void 0:c.dimension,label:"Dimension (width,height) in inch",width:100,updChanges:function(e){return L("dimension",e)}})}):(0,x.jsx)(j,{init:null===(u=(0,o.bh)("product_picker_in"))||void 0===u?void 0:u.qty,label:"Cantidad",width:100,type:"number",updChanges:function(e){return L("qty",e)}}),(0,x.jsx)("div",{className:"centerBx",style:{maxWidth:130,marginLeft:7},children:(0,x.jsx)(_,{init:null===(v=(0,o.bh)("product_picker_in"))||void 0===v?void 0:v.profile,lbl_empty:"Profile",list:[{label:"choseOne",id:null},{label:"No",id:"-"},{label:"FLAT",id:"FLAT"},{label:"PENCIL",id:"PENCIL"},{label:"BEVEL",id:"BEVEL"},{label:"DEMI",id:"DEMI"},{label:"OGEE",id:"OGEE"},{label:"COBE",id:"COBE"},{label:"BULLNOSE",id:"BULLNOSE"}],onSelect:function(e){return L("profile",e)}})}),(0,x.jsx)("div",{className:"flexSpace"}),null!==(h=(0,o.bh)("product_picker_in"))&&void 0!==h&&h.qty?(0,x.jsx)("div",{className:"card",children:(0,x.jsx)("button",{onClick:function(){var e,i=(0,d.Z)({},(0,o.bh)("product_picker_in"))||{},l=(0,d.Z)({},(0,o.bh)("product_picker_in"))||{},n=(0,o.bh)(C)||[];i.dimension&&(i.qty=1,i.squareFeet=F(null===i||void 0===i?void 0:i.dimension.split(",")[0],null===i||void 0===i?void 0:i.dimension.split(",")[1]),i.pricePerSquareFeet=1*i.price/i.squareFeet*1),i.inventoryId=(0,o.M5)(),i.alphaCode=(0,o.Pb)();var r=(new Date).getTime()+800;if(null!==(e=(0,o.bh)(I))&&void 0!==e&&e.date){var t=new Date((0,o.bh)(I).date).getTime();r=t||r}i.date=r,n.push(i),(0,o.Rz)(C,n),l.productId=null,l.qty="",l.price="",(0,o.Rz)("product_picker_in",l),P((0,o.M5)())},children:"Agregar"})}):null]}):null,(0,o._2)(S).length>0?(0,x.jsxs)("div",{className:"_dsplFlx hdr_bar purple",style:{margin:"18px 0"},children:[(0,x.jsx)("div",{className:"tr_bar tr_bar_5 align_itm",children:(0,x.jsx)("div",{className:"icon align_itm",onClick:function(){var e=(0,o.bh)(k)||{};(0,o._2)(e).length<(0,o.bh)(C).length?((0,o.bh)(C).map((function(i){e[i.inventoryId]=1})),(0,o.Rz)(k,e)):(0,o.Rz)(k,{}),P((0,o.M5)())},children:(0,x.jsx)(b,{name:(0,o._2)(S).length<(0,o.bh)(C).length?"minus-circle-outline":"check_circle_outline",color:"#646cff"})})}),(0,x.jsxs)("div",{className:"tr_bar tr_bar_20 align_itm left_alg",children:[(0,o._2)(S).length," Seleccionado(s)"]}),(0,x.jsx)("div",{className:"tr_bar tr_bar_70"}),(0,x.jsx)("div",{className:"tr_bar tr_bar_5 align_itm",children:(0,x.jsx)("div",{className:"icon align_itm",onClick:function(){var e=(0,o.bh)(C).filter((function(e){return!S[e.inventoryId]}));(0,o.Rz)(C,e),(0,o.Rz)(k,{}),P((0,o.M5)())},children:(0,x.jsx)(b,{name:"outline_delete",color:"#646cff"})})})]}):(0,x.jsxs)("div",{className:"_dsplFlx hdr_bar purple align_itm",style:{margin:"18px 0"},children:[(0,x.jsx)("div",{className:"tr_bar tr_bar_5",children:null!==(p=(0,o.bh)(C))&&void 0!==p&&p.length?null===(m=(0,o.bh)(C))||void 0===m?void 0:m.length:""}),(0,x.jsx)("div",{className:"tr_bar tr_bar_50 left_alg",children:"Producto"}),(0,x.jsx)("div",{className:"tr_bar tr_bar_10",children:"Dimension"}),(0,x.jsx)("div",{className:"tr_bar tr_bar_15",children:"Qty"}),(0,x.jsx)("div",{className:"tr_bar tr_bar_15",children:"Profile"}),(0,x.jsx)("div",{className:"tr_bar tr_bar_5"})]}),(0,o.bh)(C)&&(0,o.bh)(C).length>0&&(null===(f=(0,o.bh)(C))||void 0===f?void 0:f.map((function(e,i){return(0,x.jsx)(z,{idKey:e.productId,index:i,data:e,deleteItem:M,updObs:w},e.productId+"_"+i)})))]})},F=function(e,i){var l=e*i*.0069444444444;return(0,o.Zv)(l,2)},z=function(e){var i,l=e.data,n=(e.deleteItem,e.updObs),r=(e.index,(0,s.useState)(!1)),t=(0,a.Z)(r,2),c=(t[0],t[1],null===(i=(0,o.bh)("products_ids"))||void 0===i?void 0:i[null===l||void 0===l?void 0:l.productId]),v=(null===l||void 0===l?void 0:l.dimension)&&(null===l||void 0===l?void 0:l.dimension.split(",")[0])+" X "+(null===l||void 0===l?void 0:l.dimension.split(",")[1]),h=(null===l||void 0===l?void 0:l.dimension)&&{lbl:v+" (inch)",hover:(null===l||void 0===l?void 0:l.squareFeet)+"S/F X $"+(0,o.Zv)(null===l||void 0===l?void 0:l.pricePerSquareFeet,2)},p=(0,s.useRef)(null),m=function(e){var i;null===p||void 0===p||null===(i=p.current)||void 0===i||i.showw(e)},_=function(e){var i={zIndex:450,height:"40vh",props:{minHeight:"1vh",overlay:!0,closeEvent:function(){}}};i.content=(0,x.jsx)(f,{comp2Render:e,confirm:j,item:l}),(0,u.OpenModal)(i),n(),g()},j=function(e){var i=(0,d.Z)({},l);console.log(i),i.bluePrint=e;var r=(0,o.bh)(C),t=function(e,i){var l=null;return e.map((function(e,n){e.productId===i&&(l=n)})),l}(r,i.productId);r[t]=i,console.log(t),console.log(r),(0,o.Rz)(C,r),console.log((0,o.bh)(C)),n()},g=function(){m(!1)},y=(0,o.bh)(k)||{};return(0,x.jsxs)("div",{className:"_dsplFlx hdr_bar centerBx",children:[(0,x.jsx)("div",{className:"tr_bar tr_bar_5 icon ",onClick:function(){var e=(0,o.bh)(k)||{};e[l.inventoryId]?delete e[l.inventoryId]:e[l.inventoryId]=1,(0,o.Rz)(k,e),n()},children:(0,x.jsx)(b,{name:y[l.inventoryId]?"check_circle_outline":"radio_unchecked",color:y[l.inventoryId]?"var(--hrm_palette-blue-purple)":"var(--hrm_palette-imput-label_gray)"})}),(0,x.jsx)("div",{className:"tr_bar tr_bar_50 left_alg",children:null===c||void 0===c?void 0:c.name}),(0,x.jsx)("div",{className:"tr_bar tr_bar_10 centerBx",style:{marginTop:-4},children:null!==l&&void 0!==l&&l.dimension?(0,x.jsx)(N,{data:h,color:"#282828",labelField:"lbl",infoField:"hover"}):null}),(0,x.jsx)("div",{className:"tr_bar tr_bar_15 centerBx",children:(0,o.Zv)(null===l||void 0===l?void 0:l.qty,2)}),(0,x.jsx)("div",{className:"tr_bar tr_bar_15 centerBx",children:null===l||void 0===l?void 0:l.profile}),(0,x.jsx)("div",{className:"flexSpace"}),(0,x.jsxs)("div",{className:" relPos",children:[(0,x.jsx)(L,{ref:p,handleIcon1:function(){return _("LL")},handleIcon2:function(){return _("I")},handleIcon3:function(){return _("U")}}),null!==l&&void 0!==l&&l.profile?(0,x.jsx)("div",{className:"icon centerBx",onClick:function(){(0,o.Rz)("bluePrint",null),null!==l&&void 0!==l&&l.bluePrint?_(null===l||void 0===l?void 0:l.bluePrint.type):m(!0)},children:(0,x.jsx)(b,{name:"vector-polygon",color:"var(--hrm_palette-imput-txt_gray)"})}):null]})]})},L=(0,s.forwardRef)((function(e,i){var l=e.handleIcon1,n=e.handleIcon2,d=e.handleIcon3,r=(e.close,(0,s.useState)(0)),t=(0,a.Z)(r,2),o=t[0],c=t[1];return(0,s.useImperativeHandle)(i,(function(){return{showw:function(e){c(e)}}})),(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("div",{className:"c5dXqd",style:{display:o?"block":"none"},children:o?(0,x.jsxs)("div",{className:"rR9aKd",role:"list",children:[(0,x.jsx)("div",{className:"ef3QKd",children:(0,x.jsxs)("div",{role:"listitem",tabIndex:"0","aria-label":"Share",children:[(0,x.jsx)("span",{children:(0,x.jsx)("div",{children:(0,x.jsx)("div",{className:"M5n4Ud",onClick:l,children:(0,x.jsx)("span",{className:"HQcgX z1asCe Fp7My",style:{height:16,lineHeight:16,width:16},children:(0,x.jsx)(b,{name:"size-l",size:16})})})})}),(0,x.jsx)("div",{id:"_6Wu4ZMz5NpepptQPlL2l4Aw_4"})]})}),(0,x.jsx)("div",{className:"ef3QKd",role:"listitem",children:(0,x.jsx)("div",{"aria-label":"Save",role:"button",tabIndex:"0",children:(0,x.jsx)("div",{className:"M5n4Ud",onClick:n,children:(0,x.jsx)("span",{className:"HQcgX z1asCe Fp7My",style:{height:16,lineHeight:16,width:16},children:(0,x.jsx)(b,{name:"rectangle-outline",size:16})})})})}),(0,x.jsx)("div",{className:"ef3QKd",children:(0,x.jsxs)("div",{role:"listitem",tabIndex:"0","aria-label":"Share",children:[(0,x.jsx)("span",{children:(0,x.jsx)("div",{children:(0,x.jsx)("div",{className:"M5n4Ud",onClick:d,children:(0,x.jsx)("span",{className:"HQcgX z1asCe Fp7My",style:{height:16,lineHeight:16,width:16},children:(0,x.jsx)(b,{name:"keyboard-space",size:16})})})})}),(0,x.jsx)("div",{id:"_6Wu44fZMz5NpepptQPlL2l4Aw_4"})]})})]}):null}),o?(0,x.jsx)("div",{className:"Overlay_floatAct",onClick:function(){return c(!1)}}):null]})}))},9715:function(e,i,l){var n=l(9439),d=l(2791),r=(l(1534),l(9760)),t=l(2647),a=l(184),s=(0,t.Np)();i.Z=function(e){var i=e.data,l=e.confirm,t=e.label,o=(e.close,(0,d.useState)(0)),c=(0,n.Z)(o,2),u=c[0],v=c[1],h=i.modalID,p=function(e){(0,r.CloseModal)({id:h})};return(0,a.jsxs)("div",{style:{maxHeight:"40vh",minHeight:"28vh",overflow:"auto",background:"#fff",borderRadius:13,padding:"10px 19px"},children:[(0,a.jsxs)("div",{className:"_dsplFlx ",children:[(0,a.jsx)("p",{className:"form_title",children:t}),(0,a.jsx)("div",{className:"flexSpace"})]}),(0,a.jsx)("div",{className:"_dsplFlx ",children:(0,a.jsx)("span",{children:"Cuantas copias deseas hacer"})}),(0,a.jsxs)("div",{className:"_dsplFlx ",style:{padding:"15px 10px 0"},children:[(0,a.jsx)("div",{className:"flexSpace"}),(0,a.jsx)(s,{init:u,width:100,type:"number",updChanges:function(e){return v(1*e)}}),(0,a.jsx)("div",{className:"flexSpace"})]}),(0,a.jsxs)("div",{className:"_dsplFlx ",style:{padding:"15px 10px"},children:[(0,a.jsx)("div",{className:"flexSpace"}),(0,a.jsx)("p",{className:"group_title addBtn",onClick:p,children:"Cancelar"}),(0,a.jsx)("p",{className:"group_title addBtn ",onClick:function(){l(1*u),p()},children:"Crear Copias"})]})]})}},6459:function(e,i,l){function n(e){if(null==e)throw new TypeError("Cannot destructure "+e)}l.d(i,{Z:function(){return n}})}}]);
//# sourceMappingURL=8969.d103b6cb.chunk.js.map