"use strict";(self.webpackChunkhrmfinance=self.webpackChunkhrmfinance||[]).push([[9052],{9052:(e,s,t)=>{t.r(s),t.d(s,{default:()=>b});var l=t(2791),a=t(2350),i=t(2647),d=t(9760),o=(t(8202),t(9803),t(5261)),n=t(9498),r=t(4050),c=t(713),h=t(184);const p=(0,i.PU)(),m=e=>{let{clickHandler:s,label:t,theme:l,width:i,icon:d,color:o}=e,n={"--btn_bg_hrm2":"var(--btn_bg_hrm1_".concat(l,")"),"--btn_bg_hover_hrm2":"var(--btn_bg_hover_hrm1_".concat(l,")"),"--btn_text_hrm2":"var(--btn_text_hrm1_".concat(l,")")};if(o){let{r:e,g:s,b:t}=(0,a.wK)(o);n={"--btn_bg_hrm2":"rgba("+[e,s,t].join(",")+", 0.11 )","--btn_bg_hover_hrm2":"rgba("+[e,s,t].join(",")+", 0.21 )","--btn_text_hrm2":o}}return i&&(n.width=i),(0,h.jsx)("div",{className:" jaqJnq_hrm1",style:n,children:(0,h.jsxs)("button",{className:"gHAsFI_hrm1 dqnOfN jUrKkb ".concat(l),onClick:s,children:[d?(0,h.jsx)("div",{style:{padding:"5px 10px 0 0",cursor:"pointer"},children:(0,h.jsx)(p,{name:d,color:"var(--btn_text_hrm2)"})}):null,(0,h.jsx)("span",{className:" jaqJnq_hrm1",children:t})]})})},_=(0,i.Vg)(),v=(0,i.YZ)(),u=(0,o.J2)(),b=e=>{var s,t;let{data:i,elmId:p,updObs:b}=e;const[x,j]=(0,l.useState)(!1),[f,g]=(0,l.useState)(0),[y,I]=(0,l.useState)(64),[N,F]=(0,l.useState)(!1),[w,S]=(0,l.useState)(!1);(0,l.useEffect)((()=>{x||(j(!0),g((0,a.M5)()),(0,c.N0)(b),(0,r.Ht)("global_accounts","global_account_params",b))}));const D=()=>{},k=e=>{(0,n.EY)(Q)},U=()=>{I((e=>e+64))},Q=()=>{var e;(async(e,s)=>{64!==y?I(64):g((0,a.M5)()),S(!1)})();let s=Math.ceil((null===(e=(0,a._2)((0,a.bh)("deposits_list")))||void 0===e?void 0:e.length)/64);(0,a.Z$)(U,1250,s),setTimeout((()=>{S(!1)}),230)};return console.log("depositFeeSelected",(0,a.bh)("depositFeeSelected")),(0,h.jsxs)("div",{className:"",children:[(0,h.jsxs)("div",{className:"accounts_header",children:[(0,h.jsx)("h2",{children:"Deposits"}),(0,h.jsxs)("div",{className:"_dsplFlx ",children:[(0,h.jsxs)("div",{className:"group_title addBtn purple upl",children:["Import Deposits from File",(0,h.jsx)("input",{id:"fileupload",type:"file",onChange:e=>{var s=new FileReader;s.onload=function(e){var s=e.target.result;(0,n.LY)(s)},s.readAsText(e.target.files[0],"UTF-8")}})]}),(0,h.jsx)("div",{className:"flexSpace"}),(0,h.jsxs)("div",{className:"_dsplFlx centerBx",children:[(0,h.jsx)("span",{className:"checklabel",children:"Add Fee"}),(0,h.jsx)(v,{initvalue:N,keyCode:57,updChange:F})]}),(0,h.jsx)("div",{className:"_dsplFlx ",style:{marginLeft:14},children:N?(0,h.jsx)(m,{color:"#007bfc",label:"Add Fee ",clickHandler:()=>{let e=(0,a.bh)("depositFeeSelected")||{},s="fee for deposit Ids",t=0;(0,a._2)(e).map((l=>{console.log(l,e[l]),t+=e[l],s+=" ".concat(l,";")}));let l={zIndex:450,height:"80vh",props:{minHeight:"1vh",overlay:!0}};l.content=(0,h.jsx)(o.MI,{confirm:k,description:s,feeAmount:t,item:i}),(0,d.OpenModal)(l)}}):null})]}),(0,h.jsxs)("div",{className:"_dsplFlx ",style:{marginTop:14},children:[(0,h.jsx)(_,{placeholder:"Buscar ....",width:360,obs:g,fetchData:e=>{S(!0),(0,n.hj)(Q)},loading:w,change:e=>{!w&&S(!0)},callempty:k,keyFlds:"searchQryDept"}),(0,h.jsx)("div",{className:"flexSpace"}),(0,h.jsxs)("div",{className:"_dsplFlx ",children:[(0,h.jsx)("div",{className:"total_comprobante_title",children:"No de Deposits:"}),(0,h.jsx)("div",{className:"total_comprobante gray",children:(0,h.jsx)("span",{children:null===(s=(0,a._2)((0,a.bh)("deposits_list")))||void 0===s?void 0:s.length})})]})]})]}),(0,h.jsx)("div",{className:"deposits_container scollVh",style:{height:"calc(98vh - 230px)"},children:(0,a.bh)("deposits_list")&&(null===(t=(0,a._2)((0,a.bh)("deposits_list")))||void 0===t?void 0:t.map(((e,s)=>(0,h.jsx)(u,{data:(0,a.bh)("deposits_list")[e],elmId:e,openUpdateView:D,handleRefreshAll:k,show:s<y,index:s,viewFee:N},e))))})]})}},9498:(e,s,t)=>{t.d(s,{EY:()=>a,LY:()=>n,Sb:()=>o,hj:()=>i,in:()=>d});var l=t(2350);const a=async e=>{let s=(0,l.bh)("getall_deposit_last")||0;if(Date.now()>s){var t,a;(0,l.Rz)("getall_deposit_last",Date.now()+190);let s={...null===(t=(0,l.bh)((0,l.hQ)()))||void 0===t?void 0:t.scan_deposit_summary};s.params={businessId:null===(a=(0,l.bh)("profileUser"))||void 0===a?void 0:a.businessId};const i=(0,l.I7)(s),o=await i;o&&((0,l.Rz)("deposits_list",d(o,"depositDate")),(0,l.Rz)("deposits_ids",(0,l.ME)((0,l.jQ)(o),"depositId")),e&&e())}},i=async e=>{var s,t;let a={...null===(s=(0,l.bh)((0,l.hQ)()))||void 0===s?void 0:s.scan_deposit_summary};a.params={businessId:null===(t=(0,l.bh)("profileUser"))||void 0===t?void 0:t.businessId},(0,l.bh)("searchQryDept").split(" ").map(((e,s)=>{e&&(a.params[":search"+s]=e.trim())}));const i=(0,l.I7)(a),o=await i;o?((0,l.Rz)("deposits_list",d((0,l.jQ)(o),"date")),(0,l.Rz)("deposits_ids",o),e&&e()):(0,l.Rz)("deposits_list",[])},d=(e,s,t)=>(0,l.MV)("sortDeposits",[e],(()=>e&&e.sort(((e,l)=>{let a=e[s],i=l[s];return a<i?t?-1:1:a>i?t?1:-1:0})))),o=async(e,s)=>{var t,a;let i={...null===(t=(0,l.bh)((0,l.hQ)()))||void 0===t?void 0:t.delete_deposit};i.params={businessId:null===(a=(0,l.bh)("profileUser"))||void 0===a?void 0:a.businessId,depositId:e};const d=(0,l.I7)(i);await d&&s&&s()},n=async e=>{var s,t;let a={...null===(s=(0,l.bh)((0,l.hQ)()))||void 0===s?void 0:s.all_deposit_summary};a.params={businessId:null===(t=(0,l.bh)("profileUser"))||void 0===t?void 0:t.businessId,":search1":"  "};const i=(0,l.I7)(a),d=await i;if(d){let s=[],t=(0,l._U)(d,"id");(0,l.sO)(e)&&(e=JSON.parse(e)),e.map((e=>{let a={...e};if(a.depositSummaryId=e.id,e.id&&e.amount&&e.paymentDepositFee&&!t[e.id]){var i,d;console.log("id 2 save ",e.id);let t={...null===(i=(0,l.bh)((0,l.hQ)()))||void 0===i?void 0:i.add_deposit_summary};t.params={businessId:null===(d=(0,l.bh)("profileUser"))||void 0===d?void 0:d.businessId},t.form=a,s.push(t)}})),(0,l.DF)(s,r)}},r=async e=>{const s=(0,l.I7)(e),t=await s;if(t)return t}},8202:()=>{},9803:()=>{}}]);
//# sourceMappingURL=9052.2e3c3c31.chunk.js.map