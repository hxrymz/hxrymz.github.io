"use strict";(self.webpackChunkhrmfinance=self.webpackChunkhrmfinance||[]).push([[9585],{9585:(e,i,l)=>{l.r(i),l.d(i,{default:()=>b});var s=l(2791),t=(l(5027),l(2647)),a=l(7689),n=l(2350),d=l(9760),o=l(6514),c=l(1475),r=l(184);const v=(0,t.Np)(),m=(0,t.PU)(),u=(0,t.tW)(),h=(0,t.A5)(),p=(0,t.YZ)(),x=(0,n.Ks)()+"_upd",b=e=>{var i,l;let{data:t,confirm:o}=e;const[c,v]=(0,s.useState)(1),[u,h]=(0,s.useState)(2);let p=(0,a.TH)();(0,a.s0)();const x=null===(i=p.search)||void 0===i||null===(l=i.split("?"))||void 0===l?void 0:l[1],b=(0,n.mB)(x);let f=null===b||void 0===b?void 0:b.cId;(0,s.useEffect)((()=>{}),[f]);const y=()=>{(null===t||void 0===t?void 0:t.modalID)&&(0,d.CloseModal)({id:null===t||void 0===t?void 0:t.modalID}),(0,n.Ey)(o)&&o()},N=e=>{h(e)};(0,n.bh)((0,n.Ks)());return(0,r.jsx)("div",{style:{height:"90vh",width:"650px",overflow:"auto",background:"var(--dark-800)",borderRadius:13,padding:"10px 6px"},children:(0,r.jsxs)("div",{className:" ",children:[(0,r.jsxs)("div",{className:"h23g9woI",children:[(0,r.jsxs)("div",{className:"jKZvHt ",onClick:y,children:[(0,r.jsx)(m,{name:"arrowBack",size:22,color:"var(--light-200)"}),(0,r.jsx)("div",{className:"eULkqP"})]}),(0,r.jsx)("div",{className:"flexSpace"}),(0,r.jsx)("div",{className:"icon_action ".concat(1===u?"active":""," "),onClick:()=>N(1),children:(0,r.jsx)(m,{name:"image_outline",color:"var(--light-200)"})}),(0,r.jsx)("div",{className:"icon_action ".concat(2===u?"active":""," "),onClick:()=>N(2),children:(0,r.jsx)(m,{name:"list_form",color:"var(--light-200)"})})]}),(0,r.jsx)("div",{style:{paddingTop:4}}),(0,r.jsx)(j,{viewId:1,activeView:u,children:(0,r.jsx)(_,{})}),(0,r.jsx)(j,{viewId:2,activeView:u,children:(0,r.jsx)(g,{close:y})})]})})},_=e=>{let{activeView:i,children:l}=e;const[t,a]=(0,s.useState)(1),[d,v]=(0,s.useState)(""),h=()=>{a((0,n.M5)())},p=(e,i)=>{(0,n.Rz)("image_mov_text",i.textAnnotations),(0,n.Rz)("loading_image_text",!1),h()};return(0,r.jsxs)("div",{style:{height:"90vmin",padding:"5px!important"},children:[(0,r.jsxs)("div",{className:"_dsplFlx ",style:{padding:9},children:[(0,r.jsx)("div",{className:"flexSpace"}),(0,n.bh)("image_url_mov")?(0,r.jsx)("div",{style:{marginBottom:10},children:(0,n.bh)("loading_image_text")?(0,r.jsxs)("div",{className:"icon_compr _dsplFlx",style:{marginTop:10},children:[(0,r.jsx)("div",{className:"lbl_saving ",children:"scanning image ..."}),(0,r.jsx)(u,{stroke:"var(--partial-success)",size:24,strokeW:8})]}):(0,r.jsxs)("div",{className:"_dsplFlx",style:{margin:"6px 20px 5px"},onClick:e=>{(0,n.Rz)("loading_image_text",!0),h(),(0,c.sV)((0,n.bh)("image_url_mov"),p)},children:[(0,r.jsx)("div",{className:"lbl_saving ",style:{margin:"4px 20px 0 0"},children:"Escanear Imagen"}),(0,r.jsxs)("div",{className:"btn_icon",children:[(0,r.jsx)("div",{className:"icon_absol inside ",children:(0,r.jsx)(m,{name:"image_outline",color:"var(--light-300)",size:20})}),(0,r.jsx)("div",{className:"icon_absol ",children:(0,r.jsx)(m,{name:"scan-helper",color:"var(--partial-success)",size:28})})]})]})}):null]}),(0,r.jsxs)("div",{className:"_dsplFlx ",style:{padding:9},children:[(0,r.jsx)("div",{className:"flexSpace"}),d?(0,r.jsxs)("div",{className:"imagePreview",children:[(0,r.jsxs)("div",{className:"_dsplFlx",onClick:()=>v(null),children:[(0,r.jsx)("div",{className:"lbl_dtls",children:"Text to Copy:"}),(0,r.jsx)("div",{className:"text2link",children:d})]}),(0,r.jsx)("div",{style:{margin:"10px 0 20px"}}),(0,r.jsx)(y,{title:"Title:",frmNm:x,keyfld:"title",updObs:h,newValue:d,confirm:v,join:" "}),(0,r.jsx)(y,{title:"Amount:",frmNm:x,keyfld:"amount",updObs:h,newValue:d,confirm:v,replace:!0}),(0,r.jsx)(y,{title:"Descripcion:",frmNm:x,keyfld:"description",updObs:h,newValue:d,confirm:v,join:"; "}),(0,r.jsx)(y,{title:"Document:",frmNm:x,keyfld:"document",updObs:h,newValue:d,confirm:v,join:"; "})]}):(0,r.jsx)("div",{className:"imagePreview",style:{width:360},children:(0,n.bh)("preview_mov_dmz")?(0,r.jsx)(o.d$,{children:(0,r.jsx)(o.Uv,{children:(0,r.jsx)(w,{image:(0,n.bh)("image_preview_mov"),updTxt:v})})}):null}),(0,r.jsx)("div",{className:"flexSpace"})]})]})},g=e=>{var i,l;let{activeView:t,close:a}=e;const[d,o]=(0,s.useState)(1),c=()=>{o((0,n.M5)())};let v=["title","description","document","amount","categoryId","inManualRevision"],m=(0,n.vy)(v,(0,n.bh)(x),(0,n.bh)(x+"_bck"));const u=(e,i)=>{let l=(0,n.bh)(x)||{};l[e]=i,(0,n.Rz)(x,l),o((0,n.M5)())};return(0,r.jsxs)("div",{style:{maxWidth:560,height:"90vmin",padding:"5px!important"},children:[(0,r.jsxs)("div",{className:"_dsplFlx ",style:{padding:9},children:[(0,r.jsx)("div",{className:"flexSpace"}),m.hasChange?(0,r.jsx)("div",{className:"",children:(0,r.jsx)(N,{label:"Guardar",clickHandler:async()=>{var e,i,l;let s=(0,n.vy)(v,(0,n.bh)(x),(0,n.bh)(x+"_bck")),t={...null===(e=(0,n.bh)((0,n.hQ)()))||void 0===e?void 0:e.upd__incms_expns};t.params={businessId:null===(i=(0,n.bh)("profileUser"))||void 0===i?void 0:i.businessId,movementId:null===(l=(0,n.bh)(x))||void 0===l?void 0:l.movementId},t.data2update=s.data,(async e=>{const i=(0,n.I7)(e),l=await i;l&&!l.error&&a(!0)})(t)}})}):null]}),(0,r.jsxs)("div",{className:"_dsplFlx ",style:{padding:9},children:[(0,r.jsx)("div",{className:"flexSpace"}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"_dsplFlx ",style:{marginTop:20},children:[(0,r.jsx)(p,{initvalue:null===(i=(0,n.bh)(x))||void 0===i?void 0:i.inManualRevision,keyCode:57,updChange:e=>u("inManualRevision",e)}),(0,r.jsx)("span",{className:"checklabel",children:"En revision"})]}),(0,r.jsxs)("div",{className:" dtls minhh",style:{maxWidth:230},children:[(0,r.jsx)("div",{className:"lbl_h_dtls",style:{marginTop:8,textAlign:"left"},children:"Categories"}),(0,r.jsx)("div",{style:{marginTop:9},children:(0,r.jsx)(h,{init:null===(l=(0,n.bh)(x))||void 0===l?void 0:l.categoryId,lbl_empty:"Categorias",list:(0,n.bh)("categories_pick_data"),onSelect:e=>u("categoryId",e),direction:"right"})})]}),(0,r.jsx)(f,{title:"Title:",frmNm:x,keyfld:"title",updObs:c}),(0,r.jsx)(f,{title:"Amount:",frmNm:x,keyfld:"amount",updObs:c}),(0,r.jsx)(f,{title:"Descripcion:",frmNm:x,keyfld:"description",updObs:c}),(0,r.jsx)(f,{title:"Document:",frmNm:x,keyfld:"document",updObs:c}),"'"]}),(0,r.jsx)("div",{className:"flexSpace"})]})]})},j=e=>{let{viewId:i,activeView:l,children:s}=e;return(0,r.jsx)("div",{className:"opacityView",style:{opacity:i===l?1:0,marginTop:2},children:i===l?s:null})},f=e=>{var i;let{title:l,keyfld:t,updObs:a,frmNm:d}=e;const[o,c]=(0,s.useState)(!1),[u,h]=(0,s.useState)(1),p=()=>{a&&a(),c(!1)};let x=null===(i=(0,n.bh)(d))||void 0===i?void 0:i[t];return(0,r.jsxs)("div",{className:" dtls minhh",children:[(0,r.jsx)("div",{className:"lbl_h_dtls",style:{marginTop:8,textAlign:"left"},children:l}),o?(0,r.jsxs)("div",{className:"_dsplFlx",children:[(0,r.jsx)("div",{className:"lbl_dtls",children:(0,r.jsx)(v,{init:x,width:"430px",updChanges:e=>((e,i)=>{let l=(0,n.bh)(d)||{};l[e]=i,(0,n.Rz)(d,l),h((0,n.M5)())})(t,e),onEnter:p})}),(0,r.jsx)("div",{className:"icon_image ",onClick:p,children:(0,r.jsx)(m,{name:"success",color:"var(--success)"})})]}):(0,r.jsx)("div",{className:"lbl_dtls",style:{marginTop:8,textAlign:"left"},onClick:()=>c(!0),children:x||"click to type"})]})},y=e=>{var i;let{title:l,keyfld:t,replace:a,frmNm:d,newValue:o,confirm:c,join:v}=e;const[m,u]=(0,s.useState)(1),h=()=>{((e,i)=>{let l=(0,n.bh)(d)||{};l[e]=i||(0,n.fY)(l[e])+v+o,(0,n.Rz)(d,l),u((0,n.M5)())})(t,a?o:null),(0,n.Ey)(c)&&c()};let p=null===(i=(0,n.bh)(d))||void 0===i?void 0:i[t];return(0,r.jsxs)("div",{className:" dtls minhh",onClick:()=>h(),children:[(0,r.jsx)("div",{className:"lbl_h_dtls",style:{marginTop:8,textAlign:"left"},children:l}),(0,r.jsx)("div",{className:"lbl_dtls",style:{marginTop:8,textAlign:"left"},children:p||"click to type"}),"}"]})},N=e=>{let{clickHandler:i,label:l}=e;return(0,r.jsx)("div",{className:" jaqJnq_hrm1",children:(0,r.jsx)("button",{className:"gHAsFI_hrm1 dqnOfN jUrKkb",onClick:i,children:(0,r.jsx)("span",{className:" jaqJnq_hrm1",style:{color:"var(--white)"},children:l})})})},w=e=>{var i;let{image:l,updTxt:s}=e,t=(0,n.bh)("preview_mov_dmz");return(0,r.jsxs)("svg",{id:"ssg_business_card_front",xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%",viewBox:"0 0 ".concat(null===t||void 0===t?void 0:t.w," ").concat(null===t||void 0===t?void 0:t.h),preserveAspectRatio:"xMidYMid meet",children:[(0,r.jsx)("style",{type:"text/css",children:'@font-face {\n\t\t\t\tfont-family: "Google Sans";\n\t\t\t\tsrc: url(http://fonts.gstatic.com/s/googlesans/v14/4UabrENHsxJlGDuGo1OIlLU94YtzCwY.woff2)\n\n\t\t\t}'}),(0,r.jsx)("rect",{width:null===t||void 0===t?void 0:t.w,height:null===t||void 0===t?void 0:t.h,fill:"#ffffff"}),(0,r.jsx)("image",{width:null===t||void 0===t?void 0:t.w,height:null===t||void 0===t?void 0:t.h,x:0,y:0,xmlnsXlink:"http://www.w3.org/1999/xlink",xlinkHref:l}),null===(i=(0,n.bh)("image_mov_text"))||void 0===i?void 0:i.map(((e,i)=>(0,r.jsx)(I,{idKey:i+"_tann",item:e,index:i,updTxt:s},i+"_tann")))]})},I=e=>{var i,l,s,t,a,d;let{item:o,index:c,idKey:v,updTxt:m}=e;const{description:u,boundingPoly:h}=o;let p=null===h||void 0===h?void 0:h.vertices,x=(null===p||void 0===p||null===(i=p[3])||void 0===i?void 0:i.y)-(null===p||void 0===p||null===(l=p[0])||void 0===l?void 0:l.y),b=(null===p||void 0===p||null===(s=p[1])||void 0===s?void 0:s.x)-(null===p||void 0===p||null===(t=p[0])||void 0===t?void 0:t.x);return 0!==c&&null!==p&&void 0!==p&&p[1]?(0,r.jsx)("rect",{onClick:e=>{e.stopPropagation(),e.preventDefault(),m(u),(0,n.vQ)(u,1)},onContextMenu:e=>{e.stopPropagation(),e.preventDefault()},width:b,height:x,fill:"#646cff",fillOpacity:"50%",x:null===p||void 0===p||null===(a=p[0])||void 0===a?void 0:a.x,y:null===p||void 0===p||null===(d=p[0])||void 0===d?void 0:d.y}):null}},1475:(e,i,l)=>{l.d(i,{Je:()=>n,MX:()=>t,M_:()=>u,Qq:()=>a,bM:()=>v,lG:()=>o,p8:()=>c,sV:()=>d,tS:()=>h,vC:()=>r});var s=l(2350);const t=async e=>{e&&e()},a=async(e,i)=>{var l;let t={query:"getSignedUrl",params:{userId:null===(l=(0,s.bh)("profileUser"))||void 0===l?void 0:l.businessId,fileName:e}};const a=(0,s.I7)(t),n=await a;null!==n&&void 0!==n&&n.url?(0,s.Ey)(i)&&i(null===n||void 0===n?void 0:n.url):(0,s.Ey)(i)&&i(null)},n=async(e,i,l)=>{var t;let a={query:"ProccessImage",params:{userId:null===(t=(0,s.bh)("profileUser"))||void 0===t?void 0:t.businessId,fileName:i,url:e}};const n=(0,s.I7)(a),d=await n;null!==d&&void 0!==d&&d.url?(0,s.Ey)(l)&&l(null===d||void 0===d?void 0:d.url):(0,s.Ey)(l)&&l(null)},d=async(e,i)=>{let l={query:"detectLandMark",params:{url:e}};const t=(0,s.I7)(l),a=await t;i(e,a||null)},o=async e=>{var i,l,t,a;let n={...null===(i=(0,s.bh)((0,s.hQ)()))||void 0===i?void 0:i.search_incms_expns};n.params={businessId:null===(l=(0,s.bh)("profileUser"))||void 0===l?void 0:l.businessId,year:(0,s.bh)("date_current_year"),":date1":null===(t=(0,s.bh)("date_range_comps"))||void 0===t?void 0:t.initDate,":date2":null===(a=(0,s.bh)("date_range_comps"))||void 0===a?void 0:a.lastDate},(0,s.bh)("search_acc_record").split(" ").map(((e,i)=>{e&&(n.params[":search"+i]=e.trim())}));const d=(0,s.I7)(n),o=await d;o&&((0,s.Rz)("feedfMbls_ids",o),(0,s.Rz)("feedfMbls_list",m((0,s.jQ)(o),"date")),e&&e())},c=async()=>{let e=[];(0,s.bh)("feedfMbls_list").map((async(i,l)=>{var t,a,n,d,o,c;if(i.comprobanteId)return;let r={...i},v={...i},m="debit",u="credit";"expense"===(null===v||void 0===v?void 0:v.movementType)&&(m="credit",u="debit");let h=(null===v||void 0===v?void 0:v.title)+"; "+(null===v||void 0===v?void 0:v.description),p=null===(t=(0,s.bh)("categories_ids"))||void 0===t?void 0:t[null===v||void 0===v?void 0:v.categoryId],x={};x.amount=null===v||void 0===v?void 0:v.amount,x.movementId=null===v||void 0===v?void 0:v.movementId,x.description=h,x.date=null===v||void 0===v?void 0:v.date;let b={...x};x.account=null===(a=(0,s.bh)("global_account_params"))||void 0===a?void 0:a.cash_bank.account,x.type=m,b.account=null===p||void 0===p?void 0:p.account,null!==p&&void 0!==p&&p.subAccount&&(b.subAccount=null===p||void 0===p?void 0:p.subAccount),b.type=u;let _=[b,x];r.date?r.date=new Date(r.date).getTime():r.date=(new Date).getTime()+800;let g=await(0,s.V_)(r.date,1*l+4);r.comprobanteId=g,r.document=null===(n=r.document)||void 0===n?void 0:n.trim(),_&&(null===(d=(0,s._2)(_))||void 0===d||d.map((async(l,t)=>{let a=_[l];if(!isNaN(1*a.amount)&&1*a.amount>0){var n,d;let l={...r};l.account=a.account,a.subAccount&&(l.subAccount=a.subAccount),l.movementRef=i.movementId,l.type=a.type,l.amount=1*a.amount,l.operationId=(0,s.M5)(),l.document=(0,s.LO)()+"_"+(0,s.UG)(r.date);let t={...null===(n=(0,s.bh)((0,s.hQ)()))||void 0===n?void 0:n.add_opera};t.params={businessId:null===(d=(0,s.bh)("profileUser"))||void 0===d?void 0:d.businessId,year:new Date(r.date).getFullYear()},t.form=l,e.push(t)}})));let j={...null===(o=(0,s.bh)((0,s.hQ)()))||void 0===o?void 0:o.upd__incms_expns};j.params={businessId:null===(c=(0,s.bh)("profileUser"))||void 0===c?void 0:c.businessId,movementId:i.movementId,year:(0,s.bh)("date_current_year")},j.data2update={comprobanteId:g},e.push(j)})),setTimeout((()=>{}),4e3)},r=async e=>{var i,l;let t={...null===(i=(0,s.bh)((0,s.hQ)()))||void 0===i?void 0:i.search_categapp};t.params={businessId:null===(l=(0,s.bh)("profileUser"))||void 0===l?void 0:l.businessId},(0,s.bh)("search_categories").split(" ").map(((e,i)=>{e&&(t.params[":search"+i]=e.trim())}));const a=(0,s.I7)(t),n=await a;n&&((0,s.Rz)("categories_ids",n),(0,s.Rz)("categories_list",m((0,s.jQ)(n),"name")),e&&e())},v=async e=>{var i,l;let t={...null===(i=(0,s.bh)((0,s.hQ)()))||void 0===i?void 0:i.all_categapp};t.params={businessId:null===(l=(0,s.bh)("profileUser"))||void 0===l?void 0:l.businessId};const a=(0,s.I7)(t),n=await a;n&&(!function(e){const i=e=>({label:e.name,id:e.categoryId});(0,s.Rz)("categories_pick_data",e.map(i))}(n),(0,s.Rz)("categories_list",m(n,"name")),(0,s.Rz)("categories_ids",(0,s.ME)(n,"categoryId"))),e&&e()};const m=(e,i)=>(0,s.MV)("sort_feedfMbl",[e],(()=>e&&e.sort(((e,l)=>{let s=1*e[i],t=1*l[i];return s<t?-1:s>t?1:0})))),u=async(e,i)=>{var l,t;let a={...null===(l=(0,s.bh)((0,s.hQ)()))||void 0===l?void 0:l.delete__incms_expns};a.params={businessId:null===(t=(0,s.bh)("profileUser"))||void 0===t?void 0:t.businessId,movementId:e};const n=(0,s.I7)(a);await n&&i&&i()},h=(e,i)=>(0,s.MV)("rangeArr",[e,i],(()=>e?(0,s._2)(e).slice(0,i):[]))},5027:()=>{}}]);
//# sourceMappingURL=9585.5107bfcb.chunk.js.map