"use strict";(self.webpackChunkhrmfinance=self.webpackChunkhrmfinance||[]).push([[9585,9760],{9760:(e,l,i)=>{i.r(l),i.d(l,{CloseModal:()=>r,OpenModal:()=>c,default:()=>o});var s=i(2791),t=i(5408),a=i(2350),n=i(184);const d="listDialog_mdh392",o=()=>{const e=(0,a.bh)("listDialog")||{};(0,t.Z)(d);let l=Object.keys(e);return(0,n.jsx)(n.Fragment,{children:l.map(((l,i)=>{let t=e[l];if(t&&t.visible){let e={};t.height&&(e.heigth=t.height),t.width,t.zIndex&&(e.zIndex=t.zIndex-1);let i={zIndex:t.zIndex},a=null,d=t.data;return t.content&&(a=s.cloneElement(t.content,{data:d})),(0,n.jsxs)("div",{className:"ltr-1kbnjow",style:e,children:[(0,n.jsx)("div",{className:"ltr-hoe9xz",children:(0,n.jsx)("div",{className:"ltr-1wao6ny",style:i,id:l,children:a})}),t.data.overlay?(0,n.jsx)("div",{className:"DialogHRMOverlay ".concat(t.visible?"active":""),onClick:()=>{var e;e=l,document.getElementsByTagName("html")[0].classList.remove("has-level-two"),r({id:e})}}):null]},l)}}))})},c=e=>{let l=(0,a.bh)("listDialog")||{},i=(0,a.M5)();l[i]||(l[i]={}),l[i].visible=!0;let s={};e.props?(s=e.props,s.modalID=i):s.modalID=i;let t=document.getElementsByTagName("body")[0];null!==t&&void 0!==t&&t.style&&(t.style.overflowY="hidden"),l[i].isView=e.isView,l[i].observeResize=e.observeResize,l[i].observeResize&&(l[i].observeInterval=setInterval((()=>{let e=document.querySelector("[dialog-key-id='".concat(i,"']")),s=e&&e.getBoundingClientRect();s&&(s.width===l[i].width&&s.height===l[i].height||(l[i].height=s.height+10,l[i].width=s.width,(0,a.Rz)("listDialog",l),(0,a.wt)(d)))}),200)),l[i].display=!0,e.zIndex&&(l[i].zIndex=e.zIndex),e.height&&(l[i].height=e.height),e.width&&(l[i].width=e.width),e.content&&(l[i].content=e.content),l[i].data=s,(0,a.Rz)("listDialog",l),(0,a.wt)(d),setTimeout((()=>{document.getElementsByTagName("html")[0].classList.add("has-level-two"),(0,a.Rz)("modalOpen",i),(0,a.wt)(d)}),125)},r=e=>{let l=(0,a.bh)("listDialog")||{},i=e.id;if(l[i]){var s,t,n;l[i].observeResize&&l[i].observeInterval&&clearInterval(l[i].observeInterval),l[i].display=!1,null===(s=l[i])||void 0===s||null===(t=s.data)||void 0===t||null===(n=t.closeEvent)||void 0===n||n.call(t),(0,a.Rz)("listDialog",l),delete l[i],document.getElementsByTagName("body")[0].style.overflowY=null,(0,a.wt)(d),setTimeout((()=>{delete l[i],document.getElementsByTagName("html")[0].classList.remove("has-level-two"),(0,a.Rz)("modalOpen",null)}),750)}}},9585:(e,l,i)=>{i.r(l),i.d(l,{default:()=>g});var s=i(2791),t=(i(5027),i(2647)),a=i(7689),n=i(2350),d=i(9760),o=i(6514),c=i(1475),r=i(184);const v=(0,t.Np)(),m=(0,t.PU)(),u=(0,t.tW)(),h=(0,t.A5)(),p=(0,t.YZ)(),x=(0,n.Ks)()+"_upd",g=e=>{var l,i;let{data:t,confirm:o}=e;const[c,v]=(0,s.useState)(1),[u,h]=(0,s.useState)(2);let p=(0,a.TH)();(0,a.s0)();const x=null===(l=p.search)||void 0===l||null===(i=l.split("?"))||void 0===i?void 0:i[1],g=(0,n.mB)(x);let j=null===g||void 0===g?void 0:g.cId;(0,s.useEffect)((()=>{}),[j]);const f=()=>{(null===t||void 0===t?void 0:t.modalID)&&(0,d.CloseModal)({id:null===t||void 0===t?void 0:t.modalID}),(0,n.Ey)(o)&&o()},w=e=>{h(e)};(0,n.bh)((0,n.Ks)());return(0,r.jsx)("div",{style:{height:"90vh",width:"650px",overflow:"auto",background:"var(--dark-800)",borderRadius:13,padding:"10px 6px"},children:(0,r.jsxs)("div",{className:" ",children:[(0,r.jsxs)("div",{className:"h23g9woI",children:[(0,r.jsxs)("div",{className:"jKZvHt ",onClick:f,children:[(0,r.jsx)(m,{name:"arrowBack",size:22,color:"var(--light-200)"}),(0,r.jsx)("div",{className:"eULkqP"})]}),(0,r.jsx)("div",{className:"flexSpace"}),(0,r.jsx)("div",{className:"icon_action ".concat(1===u?"active":""," "),onClick:()=>w(1),children:(0,r.jsx)(m,{name:"image_outline",color:"var(--light-200)"})}),(0,r.jsx)("div",{className:"icon_action ".concat(2===u?"active":""," "),onClick:()=>w(2),children:(0,r.jsx)(m,{name:"list_form",color:"var(--light-200)"})})]}),(0,r.jsx)("div",{style:{paddingTop:4}}),(0,r.jsx)(_,{viewId:1,activeView:u,children:(0,r.jsx)(b,{})}),(0,r.jsx)(_,{viewId:2,activeView:u,children:(0,r.jsx)(y,{close:f})})]})})},b=e=>{let{activeView:l,children:i}=e;const[t,a]=(0,s.useState)(1),[d,v]=(0,s.useState)(""),h=()=>{a((0,n.M5)())},p=(e,l)=>{(0,n.Rz)("image_mov_text",l.textAnnotations),(0,n.Rz)("loading_image_text",!1),h()};return(0,r.jsxs)("div",{style:{height:"90vmin",padding:"5px!important"},children:[(0,r.jsxs)("div",{className:"_dsplFlx ",style:{padding:9},children:[(0,r.jsx)("div",{className:"flexSpace"}),(0,n.bh)("image_url_mov")?(0,r.jsx)("div",{style:{marginBottom:10},children:(0,n.bh)("loading_image_text")?(0,r.jsxs)("div",{className:"icon_compr _dsplFlx",style:{marginTop:10},children:[(0,r.jsx)("div",{className:"lbl_saving ",children:"scanning image ..."}),(0,r.jsx)(u,{stroke:"var(--partial-success)",size:24,strokeW:8})]}):(0,r.jsxs)("div",{className:"_dsplFlx",style:{margin:"6px 20px 5px"},onClick:e=>{(0,n.Rz)("loading_image_text",!0),h(),(0,c.sV)((0,n.bh)("image_url_mov"),p)},children:[(0,r.jsx)("div",{className:"lbl_saving ",style:{margin:"4px 20px 0 0"},children:"Escanear Imagen"}),(0,r.jsxs)("div",{className:"btn_icon",children:[(0,r.jsx)("div",{className:"icon_absol inside ",children:(0,r.jsx)(m,{name:"image_outline",color:"var(--light-300)",size:20})}),(0,r.jsx)("div",{className:"icon_absol ",children:(0,r.jsx)(m,{name:"scan-helper",color:"var(--partial-success)",size:28})})]})]})}):null]}),(0,r.jsxs)("div",{className:"_dsplFlx ",style:{padding:9},children:[(0,r.jsx)("div",{className:"flexSpace"}),d?(0,r.jsxs)("div",{className:"imagePreview",children:[(0,r.jsxs)("div",{className:"_dsplFlx",onClick:()=>v(null),children:[(0,r.jsx)("div",{className:"lbl_dtls",children:"Text to Copy:"}),(0,r.jsx)("div",{className:"text2link",children:d})]}),(0,r.jsx)("div",{style:{margin:"10px 0 20px"}}),(0,r.jsx)(f,{title:"Title:",frmNm:x,keyfld:"title",updObs:h,newValue:d,confirm:v,join:" "}),(0,r.jsx)(f,{title:"Amount:",frmNm:x,keyfld:"amount",updObs:h,newValue:d,confirm:v,replace:!0}),(0,r.jsx)(f,{title:"Descripcion:",frmNm:x,keyfld:"description",updObs:h,newValue:d,confirm:v,join:"; "}),(0,r.jsx)(f,{title:"Document:",frmNm:x,keyfld:"document",updObs:h,newValue:d,confirm:v,join:"; "})]}):(0,r.jsx)("div",{className:"imagePreview",style:{width:360},children:(0,n.bh)("preview_mov_dmz")?(0,r.jsx)(o.d$,{children:(0,r.jsx)(o.Uv,{children:(0,r.jsx)(N,{image:(0,n.bh)("image_preview_mov"),updTxt:v})})}):null}),(0,r.jsx)("div",{className:"flexSpace"})]})]})},y=e=>{var l,i;let{activeView:t,close:a}=e;const[d,o]=(0,s.useState)(1),c=()=>{o((0,n.M5)())};let v=["title","description","document","amount","categoryId","inManualRevision"],m=(0,n.vy)(v,(0,n.bh)(x),(0,n.bh)(x+"_bck"));const u=(e,l)=>{let i=(0,n.bh)(x)||{};i[e]=l,(0,n.Rz)(x,i),o((0,n.M5)())};return(0,r.jsxs)("div",{style:{maxWidth:560,height:"90vmin",padding:"5px!important"},children:[(0,r.jsxs)("div",{className:"_dsplFlx ",style:{padding:9},children:[(0,r.jsx)("div",{className:"flexSpace"}),m.hasChange?(0,r.jsx)("div",{className:"",children:(0,r.jsx)(w,{label:"Guardar",clickHandler:async()=>{var e,l,i;let s=(0,n.vy)(v,(0,n.bh)(x),(0,n.bh)(x+"_bck")),t={...null===(e=(0,n.bh)((0,n.hQ)()))||void 0===e?void 0:e.upd__incms_expns};t.params={businessId:null===(l=(0,n.bh)("profileUser"))||void 0===l?void 0:l.businessId,movementId:null===(i=(0,n.bh)(x))||void 0===i?void 0:i.movementId},t.data2update=s.data,(async e=>{const l=(0,n.I7)(e),i=await l;i&&!i.error&&a(!0)})(t)}})}):null]}),(0,r.jsxs)("div",{className:"_dsplFlx ",style:{padding:9},children:[(0,r.jsx)("div",{className:"flexSpace"}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"_dsplFlx ",style:{marginTop:20},children:[(0,r.jsx)(p,{initvalue:null===(l=(0,n.bh)(x))||void 0===l?void 0:l.inManualRevision,keyCode:57,updChange:e=>u("inManualRevision",e)}),(0,r.jsx)("span",{className:"checklabel",children:"En revision"})]}),(0,r.jsxs)("div",{className:" dtls minhh",style:{maxWidth:230},children:[(0,r.jsx)("div",{className:"lbl_h_dtls",style:{marginTop:8,textAlign:"left"},children:"Categories"}),(0,r.jsx)("div",{style:{marginTop:9},children:(0,r.jsx)(h,{init:null===(i=(0,n.bh)(x))||void 0===i?void 0:i.categoryId,lbl_empty:"Categorias",list:(0,n.bh)("categories_pick_data"),onSelect:e=>u("categoryId",e),direction:"right"})})]}),(0,r.jsx)(j,{title:"Title:",frmNm:x,keyfld:"title",updObs:c}),(0,r.jsx)(j,{title:"Amount:",frmNm:x,keyfld:"amount",updObs:c}),(0,r.jsx)(j,{title:"Descripcion:",frmNm:x,keyfld:"description",updObs:c}),(0,r.jsx)(j,{title:"Document:",frmNm:x,keyfld:"document",updObs:c}),"'"]}),(0,r.jsx)("div",{className:"flexSpace"})]})]})},_=e=>{let{viewId:l,activeView:i,children:s}=e;return(0,r.jsx)("div",{className:"opacityView",style:{opacity:l===i?1:0,marginTop:2},children:l===i?s:null})},j=e=>{var l;let{title:i,keyfld:t,updObs:a,frmNm:d}=e;const[o,c]=(0,s.useState)(!1),[u,h]=(0,s.useState)(1),p=()=>{a&&a(),c(!1)};let x=null===(l=(0,n.bh)(d))||void 0===l?void 0:l[t];return(0,r.jsxs)("div",{className:" dtls minhh",children:[(0,r.jsx)("div",{className:"lbl_h_dtls",style:{marginTop:8,textAlign:"left"},children:i}),o?(0,r.jsxs)("div",{className:"_dsplFlx",children:[(0,r.jsx)("div",{className:"lbl_dtls",children:(0,r.jsx)(v,{init:x,width:"430px",updChanges:e=>((e,l)=>{let i=(0,n.bh)(d)||{};i[e]=l,(0,n.Rz)(d,i),h((0,n.M5)())})(t,e),onEnter:p})}),(0,r.jsx)("div",{className:"icon_image ",onClick:p,children:(0,r.jsx)(m,{name:"success",color:"var(--success)"})})]}):(0,r.jsx)("div",{className:"lbl_dtls",style:{marginTop:8,textAlign:"left"},onClick:()=>c(!0),children:x||"click to type"})]})},f=e=>{var l;let{title:i,keyfld:t,replace:a,frmNm:d,newValue:o,confirm:c,join:v}=e;const[m,u]=(0,s.useState)(1),h=()=>{((e,l)=>{let i=(0,n.bh)(d)||{};i[e]=l||(0,n.fY)(i[e])+v+o,(0,n.Rz)(d,i),u((0,n.M5)())})(t,a?o:null),(0,n.Ey)(c)&&c()};let p=null===(l=(0,n.bh)(d))||void 0===l?void 0:l[t];return(0,r.jsxs)("div",{className:" dtls minhh",onClick:()=>h(),children:[(0,r.jsx)("div",{className:"lbl_h_dtls",style:{marginTop:8,textAlign:"left"},children:i}),(0,r.jsx)("div",{className:"lbl_dtls",style:{marginTop:8,textAlign:"left"},children:p||"click to type"}),"}"]})},w=e=>{let{clickHandler:l,label:i}=e;return(0,r.jsx)("div",{className:" jaqJnq_hrm1",children:(0,r.jsx)("button",{className:"gHAsFI_hrm1 dqnOfN jUrKkb",onClick:l,children:(0,r.jsx)("span",{className:" jaqJnq_hrm1",style:{color:"var(--white)"},children:i})})})},N=e=>{var l;let{image:i,updTxt:s}=e,t=(0,n.bh)("preview_mov_dmz");return(0,r.jsxs)("svg",{id:"ssg_business_card_front",xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%",viewBox:"0 0 ".concat(null===t||void 0===t?void 0:t.w," ").concat(null===t||void 0===t?void 0:t.h),preserveAspectRatio:"xMidYMid meet",children:[(0,r.jsx)("style",{type:"text/css",children:'@font-face {\n\t\t\t\tfont-family: "Google Sans";\n\t\t\t\tsrc: url(http://fonts.gstatic.com/s/googlesans/v14/4UabrENHsxJlGDuGo1OIlLU94YtzCwY.woff2)\n\n\t\t\t}'}),(0,r.jsx)("rect",{width:null===t||void 0===t?void 0:t.w,height:null===t||void 0===t?void 0:t.h,fill:"#ffffff"}),(0,r.jsx)("image",{width:null===t||void 0===t?void 0:t.w,height:null===t||void 0===t?void 0:t.h,x:0,y:0,xmlnsXlink:"http://www.w3.org/1999/xlink",xlinkHref:i}),null===(l=(0,n.bh)("image_mov_text"))||void 0===l?void 0:l.map(((e,l)=>(0,r.jsx)(I,{idKey:l+"_tann",item:e,index:l,updTxt:s},l+"_tann")))]})},I=e=>{var l,i,s,t,a,d;let{item:o,index:c,idKey:v,updTxt:m}=e;const{description:u,boundingPoly:h}=o;let p=null===h||void 0===h?void 0:h.vertices,x=(null===p||void 0===p||null===(l=p[3])||void 0===l?void 0:l.y)-(null===p||void 0===p||null===(i=p[0])||void 0===i?void 0:i.y),g=(null===p||void 0===p||null===(s=p[1])||void 0===s?void 0:s.x)-(null===p||void 0===p||null===(t=p[0])||void 0===t?void 0:t.x);return 0!==c&&null!==p&&void 0!==p&&p[1]?(0,r.jsx)("rect",{onClick:e=>{e.stopPropagation(),e.preventDefault(),m(u),(0,n.vQ)(u,1)},onContextMenu:e=>{e.stopPropagation(),e.preventDefault()},width:g,height:x,fill:"#646cff",fillOpacity:"50%",x:null===p||void 0===p||null===(a=p[0])||void 0===a?void 0:a.x,y:null===p||void 0===p||null===(d=p[0])||void 0===d?void 0:d.y}):null}},1475:(e,l,i)=>{i.d(l,{Je:()=>n,MX:()=>t,M_:()=>u,Qq:()=>a,bM:()=>v,lG:()=>o,p8:()=>c,sV:()=>d,tS:()=>h,vC:()=>r});var s=i(2350);const t=async e=>{e&&e()},a=async(e,l)=>{var i;let t={query:"getSignedUrl",params:{userId:null===(i=(0,s.bh)("profileUser"))||void 0===i?void 0:i.businessId,fileName:e}};const a=(0,s.I7)(t),n=await a;null!==n&&void 0!==n&&n.url?(0,s.Ey)(l)&&l(null===n||void 0===n?void 0:n.url):(0,s.Ey)(l)&&l(null)},n=async(e,l,i)=>{var t;let a={query:"ProccessImage",params:{userId:null===(t=(0,s.bh)("profileUser"))||void 0===t?void 0:t.businessId,fileName:l,url:e}};const n=(0,s.I7)(a),d=await n;null!==d&&void 0!==d&&d.url?(0,s.Ey)(i)&&i(null===d||void 0===d?void 0:d.url):(0,s.Ey)(i)&&i(null)},d=async(e,l)=>{let i={query:"detectLandMark",params:{url:e}};const t=(0,s.I7)(i),a=await t;l(e,a||null)},o=async e=>{var l,i,t,a;let n={...null===(l=(0,s.bh)((0,s.hQ)()))||void 0===l?void 0:l.search_incms_expns};n.params={businessId:null===(i=(0,s.bh)("profileUser"))||void 0===i?void 0:i.businessId,year:(0,s.bh)("date_current_year"),":date1":null===(t=(0,s.bh)("date_range_comps"))||void 0===t?void 0:t.initDate,":date2":null===(a=(0,s.bh)("date_range_comps"))||void 0===a?void 0:a.lastDate},(0,s.bh)("search_acc_record").split(" ").map(((e,l)=>{e&&(n.params[":search"+l]=e.trim())}));const d=(0,s.I7)(n),o=await d;o&&((0,s.Rz)("feedfMbls_ids",o),(0,s.Rz)("feedfMbls_list",m((0,s.jQ)(o),"date")),e&&e())},c=async()=>{let e=[];(0,s.bh)("feedfMbls_list").map((async(l,i)=>{var t,a,n,d,o,c;if(l.comprobanteId)return;let r={...l},v={...l},m="debit",u="credit";"expense"===(null===v||void 0===v?void 0:v.movementType)&&(m="credit",u="debit");let h=(null===v||void 0===v?void 0:v.title)+"; "+(null===v||void 0===v?void 0:v.description),p=null===(t=(0,s.bh)("categories_ids"))||void 0===t?void 0:t[null===v||void 0===v?void 0:v.categoryId],x={};x.amount=null===v||void 0===v?void 0:v.amount,x.movementId=null===v||void 0===v?void 0:v.movementId,x.description=h,x.date=null===v||void 0===v?void 0:v.date;let g={...x};x.account=null===(a=(0,s.bh)("global_account_params"))||void 0===a?void 0:a.cash_bank.account,x.type=m,g.account=null===p||void 0===p?void 0:p.account,null!==p&&void 0!==p&&p.subAccount&&(g.subAccount=null===p||void 0===p?void 0:p.subAccount),g.type=u;let b=[g,x];r.date?r.date=new Date(r.date).getTime():r.date=(new Date).getTime()+800;let y=await(0,s.V_)(r.date,1*i+4);r.comprobanteId=y,r.document=null===(n=r.document)||void 0===n?void 0:n.trim(),b&&(null===(d=(0,s._2)(b))||void 0===d||d.map((async(i,t)=>{let a=b[i];if(!isNaN(1*a.amount)&&1*a.amount>0){var n,d;let i={...r};i.account=a.account,a.subAccount&&(i.subAccount=a.subAccount),i.movementRef=l.movementId,i.type=a.type,i.amount=1*a.amount,i.operationId=(0,s.M5)(),i.document=(0,s.LO)()+"_"+(0,s.UG)(r.date);let t={...null===(n=(0,s.bh)((0,s.hQ)()))||void 0===n?void 0:n.add_opera};t.params={businessId:null===(d=(0,s.bh)("profileUser"))||void 0===d?void 0:d.businessId,year:new Date(r.date).getFullYear()},t.form=i,e.push(t)}})));let _={...null===(o=(0,s.bh)((0,s.hQ)()))||void 0===o?void 0:o.upd__incms_expns};_.params={businessId:null===(c=(0,s.bh)("profileUser"))||void 0===c?void 0:c.businessId,movementId:l.movementId,year:(0,s.bh)("date_current_year")},_.data2update={comprobanteId:y},e.push(_)})),setTimeout((()=>{}),4e3)},r=async e=>{var l,i;let t={...null===(l=(0,s.bh)((0,s.hQ)()))||void 0===l?void 0:l.search_categapp};t.params={businessId:null===(i=(0,s.bh)("profileUser"))||void 0===i?void 0:i.businessId},(0,s.bh)("search_categories").split(" ").map(((e,l)=>{e&&(t.params[":search"+l]=e.trim())}));const a=(0,s.I7)(t),n=await a;n&&((0,s.Rz)("categories_ids",n),(0,s.Rz)("categories_list",m((0,s.jQ)(n),"name")),e&&e())},v=async e=>{var l,i;let t={...null===(l=(0,s.bh)((0,s.hQ)()))||void 0===l?void 0:l.all_categapp};t.params={businessId:null===(i=(0,s.bh)("profileUser"))||void 0===i?void 0:i.businessId};const a=(0,s.I7)(t),n=await a;n&&(!function(e){const l=e=>({label:e.name,id:e.categoryId});(0,s.Rz)("categories_pick_data",e.map(l))}(n),(0,s.Rz)("categories_list",m(n,"name")),(0,s.Rz)("categories_ids",(0,s.ME)(n,"categoryId"))),e&&e()};const m=(e,l)=>(0,s.MV)("sort_feedfMbl",[e],(()=>e&&e.sort(((e,i)=>{let s=1*e[l],t=1*i[l];return s<t?-1:s>t?1:0})))),u=async(e,l)=>{var i,t;let a={...null===(i=(0,s.bh)((0,s.hQ)()))||void 0===i?void 0:i.delete__incms_expns};a.params={businessId:null===(t=(0,s.bh)("profileUser"))||void 0===t?void 0:t.businessId,movementId:e};const n=(0,s.I7)(a);await n&&l&&l()},h=(e,l)=>(0,s.MV)("rangeArr",[e,l],(()=>e?(0,s._2)(e).slice(0,l):[]))},5027:()=>{}}]);
//# sourceMappingURL=9585.e9ffbddc.chunk.js.map