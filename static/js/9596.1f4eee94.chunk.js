"use strict";(self.webpackChunkhrmfinance=self.webpackChunkhrmfinance||[]).push([[9596,7766],{9596:(e,a,t)=>{t.r(a),t.d(a,{default:()=>h});var o=t(2791),l=t(2350),n=t(2647),c=(t(1206),t(24)),d=t(8037),i=t(7689),u=t(9760),s=t(184);const r=(0,n.YZ)(),p=(0,n.Np)(),m=(0,c.f_)(),v="paystub_employee_2Acc",h=e=>{var a,t,n,c;let{data:h,confirm:b,item:x}=e;const[_,y]=(0,o.useState)(!1),[g,f]=(0,o.useState)(0),I=(0,i.s0)();(0,o.useEffect)((()=>{if(!_){y(!0);(0,l.bh)(v);f((0,l.M5)())}}));const j=(e,a,t)=>{let o=(0,l.bh)(v)||{};t?(o[t]||(o[t]={}),o[t][e]=a):o[e]=a,(0,l.Rz)(v,o),f((0,l.M5)())};let N=(0,l.bh)(v)||{},k=(new Date).getTime()+800;if(N.date){k=new Date(N.date).getTime()}let w=null===(a=(0,l.bh)("employees_ids"))||void 0===a?void 0:a[null===x||void 0===x?void 0:x.employeeId],S="Check No ".concat(N.document?N.document:""," - Salary ").concat((0,l.sJ)(k)," - ").concat(null===w||void 0===w?void 0:w.name).toUpperCase();const C=async e=>{var a,t,o,n,c;let d=(0,l.bh)(v)||{},i=(new Date).getTime()+800;if(d.date){let e=new Date(d.date).getTime();i=e||i}d.date=i,d.amount=null===x||void 0===x?void 0:x.grossPay,d.description||(d.description=S);let u=await(0,l.fN)(d.date),s={date:d.date,comprobanteId:u,description:d.description,businessId:null===(a=(0,l.bh)("profileUser"))||void 0===a?void 0:a.businessId,year:new Date(d.date).getFullYear()};delete d.date,d.document=null===(t=d.document)||void 0===t?void 0:t.trim(),d.employeeId=null===x||void 0===x?void 0:x.employeeId;let r=[],p={...d},m=(0,l.Zv)(d.amount,2);x.otherDeductions&&(0,l._2)(x.otherDeductions).map((e=>{var a;let t={...d},o=x.otherDeductions[e],n={...null===(a=(0,l.bh)("global_account_params"))||void 0===a?void 0:a[e]};t.account=n.account,t.subAccount=n.subAccount,t.operationId=(0,l.M5)();let c=1*o.amount;"Overpayments"===e?(t.type="credit",m=1*m+c,t.amount=-1*c):"Underpayments"===e&&(t.type="debit",m=1*m+c,t.amount=c),r.push(t)})),p.account=null===(o=(0,l.bh)("global_account_params"))||void 0===o?void 0:o.salary.account;let h=(0,l.Zv)(d.amount,2);p.type="debit",p.operationId=(0,l.M5)(),p.amount=1*h,r.push(p);let b={...d};var _,y,g,f;(b.account=null===(n=(0,l.bh)("global_account_params"))||void 0===n?void 0:n.cash_bank.account,null!==d&&void 0!==d&&d.futureSlipCheck)&&(b.account=null===(_=(0,l.bh)("global_account_params"))||void 0===_||null===(y=_.futureSlipCheck)||void 0===y?void 0:y.account,b.subAccount=null===(g=(0,l.bh)("global_account_params"))||void 0===g||null===(f=g.futureSlipCheck)||void 0===f?void 0:f.subAccount);b.type="credit",b.operationId=(0,l.M5)(),b.amount=1*m,r.push(b);let I={...null===(c=(0,l.bh)((0,l.hQ)()))||void 0===c?void 0:c.add_multi_opera};I.params=s,I.form=r,M(I,u,d.document)},D=async e=>{var a,t,o,n,c,d;let i=(0,l.bh)(v)||{},u=(new Date).getTime()+800;if(i.date){let e=new Date(i.date).getTime();u=e||u}i.date=u;const s=i.cash_amount;delete i.cash_amount;let r=await(0,l.fN)(i.date);i.comprobanteId=r,i.document=null===(a=i.document)||void 0===a?void 0:a.trim(),i.description||(i.description=S),i.amount=null===x||void 0===x?void 0:x.grossPay,i.employeeId=null===x||void 0===x?void 0:x.employeeId;let p=[],m=0,h={date:i.date,comprobanteId:r,description:i.description,businessId:null===(t=(0,l.bh)("profileUser"))||void 0===t?void 0:t.businessId,year:new Date(i.date).getFullYear()};delete i.date,x.w2Taxes&&(0,l._2)(x.w2Taxes).map((e=>{let a={...i},t=x.w2Taxes[e],o=t.account;a.account=o.account,a.subAccount=o.subAccount;let n=t.amount?t.amount:t.percent/100*x.grossPay,c=(0,l.Zv)(n,2);if(a.type="credit",a.operationId=(0,l.M5)(),"socialSecurity"===e){var d,u;let e={...i};e.account=null===(d=(0,l.bh)("global_account_params"))||void 0===d||null===(u=d.socialsecurity_tax_expenses)||void 0===u?void 0:u.account,e.type="debit",e.amount=1*c,e.operationId=(0,l.M5)(),m+=1*c,a.amount=2*c,p.push(e)}else if("medicareTax"===e){var s,r;let e={...i};e.account=null===(s=(0,l.bh)("global_account_params"))||void 0===s||null===(r=s.medicare_tax_expenses)||void 0===r?void 0:r.account,e.type="debit",e.amount=1*c,e.operationId=(0,l.M5)(),a.amount=2*c,m+=1*c,p.push(e)}else a.amount=1*c,m+=1*c;1*c>0&&p.push(a)})),x.otherDeductions&&(0,l._2)(x.otherDeductions).map((e=>{var a;let t={...i},o=x.otherDeductions[e],n={...null===(a=(0,l.bh)("global_account_params"))||void 0===a?void 0:a[e]};t.account=n.account,t.subAccount=n.subAccount,t.operationId=(0,l.M5)();let c=1*o.amount;"Overpayments"===e?(t.type="credit",m-=1*c,console.log(e,m),t.amount=-1*c):"Underpayments"===e&&(t.type="debit",m+=1*c,console.log(e,m),t.amount=c),p.push(t)}));let b={...i};b.account=null===(o=(0,l.bh)("global_account_params"))||void 0===o||null===(n=o.salary)||void 0===n?void 0:n.account;let _=i.amount,y=(0,l.Zv)(_,2);b.type="debit",b.operationId=(0,l.M5)(),b.amount=1*y,p.push(b);let g={...i};var f,I,j,N;(g.account=null===(c=(0,l.bh)("global_account_params"))||void 0===c?void 0:c.cash_bank.account,null!==i&&void 0!==i&&i.futureSlipCheck)&&(g.account=null===(f=(0,l.bh)("global_account_params"))||void 0===f||null===(I=f.futureSlipCheck)||void 0===I?void 0:I.account,g.subAccount=null===(j=(0,l.bh)("global_account_params"))||void 0===j||null===(N=j.futureSlipCheck)||void 0===N?void 0:N.subAccount);let k=i.amount-m;s&&(k-=s);let w=(0,l.Zv)(k,2);if(g.type="credit",g.operationId=(0,l.M5)(),g.amount=1*w,p.push(g),s){var C;let e={...i};e.account=null===(C=(0,l.bh)("global_account_params"))||void 0===C?void 0:C.cash_fluid.account;let a=(0,l.Zv)(s,2);e.type="credit",e.operationId=(0,l.M5)(),e.amount=1*a,p.push(e)}let D={...null===(d=(0,l.bh)((0,l.hQ)()))||void 0===d?void 0:d.add_multi_opera};D.params=h,D.form=p,M(D,r,i.document)},M=async(e,a,t)=>{const o=(0,l.I7)(e);await o&&setTimeout((()=>{(0,l.Rz)(v,null),(null===h||void 0===h?void 0:h.modalID)&&(0,u.CloseModal)({id:null===h||void 0===h?void 0:h.modalID}),b&&b(a,t),I({pathname:"/accounting-ledger",search:"?cId=".concat(a)})}),400)};return(0,s.jsxs)("div",{style:{maxHeight:"96vh",width:"1040px",overflow:"auto",background:"var(--hrm_palette-general-background-b)",borderRadius:13,padding:"10px 19px 25px"},className:"payStub ",children:[(0,s.jsxs)("div",{className:"_dsplFlx ",children:[(0,s.jsx)("p",{className:"form_title",children:"Registrar Nomina en la Contabilidad"}),(0,s.jsx)("div",{className:"flexSpace"}),(0,s.jsx)("div",{className:"employee_name",children:null===x||void 0===x?void 0:x.name})]}),(0,s.jsxs)("div",{className:"_dsplFlx ",style:{margin:"10px 10px 10px 0"},children:[(0,s.jsx)("div",{className:"flexSpace"}),(0,s.jsx)("div",{style:{margin:"14px 10px 0px 0"},children:(0,s.jsx)(m,{init:null===(t=(0,l.bh)(v))||void 0===t?void 0:t.date,label:"Fecha",updDate:e=>j("date",e)})}),(0,s.jsx)("div",{className:"flexSpace"}),(0,s.jsx)("div",{style:{margin:"30px 0px 0px 0"},children:(0,s.jsxs)("div",{className:"_dsplFlx ",children:[(0,s.jsx)("span",{className:"checklabel",children:"Cheque a Futuro"}),(0,s.jsx)(r,{initvalue:null===(n=(0,l.bh)(v))||void 0===n?void 0:n.futureSlipCheck,keyCode:57,updChange:e=>j("futureSlipCheck",e)})]})}),(0,s.jsx)("div",{className:"flexSpace"}),(0,s.jsx)(p,{init:null===(c=(0,l.bh)(v))||void 0===c?void 0:c.document,label:"Document",width:170,updChanges:e=>j("document",e)}),(0,s.jsx)("div",{className:"flexSpace"})]}),(0,s.jsxs)("div",{className:"_dsplFlx ",style:{marginTop:48},children:[(0,s.jsx)("div",{className:"_dsplFlx ",style:{margin:"10px 10px 10px 0"},children:S}),(0,s.jsx)("div",{className:"flexSpace"}),(0,s.jsx)("div",{children:(0,s.jsx)(d.N,{clickHandler:()=>{x.w2Taxes?D():C()},label:"Guardar"})})]})]})}},1206:()=>{}}]);
//# sourceMappingURL=9596.1f4eee94.chunk.js.map