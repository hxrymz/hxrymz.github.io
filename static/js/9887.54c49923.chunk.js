"use strict";(self.webpackChunkhrmfinance=self.webpackChunkhrmfinance||[]).push([[9887],{9887:(e,a,s)=>{s.r(a),s.d(a,{default:()=>r,filterArr:()=>u});var t=s(2791),l=s(2350),o=s(2647),d=(s(4719),s(2502)),n=s(184);const i=(0,o.kp)(),r=e=>{var a;let{handleClick:s}=e;const[o,r]=(0,t.useState)(!1),[m,p]=(0,t.useState)(0),[v,h]=(0,t.useState)(!1),[b,y]=(0,t.useState)([]),_=(0,t.useRef)();(0,t.useEffect)((()=>{o||(r(!0),(0,d.Dy)(I),p((0,l.M5)()))}));const I=e=>{p((0,l.M5)())},f=(e,a)=>{s(e,a),_.current.clearTx()};return(0,n.jsx)("div",{children:(0,n.jsx)(i,{placeholder:"buscar empleado",width:420,fetchData:e=>{y(u((0,l.bh)("employees_list"),e)),v&&h(!1)},loading:v,change:e=>{!v&&h(!0)},callempty:e=>{y([]),v&&h(!1)},ref:_,children:(0,n.jsx)("div",{className:"",children:b&&(null===(a=(0,l._2)(b))||void 0===a?void 0:a.map((e=>(0,n.jsx)(c,{data:b[e],elmId:e,selectItem:f},e))))})})})},c=e=>{let{data:a,selectItem:s}=e;return(0,n.jsx)("div",{className:"item_acc",children:(0,n.jsx)("div",{className:"_dsplFlx item_box account_header",children:(0,n.jsx)("div",{className:"_dsplFlx",onClick:()=>s(null===a||void 0===a?void 0:a.employeeId,null),children:(0,n.jsx)("div",{className:"code",children:null===a||void 0===a?void 0:a.name})})})})};function u(e,a){let s=a.toLowerCase();var t=[];return e.length>0&&e.map((e=>{var a,l;(null===(a=e.name)||void 0===a||null===(l=a.toLowerCase())||void 0===l?void 0:l.indexOf(s))>=0&&t.push(e)})),t}},2502:(e,a,s)=>{s.d(a,{Dy:()=>l,G:()=>i,aU:()=>n,kQ:()=>o,lG:()=>d});var t=s(2350);const l=async e=>{var a,s;let l={...null===(a=(0,t.bh)((0,t.hQ)()))||void 0===a?void 0:a.all_employee};l.params={businessId:null===(s=(0,t.bh)("profileUser"))||void 0===s?void 0:s.businessId};const o=(0,t.I7)(l),d=await o;d&&((0,t.Rz)("employees_list",n((0,t.jQ)(d),"code")),(0,t.Rz)("employees_ids",(0,t.ME)((0,t.jQ)(d),"employeeId")),e&&e())},o=async e=>{var a,s;let l={...null===(a=(0,t.bh)((0,t.hQ)()))||void 0===a?void 0:a.search_employee};l.params={businessId:null===(s=(0,t.bh)("profileUser"))||void 0===s?void 0:s.businessId,":search":(0,t.bh)("searchQry")};const o=(0,t.I7)(l),d=await o;d&&((0,t.Rz)("employees_list",n((0,t.jQ)(d),"code")),e&&e())},d=async(e,a)=>{var s,l,o,d;let n={...null===(s=(0,t.bh)((0,t.hQ)()))||void 0===s?void 0:s.filter_search_opera};n.params={businessId:null===(l=(0,t.bh)("profileUser"))||void 0===l?void 0:l.businessId,year:(0,t.bh)("date_current_year"),":date1":(null===(o=(0,t.bh)("date_range_comps"))||void 0===o?void 0:o.initDate)-10,":date2":null===(d=(0,t.bh)("date_range_comps"))||void 0===d?void 0:d.lastDate,":search0":e};const i=(0,t.I7)(n),r=await i;r&&!r.error&&((0,t.Rz)("paystub_submayor_list",r),(0,t.Rz)("paystub_submayor_group",function(e){var a={};e.length>0?e.map((e=>{let s=e.date+"_"+e.comprobanteId;if(!a[s]){a[s]={},["date","description","entryName","comprobanteId","employeeId","document"].forEach((t=>{a[s][t]=e[t]})),a[s].amount=0,a[s].balance=0,a[s].operations=[]}e.type&&(a[s].balance=1*(0,t.Zv)(a[s].balance,2)+("debit"===e.type?1*(0,t.Zv)(e.amount,2):0),a[s].operations.push(function(e){var a;let s={};s.employeeId=null===(a=(0,t.bh)("employees_ids"))||void 0===a?void 0:a[e.employeeId],s.comprobanteId=e.comprobanteId,s.document=e.document,s.date=e.date,"credit"===e.type?(s.debit=0,s.credit=e.amount):"debit"===e.type&&(s.credit=0,s.debit=e.amount);return s}(e)))})):a=null;return a}((0,t.jQ)(r)))),a&&a()};const n=(e,a)=>(0,t.MV)("sortEmployees",[e],(()=>e&&e.sort(((e,s)=>{let t=1*e[a],l=1*s[a];return t<l?-1:t>l?1:0})))),i=async(e,a)=>{var s;let l={query:"deleteEmployeesHRG",params:{businessId:null===(s=(0,t.bh)("profileUser"))||void 0===s?void 0:s.businessId,employeeId:e}};const o=(0,t.I7)(l);await o&&a&&a()}},4719:()=>{}}]);
//# sourceMappingURL=9887.54c49923.chunk.js.map