"use strict";(self.webpackChunkhrmfinance=self.webpackChunkhrmfinance||[]).push([[9887],{9887:(e,a,t)=>{t.r(a),t.d(a,{default:()=>i,filterArr:()=>u});var l=t(2791),s=t(2350),o=t(2647),d=(t(4719),t(2502)),n=t(184);const r=(0,o.kp)(),i=e=>{var a;let{handleClick:t}=e;const[o,i]=(0,l.useState)(!1),[p,m]=(0,l.useState)(0),[v,h]=(0,l.useState)(!1),[b,y]=(0,l.useState)([]),_=(0,l.useRef)();(0,l.useEffect)((()=>{o||(i(!0),(0,d.Dy)(I),m((0,s.M5)()))}));const I=e=>{m((0,s.M5)())},f=(e,a)=>{t(e,a),_.current.clearTx()};return(0,n.jsx)("div",{children:(0,n.jsx)(r,{placeholder:"buscar empleado",width:420,fetchData:e=>{y(u((0,s.bh)("employees_list"),e)),v&&h(!1)},loading:v,change:e=>{!v&&h(!0)},callempty:e=>{y([]),v&&h(!1)},ref:_,children:(0,n.jsx)("div",{className:"",children:b&&(null===(a=(0,s._2)(b))||void 0===a?void 0:a.map((e=>(0,n.jsx)(c,{data:b[e],elmId:e,selectItem:f},e))))})})})},c=e=>{let{data:a,selectItem:t}=e;return(0,n.jsx)("div",{className:"item_acc",children:(0,n.jsx)("div",{className:"_dsplFlx item_box account_header",children:(0,n.jsx)("div",{className:"_dsplFlx",onClick:()=>t(null===a||void 0===a?void 0:a.employeeId,null),children:(0,n.jsx)("div",{className:"code",children:null===a||void 0===a?void 0:a.name})})})})};function u(e,a){let t=a.toLowerCase();var l=[];return e.length>0&&e.map((e=>{var a,s;(null===(a=e.name)||void 0===a||null===(s=a.toLowerCase())||void 0===s?void 0:s.indexOf(t))>=0&&l.push(e)})),l}},2502:(e,a,t)=>{t.d(a,{Dy:()=>s,kQ:()=>o,lG:()=>d});var l=t(2350);const s=async e=>{var a,t;let s={...null===(a=(0,l.bh)((0,l.hQ)()))||void 0===a?void 0:a.all_employee};s.params={businessId:null===(t=(0,l.bh)("profileUser"))||void 0===t?void 0:t.businessId};const o=(0,l.I7)(s),d=await o;d&&((0,l.Rz)("employees_list",n((0,l.jQ)(d),"code")),(0,l.Rz)("employees_ids",(0,l.ME)((0,l.jQ)(d),"employeeId")),e&&e())},o=async e=>{var a,t;let s={...null===(a=(0,l.bh)((0,l.hQ)()))||void 0===a?void 0:a.search_employee};s.params={businessId:null===(t=(0,l.bh)("profileUser"))||void 0===t?void 0:t.businessId,":search":(0,l.bh)("searchQry")};const o=(0,l.I7)(s),d=await o;d&&((0,l.Rz)("employees_list",n((0,l.jQ)(d),"code")),e&&e())},d=async(e,a)=>{var t,s,o,d;let n={...null===(t=(0,l.bh)((0,l.hQ)()))||void 0===t?void 0:t.filter_search_opera};n.params={businessId:null===(s=(0,l.bh)("profileUser"))||void 0===s?void 0:s.businessId,year:(0,l.bh)("date_current_year"),":date1":(null===(o=(0,l.bh)("date_range_comps"))||void 0===o?void 0:o.initDate)-10,":date2":null===(d=(0,l.bh)("date_range_comps"))||void 0===d?void 0:d.lastDate,":search0":e};const r=(0,l.I7)(n),i=await r;i&&!i.error&&((0,l.Rz)("paystub_submayor_list",i),(0,l.Rz)("paystub_submayor_group",function(e){var a={};e.length>0?e.map((e=>{let t=e.date+"_"+e.comprobanteId;if(!a[t]){a[t]={},["date","description","entryName","comprobanteId","employeeId","document"].forEach((l=>{a[t][l]=e[l]})),a[t].amount=0,a[t].balance=0,a[t].operations=[]}e.type&&(a[t].balance=1*(0,l.Zv)(a[t].balance,2)+("debit"===e.type?1*(0,l.Zv)(e.amount,2):0),a[t].operations.push(function(e){var a;let t={};t.employeeId=null===(a=(0,l.bh)("employees_ids"))||void 0===a?void 0:a[e.employeeId],t.comprobanteId=e.comprobanteId,t.operationId=e.operationId,t.document=e.document,t.date=e.date,"credit"===e.type?(t.debit=0,t.credit=e.amount):"debit"===e.type&&(t.credit=0,t.debit=e.amount);return t}(e)))})):a=null;return a}((0,l.jQ)(i)))),a&&a()};const n=(e,a)=>(0,l.MV)("sortEmployees",[e],(()=>e&&e.sort(((e,t)=>{let l=1*e[a],s=1*t[a];return l<s?-1:l>s?1:0}))))},4719:()=>{}}]);
//# sourceMappingURL=9887.94e88c76.chunk.js.map