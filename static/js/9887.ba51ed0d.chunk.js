"use strict";(self.webpackChunkhrmfinance=self.webpackChunkhrmfinance||[]).push([[9887],{9887:(e,s,l)=>{l.r(s),l.d(s,{default:()=>n,filterArr:()=>u});var a=l(2791),o=l(2350),t=l(2647),d=(l(4719),l(2502)),i=l(184);const r=(0,t.kp)(),n=e=>{var s;let{handleClick:l}=e;const[t,n]=(0,a.useState)(!1),[v,h]=(0,a.useState)(0),[m,p]=(0,a.useState)(!1),[y,b]=(0,a.useState)([]),_=(0,a.useRef)();(0,a.useEffect)((()=>{t||(n(!0),(0,d.Dy)(I),h((0,o.M5)()))}));const I=e=>{h((0,o.M5)())},f=(e,s)=>{l(e,s),_.current.clearTx()};return(0,i.jsx)("div",{children:(0,i.jsx)(r,{placeholder:"buscar empleado",width:420,fetchData:e=>{b(u((0,o.bh)("employees_list"),e)),m&&p(!1)},loading:m,change:e=>{!m&&p(!0)},callempty:e=>{b([]),m&&p(!1)},ref:_,children:(0,i.jsx)("div",{className:"",children:y&&(null===(s=(0,o._2)(y))||void 0===s?void 0:s.map((e=>(0,i.jsx)(c,{data:y[e],elmId:e,selectItem:f},e))))})})})},c=e=>{let{data:s,selectItem:l}=e;return(0,i.jsx)("div",{className:"item_acc",children:(0,i.jsx)("div",{className:"_dsplFlx item_box account_header",children:(0,i.jsx)("div",{className:"_dsplFlx",onClick:()=>l(null===s||void 0===s?void 0:s.employeeId,null),children:(0,i.jsx)("div",{className:"code",children:null===s||void 0===s?void 0:s.name})})})})};function u(e,s){let l=s.toLowerCase();var a=[];return e.length>0&&e.map((e=>{var s,o;(null===(s=e.name)||void 0===s||null===(o=s.toLowerCase())||void 0===o?void 0:o.indexOf(l))>=0&&a.push(e)})),a}},2502:(e,s,l)=>{l.d(s,{Dy:()=>o,Oy:()=>i,kQ:()=>t,lG:()=>d});var a=l(2350);const o=async e=>{var s,l;let o={...null===(s=(0,a.bh)((0,a.hQ)()))||void 0===s?void 0:s.all_employee};o.params={businessId:null===(l=(0,a.bh)("profileUser"))||void 0===l?void 0:l.businessId};const t=(0,a.I7)(o),d=await t;d&&((0,a.Rz)("employees_list",r((0,a.jQ)(d),"code")),(0,a.Rz)("employees_ids",(0,a.ME)((0,a.jQ)(d),"employeeId")),e&&e())},t=async e=>{var s,l;let o={...null===(s=(0,a.bh)((0,a.hQ)()))||void 0===s?void 0:s.search_employee};o.params={businessId:null===(l=(0,a.bh)("profileUser"))||void 0===l?void 0:l.businessId,":search":(0,a.bh)("searchQry")};const t=(0,a.I7)(o),d=await t;d&&((0,a.Rz)("employees_list",r((0,a.jQ)(d),"code")),e&&e())},d=async(e,s)=>{var l,o,t,d;let r={...null===(l=(0,a.bh)((0,a.hQ)()))||void 0===l?void 0:l.search_employee_paystub};r.params={businessId:null===(o=(0,a.bh)("profileUser"))||void 0===o?void 0:o.businessId,year:(0,a.bh)("date_current_year"),":date1":(null===(t=(0,a.bh)("date_range_comps"))||void 0===t?void 0:t.initDate)-10,":date2":null===(d=(0,a.bh)("date_range_comps"))||void 0===d?void 0:d.lastDate,":employeeId":e};const n=(0,a.I7)(r),c=await n;c&&!c.error&&((0,a.Rz)("paystub_submayor_list",c),(0,a._2)(c).map((async e=>{var s,l;i(null===(s=c[e])||void 0===s?void 0:s.comprobanteId,null===(l=c[e])||void 0===l?void 0:l.employeeId)}))),s&&s()},i=async(e,s)=>{let l="get_compById_last"+e+"_"+s,o=(0,a.bh)(l)||0;if(Date.now()>o){var t,d;(0,a.Rz)(l,Date.now()+890);let o={...null===(t=(0,a.bh)((0,a.hQ)()))||void 0===t?void 0:t.filter_search_opera};o.params={businessId:null===(d=(0,a.bh)("profileUser"))||void 0===d?void 0:d.businessId,":search0":e,":search1":s};const i=(0,a.I7)(o),r=await i;if(r){let s=(0,a.bh)("cmpByPayStubMayor");return s[e]=r,(0,a.Rz)("cmpByPayStubMayor",s),r}}return null};const r=(e,s)=>(0,a.MV)("sortEmployees",[e],(()=>e&&e.sort(((e,l)=>{let a=1*e[s],o=1*l[s];return a<o?-1:a>o?1:0}))))},4719:()=>{}}]);
//# sourceMappingURL=9887.ba51ed0d.chunk.js.map