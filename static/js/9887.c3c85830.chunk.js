"use strict";(self.webpackChunkhrmfinance=self.webpackChunkhrmfinance||[]).push([[9887],{9887:(e,a,s)=>{s.r(a),s.d(a,{default:()=>d,filterArr:()=>c});var l=s(2791),t=s(2350),r=s(2647),i=(s(4719),s(2502)),n=s(184);const o=(0,r.kp)(),d=e=>{var a;let{handleClick:s}=e;const[r,d]=(0,l.useState)(!1),[v,h]=(0,l.useState)(0),[m,p]=(0,l.useState)(!1),[b,_]=(0,l.useState)([]),y=(0,l.useRef)();(0,l.useEffect)((()=>{r||(d(!0),(0,i.Dy)(I),h((0,t.M5)()))}));const I=e=>{h((0,t.M5)())},f=(e,a)=>{s(e,a),y.current.clearTx()};return(0,n.jsx)("div",{children:(0,n.jsx)(o,{placeholder:"buscar empleado",width:420,fetchData:e=>{_(c((0,t.bh)("employees_list"),e)),m&&p(!1)},loading:m,change:e=>{!m&&p(!0)},callempty:e=>{_([]),m&&p(!1)},ref:y,children:(0,n.jsx)("div",{className:"",children:b&&(null===(a=(0,t._2)(b))||void 0===a?void 0:a.map((e=>(0,n.jsx)(u,{data:b[e],elmId:e,selectItem:f},e))))})})})},u=e=>{let{data:a,selectItem:s}=e;return(0,n.jsx)("div",{className:"item_acc",children:(0,n.jsx)("div",{className:"_dsplFlx item_box account_header",children:(0,n.jsx)("div",{className:"_dsplFlx",onClick:()=>s(null===a||void 0===a?void 0:a.employeeId,null),children:(0,n.jsx)("div",{className:"code",children:null===a||void 0===a?void 0:a.name})})})})};function c(e,a){let s=a.toLowerCase();var l=[];return e.length>0&&e.map((e=>{var a,t;(null===(a=e.name)||void 0===a||null===(t=a.toLowerCase())||void 0===t?void 0:t.indexOf(s))>=0&&l.push(e)})),l}},2502:(e,a,s)=>{s.d(a,{$5:()=>u,Dy:()=>t,Oy:()=>h,Vu:()=>i,er:()=>d,fx:()=>n,hb:()=>c,iW:()=>v,kQ:()=>r,lG:()=>o,tM:()=>b});var l=s(2350);const t=async e=>{var a,s;let t={...null===(a=(0,l.bh)((0,l.hQ)()))||void 0===a?void 0:a.search_employee};t.params={businessId:null===(s=(0,l.bh)("profileUser"))||void 0===s?void 0:s.businessId,":search1":(0,l.bh)("employeeOut")?"":"in-job"};const r=(0,l.I7)(t),i=await r;i&&((0,l.Rz)("employees_list",m((0,l.jQ)(i),"name")),(0,l.Rz)("employees_ids",i),(0,l.Rz)("employees_ctIds",(0,l.ME)((0,l.jQ)(i),"userTC")),e&&e())},r=async e=>{var a,s;let t={...null===(a=(0,l.bh)((0,l.hQ)()))||void 0===a?void 0:a.search_employee};t.params={businessId:null===(s=(0,l.bh)("profileUser"))||void 0===s?void 0:s.businessId,":search0":(0,l.bh)("searchQry"),":search5":(0,l.bh)("employeeOut")?"":"in-job"};const r=(0,l.I7)(t),i=await r;i&&((0,l.Rz)("employees_list",m((0,l.jQ)(i),"name")),e&&e())},i=async e=>{var a,s;let t={...null===(a=(0,l.bh)((0,l.hQ)()))||void 0===a?void 0:a.search_employee};t.params={businessId:null===(s=(0,l.bh)("profileUser"))||void 0===s?void 0:s.businessId,":search0":e,year:(0,l.bh)("date_current_year")};const r=(0,l.I7)(t),i=await r;return i?y(i):[]},n=async e=>{var a,s;let t={...null===(a=(0,l.bh)((0,l.hQ)()))||void 0===a?void 0:a.search_prov_cust};t.params={businessId:null===(s=(0,l.bh)("profileUser"))||void 0===s?void 0:s.businessId,":search":e,year:(0,l.bh)("date_current_year")};const r=(0,l.I7)(t),i=await r;return i?y(i):[]},o=async(e,a)=>{var s,t,r,i;let n={...null===(s=(0,l.bh)((0,l.hQ)()))||void 0===s?void 0:s.search_employee_paystub};n.params={businessId:null===(t=(0,l.bh)("profileUser"))||void 0===t?void 0:t.businessId,year:(0,l.bh)("date_current_year"),":date1":(null===(r=(0,l.bh)("date_range_comps"))||void 0===r?void 0:r.initDate)-10,":date2":null===(i=(0,l.bh)("date_range_comps"))||void 0===i?void 0:i.lastDate,":employeeId":e};const o=(0,l.I7)(n),d=await o;d&&!d.error&&((0,l.Rz)("paystub_submayor_list",d),(0,l._2)(d).map((async e=>{var a,s;h(null===(a=d[e])||void 0===a?void 0:a.comprobanteId,null===(s=d[e])||void 0===s?void 0:s.employeeId)}))),a&&a()},d=async e=>{var a,s;let t=(0,l.Qk)((0,l.bh)("datePeriodRs")),r={...null===(a=(0,l.bh)((0,l.hQ)()))||void 0===a?void 0:a.search_employee_paystub};r.params={businessId:null===(s=(0,l.bh)("profileUser"))||void 0===s?void 0:s.businessId,":search2":"Wk_"+(1*t-1)};const i=(0,l.I7)(r),n=await i;return n&&!n.error&&(0,l._2)(n).length>0?n:null},u=async e=>{let a="get_all_timecard_last",s=(0,l.bh)(a)||0;if(Date.now()>s){var t,r;(0,l.Rz)(a,Date.now()+190);let s={...null===(t=(0,l.bh)((0,l.hQ)()))||void 0===t?void 0:t.scan_time_card};s.params={businessId:null===(r=(0,l.bh)("profileUser"))||void 0===r?void 0:r.businessId,":search0":"00"};const i=(0,l.I7)(s),n=await i;n&&((0,l.Rz)("timecard_list",m((0,l.jQ)(n),"code")),(0,l.Rz)("timecard_gorups_week",p(n)),e&&e())}},c=async(e,a)=>{let s="get_search_timecard_last",t=(0,l.bh)(s)||0;if(Date.now()>t){var r,i;(0,l.Rz)(s,Date.now()+190);let t={...null===(r=(0,l.bh)((0,l.hQ)()))||void 0===r?void 0:r.scan_time_card};t.params={businessId:null===(i=(0,l.bh)("profileUser"))||void 0===i?void 0:i.businessId},e.map(((e,a)=>{e&&(t.params[":search"+a]=e.toString().trim())}));const n=(0,l.I7)(t),o=await n;o&&((0,l.Rz)("timecard_list",m((0,l.jQ)(o),"code")),a&&a())}},v=async e=>{let a="get_search_timecard_last",s=(0,l.bh)(a)||0;if(!(Date.now()>s))return null;{var t,r;(0,l.Rz)(a,Date.now()+190);let s={...null===(t=(0,l.bh)((0,l.hQ)()))||void 0===t?void 0:t.scan_time_card};s.params={businessId:null===(r=(0,l.bh)("profileUser"))||void 0===r?void 0:r.businessId},e.map(((e,a)=>{e&&(s.params[":search"+a]=e.toString().trim())}));const n=(0,l.I7)(s),o=await n;var i;if(o)return null===o||void 0===o?void 0:o[null===(i=(0,l._2)(o))||void 0===i?void 0:i[0]]}},h=async(e,a)=>{let s="get_compById_last"+e+"_"+a,t=(0,l.bh)(s)||0;if(Date.now()>t){var r,i;(0,l.Rz)(s,Date.now()+890);let t={...null===(r=(0,l.bh)((0,l.hQ)()))||void 0===r?void 0:r.filter_search_opera};t.params={businessId:null===(i=(0,l.bh)("profileUser"))||void 0===i?void 0:i.businessId,":search0":e,":search1":a};const n=(0,l.I7)(t),o=await n;if(o){let a=(0,l.bh)("cmpByPayStubMayor");return a[e]=o,(0,l.Rz)("cmpByPayStubMayor",a),o}}return null};const m=(e,a)=>e&&e.sort(((e,s)=>{let l=1*e[a],t=1*s[a];return l<t?-1:l>t?1:0})),p=e=>{let a={};return e&&(0,l._2)(e).map((s=>{var l,t;let r=(null===(l=e[s])||void 0===l?void 0:l.week)+"_"+(null===(t=e[s])||void 0===t?void 0:t.userTC);a[r]||(a[r]=e[s])})),a},b=e=>{let a={},s=/\t/g;e&&e.split("\n").map(((e,t)=>{if(e.indexOf("No")<0){let t=e.split(s);if(7===t.length){let e=t[2].trim(),s=t[6].split("  "),r=s[0],i=(0,l.Qk)(new Date(r)),n=s[1].split(":"),o=60*n[0]+1*n[1],d=t[4].trim();a[e]||(a[e]={}),a[e][i]||(a[e][i]={}),a[e][i][r]||(a[e][i][r]={}),a[e][i][r][o]||(a[e][i][r][o]={}),a[e][i][r][o][d]||(a[e][i][r][o][d]=1)}}}));let t=[];return(0,l._2)(a).map((e=>{(0,l._2)(a[e]).map((s=>{let r={},i=null;(0,l._2)(a[e][s]).map((t=>{let n=_(a[e][s][t]),o=(0,l._2)(a[e][s][t][n[0]]),d=(0,l._2)(a[e][s][t][n[1]]);i=(0,l.qt)(new Date(t));let u={start:1*n[0],startMode:o,end:1*n[1],endMode:d,active:!0},c=new Date(t).getDay();r[c]=u}));let n={userTC:e,week:s,hourly:r,period:i};t.push(n)}))})),(0,l.Rz)("timeCard",t),t},_=e=>{let a=0,s=1e10;return(0,l._2)(e).map((e=>{let l=1*e;a<l&&(a=l),l<s&&(s=l)})),[s,a]},y=e=>{let a=[];return e&&(0,l._2)(e).map((s=>{var l;a.push({id:s,label:null===(l=e[s])||void 0===l?void 0:l.name})})),a}},4719:()=>{}}]);
//# sourceMappingURL=9887.c3c85830.chunk.js.map