"use strict";(self.webpackChunkhrmfinance=self.webpackChunkhrmfinance||[]).push([[9887],{9887:(e,a,t)=>{t.r(a),t.d(a,{default:()=>r,filterArr:()=>u});var s=t(2791),l=t(2350),o=t(2647),d=(t(4719),t(2502)),n=t(184);const i=(0,o.kp)(),r=e=>{var a;let{handleClick:t}=e;const[o,r]=(0,s.useState)(!1),[p,m]=(0,s.useState)(0),[v,h]=(0,s.useState)(!1),[b,y]=(0,s.useState)([]),I=(0,s.useRef)();(0,s.useEffect)((()=>{o||(r(!0),(0,d.Dy)(_),m((0,l.M5)()))}));const _=e=>{m((0,l.M5)())},f=(e,a)=>{t(e,a),I.current.clearTx()};return(0,n.jsx)("div",{children:(0,n.jsx)(i,{placeholder:"buscar empleado",width:420,fetchData:e=>{y(u((0,l.bh)("employees_list"),e)),v&&h(!1)},loading:v,change:e=>{!v&&h(!0)},callempty:e=>{y([]),v&&h(!1)},ref:I,children:(0,n.jsx)("div",{className:"",children:b&&(null===(a=(0,l._2)(b))||void 0===a?void 0:a.map((e=>(0,n.jsx)(c,{data:b[e],elmId:e,selectItem:f},e))))})})})},c=e=>{let{data:a,selectItem:t}=e;return(0,n.jsx)("div",{className:"item_acc",children:(0,n.jsx)("div",{className:"_dsplFlx item_box account_header",children:(0,n.jsx)("div",{className:"_dsplFlx",onClick:()=>t(null===a||void 0===a?void 0:a.employeeId,null),children:(0,n.jsx)("div",{className:"code",children:null===a||void 0===a?void 0:a.name})})})})};function u(e,a){let t=a.toLowerCase();var s=[];return e.length>0&&e.map((e=>{var a,l;(null===(a=e.name)||void 0===a||null===(l=a.toLowerCase())||void 0===l?void 0:l.indexOf(t))>=0&&s.push(e)})),s}},2502:(e,a,t)=>{t.d(a,{Dy:()=>l,G:()=>i,aU:()=>n,kQ:()=>o,lG:()=>d});var s=t(2350);const l=async e=>{var a,t;let l={...null===(a=(0,s.bh)((0,s.hQ)()))||void 0===a?void 0:a.all_employee};l.params={businessId:null===(t=(0,s.bh)("profileUser"))||void 0===t?void 0:t.businessId};const o=(0,s.I7)(l),d=await o;d&&((0,s.Rz)("employees_list",n((0,s.jQ)(d),"code")),(0,s.Rz)("employees_ids",(0,s.ME)((0,s.jQ)(d),"employeeId")),e&&e())},o=async e=>{var a,t;let l={...null===(a=(0,s.bh)((0,s.hQ)()))||void 0===a?void 0:a.search_employee};l.params={businessId:null===(t=(0,s.bh)("profileUser"))||void 0===t?void 0:t.businessId,":search":(0,s.bh)("searchQry")};const o=(0,s.I7)(l),d=await o;d&&((0,s.Rz)("employees_list",n((0,s.jQ)(d),"code")),e&&e())},d=async(e,a)=>{var t,l,o,d;let n={...null===(t=(0,s.bh)((0,s.hQ)()))||void 0===t?void 0:t.filter_search_opera};n.params={businessId:null===(l=(0,s.bh)("profileUser"))||void 0===l?void 0:l.businessId,year:(0,s.bh)("date_current_year"),":date1":(null===(o=(0,s.bh)("date_range_comps"))||void 0===o?void 0:o.initDate)-10,":date2":null===(d=(0,s.bh)("date_range_comps"))||void 0===d?void 0:d.lastDate,":search0":e};const i=(0,s.I7)(n),r=await i;r&&!r.error&&((0,s.Rz)("paystub_submayor_list",r),(0,s.Rz)("paystub_submayor_group",function(e){var a={};e.length>0?e.map((e=>{let t=e.date+"_"+e.comprobanteId;if(!a[t]){a[t]={},["date","description","entryName","comprobanteId","employeeId","document"].forEach((s=>{a[t][s]=e[s]})),a[t].amount=0,a[t].balance=0,a[t].operations=[]}e.type&&(a[t].balance=1*(0,s.Zv)(a[t].balance,2)+("debit"===e.type?1*(0,s.Zv)(e.amount,2):0),a[t].operations.push(function(e){var a;let t={};t.employeeId=null===(a=(0,s.bh)("employees_ids"))||void 0===a?void 0:a[e.employeeId],t.comprobanteId=e.comprobanteId,t.operationId=e.operationId,t.document=e.document,t.date=e.date,"credit"===e.type?(t.debit=0,t.credit=e.amount):"debit"===e.type&&(t.credit=0,t.debit=e.amount);return t}(e)))})):a=null;return a}((0,s.jQ)(r)))),a&&a()};const n=(e,a)=>(0,s.MV)("sortEmployees",[e],(()=>e&&e.sort(((e,t)=>{let s=1*e[a],l=1*t[a];return s<l?-1:s>l?1:0})))),i=async(e,a)=>{var t;let l={query:"deleteEmployeesHRG",params:{businessId:null===(t=(0,s.bh)("profileUser"))||void 0===t?void 0:t.businessId,employeeId:e}};const o=(0,s.I7)(l);await o&&a&&a()}},4719:()=>{}}]);
//# sourceMappingURL=9887.d8775e8a.chunk.js.map